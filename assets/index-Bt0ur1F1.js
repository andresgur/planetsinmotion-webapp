(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();const de=24*3600,Hu=63781e4,Vu=597216787e19,sn=6957e7,bn=1989e30,Rs=18981245973360504e14,Wu=71492e5,He=149597871e5,Os=6.67*10**-8;function Ln(){return Ln=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Ln.apply(null,arguments)}var Ls={relTol:1e-12,absTol:1e-15,matrix:"Matrix",number:"number",numberFallback:"number",precision:64,predictable:!1,randomSeed:null};function Zu(t,e){if(kn(t,e))return t[e];throw typeof t[e]=="function"&&Yu(t,e)?new Error('Cannot access method "'+e+'" as a property'):new Error('No access to property "'+e+'"')}function Xu(t,e,n){if(kn(t,e))return t[e]=n,n;throw new Error('No access to property "'+e+'"')}function kn(t,e){return!Gu(t)&&!Array.isArray(t)?!1:cn(Ju,e)?!0:!(e in Object.prototype||e in Function.prototype)}function Yu(t,e){return t==null||typeof t[e]!="function"||cn(t,e)&&Object.getPrototypeOf&&e in Object.getPrototypeOf(t)?!1:cn(Ku,e)?!0:!(e in Object.prototype||e in Function.prototype)}function Gu(t){return typeof t=="object"&&t&&t.constructor===Object}var Ju={length:!0,name:!0},Ku={toString:!0,valueOf:!0,toLocaleString:!0};class Qu{constructor(e){this.wrappedObject=e,this[Symbol.iterator]=this.entries}keys(){return Object.keys(this.wrappedObject).filter(e=>this.has(e)).values()}get(e){return Zu(this.wrappedObject,e)}set(e,n){return Xu(this.wrappedObject,e,n),this}has(e){return kn(this.wrappedObject,e)&&e in this.wrappedObject}entries(){return ju(this.keys(),e=>[e,this.get(e)])}forEach(e){for(var n of this.keys())e(this.get(n),n,this)}delete(e){kn(this.wrappedObject,e)&&delete this.wrappedObject[e]}clear(){for(var e of this.keys())this.delete(e)}get size(){return Object.keys(this.wrappedObject).length}}function ju(t,e){return{next:()=>{var n=t.next();return n.done?n:{value:e(n.value),done:!1}}}}function it(t){return typeof t=="number"}function vt(t){return!t||typeof t!="object"||typeof t.constructor!="function"?!1:t.isBigNumber===!0&&typeof t.constructor.prototype=="object"&&t.constructor.prototype.isBigNumber===!0||typeof t.constructor.isDecimal=="function"&&t.constructor.isDecimal(t)===!0}function to(t){return typeof t=="bigint"}function ks(t){return t&&typeof t=="object"&&Object.getPrototypeOf(t).isComplex===!0||!1}function $s(t){return t&&typeof t=="object"&&Object.getPrototypeOf(t).isFraction===!0||!1}function Us(t){return t&&t.constructor.prototype.isUnit===!0||!1}function Gt(t){return typeof t=="string"}var ht=Array.isArray;function Vt(t){return t&&t.constructor.prototype.isMatrix===!0||!1}function $n(t){return Array.isArray(t)||Vt(t)}function eo(t){return t&&t.isDenseMatrix&&t.constructor.prototype.isMatrix===!0||!1}function no(t){return t&&t.isSparseMatrix&&t.constructor.prototype.isMatrix===!0||!1}function ro(t){return t&&t.constructor.prototype.isRange===!0||!1}function si(t){return t&&t.constructor.prototype.isIndex===!0||!1}function io(t){return typeof t=="boolean"}function so(t){return t&&t.constructor.prototype.isResultSet===!0||!1}function ao(t){return t&&t.constructor.prototype.isHelp===!0||!1}function uo(t){return typeof t=="function"}function oo(t){return t instanceof Date}function co(t){return t instanceof RegExp}function ai(t){return!!(t&&typeof t=="object"&&t.constructor===Object&&!ks(t)&&!$s(t))}function lo(t){return t?t instanceof Map||t instanceof Qu||typeof t.set=="function"&&typeof t.get=="function"&&typeof t.keys=="function"&&typeof t.has=="function":!1}function fo(t){return t===null}function ho(t){return t===void 0}function po(t){return t&&t.isAccessorNode===!0&&t.constructor.prototype.isNode===!0||!1}function mo(t){return t&&t.isArrayNode===!0&&t.constructor.prototype.isNode===!0||!1}function go(t){return t&&t.isAssignmentNode===!0&&t.constructor.prototype.isNode===!0||!1}function Do(t){return t&&t.isBlockNode===!0&&t.constructor.prototype.isNode===!0||!1}function vo(t){return t&&t.isConditionalNode===!0&&t.constructor.prototype.isNode===!0||!1}function yo(t){return t&&t.isConstantNode===!0&&t.constructor.prototype.isNode===!0||!1}function wo(t){return t&&t.isFunctionAssignmentNode===!0&&t.constructor.prototype.isNode===!0||!1}function Fo(t){return t&&t.isFunctionNode===!0&&t.constructor.prototype.isNode===!0||!1}function Ao(t){return t&&t.isIndexNode===!0&&t.constructor.prototype.isNode===!0||!1}function Eo(t){return t&&t.isNode===!0&&t.constructor.prototype.isNode===!0||!1}function Co(t){return t&&t.isObjectNode===!0&&t.constructor.prototype.isNode===!0||!1}function _o(t){return t&&t.isOperatorNode===!0&&t.constructor.prototype.isNode===!0||!1}function xo(t){return t&&t.isParenthesisNode===!0&&t.constructor.prototype.isNode===!0||!1}function Bo(t){return t&&t.isRangeNode===!0&&t.constructor.prototype.isNode===!0||!1}function bo(t){return t&&t.isRelationalNode===!0&&t.constructor.prototype.isNode===!0||!1}function Mo(t){return t&&t.isSymbolNode===!0&&t.constructor.prototype.isNode===!0||!1}function So(t){return t&&t.constructor.prototype.isChain===!0||!1}function Be(t){var e=typeof t;return e==="object"?t===null?"null":vt(t)?"BigNumber":t.constructor&&t.constructor.name?t.constructor.name:"Object":e}function gt(t){var e=typeof t;if(e==="number"||e==="bigint"||e==="string"||e==="boolean"||t===null||t===void 0)return t;if(typeof t.clone=="function")return t.clone();if(Array.isArray(t))return t.map(function(n){return gt(n)});if(t instanceof Date)return new Date(t.valueOf());if(vt(t))return t;if(ai(t))return No(t,gt);if(e==="function")return t;throw new TypeError("Cannot clone: unknown type of value (value: ".concat(t,")"))}function No(t,e){var n={};for(var r in t)cn(t,r)&&(n[r]=e(t[r]));return n}function To(t,e){for(var n in e)cn(e,n)&&(t[n]=e[n]);return t}function ve(t,e){var n,r,i;if(Array.isArray(t)){if(!Array.isArray(e)||t.length!==e.length)return!1;for(r=0,i=t.length;r<i;r++)if(!ve(t[r],e[r]))return!1;return!0}else{if(typeof t=="function")return t===e;if(t instanceof Object){if(Array.isArray(e)||!(e instanceof Object))return!1;for(n in t)if(!(n in e)||!ve(t[n],e[n]))return!1;for(n in e)if(!(n in t))return!1;return!0}else return t===e}}function cn(t,e){return t&&Object.hasOwnProperty.call(t,e)}function Io(t,e){for(var n={},r=0;r<e.length;r++){var i=e[r],s=t[i];s!==void 0&&(n[i]=s)}return n}var Po=["Matrix","Array"],Ro=["number","BigNumber","Fraction"],Ne=function(e){if(e)throw new Error(`The global config is readonly. 
Please create a mathjs instance if you want to change the default configuration. 
Example:

  import { create, all } from 'mathjs';
  const mathjs = create(all);
  mathjs.config({ number: 'BigNumber' });
`);return Object.freeze(Ls)};Ln(Ne,Ls,{MATRIX_OPTIONS:Po,NUMBER_OPTIONS:Ro});function Pi(){return!0}function Rt(){return!1}function Re(){}const Ri="Argument is not a typed-function.";function zs(){function t(D){return typeof D=="object"&&D!==null&&D.constructor===Object}const e=[{name:"number",test:function(D){return typeof D=="number"}},{name:"string",test:function(D){return typeof D=="string"}},{name:"boolean",test:function(D){return typeof D=="boolean"}},{name:"Function",test:function(D){return typeof D=="function"}},{name:"Array",test:Array.isArray},{name:"Date",test:function(D){return D instanceof Date}},{name:"RegExp",test:function(D){return D instanceof RegExp}},{name:"Object",test:t},{name:"null",test:function(D){return D===null}},{name:"undefined",test:function(D){return D===void 0}}],n={name:"any",test:Pi,isAny:!0};let r,i,s=0,a={createCount:0};function u(D){const F=r.get(D);if(F)return F;let C='Unknown type "'+D+'"';const S=D.toLowerCase();let P;for(P of i)if(P.toLowerCase()===S){C+='. Did you mean "'+P+'" ?';break}throw new TypeError(C)}function o(D){let F=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"any";const C=F?u(F).index:i.length,S=[];for(let T=0;T<D.length;++T){if(!D[T]||typeof D[T].name!="string"||typeof D[T].test!="function")throw new TypeError("Object with properties {name: string, test: function} expected");const U=D[T].name;if(r.has(U))throw new TypeError('Duplicate type name "'+U+'"');S.push(U),r.set(U,{name:U,test:D[T].test,isAny:D[T].isAny,index:C+T,conversionsTo:[]})}const P=i.slice(C);i=i.slice(0,C).concat(S).concat(P);for(let T=C+S.length;T<i.length;++T)r.get(i[T]).index=T}function c(){r=new Map,i=[],s=0,o([n],!1)}c(),o(e);function l(){let D;for(D of i)r.get(D).conversionsTo=[];s=0}function f(D){const F=i.filter(C=>{const S=r.get(C);return!S.isAny&&S.test(D)});return F.length?F:["any"]}function h(D){return D&&typeof D=="function"&&"_typedFunctionData"in D}function d(D,F,C){if(!h(D))throw new TypeError(Ri);const S=C&&C.exact,P=Array.isArray(F)?F.join(","):F,T=A(P),U=m(T);if(!S||U in D.signatures){const et=D._typedFunctionData.signatureMap.get(U);if(et)return et}const L=T.length;let z;if(S){z=[];let et;for(et in D.signatures)z.push(D._typedFunctionData.signatureMap.get(et))}else z=D._typedFunctionData.signatures;for(let et=0;et<L;++et){const rt=T[et],ft=[];let _t;for(_t of z){const Et=_(_t.params,et);if(!(!Et||rt.restParam&&!Et.restParam)){if(!Et.hasAny){const kt=y(Et);if(rt.types.some($t=>!kt.has($t.name)))continue}ft.push(_t)}}if(z=ft,z.length===0)break}let R;for(R of z)if(R.params.length<=L)return R;throw new TypeError("Signature not found (signature: "+(D.name||"unnamed")+"("+m(T,", ")+"))")}function g(D,F,C){return d(D,F,C).implementation}function p(D,F){const C=u(F);if(C.test(D))return D;const S=C.conversionsTo;if(S.length===0)throw new Error("There are no conversions to "+F+" defined.");for(let P=0;P<S.length;P++)if(u(S[P].from).test(D))return S[P].convert(D);throw new Error("Cannot convert "+D+" to "+F)}function m(D){let F=arguments.length>1&&arguments[1]!==void 0?arguments[1]:",";return D.map(C=>C.name).join(F)}function v(D){const F=D.indexOf("...")===0,S=(F?D.length>3?D.slice(3):"any":D).split("|").map(L=>u(L.trim()));let P=!1,T=F?"...":"";return{types:S.map(function(L){return P=L.isAny||P,T+=L.name+"|",{name:L.name,typeIndex:L.index,test:L.test,isAny:L.isAny,conversion:null,conversionIndex:-1}}),name:T.slice(0,-1),hasAny:P,hasConversion:!1,restParam:F}}function w(D){const F=D.types.map(U=>U.name),C=st(F);let S=D.hasAny,P=D.name;const T=C.map(function(U){const L=u(U.from);return S=L.isAny||S,P+="|"+U.from,{name:U.from,typeIndex:L.index,test:L.test,isAny:L.isAny,conversion:U,conversionIndex:U.index}});return{types:D.types.concat(T),name:P,hasAny:S,hasConversion:T.length>0,restParam:D.restParam}}function y(D){return D.typeSet||(D.typeSet=new Set,D.types.forEach(F=>D.typeSet.add(F.name))),D.typeSet}function A(D){const F=[];if(typeof D!="string")throw new TypeError("Signatures must be strings");const C=D.trim();if(C==="")return F;const S=C.split(",");for(let P=0;P<S.length;++P){const T=v(S[P].trim());if(T.restParam&&P!==S.length-1)throw new SyntaxError('Unexpected rest parameter "'+S[P]+'": only allowed for the last parameter');if(T.types.length===0)return null;F.push(T)}return F}function E(D){const F=Ie(D);return F?F.restParam:!1}function x(D){if(!D||D.types.length===0)return Pi;if(D.types.length===1)return u(D.types[0].name).test;if(D.types.length===2){const F=u(D.types[0].name).test,C=u(D.types[1].name).test;return function(P){return F(P)||C(P)}}else{const F=D.types.map(function(C){return u(C.name).test});return function(S){for(let P=0;P<F.length;P++)if(F[P](S))return!0;return!1}}}function B(D){let F,C,S;if(E(D)){F=Bi(D).map(x);const P=F.length,T=x(Ie(D)),U=function(L){for(let z=P;z<L.length;z++)if(!T(L[z]))return!1;return!0};return function(z){for(let R=0;R<F.length;R++)if(!F[R](z[R]))return!1;return U(z)&&z.length>=P+1}}else return D.length===0?function(T){return T.length===0}:D.length===1?(C=x(D[0]),function(T){return C(T[0])&&T.length===1}):D.length===2?(C=x(D[0]),S=x(D[1]),function(T){return C(T[0])&&S(T[1])&&T.length===2}):(F=D.map(x),function(T){for(let U=0;U<F.length;U++)if(!F[U](T[U]))return!1;return T.length===F.length})}function _(D,F){return F<D.length?D[F]:E(D)?Ie(D):null}function N(D,F){const C=_(D,F);return C?y(C):new Set}function O(D){return D.conversion===null||D.conversion===void 0}function M(D,F){const C=new Set;return D.forEach(S=>{const P=N(S.params,F);let T;for(T of P)C.add(T)}),C.has("any")?["any"]:Array.from(C)}function $(D,F,C){let S,P;const T=D||"unnamed";let U=C,L;for(L=0;L<F.length;L++){const rt=[];if(U.forEach(ft=>{const _t=_(ft.params,L),Et=x(_t);(L<ft.params.length||E(ft.params))&&Et(F[L])&&rt.push(ft)}),rt.length===0){if(P=M(U,L),P.length>0){const ft=f(F[L]);return S=new TypeError("Unexpected type of argument in function "+T+" (expected: "+P.join(" or ")+", actual: "+ft.join(" | ")+", index: "+L+")"),S.data={category:"wrongType",fn:T,index:L,actual:ft,expected:P},S}}else U=rt}const z=U.map(function(rt){return E(rt.params)?1/0:rt.params.length});if(F.length<Math.min.apply(null,z))return P=M(U,L),S=new TypeError("Too few arguments in function "+T+" (expected: "+P.join(" or ")+", index: "+F.length+")"),S.data={category:"tooFewArgs",fn:T,index:F.length,expected:P},S;const R=Math.max.apply(null,z);if(F.length>R)return S=new TypeError("Too many arguments in function "+T+" (expected: "+R+", actual: "+F.length+")"),S.data={category:"tooManyArgs",fn:T,index:F.length,expectedLength:R},S;const et=[];for(let rt=0;rt<F.length;++rt)et.push(f(F[rt]).join("|"));return S=new TypeError('Arguments of type "'+et.join(", ")+'" do not match any of the defined signatures of function '+T+"."),S.data={category:"mismatch",actual:et},S}function q(D){let F=i.length+1;for(let C=0;C<D.types.length;C++)O(D.types[C])&&(F=Math.min(F,D.types[C].typeIndex));return F}function H(D){let F=s+1;for(let C=0;C<D.types.length;C++)O(D.types[C])||(F=Math.min(F,D.types[C].conversionIndex));return F}function G(D,F){if(D.hasAny){if(!F.hasAny)return 1}else if(F.hasAny)return-1;if(D.restParam){if(!F.restParam)return 1}else if(F.restParam)return-1;if(D.hasConversion){if(!F.hasConversion)return 1}else if(F.hasConversion)return-1;const C=q(D)-q(F);if(C<0)return-1;if(C>0)return 1;const S=H(D)-H(F);return S<0?-1:S>0?1:0}function V(D,F){const C=D.params,S=F.params,P=Ie(C),T=Ie(S),U=E(C),L=E(S);if(U&&P.hasAny){if(!L||!T.hasAny)return 1}else if(L&&T.hasAny)return-1;let z=0,R=0,et;for(et of C)et.hasAny&&++z,et.hasConversion&&++R;let rt=0,ft=0;for(et of S)et.hasAny&&++rt,et.hasConversion&&++ft;if(z!==rt)return z-rt;if(U&&P.hasConversion){if(!L||!T.hasConversion)return 1}else if(L&&T.hasConversion)return-1;if(R!==ft)return R-ft;if(U){if(!L)return 1}else if(L)return-1;const _t=(C.length-S.length)*(U?-1:1);if(_t!==0)return _t;const Et=[];let kt=0;for(let Pe=0;Pe<C.length;++Pe){const yn=G(C[Pe],S[Pe]);Et.push(yn),kt+=yn}if(kt!==0)return kt;let $t;for($t of Et)if($t!==0)return $t;return 0}function st(D){if(D.length===0)return[];const F=D.map(u);D.length>1&&F.sort((P,T)=>P.index-T.index);let C=F[0].conversionsTo;if(D.length===1)return C;C=C.concat([]);const S=new Set(D);for(let P=1;P<F.length;++P){let T;for(T of F[P].conversionsTo)S.has(T.from)||(C.push(T),S.add(T.from))}return C}function ut(D,F){let C=F;if(D.some(P=>P.hasConversion)){const P=E(D),T=D.map(K);C=function(){const L=[],z=P?arguments.length-1:arguments.length;for(let R=0;R<z;R++)L[R]=T[R](arguments[R]);return P&&(L[z]=arguments[z].map(T[z])),F.apply(this,L)}}let S=C;if(E(D)){const P=D.length-1;S=function(){return C.apply(this,Fr(arguments,0,P).concat([Fr(arguments,P)]))}}return S}function K(D){let F,C,S,P;const T=[],U=[];switch(D.types.forEach(function(L){L.conversion&&(T.push(u(L.conversion.from).test),U.push(L.conversion.convert))}),U.length){case 0:return function(z){return z};case 1:return F=T[0],S=U[0],function(z){return F(z)?S(z):z};case 2:return F=T[0],C=T[1],S=U[0],P=U[1],function(z){return F(z)?S(z):C(z)?P(z):z};default:return function(z){for(let R=0;R<U.length;R++)if(T[R](z))return U[R](z);return z}}}function Nt(D){function F(C,S,P){if(S<C.length){const T=C[S];let U=[];if(T.restParam){const L=T.types.filter(O);L.length<T.types.length&&U.push({types:L,name:"..."+L.map(z=>z.name).join("|"),hasAny:L.some(z=>z.isAny),hasConversion:!1,restParam:!0}),U.push(T)}else U=T.types.map(function(L){return{types:[L],name:L.name,hasAny:L.isAny,hasConversion:L.conversion,restParam:!1}});return ou(U,function(L){return F(C,S+1,P.concat([L]))})}else return[P]}return F(D,0,[])}function vr(D,F){const C=Math.max(D.length,F.length);for(let L=0;L<C;L++){const z=N(D,L),R=N(F,L);let et=!1,rt;for(rt of R)if(z.has(rt)){et=!0;break}if(!et)return!1}const S=D.length,P=F.length,T=E(D),U=E(F);return T?U?S===P:P>=S:U?S>=P:S===P}function _i(D){return D.map(F=>Ni(F)?Mi(F.referToSelf.callback):Si(F)?bi(F.referTo.references,F.referTo.callback):F)}function yr(D,F,C){const S=[];let P;for(P of D){let T=C[P];if(typeof T!="number")throw new TypeError('No definition for referenced signature "'+P+'"');if(T=F[T],typeof T!="function")return!1;S.push(T)}return S}function Dn(D,F,C){const S=_i(D),P=new Array(S.length).fill(!1);let T=!0;for(;T;){T=!1;let U=!0;for(let L=0;L<S.length;++L){if(P[L])continue;const z=S[L];if(Ni(z))S[L]=z.referToSelf.callback(C),S[L].referToSelf=z.referToSelf,P[L]=!0,U=!1;else if(Si(z)){const R=yr(z.referTo.references,S,F);R?(S[L]=z.referTo.callback.apply(this,R),S[L].referTo=z.referTo,P[L]=!0,U=!1):T=!0}}if(U&&T)throw new SyntaxError("Circular reference detected in resolving typed.referTo")}return S}function wr(D){const F=/\bthis(\(|\.signatures\b)/;Object.keys(D).forEach(C=>{const S=D[C];if(F.test(S.toString()))throw new SyntaxError("Using `this` to self-reference a function is deprecated since typed-function@3. Use typed.referTo and typed.referToSelf instead.")})}function vn(D,F){if(a.createCount++,Object.keys(F).length===0)throw new SyntaxError("No signatures provided");a.warnAgainstDeprecatedThis&&wr(F);const C=[],S=[],P={},T=[];let U;for(U in F){if(!Object.prototype.hasOwnProperty.call(F,U))continue;const j=A(U);if(!j)continue;C.forEach(function(Ke){if(vr(Ke,j))throw new TypeError('Conflicting signatures "'+m(Ke)+'" and "'+m(j)+'".')}),C.push(j);const xt=S.length;S.push(F[U]);const zu=j.map(w);let wn;for(wn of Nt(zu)){const Ke=m(wn);T.push({params:wn,name:Ke,fn:xt}),wn.every(qu=>!qu.hasConversion)&&(P[Ke]=xt)}}T.sort(V);const L=Dn(S,P,Je);let z;for(z in P)Object.prototype.hasOwnProperty.call(P,z)&&(P[z]=L[P[z]]);const R=[],et=new Map;for(z of T)et.has(z.name)||(z.fn=L[z.fn],R.push(z),et.set(z.name,z));const rt=R[0]&&R[0].params.length<=2&&!E(R[0].params),ft=R[1]&&R[1].params.length<=2&&!E(R[1].params),_t=R[2]&&R[2].params.length<=2&&!E(R[2].params),Et=R[3]&&R[3].params.length<=2&&!E(R[3].params),kt=R[4]&&R[4].params.length<=2&&!E(R[4].params),$t=R[5]&&R[5].params.length<=2&&!E(R[5].params),Pe=rt&&ft&&_t&&Et&&kt&&$t;for(let j=0;j<R.length;++j)R[j].test=B(R[j].params);const yn=rt?x(R[0].params[0]):Rt,pu=ft?x(R[1].params[0]):Rt,du=_t?x(R[2].params[0]):Rt,mu=Et?x(R[3].params[0]):Rt,gu=kt?x(R[4].params[0]):Rt,Du=$t?x(R[5].params[0]):Rt,vu=rt?x(R[0].params[1]):Rt,yu=ft?x(R[1].params[1]):Rt,wu=_t?x(R[2].params[1]):Rt,Fu=Et?x(R[3].params[1]):Rt,Au=kt?x(R[4].params[1]):Rt,Eu=$t?x(R[5].params[1]):Rt;for(let j=0;j<R.length;++j)R[j].implementation=ut(R[j].params,R[j].fn);const Cu=rt?R[0].implementation:Re,_u=ft?R[1].implementation:Re,xu=_t?R[2].implementation:Re,Bu=Et?R[3].implementation:Re,bu=kt?R[4].implementation:Re,Mu=$t?R[5].implementation:Re,Su=rt?R[0].params.length:-1,Nu=ft?R[1].params.length:-1,Tu=_t?R[2].params.length:-1,Iu=Et?R[3].params.length:-1,Pu=kt?R[4].params.length:-1,Ru=$t?R[5].params.length:-1,Ou=Pe?6:0,Lu=R.length,ku=R.map(j=>j.test),$u=R.map(j=>j.implementation),Uu=function(){for(let xt=Ou;xt<Lu;xt++)if(ku[xt](arguments))return $u[xt].apply(this,arguments);return a.onMismatch(D,arguments,R)};function Je(j,xt){return arguments.length===Su&&yn(j)&&vu(xt)?Cu.apply(this,arguments):arguments.length===Nu&&pu(j)&&yu(xt)?_u.apply(this,arguments):arguments.length===Tu&&du(j)&&wu(xt)?xu.apply(this,arguments):arguments.length===Iu&&mu(j)&&Fu(xt)?Bu.apply(this,arguments):arguments.length===Pu&&gu(j)&&Au(xt)?bu.apply(this,arguments):arguments.length===Ru&&Du(j)&&Eu(xt)?Mu.apply(this,arguments):Uu.apply(this,arguments)}try{Object.defineProperty(Je,"name",{value:D})}catch{}return Je.signatures=P,Je._typedFunctionData={signatures:R,signatureMap:et},Je}function xi(D,F,C){throw $(D,F,C)}function Bi(D){return Fr(D,0,D.length-1)}function Ie(D){return D[D.length-1]}function Fr(D,F,C){return Array.prototype.slice.call(D,F,C)}function uu(D,F){for(let C=0;C<D.length;C++)if(F(D[C]))return D[C]}function ou(D,F){return Array.prototype.concat.apply([],D.map(F))}function cu(){const D=Bi(arguments).map(C=>m(A(C))),F=Ie(arguments);if(typeof F!="function")throw new TypeError("Callback function expected as last argument");return bi(D,F)}function bi(D,F){return{referTo:{references:D,callback:F}}}function Mi(D){if(typeof D!="function")throw new TypeError("Callback function expected as first argument");return{referToSelf:{callback:D}}}function Si(D){return D&&typeof D.referTo=="object"&&Array.isArray(D.referTo.references)&&typeof D.referTo.callback=="function"}function Ni(D){return D&&typeof D.referToSelf=="object"&&typeof D.referToSelf.callback=="function"}function Ti(D,F){if(!D)return F;if(F&&F!==D){const C=new Error("Function names do not match (expected: "+D+", actual: "+F+")");throw C.data={actual:F,expected:D},C}return D}function lu(D){let F;for(const C in D)Object.prototype.hasOwnProperty.call(D,C)&&(h(D[C])||typeof D[C].signature=="string")&&(F=Ti(F,D[C].name));return F}function fu(D,F){let C;for(C in F)if(Object.prototype.hasOwnProperty.call(F,C)){if(C in D&&F[C]!==D[C]){const S=new Error('Signature "'+C+'" is defined twice');throw S.data={signature:C,sourceFunction:F[C],destFunction:D[C]},S}D[C]=F[C]}}const hu=a;a=function(D){const F=typeof D=="string",C=F?1:0;let S=F?D:"";const P={};for(let T=C;T<arguments.length;++T){const U=arguments[T];let L={},z;if(typeof U=="function"?(z=U.name,typeof U.signature=="string"?L[U.signature]=U:h(U)&&(L=U.signatures)):t(U)&&(L=U,F||(z=lu(U))),Object.keys(L).length===0){const R=new TypeError("Argument to 'typed' at index "+T+" is not a (typed) function, nor an object with signatures as keys and functions as values.");throw R.data={index:T,argument:U},R}F||(S=Ti(S,z)),fu(P,L)}return vn(S||"",P)},a.create=zs,a.createCount=hu.createCount,a.onMismatch=xi,a.throwMismatchError=xi,a.createError=$,a.clear=c,a.clearConversions=l,a.addTypes=o,a._findType=u,a.referTo=cu,a.referToSelf=Mi,a.convert=p,a.findSignature=d,a.find=g,a.isTypedFunction=h,a.warnAgainstDeprecatedThis=!0,a.addType=function(D,F){let C="any";F!==!1&&r.has("Object")&&(C="Object"),a.addTypes([D],C)};function Ii(D){if(!D||typeof D.from!="string"||typeof D.to!="string"||typeof D.convert!="function")throw new TypeError("Object with properties {from: string, to: string, convert: function} expected");if(D.to===D.from)throw new SyntaxError('Illegal to define conversion from "'+D.from+'" to itself.')}return a.addConversion=function(D){let F=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{override:!1};Ii(D);const C=u(D.to),S=C.conversionsTo.find(P=>P.from===D.from);if(S)if(F&&F.override)a.removeConversion({from:S.from,to:D.to,convert:S.convert});else throw new Error('There is already a conversion from "'+D.from+'" to "'+C.name+'"');C.conversionsTo.push({from:D.from,convert:D.convert,index:s++})},a.addConversions=function(D,F){D.forEach(C=>a.addConversion(C,F))},a.removeConversion=function(D){Ii(D);const F=u(D.to),C=uu(F.conversionsTo,P=>P.from===D.from);if(!C)throw new Error("Attempt to remove nonexistent conversion from "+D.from+" to "+D.to);if(C.convert!==D.convert)throw new Error("Conversion to remove does not match existing conversion");const S=F.conversionsTo.indexOf(C);F.conversionsTo.splice(S,1)},a.resolve=function(D,F){if(!h(D))throw new TypeError(Ri);const C=D._typedFunctionData.signatures;for(let S=0;S<C.length;++S)if(C[S].test(F))return C[S];return null},a}const Un=zs();function Q(t,e,n,r){function i(s){var a=Io(s,e.map(ko));return Oo(t,e,s),n(a)}return i.isFactory=!0,i.fn=t,i.dependencies=e.slice().sort(),r&&(i.meta=r),i}function Oo(t,e,n){var r=e.filter(s=>!Lo(s)).every(s=>n[s]!==void 0);if(!r){var i=e.filter(s=>n[s]===void 0);throw new Error('Cannot create function "'.concat(t,'", ')+"some dependencies are missing: ".concat(i.map(s=>'"'.concat(s,'"')).join(", "),"."))}}function Lo(t){return t&&t[0]==="?"}function ko(t){return t&&t[0]==="?"?t.slice(1):t}function Dt(t){return typeof t=="boolean"?!0:isFinite(t)?t===Math.round(t):!1}function Ar(t,e,n){var r={2:"0b",8:"0o",16:"0x"},i=r[e],s="";if(n){if(n<1)throw new Error("size must be in greater than 0");if(!Dt(n))throw new Error("size must be an integer");if(t>2**(n-1)-1||t<-(2**(n-1)))throw new Error("Value must be in range [-2^".concat(n-1,", 2^").concat(n-1,"-1]"));if(!Dt(t))throw new Error("Value must be an integer");t<0&&(t=t+2**n),s="i".concat(n)}var a="";return t<0&&(t=-t,a="-"),"".concat(a).concat(i).concat(t.toString(e)).concat(s)}function Sr(t,e){if(typeof e=="function")return e(t);if(t===1/0)return"Infinity";if(t===-1/0)return"-Infinity";if(isNaN(t))return"NaN";var{notation:n,precision:r,wordSize:i}=qs(e);switch(n){case"fixed":return Uo(t,r);case"exponential":return Hs(t,r);case"engineering":return $o(t,r);case"bin":return Ar(t,2,i);case"oct":return Ar(t,8,i);case"hex":return Ar(t,16,i);case"auto":return zo(t,r,e).replace(/((\.\d*?)(0+))($|e)/,function(){var s=arguments[2],a=arguments[4];return s!=="."?s+a:a});default:throw new Error('Unknown notation "'+n+'". Choose "auto", "exponential", "fixed", "bin", "oct", or "hex.')}}function qs(t){var e="auto",n,r;if(t!==void 0)if(it(t))n=t;else if(vt(t))n=t.toNumber();else if(ai(t))t.precision!==void 0&&(n=Oi(t.precision,()=>{throw new Error('Option "precision" must be a number or BigNumber')})),t.wordSize!==void 0&&(r=Oi(t.wordSize,()=>{throw new Error('Option "wordSize" must be a number or BigNumber')})),t.notation&&(e=t.notation);else throw new Error("Unsupported type of options, number, BigNumber, or object expected");return{notation:e,precision:n,wordSize:r}}function ir(t){var e=String(t).toLowerCase().match(/^(-?)(\d+\.?\d*)(e([+-]?\d+))?$/);if(!e)throw new SyntaxError("Invalid number "+t);var n=e[1],r=e[2],i=parseFloat(e[4]||"0"),s=r.indexOf(".");i+=s!==-1?s-1:r.length-1;var a=r.replace(".","").replace(/^0*/,function(u){return i-=u.length,""}).replace(/0*$/,"").split("").map(function(u){return parseInt(u)});return a.length===0&&(a.push(0),i++),{sign:n,coefficients:a,exponent:i}}function $o(t,e){if(isNaN(t)||!isFinite(t))return String(t);var n=ir(t),r=sr(n,e),i=r.exponent,s=r.coefficients,a=i%3===0?i:i<0?i-3-i%3:i-i%3;if(it(e))for(;e>s.length||i-a+1>s.length;)s.push(0);else for(var u=Math.abs(i-a)-(s.length-1),o=0;o<u;o++)s.push(0);for(var c=Math.abs(i-a),l=1;c>0;)l++,c--;var f=s.slice(l).join(""),h=it(e)&&f.length||f.match(/[1-9]/)?"."+f:"",d=s.slice(0,l).join("")+h+"e"+(i>=0?"+":"")+a.toString();return r.sign+d}function Uo(t,e){if(isNaN(t)||!isFinite(t))return String(t);var n=ir(t),r=typeof e=="number"?sr(n,n.exponent+1+e):n,i=r.coefficients,s=r.exponent+1,a=s+(e||0);return i.length<a&&(i=i.concat(ze(a-i.length))),s<0&&(i=ze(-s+1).concat(i),s=1),s<i.length&&i.splice(s,0,s===0?"0.":"."),r.sign+i.join("")}function Hs(t,e){if(isNaN(t)||!isFinite(t))return String(t);var n=ir(t),r=e?sr(n,e):n,i=r.coefficients,s=r.exponent;i.length<e&&(i=i.concat(ze(e-i.length)));var a=i.shift();return r.sign+a+(i.length>0?"."+i.join(""):"")+"e"+(s>=0?"+":"")+s}function zo(t,e,n){if(isNaN(t)||!isFinite(t))return String(t);var r=Li(n==null?void 0:n.lowerExp,-3),i=Li(n==null?void 0:n.upperExp,5),s=ir(t),a=e?sr(s,e):s;if(a.exponent<r||a.exponent>=i)return Hs(t,e);var u=a.coefficients,o=a.exponent;u.length<e&&(u=u.concat(ze(e-u.length))),u=u.concat(ze(o-u.length+1+(u.length<e?e-u.length:0))),u=ze(-o).concat(u);var c=o>0?o:0;return c<u.length-1&&u.splice(c+1,0,"."),a.sign+u.join("")}function sr(t,e){for(var n={sign:t.sign,coefficients:t.coefficients,exponent:t.exponent},r=n.coefficients;e<=0;)r.unshift(0),n.exponent++,e++;if(r.length>e){var i=r.splice(e,r.length-e);if(i[0]>=5){var s=e-1;for(r[s]++;r[s]===10;)r.pop(),s===0&&(r.unshift(0),n.exponent++,s++),s--,r[s]++}}return n}function ze(t){for(var e=[],n=0;n<t;n++)e.push(0);return e}function qo(t){return t.toExponential().replace(/e.*$/,"").replace(/^0\.?0*|\./,"").length}function zn(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1e-8,r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0;if(n<=0)throw new Error("Relative tolerance must be greater than 0");if(r<0)throw new Error("Absolute tolerance must be at least 0");return isNaN(t)||isNaN(e)?!1:!isFinite(t)||!isFinite(e)?t===e:t===e?!0:Math.abs(t-e)<=Math.max(n*Math.max(Math.abs(t),Math.abs(e)),r)}function Oi(t,e){if(it(t))return t;if(vt(t))return t.toNumber();e()}function Li(t,e){return it(t)?t:vt(t)?t.toNumber():e}var Vs=function(){return Vs=Un.create,Un},Ho=["?BigNumber","?Complex","?DenseMatrix","?Fraction"],Vo=Q("typed",Ho,function(e){var{BigNumber:n,Complex:r,DenseMatrix:i,Fraction:s}=e,a=Vs();return a.clear(),a.addTypes([{name:"number",test:it},{name:"Complex",test:ks},{name:"BigNumber",test:vt},{name:"bigint",test:to},{name:"Fraction",test:$s},{name:"Unit",test:Us},{name:"identifier",test:u=>Gt&&/^(?:[A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C8A\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CD\uA7D0\uA7D1\uA7D3\uA7D5-\uA7DC\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF40\uDF42-\uDF49\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDDC0-\uDDF3\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDD4A-\uDD65\uDD6F-\uDD85\uDE80-\uDEA9\uDEB0\uDEB1\uDEC2-\uDEC4\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDF70-\uDF81\uDFB0-\uDFC4\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE3F\uDE40\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61\uDF80-\uDF89\uDF8B\uDF8E\uDF90-\uDFB5\uDFB7\uDFD1\uDFD3]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8\uDFC0-\uDFE0]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDEE0-\uDEF2\uDF02\uDF04-\uDF10\uDF12-\uDF33\uDFB0]|\uD808[\uDC00-\uDF99]|\uD809[\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD80E\uD80F\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883\uD885-\uD887][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2F\uDC41-\uDC46\uDC60-\uDFFF]|\uD810[\uDC00-\uDFFA]|\uD811[\uDC00-\uDE46]|\uD818[\uDD00-\uDD1D]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE70-\uDEBE\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDD40-\uDD6C\uDE40-\uDE7F\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDCFF-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD32\uDD50-\uDD52\uDD55\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD837[\uDF00-\uDF1E\uDF25-\uDF2A]|\uD838[\uDC30-\uDC6D\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB]|\uD839[\uDCD0-\uDCEB\uDDD0-\uDDED\uDDF0\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF39\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0\uDFF0-\uDFFF]|\uD87B[\uDC00-\uDE5D]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A\uDF50-\uDFFF]|\uD888[\uDC00-\uDFAF])(?:[0-9A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C8A\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CD\uA7D0\uA7D1\uA7D3\uA7D5-\uA7DC\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF40\uDF42-\uDF49\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDDC0-\uDDF3\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDD4A-\uDD65\uDD6F-\uDD85\uDE80-\uDEA9\uDEB0\uDEB1\uDEC2-\uDEC4\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDF70-\uDF81\uDFB0-\uDFC4\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE3F\uDE40\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61\uDF80-\uDF89\uDF8B\uDF8E\uDF90-\uDFB5\uDFB7\uDFD1\uDFD3]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8\uDFC0-\uDFE0]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDEE0-\uDEF2\uDF02\uDF04-\uDF10\uDF12-\uDF33\uDFB0]|\uD808[\uDC00-\uDF99]|\uD809[\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD80E\uD80F\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883\uD885-\uD887][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2F\uDC41-\uDC46\uDC60-\uDFFF]|\uD810[\uDC00-\uDFFA]|\uD811[\uDC00-\uDE46]|\uD818[\uDD00-\uDD1D]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE70-\uDEBE\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDD40-\uDD6C\uDE40-\uDE7F\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDCFF-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD32\uDD50-\uDD52\uDD55\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD837[\uDF00-\uDF1E\uDF25-\uDF2A]|\uD838[\uDC30-\uDC6D\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB]|\uD839[\uDCD0-\uDCEB\uDDD0-\uDDED\uDDF0\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF39\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0\uDFF0-\uDFFF]|\uD87B[\uDC00-\uDE5D]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A\uDF50-\uDFFF]|\uD888[\uDC00-\uDFAF])*$/.test(u)},{name:"string",test:Gt},{name:"Chain",test:So},{name:"Array",test:ht},{name:"Matrix",test:Vt},{name:"DenseMatrix",test:eo},{name:"SparseMatrix",test:no},{name:"Range",test:ro},{name:"Index",test:si},{name:"boolean",test:io},{name:"ResultSet",test:so},{name:"Help",test:ao},{name:"function",test:uo},{name:"Date",test:oo},{name:"RegExp",test:co},{name:"null",test:fo},{name:"undefined",test:ho},{name:"AccessorNode",test:po},{name:"ArrayNode",test:mo},{name:"AssignmentNode",test:go},{name:"BlockNode",test:Do},{name:"ConditionalNode",test:vo},{name:"ConstantNode",test:yo},{name:"FunctionNode",test:Fo},{name:"FunctionAssignmentNode",test:wo},{name:"IndexNode",test:Ao},{name:"Node",test:Eo},{name:"ObjectNode",test:Co},{name:"OperatorNode",test:_o},{name:"ParenthesisNode",test:xo},{name:"RangeNode",test:Bo},{name:"RelationalNode",test:bo},{name:"SymbolNode",test:Mo},{name:"Map",test:lo},{name:"Object",test:ai}]),a.addConversions([{from:"number",to:"BigNumber",convert:function(o){if(n||Fn(o),qo(o)>15)throw new TypeError("Cannot implicitly convert a number with >15 significant digits to BigNumber (value: "+o+"). Use function bignumber(x) to convert to BigNumber.");return new n(o)}},{from:"number",to:"Complex",convert:function(o){return r||An(o),new r(o,0)}},{from:"BigNumber",to:"Complex",convert:function(o){return r||An(o),new r(o.toNumber(),0)}},{from:"bigint",to:"number",convert:function(o){if(o>Number.MAX_SAFE_INTEGER)throw new TypeError("Cannot implicitly convert bigint to number: value exceeds the max safe integer value (value: "+o+")");return Number(o)}},{from:"bigint",to:"BigNumber",convert:function(o){return n||Fn(o),new n(o.toString())}},{from:"bigint",to:"Fraction",convert:function(o){return s||En(o),new s(o)}},{from:"Fraction",to:"BigNumber",convert:function(o){throw new TypeError("Cannot implicitly convert a Fraction to BigNumber or vice versa. Use function bignumber(x) to convert to BigNumber or fraction(x) to convert to Fraction.")}},{from:"Fraction",to:"Complex",convert:function(o){return r||An(o),new r(o.valueOf(),0)}},{from:"number",to:"Fraction",convert:function(o){s||En(o);var c=new s(o);if(c.valueOf()!==o)throw new TypeError("Cannot implicitly convert a number to a Fraction when there will be a loss of precision (value: "+o+"). Use function fraction(x) to convert to Fraction.");return c}},{from:"string",to:"number",convert:function(o){var c=Number(o);if(isNaN(c))throw new Error('Cannot convert "'+o+'" to a number');return c}},{from:"string",to:"BigNumber",convert:function(o){n||Fn(o);try{return new n(o)}catch{throw new Error('Cannot convert "'+o+'" to BigNumber')}}},{from:"string",to:"bigint",convert:function(o){try{return BigInt(o)}catch{throw new Error('Cannot convert "'+o+'" to BigInt')}}},{from:"string",to:"Fraction",convert:function(o){s||En(o);try{return new s(o)}catch{throw new Error('Cannot convert "'+o+'" to Fraction')}}},{from:"string",to:"Complex",convert:function(o){r||An(o);try{return new r(o)}catch{throw new Error('Cannot convert "'+o+'" to Complex')}}},{from:"boolean",to:"number",convert:function(o){return+o}},{from:"boolean",to:"BigNumber",convert:function(o){return n||Fn(o),new n(+o)}},{from:"boolean",to:"bigint",convert:function(o){return BigInt(+o)}},{from:"boolean",to:"Fraction",convert:function(o){return s||En(o),new s(+o)}},{from:"boolean",to:"string",convert:function(o){return String(o)}},{from:"Array",to:"Matrix",convert:function(o){return i||Wo(),new i(o)}},{from:"Matrix",to:"Array",convert:function(o){return o.valueOf()}}]),a.onMismatch=(u,o,c)=>{var l=a.createError(u,o,c);if(["wrongType","mismatch"].includes(l.data.category)&&o.length===1&&$n(o[0])&&c.some(h=>!h.params.includes(","))){var f=new TypeError("Function '".concat(u,"' doesn't apply to matrices. To call it ")+"elementwise on a matrix 'M', try 'map(M, ".concat(u,")'."));throw f.data=l.data,f}throw l},a.onMismatch=(u,o,c)=>{var l=a.createError(u,o,c);if(["wrongType","mismatch"].includes(l.data.category)&&o.length===1&&$n(o[0])&&c.some(h=>!h.params.includes(","))){var f=new TypeError("Function '".concat(u,"' doesn't apply to matrices. To call it ")+"elementwise on a matrix 'M', try 'map(M, ".concat(u,")'."));throw f.data=l.data,f}throw l},a});function Fn(t){throw new Error("Cannot convert value ".concat(t," into a BigNumber: no class 'BigNumber' provided"))}function An(t){throw new Error("Cannot convert value ".concat(t," into a Complex number: no class 'Complex' provided"))}function Wo(){throw new Error("Cannot convert array into a Matrix: no class 'DenseMatrix' provided")}function En(t){throw new Error("Cannot convert value ".concat(t," into a Fraction, no class 'Fraction' provided."))}/*!
 *  decimal.js v10.5.0
 *  An arbitrary-precision Decimal type for JavaScript.
 *  https://github.com/MikeMcl/decimal.js
 *  Copyright (c) 2025 Michael Mclaughlin <M8ch88l@gmail.com>
 *  MIT Licence
 */var Nr=9e15,Fe=1e9,Tr="0123456789abcdef",qn="2.3025850929940456840179914546843642076011014886287729760333279009675726096773524802359972050895982983419677840422862486334095254650828067566662873690987816894829072083255546808437998948262331985283935053089653777326288461633662222876982198867465436674744042432743651550489343149393914796194044002221051017141748003688084012647080685567743216228355220114804663715659121373450747856947683463616792101806445070648000277502684916746550586856935673420670581136429224554405758925724208241314695689016758940256776311356919292033376587141660230105703089634572075440370847469940168269282808481184289314848524948644871927809676271275775397027668605952496716674183485704422507197965004714951050492214776567636938662976979522110718264549734772662425709429322582798502585509785265383207606726317164309505995087807523710333101197857547331541421808427543863591778117054309827482385045648019095610299291824318237525357709750539565187697510374970888692180205189339507238539205144634197265287286965110862571492198849978748873771345686209167058",Hn="3.1415926535897932384626433832795028841971693993751058209749445923078164062862089986280348253421170679821480865132823066470938446095505822317253594081284811174502841027019385211055596446229489549303819644288109756659334461284756482337867831652712019091456485669234603486104543266482133936072602491412737245870066063155881748815209209628292540917153643678925903600113305305488204665213841469519415116094330572703657595919530921861173819326117931051185480744623799627495673518857527248912279381830119491298336733624406566430860213949463952247371907021798609437027705392171762931767523846748184676694051320005681271452635608277857713427577896091736371787214684409012249534301465495853710507922796892589235420199561121290219608640344181598136297747713099605187072113499999983729780499510597317328160963185950244594553469083026425223082533446850352619311881710100031378387528865875332083814206171776691473035982534904287554687311595628638823537875937519577818577805321712268066130019278766111959092164201989380952572010654858632789",Ir={precision:20,rounding:4,modulo:1,toExpNeg:-7,toExpPos:21,minE:-9e15,maxE:Nr,crypto:!1},Ws,ae,Y=!0,ar="[DecimalError] ",ye=ar+"Invalid argument: ",Zs=ar+"Precision limit exceeded",Xs=ar+"crypto unavailable",Ys="[object Decimal]",At=Math.floor,pt=Math.pow,Zo=/^0b([01]+(\.[01]*)?|\.[01]+)(p[+-]?\d+)?$/i,Xo=/^0x([0-9a-f]+(\.[0-9a-f]*)?|\.[0-9a-f]+)(p[+-]?\d+)?$/i,Yo=/^0o([0-7]+(\.[0-7]*)?|\.[0-7]+)(p[+-]?\d+)?$/i,Gs=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,Zt=1e7,X=7,Go=9007199254740991,Jo=qn.length-1,Pr=Hn.length-1,I={toStringTag:Ys};I.absoluteValue=I.abs=function(){var t=new this.constructor(this);return t.s<0&&(t.s=1),Z(t)};I.ceil=function(){return Z(new this.constructor(this),this.e+1,2)};I.clampedTo=I.clamp=function(t,e){var n,r=this,i=r.constructor;if(t=new i(t),e=new i(e),!t.s||!e.s)return new i(NaN);if(t.gt(e))throw Error(ye+e);return n=r.cmp(t),n<0?t:r.cmp(e)>0?e:new i(r)};I.comparedTo=I.cmp=function(t){var e,n,r,i,s=this,a=s.d,u=(t=new s.constructor(t)).d,o=s.s,c=t.s;if(!a||!u)return!o||!c?NaN:o!==c?o:a===u?0:!a^o<0?1:-1;if(!a[0]||!u[0])return a[0]?o:u[0]?-c:0;if(o!==c)return o;if(s.e!==t.e)return s.e>t.e^o<0?1:-1;for(r=a.length,i=u.length,e=0,n=r<i?r:i;e<n;++e)if(a[e]!==u[e])return a[e]>u[e]^o<0?1:-1;return r===i?0:r>i^o<0?1:-1};I.cosine=I.cos=function(){var t,e,n=this,r=n.constructor;return n.d?n.d[0]?(t=r.precision,e=r.rounding,r.precision=t+Math.max(n.e,n.sd())+X,r.rounding=1,n=Ko(r,ta(r,n)),r.precision=t,r.rounding=e,Z(ae==2||ae==3?n.neg():n,t,e,!0)):new r(1):new r(NaN)};I.cubeRoot=I.cbrt=function(){var t,e,n,r,i,s,a,u,o,c,l=this,f=l.constructor;if(!l.isFinite()||l.isZero())return new f(l);for(Y=!1,s=l.s*pt(l.s*l,1/3),!s||Math.abs(s)==1/0?(n=yt(l.d),t=l.e,(s=(t-n.length+1)%3)&&(n+=s==1||s==-2?"0":"00"),s=pt(n,1/3),t=At((t+1)/3)-(t%3==(t<0?-1:2)),s==1/0?n="5e"+t:(n=s.toExponential(),n=n.slice(0,n.indexOf("e")+1)+t),r=new f(n),r.s=l.s):r=new f(s.toString()),a=(t=f.precision)+3;;)if(u=r,o=u.times(u).times(u),c=o.plus(l),r=nt(c.plus(l).times(u),c.plus(o),a+2,1),yt(u.d).slice(0,a)===(n=yt(r.d)).slice(0,a))if(n=n.slice(a-3,a+1),n=="9999"||!i&&n=="4999"){if(!i&&(Z(u,t+1,0),u.times(u).times(u).eq(l))){r=u;break}a+=4,i=1}else{(!+n||!+n.slice(1)&&n.charAt(0)=="5")&&(Z(r,t+1,1),e=!r.times(r).times(r).eq(l));break}return Y=!0,Z(r,t,f.rounding,e)};I.decimalPlaces=I.dp=function(){var t,e=this.d,n=NaN;if(e){if(t=e.length-1,n=(t-At(this.e/X))*X,t=e[t],t)for(;t%10==0;t/=10)n--;n<0&&(n=0)}return n};I.dividedBy=I.div=function(t){return nt(this,new this.constructor(t))};I.dividedToIntegerBy=I.divToInt=function(t){var e=this,n=e.constructor;return Z(nt(e,new n(t),0,1,1),n.precision,n.rounding)};I.equals=I.eq=function(t){return this.cmp(t)===0};I.floor=function(){return Z(new this.constructor(this),this.e+1,3)};I.greaterThan=I.gt=function(t){return this.cmp(t)>0};I.greaterThanOrEqualTo=I.gte=function(t){var e=this.cmp(t);return e==1||e===0};I.hyperbolicCosine=I.cosh=function(){var t,e,n,r,i,s=this,a=s.constructor,u=new a(1);if(!s.isFinite())return new a(s.s?1/0:NaN);if(s.isZero())return u;n=a.precision,r=a.rounding,a.precision=n+Math.max(s.e,s.sd())+4,a.rounding=1,i=s.d.length,i<32?(t=Math.ceil(i/3),e=(1/or(4,t)).toString()):(t=16,e="2.3283064365386962890625e-10"),s=Ve(a,1,s.times(e),new a(1),!0);for(var o,c=t,l=new a(8);c--;)o=s.times(s),s=u.minus(o.times(l.minus(o.times(l))));return Z(s,a.precision=n,a.rounding=r,!0)};I.hyperbolicSine=I.sinh=function(){var t,e,n,r,i=this,s=i.constructor;if(!i.isFinite()||i.isZero())return new s(i);if(e=s.precision,n=s.rounding,s.precision=e+Math.max(i.e,i.sd())+4,s.rounding=1,r=i.d.length,r<3)i=Ve(s,2,i,i,!0);else{t=1.4*Math.sqrt(r),t=t>16?16:t|0,i=i.times(1/or(5,t)),i=Ve(s,2,i,i,!0);for(var a,u=new s(5),o=new s(16),c=new s(20);t--;)a=i.times(i),i=i.times(u.plus(a.times(o.times(a).plus(c))))}return s.precision=e,s.rounding=n,Z(i,e,n,!0)};I.hyperbolicTangent=I.tanh=function(){var t,e,n=this,r=n.constructor;return n.isFinite()?n.isZero()?new r(n):(t=r.precision,e=r.rounding,r.precision=t+7,r.rounding=1,nt(n.sinh(),n.cosh(),r.precision=t,r.rounding=e)):new r(n.s)};I.inverseCosine=I.acos=function(){var t=this,e=t.constructor,n=t.abs().cmp(1),r=e.precision,i=e.rounding;return n!==-1?n===0?t.isNeg()?Kt(e,r,i):new e(0):new e(NaN):t.isZero()?Kt(e,r+4,i).times(.5):(e.precision=r+6,e.rounding=1,t=new e(1).minus(t).div(t.plus(1)).sqrt().atan(),e.precision=r,e.rounding=i,t.times(2))};I.inverseHyperbolicCosine=I.acosh=function(){var t,e,n=this,r=n.constructor;return n.lte(1)?new r(n.eq(1)?0:NaN):n.isFinite()?(t=r.precision,e=r.rounding,r.precision=t+Math.max(Math.abs(n.e),n.sd())+4,r.rounding=1,Y=!1,n=n.times(n).minus(1).sqrt().plus(n),Y=!0,r.precision=t,r.rounding=e,n.ln()):new r(n)};I.inverseHyperbolicSine=I.asinh=function(){var t,e,n=this,r=n.constructor;return!n.isFinite()||n.isZero()?new r(n):(t=r.precision,e=r.rounding,r.precision=t+2*Math.max(Math.abs(n.e),n.sd())+6,r.rounding=1,Y=!1,n=n.times(n).plus(1).sqrt().plus(n),Y=!0,r.precision=t,r.rounding=e,n.ln())};I.inverseHyperbolicTangent=I.atanh=function(){var t,e,n,r,i=this,s=i.constructor;return i.isFinite()?i.e>=0?new s(i.abs().eq(1)?i.s/0:i.isZero()?i:NaN):(t=s.precision,e=s.rounding,r=i.sd(),Math.max(r,t)<2*-i.e-1?Z(new s(i),t,e,!0):(s.precision=n=r-i.e,i=nt(i.plus(1),new s(1).minus(i),n+t,1),s.precision=t+4,s.rounding=1,i=i.ln(),s.precision=t,s.rounding=e,i.times(.5))):new s(NaN)};I.inverseSine=I.asin=function(){var t,e,n,r,i=this,s=i.constructor;return i.isZero()?new s(i):(e=i.abs().cmp(1),n=s.precision,r=s.rounding,e!==-1?e===0?(t=Kt(s,n+4,r).times(.5),t.s=i.s,t):new s(NaN):(s.precision=n+6,s.rounding=1,i=i.div(new s(1).minus(i.times(i)).sqrt().plus(1)).atan(),s.precision=n,s.rounding=r,i.times(2)))};I.inverseTangent=I.atan=function(){var t,e,n,r,i,s,a,u,o,c=this,l=c.constructor,f=l.precision,h=l.rounding;if(c.isFinite()){if(c.isZero())return new l(c);if(c.abs().eq(1)&&f+4<=Pr)return a=Kt(l,f+4,h).times(.25),a.s=c.s,a}else{if(!c.s)return new l(NaN);if(f+4<=Pr)return a=Kt(l,f+4,h).times(.5),a.s=c.s,a}for(l.precision=u=f+10,l.rounding=1,n=Math.min(28,u/X+2|0),t=n;t;--t)c=c.div(c.times(c).plus(1).sqrt().plus(1));for(Y=!1,e=Math.ceil(u/X),r=1,o=c.times(c),a=new l(c),i=c;t!==-1;)if(i=i.times(o),s=a.minus(i.div(r+=2)),i=i.times(o),a=s.plus(i.div(r+=2)),a.d[e]!==void 0)for(t=e;a.d[t]===s.d[t]&&t--;);return n&&(a=a.times(2<<n-1)),Y=!0,Z(a,l.precision=f,l.rounding=h,!0)};I.isFinite=function(){return!!this.d};I.isInteger=I.isInt=function(){return!!this.d&&At(this.e/X)>this.d.length-2};I.isNaN=function(){return!this.s};I.isNegative=I.isNeg=function(){return this.s<0};I.isPositive=I.isPos=function(){return this.s>0};I.isZero=function(){return!!this.d&&this.d[0]===0};I.lessThan=I.lt=function(t){return this.cmp(t)<0};I.lessThanOrEqualTo=I.lte=function(t){return this.cmp(t)<1};I.logarithm=I.log=function(t){var e,n,r,i,s,a,u,o,c=this,l=c.constructor,f=l.precision,h=l.rounding,d=5;if(t==null)t=new l(10),e=!0;else{if(t=new l(t),n=t.d,t.s<0||!n||!n[0]||t.eq(1))return new l(NaN);e=t.eq(10)}if(n=c.d,c.s<0||!n||!n[0]||c.eq(1))return new l(n&&!n[0]?-1/0:c.s!=1?NaN:n?0:1/0);if(e)if(n.length>1)s=!0;else{for(i=n[0];i%10===0;)i/=10;s=i!==1}if(Y=!1,u=f+d,a=me(c,u),r=e?Vn(l,u+10):me(t,u),o=nt(a,r,u,1),ln(o.d,i=f,h))do if(u+=10,a=me(c,u),r=e?Vn(l,u+10):me(t,u),o=nt(a,r,u,1),!s){+yt(o.d).slice(i+1,i+15)+1==1e14&&(o=Z(o,f+1,0));break}while(ln(o.d,i+=10,h));return Y=!0,Z(o,f,h)};I.minus=I.sub=function(t){var e,n,r,i,s,a,u,o,c,l,f,h,d=this,g=d.constructor;if(t=new g(t),!d.d||!t.d)return!d.s||!t.s?t=new g(NaN):d.d?t.s=-t.s:t=new g(t.d||d.s!==t.s?d:NaN),t;if(d.s!=t.s)return t.s=-t.s,d.plus(t);if(c=d.d,h=t.d,u=g.precision,o=g.rounding,!c[0]||!h[0]){if(h[0])t.s=-t.s;else if(c[0])t=new g(d);else return new g(o===3?-0:0);return Y?Z(t,u,o):t}if(n=At(t.e/X),l=At(d.e/X),c=c.slice(),s=l-n,s){for(f=s<0,f?(e=c,s=-s,a=h.length):(e=h,n=l,a=c.length),r=Math.max(Math.ceil(u/X),a)+2,s>r&&(s=r,e.length=1),e.reverse(),r=s;r--;)e.push(0);e.reverse()}else{for(r=c.length,a=h.length,f=r<a,f&&(a=r),r=0;r<a;r++)if(c[r]!=h[r]){f=c[r]<h[r];break}s=0}for(f&&(e=c,c=h,h=e,t.s=-t.s),a=c.length,r=h.length-a;r>0;--r)c[a++]=0;for(r=h.length;r>s;){if(c[--r]<h[r]){for(i=r;i&&c[--i]===0;)c[i]=Zt-1;--c[i],c[r]+=Zt}c[r]-=h[r]}for(;c[--a]===0;)c.pop();for(;c[0]===0;c.shift())--n;return c[0]?(t.d=c,t.e=ur(c,n),Y?Z(t,u,o):t):new g(o===3?-0:0)};I.modulo=I.mod=function(t){var e,n=this,r=n.constructor;return t=new r(t),!n.d||!t.s||t.d&&!t.d[0]?new r(NaN):!t.d||n.d&&!n.d[0]?Z(new r(n),r.precision,r.rounding):(Y=!1,r.modulo==9?(e=nt(n,t.abs(),0,3,1),e.s*=t.s):e=nt(n,t,0,r.modulo,1),e=e.times(t),Y=!0,n.minus(e))};I.naturalExponential=I.exp=function(){return Rr(this)};I.naturalLogarithm=I.ln=function(){return me(this)};I.negated=I.neg=function(){var t=new this.constructor(this);return t.s=-t.s,Z(t)};I.plus=I.add=function(t){var e,n,r,i,s,a,u,o,c,l,f=this,h=f.constructor;if(t=new h(t),!f.d||!t.d)return!f.s||!t.s?t=new h(NaN):f.d||(t=new h(t.d||f.s===t.s?f:NaN)),t;if(f.s!=t.s)return t.s=-t.s,f.minus(t);if(c=f.d,l=t.d,u=h.precision,o=h.rounding,!c[0]||!l[0])return l[0]||(t=new h(f)),Y?Z(t,u,o):t;if(s=At(f.e/X),r=At(t.e/X),c=c.slice(),i=s-r,i){for(i<0?(n=c,i=-i,a=l.length):(n=l,r=s,a=c.length),s=Math.ceil(u/X),a=s>a?s+1:a+1,i>a&&(i=a,n.length=1),n.reverse();i--;)n.push(0);n.reverse()}for(a=c.length,i=l.length,a-i<0&&(i=a,n=l,l=c,c=n),e=0;i;)e=(c[--i]=c[i]+l[i]+e)/Zt|0,c[i]%=Zt;for(e&&(c.unshift(e),++r),a=c.length;c[--a]==0;)c.pop();return t.d=c,t.e=ur(c,r),Y?Z(t,u,o):t};I.precision=I.sd=function(t){var e,n=this;if(t!==void 0&&t!==!!t&&t!==1&&t!==0)throw Error(ye+t);return n.d?(e=Js(n.d),t&&n.e+1>e&&(e=n.e+1)):e=NaN,e};I.round=function(){var t=this,e=t.constructor;return Z(new e(t),t.e+1,e.rounding)};I.sine=I.sin=function(){var t,e,n=this,r=n.constructor;return n.isFinite()?n.isZero()?new r(n):(t=r.precision,e=r.rounding,r.precision=t+Math.max(n.e,n.sd())+X,r.rounding=1,n=jo(r,ta(r,n)),r.precision=t,r.rounding=e,Z(ae>2?n.neg():n,t,e,!0)):new r(NaN)};I.squareRoot=I.sqrt=function(){var t,e,n,r,i,s,a=this,u=a.d,o=a.e,c=a.s,l=a.constructor;if(c!==1||!u||!u[0])return new l(!c||c<0&&(!u||u[0])?NaN:u?a:1/0);for(Y=!1,c=Math.sqrt(+a),c==0||c==1/0?(e=yt(u),(e.length+o)%2==0&&(e+="0"),c=Math.sqrt(e),o=At((o+1)/2)-(o<0||o%2),c==1/0?e="5e"+o:(e=c.toExponential(),e=e.slice(0,e.indexOf("e")+1)+o),r=new l(e)):r=new l(c.toString()),n=(o=l.precision)+3;;)if(s=r,r=s.plus(nt(a,s,n+2,1)).times(.5),yt(s.d).slice(0,n)===(e=yt(r.d)).slice(0,n))if(e=e.slice(n-3,n+1),e=="9999"||!i&&e=="4999"){if(!i&&(Z(s,o+1,0),s.times(s).eq(a))){r=s;break}n+=4,i=1}else{(!+e||!+e.slice(1)&&e.charAt(0)=="5")&&(Z(r,o+1,1),t=!r.times(r).eq(a));break}return Y=!0,Z(r,o,l.rounding,t)};I.tangent=I.tan=function(){var t,e,n=this,r=n.constructor;return n.isFinite()?n.isZero()?new r(n):(t=r.precision,e=r.rounding,r.precision=t+10,r.rounding=1,n=n.sin(),n.s=1,n=nt(n,new r(1).minus(n.times(n)).sqrt(),t+10,0),r.precision=t,r.rounding=e,Z(ae==2||ae==4?n.neg():n,t,e,!0)):new r(NaN)};I.times=I.mul=function(t){var e,n,r,i,s,a,u,o,c,l=this,f=l.constructor,h=l.d,d=(t=new f(t)).d;if(t.s*=l.s,!h||!h[0]||!d||!d[0])return new f(!t.s||h&&!h[0]&&!d||d&&!d[0]&&!h?NaN:!h||!d?t.s/0:t.s*0);for(n=At(l.e/X)+At(t.e/X),o=h.length,c=d.length,o<c&&(s=h,h=d,d=s,a=o,o=c,c=a),s=[],a=o+c,r=a;r--;)s.push(0);for(r=c;--r>=0;){for(e=0,i=o+r;i>r;)u=s[i]+d[r]*h[i-r-1]+e,s[i--]=u%Zt|0,e=u/Zt|0;s[i]=(s[i]+e)%Zt|0}for(;!s[--a];)s.pop();return e?++n:s.shift(),t.d=s,t.e=ur(s,n),Y?Z(t,f.precision,f.rounding):t};I.toBinary=function(t,e){return ui(this,2,t,e)};I.toDecimalPlaces=I.toDP=function(t,e){var n=this,r=n.constructor;return n=new r(n),t===void 0?n:(St(t,0,Fe),e===void 0?e=r.rounding:St(e,0,8),Z(n,t+n.e+1,e))};I.toExponential=function(t,e){var n,r=this,i=r.constructor;return t===void 0?n=ee(r,!0):(St(t,0,Fe),e===void 0?e=i.rounding:St(e,0,8),r=Z(new i(r),t+1,e),n=ee(r,!0,t+1)),r.isNeg()&&!r.isZero()?"-"+n:n};I.toFixed=function(t,e){var n,r,i=this,s=i.constructor;return t===void 0?n=ee(i):(St(t,0,Fe),e===void 0?e=s.rounding:St(e,0,8),r=Z(new s(i),t+i.e+1,e),n=ee(r,!1,t+r.e+1)),i.isNeg()&&!i.isZero()?"-"+n:n};I.toFraction=function(t){var e,n,r,i,s,a,u,o,c,l,f,h,d=this,g=d.d,p=d.constructor;if(!g)return new p(d);if(c=n=new p(1),r=o=new p(0),e=new p(r),s=e.e=Js(g)-d.e-1,a=s%X,e.d[0]=pt(10,a<0?X+a:a),t==null)t=s>0?e:c;else{if(u=new p(t),!u.isInt()||u.lt(c))throw Error(ye+u);t=u.gt(e)?s>0?e:c:u}for(Y=!1,u=new p(yt(g)),l=p.precision,p.precision=s=g.length*X*2;f=nt(u,e,0,1,1),i=n.plus(f.times(r)),i.cmp(t)!=1;)n=r,r=i,i=c,c=o.plus(f.times(i)),o=i,i=e,e=u.minus(f.times(i)),u=i;return i=nt(t.minus(n),r,0,1,1),o=o.plus(i.times(c)),n=n.plus(i.times(r)),o.s=c.s=d.s,h=nt(c,r,s,1).minus(d).abs().cmp(nt(o,n,s,1).minus(d).abs())<1?[c,r]:[o,n],p.precision=l,Y=!0,h};I.toHexadecimal=I.toHex=function(t,e){return ui(this,16,t,e)};I.toNearest=function(t,e){var n=this,r=n.constructor;if(n=new r(n),t==null){if(!n.d)return n;t=new r(1),e=r.rounding}else{if(t=new r(t),e===void 0?e=r.rounding:St(e,0,8),!n.d)return t.s?n:t;if(!t.d)return t.s&&(t.s=n.s),t}return t.d[0]?(Y=!1,n=nt(n,t,0,e,1).times(t),Y=!0,Z(n)):(t.s=n.s,n=t),n};I.toNumber=function(){return+this};I.toOctal=function(t,e){return ui(this,8,t,e)};I.toPower=I.pow=function(t){var e,n,r,i,s,a,u=this,o=u.constructor,c=+(t=new o(t));if(!u.d||!t.d||!u.d[0]||!t.d[0])return new o(pt(+u,c));if(u=new o(u),u.eq(1))return u;if(r=o.precision,s=o.rounding,t.eq(1))return Z(u,r,s);if(e=At(t.e/X),e>=t.d.length-1&&(n=c<0?-c:c)<=Go)return i=Ks(o,u,n,r),t.s<0?new o(1).div(i):Z(i,r,s);if(a=u.s,a<0){if(e<t.d.length-1)return new o(NaN);if((t.d[e]&1)==0&&(a=1),u.e==0&&u.d[0]==1&&u.d.length==1)return u.s=a,u}return n=pt(+u,c),e=n==0||!isFinite(n)?At(c*(Math.log("0."+yt(u.d))/Math.LN10+u.e+1)):new o(n+"").e,e>o.maxE+1||e<o.minE-1?new o(e>0?a/0:0):(Y=!1,o.rounding=u.s=1,n=Math.min(12,(e+"").length),i=Rr(t.times(me(u,r+n)),r),i.d&&(i=Z(i,r+5,1),ln(i.d,r,s)&&(e=r+10,i=Z(Rr(t.times(me(u,e+n)),e),e+5,1),+yt(i.d).slice(r+1,r+15)+1==1e14&&(i=Z(i,r+1,0)))),i.s=a,Y=!0,o.rounding=s,Z(i,r,s))};I.toPrecision=function(t,e){var n,r=this,i=r.constructor;return t===void 0?n=ee(r,r.e<=i.toExpNeg||r.e>=i.toExpPos):(St(t,1,Fe),e===void 0?e=i.rounding:St(e,0,8),r=Z(new i(r),t,e),n=ee(r,t<=r.e||r.e<=i.toExpNeg,t)),r.isNeg()&&!r.isZero()?"-"+n:n};I.toSignificantDigits=I.toSD=function(t,e){var n=this,r=n.constructor;return t===void 0?(t=r.precision,e=r.rounding):(St(t,1,Fe),e===void 0?e=r.rounding:St(e,0,8)),Z(new r(n),t,e)};I.toString=function(){var t=this,e=t.constructor,n=ee(t,t.e<=e.toExpNeg||t.e>=e.toExpPos);return t.isNeg()&&!t.isZero()?"-"+n:n};I.truncated=I.trunc=function(){return Z(new this.constructor(this),this.e+1,1)};I.valueOf=I.toJSON=function(){var t=this,e=t.constructor,n=ee(t,t.e<=e.toExpNeg||t.e>=e.toExpPos);return t.isNeg()?"-"+n:n};function yt(t){var e,n,r,i=t.length-1,s="",a=t[0];if(i>0){for(s+=a,e=1;e<i;e++)r=t[e]+"",n=X-r.length,n&&(s+=he(n)),s+=r;a=t[e],r=a+"",n=X-r.length,n&&(s+=he(n))}else if(a===0)return"0";for(;a%10===0;)a/=10;return s+a}function St(t,e,n){if(t!==~~t||t<e||t>n)throw Error(ye+t)}function ln(t,e,n,r){var i,s,a,u;for(s=t[0];s>=10;s/=10)--e;return--e<0?(e+=X,i=0):(i=Math.ceil((e+1)/X),e%=X),s=pt(10,X-e),u=t[i]%s|0,r==null?e<3?(e==0?u=u/100|0:e==1&&(u=u/10|0),a=n<4&&u==99999||n>3&&u==49999||u==5e4||u==0):a=(n<4&&u+1==s||n>3&&u+1==s/2)&&(t[i+1]/s/100|0)==pt(10,e-2)-1||(u==s/2||u==0)&&(t[i+1]/s/100|0)==0:e<4?(e==0?u=u/1e3|0:e==1?u=u/100|0:e==2&&(u=u/10|0),a=(r||n<4)&&u==9999||!r&&n>3&&u==4999):a=((r||n<4)&&u+1==s||!r&&n>3&&u+1==s/2)&&(t[i+1]/s/1e3|0)==pt(10,e-3)-1,a}function Mn(t,e,n){for(var r,i=[0],s,a=0,u=t.length;a<u;){for(s=i.length;s--;)i[s]*=e;for(i[0]+=Tr.indexOf(t.charAt(a++)),r=0;r<i.length;r++)i[r]>n-1&&(i[r+1]===void 0&&(i[r+1]=0),i[r+1]+=i[r]/n|0,i[r]%=n)}return i.reverse()}function Ko(t,e){var n,r,i;if(e.isZero())return e;r=e.d.length,r<32?(n=Math.ceil(r/3),i=(1/or(4,n)).toString()):(n=16,i="2.3283064365386962890625e-10"),t.precision+=n,e=Ve(t,1,e.times(i),new t(1));for(var s=n;s--;){var a=e.times(e);e=a.times(a).minus(a).times(8).plus(1)}return t.precision-=n,e}var nt=function(){function t(r,i,s){var a,u=0,o=r.length;for(r=r.slice();o--;)a=r[o]*i+u,r[o]=a%s|0,u=a/s|0;return u&&r.unshift(u),r}function e(r,i,s,a){var u,o;if(s!=a)o=s>a?1:-1;else for(u=o=0;u<s;u++)if(r[u]!=i[u]){o=r[u]>i[u]?1:-1;break}return o}function n(r,i,s,a){for(var u=0;s--;)r[s]-=u,u=r[s]<i[s]?1:0,r[s]=u*a+r[s]-i[s];for(;!r[0]&&r.length>1;)r.shift()}return function(r,i,s,a,u,o){var c,l,f,h,d,g,p,m,v,w,y,A,E,x,B,_,N,O,M,$,q=r.constructor,H=r.s==i.s?1:-1,G=r.d,V=i.d;if(!G||!G[0]||!V||!V[0])return new q(!r.s||!i.s||(G?V&&G[0]==V[0]:!V)?NaN:G&&G[0]==0||!V?H*0:H/0);for(o?(d=1,l=r.e-i.e):(o=Zt,d=X,l=At(r.e/d)-At(i.e/d)),M=V.length,N=G.length,v=new q(H),w=v.d=[],f=0;V[f]==(G[f]||0);f++);if(V[f]>(G[f]||0)&&l--,s==null?(x=s=q.precision,a=q.rounding):u?x=s+(r.e-i.e)+1:x=s,x<0)w.push(1),g=!0;else{if(x=x/d+2|0,f=0,M==1){for(h=0,V=V[0],x++;(f<N||h)&&x--;f++)B=h*o+(G[f]||0),w[f]=B/V|0,h=B%V|0;g=h||f<N}else{for(h=o/(V[0]+1)|0,h>1&&(V=t(V,h,o),G=t(G,h,o),M=V.length,N=G.length),_=M,y=G.slice(0,M),A=y.length;A<M;)y[A++]=0;$=V.slice(),$.unshift(0),O=V[0],V[1]>=o/2&&++O;do h=0,c=e(V,y,M,A),c<0?(E=y[0],M!=A&&(E=E*o+(y[1]||0)),h=E/O|0,h>1?(h>=o&&(h=o-1),p=t(V,h,o),m=p.length,A=y.length,c=e(p,y,m,A),c==1&&(h--,n(p,M<m?$:V,m,o))):(h==0&&(c=h=1),p=V.slice()),m=p.length,m<A&&p.unshift(0),n(y,p,A,o),c==-1&&(A=y.length,c=e(V,y,M,A),c<1&&(h++,n(y,M<A?$:V,A,o))),A=y.length):c===0&&(h++,y=[0]),w[f++]=h,c&&y[0]?y[A++]=G[_]||0:(y=[G[_]],A=1);while((_++<N||y[0]!==void 0)&&x--);g=y[0]!==void 0}w[0]||w.shift()}if(d==1)v.e=l,Ws=g;else{for(f=1,h=w[0];h>=10;h/=10)f++;v.e=f+l*d-1,Z(v,u?s+v.e+1:s,a,g)}return v}}();function Z(t,e,n,r){var i,s,a,u,o,c,l,f,h,d=t.constructor;t:if(e!=null){if(f=t.d,!f)return t;for(i=1,u=f[0];u>=10;u/=10)i++;if(s=e-i,s<0)s+=X,a=e,l=f[h=0],o=l/pt(10,i-a-1)%10|0;else if(h=Math.ceil((s+1)/X),u=f.length,h>=u)if(r){for(;u++<=h;)f.push(0);l=o=0,i=1,s%=X,a=s-X+1}else break t;else{for(l=u=f[h],i=1;u>=10;u/=10)i++;s%=X,a=s-X+i,o=a<0?0:l/pt(10,i-a-1)%10|0}if(r=r||e<0||f[h+1]!==void 0||(a<0?l:l%pt(10,i-a-1)),c=n<4?(o||r)&&(n==0||n==(t.s<0?3:2)):o>5||o==5&&(n==4||r||n==6&&(s>0?a>0?l/pt(10,i-a):0:f[h-1])%10&1||n==(t.s<0?8:7)),e<1||!f[0])return f.length=0,c?(e-=t.e+1,f[0]=pt(10,(X-e%X)%X),t.e=-e||0):f[0]=t.e=0,t;if(s==0?(f.length=h,u=1,h--):(f.length=h+1,u=pt(10,X-s),f[h]=a>0?(l/pt(10,i-a)%pt(10,a)|0)*u:0),c)for(;;)if(h==0){for(s=1,a=f[0];a>=10;a/=10)s++;for(a=f[0]+=u,u=1;a>=10;a/=10)u++;s!=u&&(t.e++,f[0]==Zt&&(f[0]=1));break}else{if(f[h]+=u,f[h]!=Zt)break;f[h--]=0,u=1}for(s=f.length;f[--s]===0;)f.pop()}return Y&&(t.e>d.maxE?(t.d=null,t.e=NaN):t.e<d.minE&&(t.e=0,t.d=[0])),t}function ee(t,e,n){if(!t.isFinite())return js(t);var r,i=t.e,s=yt(t.d),a=s.length;return e?(n&&(r=n-a)>0?s=s.charAt(0)+"."+s.slice(1)+he(r):a>1&&(s=s.charAt(0)+"."+s.slice(1)),s=s+(t.e<0?"e":"e+")+t.e):i<0?(s="0."+he(-i-1)+s,n&&(r=n-a)>0&&(s+=he(r))):i>=a?(s+=he(i+1-a),n&&(r=n-i-1)>0&&(s=s+"."+he(r))):((r=i+1)<a&&(s=s.slice(0,r)+"."+s.slice(r)),n&&(r=n-a)>0&&(i+1===a&&(s+="."),s+=he(r))),s}function ur(t,e){var n=t[0];for(e*=X;n>=10;n/=10)e++;return e}function Vn(t,e,n){if(e>Jo)throw Y=!0,n&&(t.precision=n),Error(Zs);return Z(new t(qn),e,1,!0)}function Kt(t,e,n){if(e>Pr)throw Error(Zs);return Z(new t(Hn),e,n,!0)}function Js(t){var e=t.length-1,n=e*X+1;if(e=t[e],e){for(;e%10==0;e/=10)n--;for(e=t[0];e>=10;e/=10)n++}return n}function he(t){for(var e="";t--;)e+="0";return e}function Ks(t,e,n,r){var i,s=new t(1),a=Math.ceil(r/X+4);for(Y=!1;;){if(n%2&&(s=s.times(e),$i(s.d,a)&&(i=!0)),n=At(n/2),n===0){n=s.d.length-1,i&&s.d[n]===0&&++s.d[n];break}e=e.times(e),$i(e.d,a)}return Y=!0,s}function ki(t){return t.d[t.d.length-1]&1}function Qs(t,e,n){for(var r,i,s=new t(e[0]),a=0;++a<e.length;){if(i=new t(e[a]),!i.s){s=i;break}r=s.cmp(i),(r===n||r===0&&s.s===n)&&(s=i)}return s}function Rr(t,e){var n,r,i,s,a,u,o,c=0,l=0,f=0,h=t.constructor,d=h.rounding,g=h.precision;if(!t.d||!t.d[0]||t.e>17)return new h(t.d?t.d[0]?t.s<0?0:1/0:1:t.s?t.s<0?0:t:NaN);for(e==null?(Y=!1,o=g):o=e,u=new h(.03125);t.e>-2;)t=t.times(u),f+=5;for(r=Math.log(pt(2,f))/Math.LN10*2+5|0,o+=r,n=s=a=new h(1),h.precision=o;;){if(s=Z(s.times(t),o,1),n=n.times(++l),u=a.plus(nt(s,n,o,1)),yt(u.d).slice(0,o)===yt(a.d).slice(0,o)){for(i=f;i--;)a=Z(a.times(a),o,1);if(e==null)if(c<3&&ln(a.d,o-r,d,c))h.precision=o+=10,n=s=u=new h(1),l=0,c++;else return Z(a,h.precision=g,d,Y=!0);else return h.precision=g,a}a=u}}function me(t,e){var n,r,i,s,a,u,o,c,l,f,h,d=1,g=10,p=t,m=p.d,v=p.constructor,w=v.rounding,y=v.precision;if(p.s<0||!m||!m[0]||!p.e&&m[0]==1&&m.length==1)return new v(m&&!m[0]?-1/0:p.s!=1?NaN:m?0:p);if(e==null?(Y=!1,l=y):l=e,v.precision=l+=g,n=yt(m),r=n.charAt(0),Math.abs(s=p.e)<15e14){for(;r<7&&r!=1||r==1&&n.charAt(1)>3;)p=p.times(t),n=yt(p.d),r=n.charAt(0),d++;s=p.e,r>1?(p=new v("0."+n),s++):p=new v(r+"."+n.slice(1))}else return c=Vn(v,l+2,y).times(s+""),p=me(new v(r+"."+n.slice(1)),l-g).plus(c),v.precision=y,e==null?Z(p,y,w,Y=!0):p;for(f=p,o=a=p=nt(p.minus(1),p.plus(1),l,1),h=Z(p.times(p),l,1),i=3;;){if(a=Z(a.times(h),l,1),c=o.plus(nt(a,new v(i),l,1)),yt(c.d).slice(0,l)===yt(o.d).slice(0,l))if(o=o.times(2),s!==0&&(o=o.plus(Vn(v,l+2,y).times(s+""))),o=nt(o,new v(d),l,1),e==null)if(ln(o.d,l-g,w,u))v.precision=l+=g,c=a=p=nt(f.minus(1),f.plus(1),l,1),h=Z(p.times(p),l,1),i=u=1;else return Z(o,v.precision=y,w,Y=!0);else return v.precision=y,o;o=c,i+=2}}function js(t){return String(t.s*t.s/0)}function Sn(t,e){var n,r,i;for((n=e.indexOf("."))>-1&&(e=e.replace(".","")),(r=e.search(/e/i))>0?(n<0&&(n=r),n+=+e.slice(r+1),e=e.substring(0,r)):n<0&&(n=e.length),r=0;e.charCodeAt(r)===48;r++);for(i=e.length;e.charCodeAt(i-1)===48;--i);if(e=e.slice(r,i),e){if(i-=r,t.e=n=n-r-1,t.d=[],r=(n+1)%X,n<0&&(r+=X),r<i){for(r&&t.d.push(+e.slice(0,r)),i-=X;r<i;)t.d.push(+e.slice(r,r+=X));e=e.slice(r),r=X-e.length}else r-=i;for(;r--;)e+="0";t.d.push(+e),Y&&(t.e>t.constructor.maxE?(t.d=null,t.e=NaN):t.e<t.constructor.minE&&(t.e=0,t.d=[0]))}else t.e=0,t.d=[0];return t}function Qo(t,e){var n,r,i,s,a,u,o,c,l;if(e.indexOf("_")>-1){if(e=e.replace(/(\d)_(?=\d)/g,"$1"),Gs.test(e))return Sn(t,e)}else if(e==="Infinity"||e==="NaN")return+e||(t.s=NaN),t.e=NaN,t.d=null,t;if(Xo.test(e))n=16,e=e.toLowerCase();else if(Zo.test(e))n=2;else if(Yo.test(e))n=8;else throw Error(ye+e);for(s=e.search(/p/i),s>0?(o=+e.slice(s+1),e=e.substring(2,s)):e=e.slice(2),s=e.indexOf("."),a=s>=0,r=t.constructor,a&&(e=e.replace(".",""),u=e.length,s=u-s,i=Ks(r,new r(n),s,s*2)),c=Mn(e,n,Zt),l=c.length-1,s=l;c[s]===0;--s)c.pop();return s<0?new r(t.s*0):(t.e=ur(c,l),t.d=c,Y=!1,a&&(t=nt(t,i,u*4)),o&&(t=t.times(Math.abs(o)<54?pt(2,o):We.pow(2,o))),Y=!0,t)}function jo(t,e){var n,r=e.d.length;if(r<3)return e.isZero()?e:Ve(t,2,e,e);n=1.4*Math.sqrt(r),n=n>16?16:n|0,e=e.times(1/or(5,n)),e=Ve(t,2,e,e);for(var i,s=new t(5),a=new t(16),u=new t(20);n--;)i=e.times(e),e=e.times(s.plus(i.times(a.times(i).minus(u))));return e}function Ve(t,e,n,r,i){var s,a,u,o,c=t.precision,l=Math.ceil(c/X);for(Y=!1,o=n.times(n),u=new t(r);;){if(a=nt(u.times(o),new t(e++*e++),c,1),u=i?r.plus(a):r.minus(a),r=nt(a.times(o),new t(e++*e++),c,1),a=u.plus(r),a.d[l]!==void 0){for(s=l;a.d[s]===u.d[s]&&s--;);if(s==-1)break}s=u,u=r,r=a,a=s}return Y=!0,a.d.length=l+1,a}function or(t,e){for(var n=t;--e;)n*=t;return n}function ta(t,e){var n,r=e.s<0,i=Kt(t,t.precision,1),s=i.times(.5);if(e=e.abs(),e.lte(s))return ae=r?4:1,e;if(n=e.divToInt(i),n.isZero())ae=r?3:2;else{if(e=e.minus(n.times(i)),e.lte(s))return ae=ki(n)?r?2:3:r?4:1,e;ae=ki(n)?r?1:4:r?3:2}return e.minus(i).abs()}function ui(t,e,n,r){var i,s,a,u,o,c,l,f,h,d=t.constructor,g=n!==void 0;if(g?(St(n,1,Fe),r===void 0?r=d.rounding:St(r,0,8)):(n=d.precision,r=d.rounding),!t.isFinite())l=js(t);else{for(l=ee(t),a=l.indexOf("."),g?(i=2,e==16?n=n*4-3:e==8&&(n=n*3-2)):i=e,a>=0&&(l=l.replace(".",""),h=new d(1),h.e=l.length-a,h.d=Mn(ee(h),10,i),h.e=h.d.length),f=Mn(l,10,i),s=o=f.length;f[--o]==0;)f.pop();if(!f[0])l=g?"0p+0":"0";else{if(a<0?s--:(t=new d(t),t.d=f,t.e=s,t=nt(t,h,n,r,0,i),f=t.d,s=t.e,c=Ws),a=f[n],u=i/2,c=c||f[n+1]!==void 0,c=r<4?(a!==void 0||c)&&(r===0||r===(t.s<0?3:2)):a>u||a===u&&(r===4||c||r===6&&f[n-1]&1||r===(t.s<0?8:7)),f.length=n,c)for(;++f[--n]>i-1;)f[n]=0,n||(++s,f.unshift(1));for(o=f.length;!f[o-1];--o);for(a=0,l="";a<o;a++)l+=Tr.charAt(f[a]);if(g){if(o>1)if(e==16||e==8){for(a=e==16?4:3,--o;o%a;o++)l+="0";for(f=Mn(l,i,e),o=f.length;!f[o-1];--o);for(a=1,l="1.";a<o;a++)l+=Tr.charAt(f[a])}else l=l.charAt(0)+"."+l.slice(1);l=l+(s<0?"p":"p+")+s}else if(s<0){for(;++s;)l="0"+l;l="0."+l}else if(++s>o)for(s-=o;s--;)l+="0";else s<o&&(l=l.slice(0,s)+"."+l.slice(s))}l=(e==16?"0x":e==2?"0b":e==8?"0o":"")+l}return t.s<0?"-"+l:l}function $i(t,e){if(t.length>e)return t.length=e,!0}function tc(t){return new this(t).abs()}function ec(t){return new this(t).acos()}function nc(t){return new this(t).acosh()}function rc(t,e){return new this(t).plus(e)}function ic(t){return new this(t).asin()}function sc(t){return new this(t).asinh()}function ac(t){return new this(t).atan()}function uc(t){return new this(t).atanh()}function oc(t,e){t=new this(t),e=new this(e);var n,r=this.precision,i=this.rounding,s=r+4;return!t.s||!e.s?n=new this(NaN):!t.d&&!e.d?(n=Kt(this,s,1).times(e.s>0?.25:.75),n.s=t.s):!e.d||t.isZero()?(n=e.s<0?Kt(this,r,i):new this(0),n.s=t.s):!t.d||e.isZero()?(n=Kt(this,s,1).times(.5),n.s=t.s):e.s<0?(this.precision=s,this.rounding=1,n=this.atan(nt(t,e,s,1)),e=Kt(this,s,1),this.precision=r,this.rounding=i,n=t.s<0?n.minus(e):n.plus(e)):n=this.atan(nt(t,e,s,1)),n}function cc(t){return new this(t).cbrt()}function lc(t){return Z(t=new this(t),t.e+1,2)}function fc(t,e,n){return new this(t).clamp(e,n)}function hc(t){if(!t||typeof t!="object")throw Error(ar+"Object expected");var e,n,r,i=t.defaults===!0,s=["precision",1,Fe,"rounding",0,8,"toExpNeg",-9e15,0,"toExpPos",0,Nr,"maxE",0,Nr,"minE",-9e15,0,"modulo",0,9];for(e=0;e<s.length;e+=3)if(n=s[e],i&&(this[n]=Ir[n]),(r=t[n])!==void 0)if(At(r)===r&&r>=s[e+1]&&r<=s[e+2])this[n]=r;else throw Error(ye+n+": "+r);if(n="crypto",i&&(this[n]=Ir[n]),(r=t[n])!==void 0)if(r===!0||r===!1||r===0||r===1)if(r)if(typeof crypto<"u"&&crypto&&(crypto.getRandomValues||crypto.randomBytes))this[n]=!0;else throw Error(Xs);else this[n]=!1;else throw Error(ye+n+": "+r);return this}function pc(t){return new this(t).cos()}function dc(t){return new this(t).cosh()}function ea(t){var e,n,r;function i(s){var a,u,o,c=this;if(!(c instanceof i))return new i(s);if(c.constructor=i,Ui(s)){c.s=s.s,Y?!s.d||s.e>i.maxE?(c.e=NaN,c.d=null):s.e<i.minE?(c.e=0,c.d=[0]):(c.e=s.e,c.d=s.d.slice()):(c.e=s.e,c.d=s.d?s.d.slice():s.d);return}if(o=typeof s,o==="number"){if(s===0){c.s=1/s<0?-1:1,c.e=0,c.d=[0];return}if(s<0?(s=-s,c.s=-1):c.s=1,s===~~s&&s<1e7){for(a=0,u=s;u>=10;u/=10)a++;Y?a>i.maxE?(c.e=NaN,c.d=null):a<i.minE?(c.e=0,c.d=[0]):(c.e=a,c.d=[s]):(c.e=a,c.d=[s]);return}if(s*0!==0){s||(c.s=NaN),c.e=NaN,c.d=null;return}return Sn(c,s.toString())}if(o==="string")return(u=s.charCodeAt(0))===45?(s=s.slice(1),c.s=-1):(u===43&&(s=s.slice(1)),c.s=1),Gs.test(s)?Sn(c,s):Qo(c,s);if(o==="bigint")return s<0?(s=-s,c.s=-1):c.s=1,Sn(c,s.toString());throw Error(ye+s)}if(i.prototype=I,i.ROUND_UP=0,i.ROUND_DOWN=1,i.ROUND_CEIL=2,i.ROUND_FLOOR=3,i.ROUND_HALF_UP=4,i.ROUND_HALF_DOWN=5,i.ROUND_HALF_EVEN=6,i.ROUND_HALF_CEIL=7,i.ROUND_HALF_FLOOR=8,i.EUCLID=9,i.config=i.set=hc,i.clone=ea,i.isDecimal=Ui,i.abs=tc,i.acos=ec,i.acosh=nc,i.add=rc,i.asin=ic,i.asinh=sc,i.atan=ac,i.atanh=uc,i.atan2=oc,i.cbrt=cc,i.ceil=lc,i.clamp=fc,i.cos=pc,i.cosh=dc,i.div=mc,i.exp=gc,i.floor=Dc,i.hypot=vc,i.ln=yc,i.log=wc,i.log10=Ac,i.log2=Fc,i.max=Ec,i.min=Cc,i.mod=_c,i.mul=xc,i.pow=Bc,i.random=bc,i.round=Mc,i.sign=Sc,i.sin=Nc,i.sinh=Tc,i.sqrt=Ic,i.sub=Pc,i.sum=Rc,i.tan=Oc,i.tanh=Lc,i.trunc=kc,t===void 0&&(t={}),t&&t.defaults!==!0)for(r=["precision","rounding","toExpNeg","toExpPos","maxE","minE","modulo","crypto"],e=0;e<r.length;)t.hasOwnProperty(n=r[e++])||(t[n]=this[n]);return i.config(t),i}function mc(t,e){return new this(t).div(e)}function gc(t){return new this(t).exp()}function Dc(t){return Z(t=new this(t),t.e+1,3)}function vc(){var t,e,n=new this(0);for(Y=!1,t=0;t<arguments.length;)if(e=new this(arguments[t++]),e.d)n.d&&(n=n.plus(e.times(e)));else{if(e.s)return Y=!0,new this(1/0);n=e}return Y=!0,n.sqrt()}function Ui(t){return t instanceof We||t&&t.toStringTag===Ys||!1}function yc(t){return new this(t).ln()}function wc(t,e){return new this(t).log(e)}function Fc(t){return new this(t).log(2)}function Ac(t){return new this(t).log(10)}function Ec(){return Qs(this,arguments,-1)}function Cc(){return Qs(this,arguments,1)}function _c(t,e){return new this(t).mod(e)}function xc(t,e){return new this(t).mul(e)}function Bc(t,e){return new this(t).pow(e)}function bc(t){var e,n,r,i,s=0,a=new this(1),u=[];if(t===void 0?t=this.precision:St(t,1,Fe),r=Math.ceil(t/X),this.crypto)if(crypto.getRandomValues)for(e=crypto.getRandomValues(new Uint32Array(r));s<r;)i=e[s],i>=429e7?e[s]=crypto.getRandomValues(new Uint32Array(1))[0]:u[s++]=i%1e7;else if(crypto.randomBytes){for(e=crypto.randomBytes(r*=4);s<r;)i=e[s]+(e[s+1]<<8)+(e[s+2]<<16)+((e[s+3]&127)<<24),i>=214e7?crypto.randomBytes(4).copy(e,s):(u.push(i%1e7),s+=4);s=r/4}else throw Error(Xs);else for(;s<r;)u[s++]=Math.random()*1e7|0;for(r=u[--s],t%=X,r&&t&&(i=pt(10,X-t),u[s]=(r/i|0)*i);u[s]===0;s--)u.pop();if(s<0)n=0,u=[0];else{for(n=-1;u[0]===0;n-=X)u.shift();for(r=1,i=u[0];i>=10;i/=10)r++;r<X&&(n-=X-r)}return a.e=n,a.d=u,a}function Mc(t){return Z(t=new this(t),t.e+1,this.rounding)}function Sc(t){return t=new this(t),t.d?t.d[0]?t.s:0*t.s:t.s||NaN}function Nc(t){return new this(t).sin()}function Tc(t){return new this(t).sinh()}function Ic(t){return new this(t).sqrt()}function Pc(t,e){return new this(t).sub(e)}function Rc(){var t=0,e=arguments,n=new this(e[t]);for(Y=!1;n.s&&++t<e.length;)n=n.plus(e[t]);return Y=!0,Z(n,this.precision,this.rounding)}function Oc(t){return new this(t).tan()}function Lc(t){return new this(t).tanh()}function kc(t){return Z(t=new this(t),t.e+1,1)}I[Symbol.for("nodejs.util.inspect.custom")]=I.toString;I[Symbol.toStringTag]="Decimal";var We=I.constructor=ea(Ir);qn=new We(qn);Hn=new We(Hn);var $c="BigNumber",Uc=["?on","config"],zc=Q($c,Uc,t=>{var{on:e,config:n}=t,r=We.clone({precision:n.precision,modulo:We.EUCLID});return r.prototype=Object.create(r.prototype),r.prototype.type="BigNumber",r.prototype.isBigNumber=!0,r.prototype.toJSON=function(){return{mathjs:"BigNumber",value:this.toString()}},r.fromJSON=function(i){return new r(i.value)},e&&e("config",function(i,s){i.precision!==s.precision&&r.config({precision:i.precision})}),r},{isClass:!0});const wt=Math.cosh||function(t){return Math.abs(t)<1e-9?1-t:(Math.exp(t)+Math.exp(-t))*.5},Ot=Math.sinh||function(t){return Math.abs(t)<1e-9?t:(Math.exp(t)-Math.exp(-t))*.5},qc=function(t){const e=Math.PI/4;if(-e>t||t>e)return Math.cos(t)-1;const n=t*t;return n*(n*(n*(n*(n*(n*(n*(n/20922789888e3-1/87178291200)+1/479001600)-1/3628800)+1/40320)-1/720)+1/24)-1/2)},Er=function(t,e){return t=Math.abs(t),e=Math.abs(e),t<e&&([t,e]=[e,t]),t<1e8?Math.sqrt(t*t+e*e):(e/=t,t*Math.sqrt(1+e*e))},Oe=function(){throw SyntaxError("Invalid Param")};function Cr(t,e){const n=Math.abs(t),r=Math.abs(e);return t===0?Math.log(r):e===0?Math.log(n):n<3e3&&r<3e3?Math.log(t*t+e*e)*.5:(t=t*.5,e=e*.5,.5*Math.log(t*t+e*e)+Math.LN2)}const Hc={re:0,im:0},Ae=function(t,e){const n=Hc;if(t==null)n.re=n.im=0;else if(e!==void 0)n.re=t,n.im=e;else switch(typeof t){case"object":if("im"in t&&"re"in t)n.re=t.re,n.im=t.im;else if("abs"in t&&"arg"in t){if(!isFinite(t.abs)&&isFinite(t.arg))return b.INFINITY;n.re=t.abs*Math.cos(t.arg),n.im=t.abs*Math.sin(t.arg)}else if("r"in t&&"phi"in t){if(!isFinite(t.r)&&isFinite(t.phi))return b.INFINITY;n.re=t.r*Math.cos(t.phi),n.im=t.r*Math.sin(t.phi)}else t.length===2?(n.re=t[0],n.im=t[1]):Oe();break;case"string":n.im=n.re=0;const r=t.replace(/_/g,"").match(/\d+\.?\d*e[+-]?\d+|\d+\.?\d*|\.\d+|./g);let i=1,s=0;r===null&&Oe();for(let a=0;a<r.length;a++){const u=r[a];u===" "||u==="	"||u===`
`||(u==="+"?i++:u==="-"?s++:u==="i"||u==="I"?(i+s===0&&Oe(),r[a+1]!==" "&&!isNaN(r[a+1])?(n.im+=parseFloat((s%2?"-":"")+r[a+1]),a++):n.im+=parseFloat((s%2?"-":"")+"1"),i=s=0):((i+s===0||isNaN(u))&&Oe(),r[a+1]==="i"||r[a+1]==="I"?(n.im+=parseFloat((s%2?"-":"")+u),a++):n.re+=parseFloat((s%2?"-":"")+u),i=s=0))}i+s>0&&Oe();break;case"number":n.im=0,n.re=t;break;default:Oe()}return isNaN(n.re)||isNaN(n.im),n};function b(t,e){if(!(this instanceof b))return new b(t,e);const n=Ae(t,e);this.re=n.re,this.im=n.im}b.prototype={re:0,im:0,sign:function(){const t=Er(this.re,this.im);return new b(this.re/t,this.im/t)},add:function(t,e){const n=Ae(t,e),r=this.isInfinite(),i=!(isFinite(n.re)&&isFinite(n.im));return r||i?r&&i?b.NAN:b.INFINITY:new b(this.re+n.re,this.im+n.im)},sub:function(t,e){const n=Ae(t,e),r=this.isInfinite(),i=!(isFinite(n.re)&&isFinite(n.im));return r||i?r&&i?b.NAN:b.INFINITY:new b(this.re-n.re,this.im-n.im)},mul:function(t,e){const n=Ae(t,e),r=this.isInfinite(),i=!(isFinite(n.re)&&isFinite(n.im)),s=this.re===0&&this.im===0,a=n.re===0&&n.im===0;return r&&a||i&&s?b.NAN:r||i?b.INFINITY:n.im===0&&this.im===0?new b(this.re*n.re,0):new b(this.re*n.re-this.im*n.im,this.re*n.im+this.im*n.re)},div:function(t,e){const n=Ae(t,e),r=this.isInfinite(),i=!(isFinite(n.re)&&isFinite(n.im)),s=this.re===0&&this.im===0,a=n.re===0&&n.im===0;if(s&&a||r&&i)return b.NAN;if(a||r)return b.INFINITY;if(s||i)return b.ZERO;if(n.im===0)return new b(this.re/n.re,this.im/n.re);if(Math.abs(n.re)<Math.abs(n.im)){const u=n.re/n.im,o=n.re*u+n.im;return new b((this.re*u+this.im)/o,(this.im*u-this.re)/o)}else{const u=n.im/n.re,o=n.im*u+n.re;return new b((this.re+this.im*u)/o,(this.im-this.re*u)/o)}},pow:function(t,e){const n=Ae(t,e),r=this.re===0&&this.im===0;if(n.re===0&&n.im===0)return b.ONE;if(n.im===0){if(this.im===0&&this.re>0)return new b(Math.pow(this.re,n.re),0);if(this.re===0)switch((n.re%4+4)%4){case 0:return new b(Math.pow(this.im,n.re),0);case 1:return new b(0,Math.pow(this.im,n.re));case 2:return new b(-Math.pow(this.im,n.re),0);case 3:return new b(0,-Math.pow(this.im,n.re))}}if(r&&n.re>0)return b.ZERO;const s=Math.atan2(this.im,this.re),a=Cr(this.re,this.im);let u=Math.exp(n.re*a-n.im*s),o=n.im*a+n.re*s;return new b(u*Math.cos(o),u*Math.sin(o))},sqrt:function(){const t=this.re,e=this.im;if(e===0)return t>=0?new b(Math.sqrt(t),0):new b(0,Math.sqrt(-t));const n=Er(t,e);let r=Math.sqrt(.5*(n+Math.abs(t))),i=Math.abs(e)/(2*r);return t>=0?new b(r,e<0?-i:i):new b(i,e<0?-r:r)},exp:function(){const t=Math.exp(this.re);return this.im===0?new b(t,0):new b(t*Math.cos(this.im),t*Math.sin(this.im))},expm1:function(){const t=this.re,e=this.im;return new b(Math.expm1(t)*Math.cos(e)+qc(e),Math.exp(t)*Math.sin(e))},log:function(){const t=this.re,e=this.im;return e===0&&t>0?new b(Math.log(t),0):new b(Cr(t,e),Math.atan2(e,t))},abs:function(){return Er(this.re,this.im)},arg:function(){return Math.atan2(this.im,this.re)},sin:function(){const t=this.re,e=this.im;return new b(Math.sin(t)*wt(e),Math.cos(t)*Ot(e))},cos:function(){const t=this.re,e=this.im;return new b(Math.cos(t)*wt(e),-Math.sin(t)*Ot(e))},tan:function(){const t=2*this.re,e=2*this.im,n=Math.cos(t)+wt(e);return new b(Math.sin(t)/n,Ot(e)/n)},cot:function(){const t=2*this.re,e=2*this.im,n=Math.cos(t)-wt(e);return new b(-Math.sin(t)/n,Ot(e)/n)},sec:function(){const t=this.re,e=this.im,n=.5*wt(2*e)+.5*Math.cos(2*t);return new b(Math.cos(t)*wt(e)/n,Math.sin(t)*Ot(e)/n)},csc:function(){const t=this.re,e=this.im,n=.5*wt(2*e)-.5*Math.cos(2*t);return new b(Math.sin(t)*wt(e)/n,-Math.cos(t)*Ot(e)/n)},asin:function(){const t=this.re,e=this.im,n=new b(e*e-t*t+1,-2*t*e).sqrt(),r=new b(n.re-e,n.im+t).log();return new b(r.im,-r.re)},acos:function(){const t=this.re,e=this.im,n=new b(e*e-t*t+1,-2*t*e).sqrt(),r=new b(n.re-e,n.im+t).log();return new b(Math.PI/2-r.im,r.re)},atan:function(){const t=this.re,e=this.im;if(t===0){if(e===1)return new b(0,1/0);if(e===-1)return new b(0,-1/0)}const n=t*t+(1-e)*(1-e),r=new b((1-e*e-t*t)/n,-2*t/n).log();return new b(-.5*r.im,.5*r.re)},acot:function(){const t=this.re,e=this.im;if(e===0)return new b(Math.atan2(1,t),0);const n=t*t+e*e;return n!==0?new b(t/n,-e/n).atan():new b(t!==0?t/0:0,e!==0?-e/0:0).atan()},asec:function(){const t=this.re,e=this.im;if(t===0&&e===0)return new b(0,1/0);const n=t*t+e*e;return n!==0?new b(t/n,-e/n).acos():new b(t!==0?t/0:0,e!==0?-e/0:0).acos()},acsc:function(){const t=this.re,e=this.im;if(t===0&&e===0)return new b(Math.PI/2,1/0);const n=t*t+e*e;return n!==0?new b(t/n,-e/n).asin():new b(t!==0?t/0:0,e!==0?-e/0:0).asin()},sinh:function(){const t=this.re,e=this.im;return new b(Ot(t)*Math.cos(e),wt(t)*Math.sin(e))},cosh:function(){const t=this.re,e=this.im;return new b(wt(t)*Math.cos(e),Ot(t)*Math.sin(e))},tanh:function(){const t=2*this.re,e=2*this.im,n=wt(t)+Math.cos(e);return new b(Ot(t)/n,Math.sin(e)/n)},coth:function(){const t=2*this.re,e=2*this.im,n=wt(t)-Math.cos(e);return new b(Ot(t)/n,-Math.sin(e)/n)},csch:function(){const t=this.re,e=this.im,n=Math.cos(2*e)-wt(2*t);return new b(-2*Ot(t)*Math.cos(e)/n,2*wt(t)*Math.sin(e)/n)},sech:function(){const t=this.re,e=this.im,n=Math.cos(2*e)+wt(2*t);return new b(2*wt(t)*Math.cos(e)/n,-2*Ot(t)*Math.sin(e)/n)},asinh:function(){let t=this.im;this.im=-this.re,this.re=t;const e=this.asin();return this.re=-this.im,this.im=t,t=e.re,e.re=-e.im,e.im=t,e},acosh:function(){const t=this.acos();if(t.im<=0){const e=t.re;t.re=-t.im,t.im=e}else{const e=t.im;t.im=-t.re,t.re=e}return t},atanh:function(){const t=this.re,e=this.im,n=t>1&&e===0,r=1-t,i=1+t,s=r*r+e*e,a=s!==0?new b((i*r-e*e)/s,(e*r+i*e)/s):new b(t!==-1?t/0:0,e!==0?e/0:0),u=a.re;return a.re=Cr(a.re,a.im)/2,a.im=Math.atan2(a.im,u)/2,n&&(a.im=-a.im),a},acoth:function(){const t=this.re,e=this.im;if(t===0&&e===0)return new b(0,Math.PI/2);const n=t*t+e*e;return n!==0?new b(t/n,-e/n).atanh():new b(t!==0?t/0:0,e!==0?-e/0:0).atanh()},acsch:function(){const t=this.re,e=this.im;if(e===0)return new b(t!==0?Math.log(t+Math.sqrt(t*t+1)):1/0,0);const n=t*t+e*e;return n!==0?new b(t/n,-e/n).asinh():new b(t!==0?t/0:0,e!==0?-e/0:0).asinh()},asech:function(){const t=this.re,e=this.im;if(this.isZero())return b.INFINITY;const n=t*t+e*e;return n!==0?new b(t/n,-e/n).acosh():new b(t!==0?t/0:0,e!==0?-e/0:0).acosh()},inverse:function(){if(this.isZero())return b.INFINITY;if(this.isInfinite())return b.ZERO;const t=this.re,e=this.im,n=t*t+e*e;return new b(t/n,-e/n)},conjugate:function(){return new b(this.re,-this.im)},neg:function(){return new b(-this.re,-this.im)},ceil:function(t){return t=Math.pow(10,t||0),new b(Math.ceil(this.re*t)/t,Math.ceil(this.im*t)/t)},floor:function(t){return t=Math.pow(10,t||0),new b(Math.floor(this.re*t)/t,Math.floor(this.im*t)/t)},round:function(t){return t=Math.pow(10,t||0),new b(Math.round(this.re*t)/t,Math.round(this.im*t)/t)},equals:function(t,e){const n=Ae(t,e);return Math.abs(n.re-this.re)<=b.EPSILON&&Math.abs(n.im-this.im)<=b.EPSILON},clone:function(){return new b(this.re,this.im)},toString:function(){let t=this.re,e=this.im,n="";return this.isNaN()?"NaN":this.isInfinite()?"Infinity":(Math.abs(t)<b.EPSILON&&(t=0),Math.abs(e)<b.EPSILON&&(e=0),e===0?n+t:(t!==0?(n+=t,n+=" ",e<0?(e=-e,n+="-"):n+="+",n+=" "):e<0&&(e=-e,n+="-"),e!==1&&(n+=e),n+"i"))},toVector:function(){return[this.re,this.im]},valueOf:function(){return this.im===0?this.re:null},isNaN:function(){return isNaN(this.re)||isNaN(this.im)},isZero:function(){return this.im===0&&this.re===0},isFinite:function(){return isFinite(this.re)&&isFinite(this.im)},isInfinite:function(){return!this.isFinite()}};b.ZERO=new b(0,0);b.ONE=new b(1,0);b.I=new b(0,1);b.PI=new b(Math.PI,0);b.E=new b(Math.E,0);b.INFINITY=new b(1/0,1/0);b.NAN=new b(NaN,NaN);b.EPSILON=1e-15;var Vc="Complex",Wc=[],Zc=Q(Vc,Wc,()=>(Object.defineProperty(b,"name",{value:"Complex"}),b.prototype.constructor=b,b.prototype.type="Complex",b.prototype.isComplex=!0,b.prototype.toJSON=function(){return{mathjs:"Complex",re:this.re,im:this.im}},b.prototype.toPolar=function(){return{r:this.abs(),phi:this.arg()}},b.prototype.format=function(t){var e="",n=this.im,r=this.re,i=Sr(this.re,t),s=Sr(this.im,t),a=it(t)?t:t?t.precision:null;if(a!==null){var u=Math.pow(10,-a);Math.abs(r/n)<u&&(r=0),Math.abs(n/r)<u&&(n=0)}return n===0?e=i:r===0?n===1?e="i":n===-1?e="-i":e=s+"i":n<0?n===-1?e=i+" - i":e=i+" - "+s.substring(1)+"i":n===1?e=i+" + i":e=i+" + "+s+"i",e},b.fromPolar=function(t){switch(arguments.length){case 1:{var e=arguments[0];if(typeof e=="object")return b(e);throw new TypeError("Input has to be an object with r and phi keys.")}case 2:{var n=arguments[0],r=arguments[1];if(it(n)){if(Us(r)&&r.hasBase("ANGLE")&&(r=r.toNumber("rad")),it(r))return new b({r:n,phi:r});throw new TypeError("Phi is not a number nor an angle unit.")}else throw new TypeError("Radius r is not a number.")}default:throw new SyntaxError("Wrong number of arguments in function fromPolar")}},b.prototype.valueOf=b.prototype.toString,b.fromJSON=function(t){return new b(t)},b.compare=function(t,e){return t.re>e.re?1:t.re<e.re?-1:t.im>e.im?1:t.im<e.im?-1:0},b),{isClass:!0});typeof BigInt>"u"&&(BigInt=function(t){if(isNaN(t))throw new Error("");return t});const W=BigInt(0),J=BigInt(1),fn=BigInt(2),Or=BigInt(5),bt=BigInt(10),Xc=2e3,k={s:J,n:W,d:J};function re(t,e){try{t=BigInt(t)}catch{throw le()}return t*e}function Ut(t){return typeof t=="bigint"?t:Math.floor(t)}function at(t,e){if(e===W)throw oi();const n=Object.create(Lt.prototype);n.s=t<W?-J:J,t=t<W?-t:t;const r=Ce(t,e);return n.n=t/r,n.d=e/r,n}function Le(t){const e={};let n=t,r=fn,i=Or-J;for(;i<=n;){for(;n%r===W;)n/=r,e[r]=(e[r]||W)+J;i+=J+fn*r++}return n!==t?n>1&&(e[n]=(e[n]||W)+J):e[t]=(e[t]||W)+J,e}const mt=function(t,e){let n=W,r=J,i=J;if(t!=null)if(e!==void 0){if(typeof t=="bigint")n=t;else{if(isNaN(t))throw le();if(t%1!==0)throw zi();n=BigInt(t)}if(typeof e=="bigint")r=e;else{if(isNaN(e))throw le();if(e%1!==0)throw zi();r=BigInt(e)}i=n*r}else if(typeof t=="object"){if("d"in t&&"n"in t)n=BigInt(t.n),r=BigInt(t.d),"s"in t&&(n*=BigInt(t.s));else if(0 in t)n=BigInt(t[0]),1 in t&&(r=BigInt(t[1]));else if(typeof t=="bigint")n=t;else throw le();i=n*r}else if(typeof t=="number"){if(isNaN(t))throw le();if(t<0&&(i=-J,t=-t),t%1===0)n=BigInt(t);else{let s=1,a=0,u=1,o=1,c=1,l=1e7;for(t>=1&&(s=10**Math.floor(1+Math.log10(t)),t/=s);u<=l&&c<=l;){let f=(a+o)/(u+c);if(t===f){u+c<=l?(n=a+o,r=u+c):c>u?(n=o,r=c):(n=a,r=u);break}else t>f?(a+=o,u+=c):(o+=a,c+=u),u>l?(n=o,r=c):(n=a,r=u)}n=BigInt(n)*BigInt(s),r=BigInt(r)}}else if(typeof t=="string"){let s=0,a=W,u=W,o=W,c=J,l=J,f=t.replace(/_/g,"").match(/\d+|./g);if(f===null)throw le();if(f[s]==="-"?(i=-J,s++):f[s]==="+"&&s++,f.length===s+1?u=re(f[s++],i):f[s+1]==="."||f[s]==="."?(f[s]!=="."&&(a=re(f[s++],i)),s++,(s+1===f.length||f[s+1]==="("&&f[s+3]===")"||f[s+1]==="'"&&f[s+3]==="'")&&(u=re(f[s],i),c=bt**BigInt(f[s].length),s++),(f[s]==="("&&f[s+2]===")"||f[s]==="'"&&f[s+2]==="'")&&(o=re(f[s+1],i),l=bt**BigInt(f[s+1].length)-J,s+=3)):f[s+1]==="/"||f[s+1]===":"?(u=re(f[s],i),c=re(f[s+2],J),s+=3):f[s+3]==="/"&&f[s+1]===" "&&(a=re(f[s],i),u=re(f[s+2],i),c=re(f[s+4],J),s+=5),f.length<=s)r=c*l,i=n=o+r*a+l*u;else throw le()}else if(typeof t=="bigint")n=t,i=t,r=J;else throw le();if(r===W)throw oi();k.s=i<W?-J:J,k.n=n<W?-n:n,k.d=r<W?-r:r};function Yc(t,e,n){let r=J;for(;e>W;t=t*t%n,e>>=J)e&J&&(r=r*t%n);return r}function Gc(t,e){for(;e%fn===W;e/=fn);for(;e%Or===W;e/=Or);if(e===J)return W;let n=bt%e,r=1;for(;n!==J;r++)if(n=n*bt%e,r>Xc)return W;return BigInt(r)}function Jc(t,e,n){let r=J,i=Yc(bt,n,e);for(let s=0;s<300;s++){if(r===i)return BigInt(s);r=r*bt%e,i=i*bt%e}return 0}function Ce(t,e){if(!t)return e;if(!e)return t;for(;;){if(t%=e,!t)return e;if(e%=t,!e)return t}}function Lt(t,e){if(mt(t,e),this instanceof Lt)t=Ce(k.d,k.n),this.s=k.s,this.n=k.n/t,this.d=k.d/t;else return at(k.s*k.n,k.d)}var oi=function(){return new Error("Division by Zero")},le=function(){return new Error("Invalid argument")},zi=function(){return new Error("Parameters must be integer")};Lt.prototype={s:J,n:W,d:J,abs:function(){return at(this.n,this.d)},neg:function(){return at(-this.s*this.n,this.d)},add:function(t,e){return mt(t,e),at(this.s*this.n*k.d+k.s*this.d*k.n,this.d*k.d)},sub:function(t,e){return mt(t,e),at(this.s*this.n*k.d-k.s*this.d*k.n,this.d*k.d)},mul:function(t,e){return mt(t,e),at(this.s*k.s*this.n*k.n,this.d*k.d)},div:function(t,e){return mt(t,e),at(this.s*k.s*this.n*k.d,this.d*k.n)},clone:function(){return at(this.s*this.n,this.d)},mod:function(t,e){if(t===void 0)return at(this.s*this.n%this.d,J);if(mt(t,e),W===k.n*this.d)throw oi();return at(this.s*(k.d*this.n)%(k.n*this.d),k.d*this.d)},gcd:function(t,e){return mt(t,e),at(Ce(k.n,this.n)*Ce(k.d,this.d),k.d*this.d)},lcm:function(t,e){return mt(t,e),k.n===W&&this.n===W?at(W,J):at(k.n*this.n,Ce(k.n,this.n)*Ce(k.d,this.d))},inverse:function(){return at(this.s*this.d,this.n)},pow:function(t,e){if(mt(t,e),k.d===J)return k.s<W?at((this.s*this.d)**k.n,this.n**k.n):at((this.s*this.n)**k.n,this.d**k.n);if(this.s<W)return null;let n=Le(this.n),r=Le(this.d),i=J,s=J;for(let a in n)if(a!=="1"){if(a==="0"){i=W;break}if(n[a]*=k.n,n[a]%k.d===W)n[a]/=k.d;else return null;i*=BigInt(a)**n[a]}for(let a in r)if(a!=="1"){if(r[a]*=k.n,r[a]%k.d===W)r[a]/=k.d;else return null;s*=BigInt(a)**r[a]}return k.s<W?at(s,i):at(i,s)},log:function(t,e){if(mt(t,e),this.s<=W||k.s<=W)return null;const n={},r=Le(k.n),i=Le(k.d),s=Le(this.n),a=Le(this.d);for(const c in i)r[c]=(r[c]||W)-i[c];for(const c in a)s[c]=(s[c]||W)-a[c];for(const c in r)c!=="1"&&(n[c]=!0);for(const c in s)c!=="1"&&(n[c]=!0);let u=null,o=null;for(const c in n){const l=r[c]||W,f=s[c]||W;if(l===W){if(f!==W)return null;continue}let h=f,d=l;const g=Ce(h,d);if(h/=g,d/=g,u===null&&o===null)u=h,o=d;else if(h*o!==u*d)return null}return u!==null&&o!==null?at(u,o):null},equals:function(t,e){return mt(t,e),this.s*this.n*k.d===k.s*k.n*this.d},lt:function(t,e){return mt(t,e),this.s*this.n*k.d<k.s*k.n*this.d},lte:function(t,e){return mt(t,e),this.s*this.n*k.d<=k.s*k.n*this.d},gt:function(t,e){return mt(t,e),this.s*this.n*k.d>k.s*k.n*this.d},gte:function(t,e){return mt(t,e),this.s*this.n*k.d>=k.s*k.n*this.d},compare:function(t,e){mt(t,e);let n=this.s*this.n*k.d-k.s*k.n*this.d;return(W<n)-(n<W)},ceil:function(t){return t=bt**BigInt(t||0),at(Ut(this.s*t*this.n/this.d)+(t*this.n%this.d>W&&this.s>=W?J:W),t)},floor:function(t){return t=bt**BigInt(t||0),at(Ut(this.s*t*this.n/this.d)-(t*this.n%this.d>W&&this.s<W?J:W),t)},round:function(t){return t=bt**BigInt(t||0),at(Ut(this.s*t*this.n/this.d)+this.s*((this.s>=W?J:W)+fn*(t*this.n%this.d)>this.d?J:W),t)},roundTo:function(t,e){mt(t,e);const n=this.n*k.d,r=this.d*k.n,i=n%r;let s=Ut(n/r);return i+i>=r&&s++,at(this.s*s*k.n,k.d)},divisible:function(t,e){return mt(t,e),!(!(k.n*this.d)||this.n*k.d%(k.n*this.d))},valueOf:function(){return Number(this.s*this.n)/Number(this.d)},toString:function(t){let e=this.n,n=this.d;t=t||15;let r=Gc(e,n),i=Jc(e,n,r),s=this.s<W?"-":"";if(s+=Ut(e/n),e%=n,e*=bt,e&&(s+="."),r){for(let a=i;a--;)s+=Ut(e/n),e%=n,e*=bt;s+="(";for(let a=r;a--;)s+=Ut(e/n),e%=n,e*=bt;s+=")"}else for(let a=t;e&&a--;)s+=Ut(e/n),e%=n,e*=bt;return s},toFraction:function(t){let e=this.n,n=this.d,r=this.s<W?"-":"";if(n===J)r+=e;else{let i=Ut(e/n);t&&i>W&&(r+=i,r+=" ",e%=n),r+=e,r+="/",r+=n}return r},toLatex:function(t){let e=this.n,n=this.d,r=this.s<W?"-":"";if(n===J)r+=e;else{let i=Ut(e/n);t&&i>W&&(r+=i,e%=n),r+="\\frac{",r+=e,r+="}{",r+=n,r+="}"}return r},toContinued:function(){let t=this.n,e=this.d,n=[];do{n.push(Ut(t/e));let r=t%e;t=e,e=r}while(t!==J);return n},simplify:function(t){const e=BigInt(1/(t||.001)|0),n=this.abs(),r=n.toContinued();for(let i=1;i<r.length;i++){let s=at(r[i-1],J);for(let u=i-2;u>=0;u--)s=s.inverse().add(r[u]);let a=s.sub(n);if(a.n*e<a.d)return s.mul(this.s)}return this}};var Kc="Fraction",Qc=[],jc=Q(Kc,Qc,()=>(Object.defineProperty(Lt,"name",{value:"Fraction"}),Lt.prototype.constructor=Lt,Lt.prototype.type="Fraction",Lt.prototype.isFraction=!0,Lt.prototype.toJSON=function(){return{mathjs:"Fraction",n:String(this.s*this.n),d:String(this.d)}},Lt.fromJSON=function(t){return new Lt(t)},Lt),{isClass:!0}),tl="Matrix",el=[],nl=Q(tl,el,()=>{function t(){if(!(this instanceof t))throw new SyntaxError("Constructor must be called with the new operator")}return t.prototype.type="Matrix",t.prototype.isMatrix=!0,t.prototype.storage=function(){throw new Error("Cannot invoke storage on a Matrix interface")},t.prototype.datatype=function(){throw new Error("Cannot invoke datatype on a Matrix interface")},t.prototype.create=function(e,n){throw new Error("Cannot invoke create on a Matrix interface")},t.prototype.subset=function(e,n,r){throw new Error("Cannot invoke subset on a Matrix interface")},t.prototype.get=function(e){throw new Error("Cannot invoke get on a Matrix interface")},t.prototype.set=function(e,n,r){throw new Error("Cannot invoke set on a Matrix interface")},t.prototype.resize=function(e,n){throw new Error("Cannot invoke resize on a Matrix interface")},t.prototype.reshape=function(e,n){throw new Error("Cannot invoke reshape on a Matrix interface")},t.prototype.clone=function(){throw new Error("Cannot invoke clone on a Matrix interface")},t.prototype.size=function(){throw new Error("Cannot invoke size on a Matrix interface")},t.prototype.map=function(e,n){throw new Error("Cannot invoke map on a Matrix interface")},t.prototype.forEach=function(e){throw new Error("Cannot invoke forEach on a Matrix interface")},t.prototype[Symbol.iterator]=function(){throw new Error("Cannot iterate a Matrix interface")},t.prototype.toArray=function(){throw new Error("Cannot invoke toArray on a Matrix interface")},t.prototype.valueOf=function(){throw new Error("Cannot invoke valueOf on a Matrix interface")},t.prototype.format=function(e){throw new Error("Cannot invoke format on a Matrix interface")},t.prototype.toString=function(){throw new Error("Cannot invoke toString on a Matrix interface")},t},{isClass:!0});function _r(t,e,n){var r=t.constructor,i=new r(2),s="";if(n){if(n<1)throw new Error("size must be in greater than 0");if(!Dt(n))throw new Error("size must be an integer");if(t.greaterThan(i.pow(n-1).sub(1))||t.lessThan(i.pow(n-1).mul(-1)))throw new Error("Value must be in range [-2^".concat(n-1,", 2^").concat(n-1,"-1]"));if(!t.isInteger())throw new Error("Value must be an integer");t.lessThan(0)&&(t=t.add(i.pow(n))),s="i".concat(n)}switch(e){case 2:return"".concat(t.toBinary()).concat(s);case 8:return"".concat(t.toOctal()).concat(s);case 16:return"".concat(t.toHexadecimal()).concat(s);default:throw new Error("Base ".concat(e," not supported "))}}function rl(t,e){if(typeof e=="function")return e(t);if(!t.isFinite())return t.isNaN()?"NaN":t.gt(0)?"Infinity":"-Infinity";var{notation:n,precision:r,wordSize:i}=qs(e);switch(n){case"fixed":return sl(t,r);case"exponential":return qi(t,r);case"engineering":return il(t,r);case"bin":return _r(t,2,i);case"oct":return _r(t,8,i);case"hex":return _r(t,16,i);case"auto":{var s=Hi(e==null?void 0:e.lowerExp,-3),a=Hi(e==null?void 0:e.upperExp,5);if(t.isZero())return"0";var u,o=t.toSignificantDigits(r),c=o.e;return c>=s&&c<a?u=o.toFixed():u=qi(t,r),u.replace(/((\.\d*?)(0+))($|e)/,function(){var l=arguments[2],f=arguments[4];return l!=="."?l+f:f})}default:throw new Error('Unknown notation "'+n+'". Choose "auto", "exponential", "fixed", "bin", "oct", or "hex.')}}function il(t,e){var n=t.e,r=n%3===0?n:n<0?n-3-n%3:n-n%3,i=t.mul(Math.pow(10,-r)),s=i.toPrecision(e);if(s.includes("e")){var a=t.constructor;s=new a(s).toFixed()}return s+"e"+(n>=0?"+":"")+r.toString()}function qi(t,e){return e!==void 0?t.toExponential(e-1):t.toExponential()}function sl(t,e){return t.toFixed(e)}function Hi(t,e){return it(t)?t:vt(t)?t.toNumber():e}function Bt(t,e){var n=al(t,e);return e&&typeof e=="object"&&"truncate"in e&&n.length>e.truncate?n.substring(0,e.truncate-3)+"...":n}function al(t,e){if(typeof t=="number")return Sr(t,e);if(vt(t))return rl(t,e);if(ul(t))return!e||e.fraction!=="decimal"?"".concat(t.s*t.n,"/").concat(t.d):t.toString();if(Array.isArray(t))return na(t,e);if(Gt(t))return Vi(t);if(typeof t=="function")return t.syntax?String(t.syntax):"function";if(t&&typeof t=="object"){if(typeof t.format=="function")return t.format(e);if(t&&t.toString(e)!=={}.toString())return t.toString(e);var n=Object.keys(t).map(r=>Vi(r)+": "+Bt(t[r],e));return"{"+n.join(", ")+"}"}return String(t)}function Vi(t){for(var e=String(t),n="",r=0;r<e.length;){var i=e.charAt(r);n+=i in Wi?Wi[i]:i,r++}return'"'+n+'"'}var Wi={'"':'\\"',"\\":"\\\\","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","	":"\\t"};function na(t,e){if(Array.isArray(t)){for(var n="[",r=t.length,i=0;i<r;i++)i!==0&&(n+=", "),n+=na(t[i],e);return n+="]",n}else return Bt(t,e)}function ul(t){return t&&typeof t=="object"&&typeof t.s=="bigint"&&typeof t.n=="bigint"&&typeof t.d=="bigint"||!1}function tt(t,e,n){if(!(this instanceof tt))throw new SyntaxError("Constructor must be called with the new operator");this.actual=t,this.expected=e,this.relation=n,this.message="Dimension mismatch ("+(Array.isArray(t)?"["+t.join(", ")+"]":t)+" "+(this.relation||"!=")+" "+(Array.isArray(e)?"["+e.join(", ")+"]":e)+")",this.stack=new Error().stack}tt.prototype=new RangeError;tt.prototype.constructor=RangeError;tt.prototype.name="DimensionError";tt.prototype.isDimensionError=!0;function Te(t,e,n){if(!(this instanceof Te))throw new SyntaxError("Constructor must be called with the new operator");this.index=t,arguments.length<3?(this.min=0,this.max=e):(this.min=e,this.max=n),this.min!==void 0&&this.index<this.min?this.message="Index out of range ("+this.index+" < "+this.min+")":this.max!==void 0&&this.index>=this.max?this.message="Index out of range ("+this.index+" > "+(this.max-1)+")":this.message="Index out of range ("+this.index+")",this.stack=new Error().stack}Te.prototype=new RangeError;Te.prototype.constructor=RangeError;Te.prototype.name="IndexError";Te.prototype.isIndexError=!0;function Xt(t){for(var e=[];Array.isArray(t);)e.push(t.length),t=t[0];return e}function ra(t,e,n){var r,i=t.length;if(i!==e[n])throw new tt(i,e[n]);if(n<e.length-1){var s=n+1;for(r=0;r<i;r++){var a=t[r];if(!Array.isArray(a))throw new tt(e.length-1,e.length,"<");ra(t[r],e,s)}}else for(r=0;r<i;r++)if(Array.isArray(t[r]))throw new tt(e.length+1,e.length,">")}function Zi(t,e){var n=e.length===0;if(n){if(Array.isArray(t))throw new tt(t.length,0)}else ra(t,e,0)}function ot(t,e){if(t!==void 0){if(!it(t)||!Dt(t))throw new TypeError("Index must be an integer (value: "+t+")");if(t<0||typeof e=="number"&&t>=e)throw new Te(t,e)}}function Xi(t,e,n){if(!Array.isArray(e))throw new TypeError("Array expected");if(e.length===0)throw new Error("Resizing to scalar is not supported");e.forEach(function(i){if(!it(i)||!Dt(i)||i<0)throw new TypeError("Invalid size, must contain positive integers (size: "+Bt(e)+")")}),(it(t)||vt(t))&&(t=[t]);var r=n!==void 0?n:0;return Lr(t,e,0,r),t}function Lr(t,e,n,r){var i,s,a=t.length,u=e[n],o=Math.min(a,u);if(t.length=u,n<e.length-1){var c=n+1;for(i=0;i<o;i++)s=t[i],Array.isArray(s)||(s=[s],t[i]=s),Lr(s,e,c,r);for(i=o;i<u;i++)s=[],t[i]=s,Lr(s,e,c,r)}else{for(i=0;i<o;i++)for(;Array.isArray(t[i]);)t[i]=t[i][0];for(i=o;i<u;i++)t[i]=r}}function ia(t,e){var n=cl(t,!0),r=n.length;if(!Array.isArray(t)||!Array.isArray(e))throw new TypeError("Array expected");if(e.length===0)throw new tt(0,r,"!=");e=ci(e,r);var i=sa(e);if(r!==i)throw new tt(i,r,"!=");try{return ol(n,e)}catch(s){throw s instanceof tt?new tt(i,r,"!="):s}}function ci(t,e){var n=sa(t),r=t.slice(),i=-1,s=t.indexOf(i),a=t.indexOf(i,s+1)>=0;if(a)throw new Error("More than one wildcard in sizes");var u=s>=0,o=e%n===0;if(u)if(o)r[s]=-e/n;else throw new Error("Could not replace wildcard, since "+e+" is no multiple of "+-n);return r}function sa(t){return t.reduce((e,n)=>e*n,1)}function ol(t,e){for(var n=t,r,i=e.length-1;i>0;i--){var s=e[i];r=[];for(var a=n.length/s,u=0;u<a;u++)r.push(n.slice(u*s,(u+1)*s));n=r}return n}function aa(t,e,n,r){var i=r||Xt(t);if(n)for(var s=0;s<n;s++)t=[t],i.unshift(1);for(t=ua(t,e,0);i.length<e;)i.push(1);return t}function ua(t,e,n){var r,i;if(Array.isArray(t)){var s=n+1;for(r=0,i=t.length;r<i;r++)t[r]=ua(t[r],e,s)}else for(var a=n;a<e;a++)t=[t];return t}function cl(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(!Array.isArray(t))return t;if(typeof e!="boolean")throw new TypeError("Boolean expected for second argument of flatten");var n=[];return e?i(t):r(t),n;function r(s){for(var a=0;a<s.length;a++){var u=s[a];Array.isArray(u)?r(u):n.push(u)}}function i(s){if(Array.isArray(s[0]))for(var a=0;a<s.length;a++)i(s[a]);else for(var u=0;u<s.length;u++)n.push(s[u])}}function li(t,e){for(var n,r=0,i=0;i<t.length;i++){var s=t[i],a=Array.isArray(s);if(i===0&&a&&(r=s.length),a&&s.length!==r)return;var u=a?li(s,e):e(s);if(n===void 0)n=u;else if(n!==u)return"mixed"}return n}function oa(t,e,n,r){if(r<n){if(t.length!==e.length)throw new tt(t.length,e.length);for(var i=[],s=0;s<t.length;s++)i[s]=oa(t[s],e[s],n,r+1);return i}else return t.concat(e)}function ca(){var t=Array.prototype.slice.call(arguments,0,-1),e=Array.prototype.slice.call(arguments,-1);if(t.length===1)return t[0];if(t.length>1)return t.slice(1).reduce(function(n,r){return oa(n,r,e,0)},t[0]);throw new Error("Wrong number of arguments in function concat")}function la(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];for(var r=e.map(h=>h.length),i=Math.max(...r),s=new Array(i).fill(null),a=0;a<e.length;a++)for(var u=e[a],o=r[a],c=0;c<o;c++){var l=i-o+c;u[c]>s[l]&&(s[l]=u[c])}for(var f=0;f<e.length;f++)fa(e[f],s);return s}function fa(t,e){for(var n=e.length,r=t.length,i=0;i<r;i++){var s=n-r+i;if(t[i]<e[s]&&t[i]>1||t[i]>e[s])throw new Error("shape mismatch: mismatch is found in arg with shape (".concat(t,") not possible to broadcast dimension ").concat(r," with size ").concat(t[i]," to size ").concat(e[s]))}}function kr(t,e){var n=Xt(t);if(ve(n,e))return t;fa(n,e);var r=la(n,e),i=r.length,s=[...Array(i-n.length).fill(1),...n],a=hl(t);n.length<i&&(a=ia(a,s),n=Xt(a));for(var u=0;u<i;u++)n[u]<r[u]&&(a=ll(a,r[u],u),n=Xt(a));return a}function ll(t,e,n){return ca(...Array(e).fill(t),n)}function ha(t,e){if(!Array.isArray(t))throw new Error("Array expected");var n=Xt(t);if(e.length!==n.length)throw new tt(e.length,n.length);for(var r=0;r<e.length;r++)ot(e[r],n[r]);return e.reduce((i,s)=>i[s],t)}function fl(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(t.length===0)return[];if(n)return s(t);var r=[];return i(t,0);function i(a,u){if(Array.isArray(a)){for(var o=a.length,c=Array(o),l=0;l<o;l++)r[u]=l,c[l]=i(a[l],u+1);return c}else return e(a,r.slice(0,u),t)}function s(a){if(Array.isArray(a)){for(var u=a.length,o=Array(u),c=0;c<u;c++)o[c]=s(a[c]);return o}else return e(a)}}function hl(t){return Ln([],t)}function Wn(t,e,n){var r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(Un.isTypedFunction(t)){var i;if(r)i=1;else{var s=(e.isMatrix?e.size():Xt(e)).map(()=>0),a=e.isMatrix?e.get(s):ha(e,s);i=ml(t,a,s,e)}var u;if(e.isMatrix&&e.dataType!=="mixed"&&e.dataType!==void 0){var o=pl(t,i);u=o!==void 0?o:t}else u=t;return i>=1&&i<=3?{isUnary:i===1,fn:function(){for(var l=arguments.length,f=new Array(l),h=0;h<l;h++)f[h]=arguments[h];return Yi(u,f.slice(0,i),n,t.name)}}:{isUnary:!1,fn:function(){for(var l=arguments.length,f=new Array(l),h=0;h<l;h++)f[h]=arguments[h];return Yi(u,f,n,t.name)}}}return r===void 0?{isUnary:dl(t),fn:t}:{isUnary:r,fn:t}}function pl(t,e){var n=[];if(Object.entries(t.signatures).forEach(r=>{var[i,s]=r;i.split(",").length===e&&n.push(s)}),n.length===1)return n[0]}function dl(t){if(t.length!==1)return!1;var e=t.toString();if(/arguments/.test(e))return!1;var n=e.match(/\(.*?\)/);return!/\.\.\./.test(n)}function ml(t,e,n,r){for(var i=[e,n,r],s=3;s>0;s--){var a=i.slice(0,s);if(Un.resolve(t,a)!==null)return s}}function Yi(t,e,n,r){try{return t(...e)}catch(i){gl(i,e,n,r)}}function gl(t,e,n,r){var i;if(t instanceof TypeError&&((i=t.data)===null||i===void 0?void 0:i.category)==="wrongType"){var s=[];throw s.push("value: ".concat(Be(e[0]))),e.length>=2&&s.push("index: ".concat(Be(e[1]))),e.length>=3&&s.push("array: ".concat(Be(e[2]))),new TypeError("Function ".concat(n," cannot apply callback arguments ")+"".concat(r,"(").concat(s.join(", "),") at index ").concat(JSON.stringify(e[1])))}else throw new TypeError("Function ".concat(n," cannot apply callback arguments ")+"to function ".concat(r,": ").concat(t.message))}var Dl="DenseMatrix",vl=["Matrix"],yl=Q(Dl,vl,t=>{var{Matrix:e}=t;function n(l,f){if(!(this instanceof n))throw new SyntaxError("Constructor must be called with the new operator");if(f&&!Gt(f))throw new Error("Invalid datatype: "+f);if(Vt(l))l.type==="DenseMatrix"?(this._data=gt(l._data),this._size=gt(l._size),this._datatype=f||l._datatype):(this._data=l.toArray(),this._size=l.size(),this._datatype=f||l._datatype);else if(l&&ht(l.data)&&ht(l.size))this._data=l.data,this._size=l.size,Zi(this._data,this._size),this._datatype=f||l.datatype;else if(ht(l))this._data=c(l),this._size=Xt(this._data),Zi(this._data,this._size),this._datatype=f;else{if(l)throw new TypeError("Unsupported type of data ("+Be(l)+")");this._data=[],this._size=[0],this._datatype=f}}n.prototype=new e,n.prototype.createDenseMatrix=function(l,f){return new n(l,f)},Object.defineProperty(n,"name",{value:"DenseMatrix"}),n.prototype.constructor=n,n.prototype.type="DenseMatrix",n.prototype.isDenseMatrix=!0,n.prototype.getDataType=function(){return li(this._data,Be)},n.prototype.storage=function(){return"dense"},n.prototype.datatype=function(){return this._datatype},n.prototype.create=function(l,f){return new n(l,f)},n.prototype.subset=function(l,f,h){switch(arguments.length){case 1:return r(this,l);case 2:case 3:return s(this,l,f,h);default:throw new SyntaxError("Wrong number of arguments")}},n.prototype.get=function(l){return ha(this._data,l)},n.prototype.set=function(l,f,h){if(!ht(l))throw new TypeError("Array expected");if(l.length<this._size.length)throw new tt(l.length,this._size.length,"<");var d,g,p,m=l.map(function(w){return w+1});o(this,m,h);var v=this._data;for(d=0,g=l.length-1;d<g;d++)p=l[d],ot(p,v.length),v=v[p];return p=l[l.length-1],ot(p,v.length),v[p]=f,this};function r(l,f){if(!si(f))throw new TypeError("Invalid index");var h=f.isScalar();if(h)return l.get(f.min());var d=f.size();if(d.length!==l._size.length)throw new tt(d.length,l._size.length);for(var g=f.min(),p=f.max(),m=0,v=l._size.length;m<v;m++)ot(g[m],l._size[m]),ot(p[m],l._size[m]);var w=new n([]),y=i(l._data,f);return w._size=y.size,w._datatype=l._datatype,w._data=y.data,w}function i(l,f){var h=f.size().length-1,d=Array(h);return{data:g(l),size:d};function g(p){var m=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,v=f.dimension(m);return d[m]=v.size()[0],m<h?v.map(w=>(ot(w,p.length),g(p[w],m+1))).valueOf():v.map(w=>(ot(w,p.length),p[w])).valueOf()}}function s(l,f,h,d){if(!f||f.isIndex!==!0)throw new TypeError("Invalid index");var g=f.size(),p=f.isScalar(),m;if(Vt(h)?(m=h.size(),h=h.valueOf()):m=Xt(h),p){if(m.length!==0)throw new TypeError("Scalar expected");l.set(f.min(),h,d)}else{if(!ve(m,g))try{m.length===0?h=kr([h],g):h=kr(h,g),m=Xt(h)}catch{}if(g.length<l._size.length)throw new tt(g.length,l._size.length,"<");if(m.length<g.length){for(var v=0,w=0;g[v]===1&&m[v]===1;)v++;for(;g[v]===1;)w++,v++;h=aa(h,g.length,w,m)}if(!ve(g,m))throw new tt(g,m,">");var y=f.max().map(function(A){return A+1});o(l,y,d),a(l._data,f,h)}return l}function a(l,f,h){var d=f.size().length-1;g(l,h);function g(p,m){var v=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,w=f.dimension(v);v<d?w.forEach((y,A)=>{ot(y,p.length),g(p[y],m[A[0]],v+1)}):w.forEach((y,A)=>{ot(y,p.length),p[y]=m[A[0]]})}}n.prototype.resize=function(l,f,h){if(!$n(l))throw new TypeError("Array or Matrix expected");var d=l.valueOf().map(p=>Array.isArray(p)&&p.length===1?p[0]:p),g=h?this.clone():this;return u(g,d,f)};function u(l,f,h){if(f.length===0){for(var d=l._data;ht(d);)d=d[0];return d}return l._size=f.slice(0),l._data=Xi(l._data,l._size,h),l}n.prototype.reshape=function(l,f){var h=f?this.clone():this;h._data=ia(h._data,l);var d=h._size.reduce((g,p)=>g*p);return h._size=ci(l,d),h};function o(l,f,h){for(var d=l._size.slice(0),g=!1;d.length<f.length;)d.push(0),g=!0;for(var p=0,m=f.length;p<m;p++)f[p]>d[p]&&(d[p]=f[p],g=!0);g&&u(l,d,h)}n.prototype.clone=function(){var l=new n({data:gt(this._data),size:gt(this._size),datatype:this._datatype});return l},n.prototype.size=function(){return this._size.slice(0)},n.prototype.map=function(l){var f=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,h=this,d=h._size.length-1;if(d<0)return h.clone();var g=Wn(l,h,"map",f),p=g.fn,m=h.create(void 0,h._datatype);if(m._size=h._size,f||g.isUnary)return m._data=x(h._data),m;if(d===0){for(var v=h.valueOf(),w=Array(v.length),y=0;y<v.length;y++)w[y]=p(v[y],[y],h);return m._data=w,m}var A=[];return m._data=E(h._data),m;function E(B){var _=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,N=Array(B.length);if(_<d)for(var O=0;O<B.length;O++)A[_]=O,N[O]=E(B[O],_+1);else for(var M=0;M<B.length;M++)A[_]=M,N[M]=p(B[M],A.slice(),h);return N}function x(B){var _=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,N=Array(B.length);if(_<d)for(var O=0;O<B.length;O++)N[O]=x(B[O],_+1);else for(var M=0;M<B.length;M++)N[M]=p(B[M]);return N}},n.prototype.forEach=function(l){var f=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,h=this,d=h._size.length-1;if(d<0)return;var g=Wn(l,h,"map",f),p=g.fn;if(f||g.isUnary){y(h._data);return}if(d===0){for(var m=0;m<h._data.length;m++)p(h._data[m],[m],h);return}var v=[];w(h._data);function w(A){var E=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;if(E<d)for(var x=0;x<A.length;x++)v[E]=x,w(A[x],E+1);else for(var B=0;B<A.length;B++)v[E]=B,p(A[B],v.slice(),h)}function y(A){var E=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;if(E<d)for(var x=0;x<A.length;x++)y(A[x],E+1);else for(var B=0;B<A.length;B++)p(A[B])}},n.prototype[Symbol.iterator]=function*(){var l=this._size.length-1;if(!(l<0)){if(l===0){for(var f=0;f<this._data.length;f++)yield{value:this._data[f],index:[f]};return}var h=[],d=function*(p,m){if(m<l)for(var v=0;v<p.length;v++)h[m]=v,yield*d(p[v],m+1);else for(var w=0;w<p.length;w++)h[m]=w,yield{value:p[w],index:h.slice()}};yield*d(this._data,0)}},n.prototype.rows=function(){var l=[],f=this.size();if(f.length!==2)throw new TypeError("Rows can only be returned for a 2D matrix.");var h=this._data;for(var d of h)l.push(new n([d],this._datatype));return l},n.prototype.columns=function(){var l=this,f=[],h=this.size();if(h.length!==2)throw new TypeError("Rows can only be returned for a 2D matrix.");for(var d=this._data,g=function(v){var w=d.map(y=>[y[v]]);f.push(new n(w,l._datatype))},p=0;p<h[1];p++)g(p);return f},n.prototype.toArray=function(){return gt(this._data)},n.prototype.valueOf=function(){return this._data},n.prototype.format=function(l){return Bt(this._data,l)},n.prototype.toString=function(){return Bt(this._data)},n.prototype.toJSON=function(){return{mathjs:"DenseMatrix",data:this._data,size:this._size,datatype:this._datatype}},n.prototype.diagonal=function(l){if(l){if(vt(l)&&(l=l.toNumber()),!it(l)||!Dt(l))throw new TypeError("The parameter k must be an integer number")}else l=0;for(var f=l>0?l:0,h=l<0?-l:0,d=this._size[0],g=this._size[1],p=Math.min(d-h,g-f),m=[],v=0;v<p;v++)m[v]=this._data[v+h][v+f];return new n({data:m,size:[p],datatype:this._datatype})},n.diagonal=function(l,f,h,d){if(!ht(l))throw new TypeError("Array expected, size parameter");if(l.length!==2)throw new Error("Only two dimensions matrix are supported");if(l=l.map(function(B){if(vt(B)&&(B=B.toNumber()),!it(B)||!Dt(B)||B<1)throw new Error("Size values must be positive integers");return B}),h){if(vt(h)&&(h=h.toNumber()),!it(h)||!Dt(h))throw new TypeError("The parameter k must be an integer number")}else h=0;var g=h>0?h:0,p=h<0?-h:0,m=l[0],v=l[1],w=Math.min(m-p,v-g),y;if(ht(f)){if(f.length!==w)throw new Error("Invalid value array length");y=function(_){return f[_]}}else if(Vt(f)){var A=f.size();if(A.length!==1||A[0]!==w)throw new Error("Invalid matrix length");y=function(_){return f.get([_])}}else y=function(){return f};d||(d=vt(y(0))?y(0).mul(0):0);var E=[];if(l.length>0){E=Xi(E,l,d);for(var x=0;x<w;x++)E[x+p][x+g]=y(x)}return new n({data:E,size:[m,v]})},n.fromJSON=function(l){return new n(l)},n.prototype.swapRows=function(l,f){if(!it(l)||!Dt(l)||!it(f)||!Dt(f))throw new Error("Row index must be positive integers");if(this._size.length!==2)throw new Error("Only two dimensional matrix is supported");return ot(l,this._size[0]),ot(f,this._size[0]),n._swapRows(l,f,this._data),this},n._swapRows=function(l,f,h){var d=h[l];h[l]=h[f],h[f]=d};function c(l){return Vt(l)?c(l.valueOf()):ht(l)?l.map(c):l}return n},{isClass:!0});function wl(t,e,n){return Vt(t)?t.map(r=>e(r),!1,!0):fl(t,e,!0)}var Gi="isInteger",Fl=["typed"],Al=Q(Gi,Fl,t=>{var{typed:e}=t;return e(Gi,{number:Dt,BigNumber:function(r){return r.isInt()},bigint:function(r){return!0},Fraction:function(r){return r.d===1n},"Array | Matrix":e.referToSelf(n=>r=>wl(r,n))})}),El=Math.PI;function Cl(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1e-9,r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0;if(n<=0)throw new Error("Relative tolerance must be greater than 0");if(r<0)throw new Error("Absolute tolerance must be at least 0");return t.isNaN()||e.isNaN()?!1:!t.isFinite()||!e.isFinite()?t.eq(e):t.eq(e)?!0:t.minus(e).abs().lte(t.constructor.max(t.constructor.max(t.abs(),e.abs()).mul(n),r))}function _l(t,e,n,r){return zn(t.re,e.re,n,r)&&zn(t.im,e.im,n,r)}var xl=Q("compareUnits",["typed"],t=>{var{typed:e}=t;return{"Unit, Unit":e.referToSelf(n=>(r,i)=>{if(!r.equalBase(i))throw new Error("Cannot compare units with different base");return e.find(n,[r.valueType(),i.valueType()])(r.value,i.value)})}}),Zn="equalScalar",Bl=["typed","config"],bl=Q(Zn,Bl,t=>{var{typed:e,config:n}=t,r=xl({typed:e});return e(Zn,{"boolean, boolean":function(s,a){return s===a},"number, number":function(s,a){return zn(s,a,n.relTol,n.absTol)},"BigNumber, BigNumber":function(s,a){return s.eq(a)||Cl(s,a,n.relTol,n.absTol)},"bigint, bigint":function(s,a){return s===a},"Fraction, Fraction":function(s,a){return s.equals(a)},"Complex, Complex":function(s,a){return _l(s,a,n.relTol,n.absTol)}},r)});Q(Zn,["typed","config"],t=>{var{typed:e,config:n}=t;return e(Zn,{"number, number":function(i,s){return zn(i,s,n.relTol,n.absTol)}})});var Ml="SparseMatrix",Sl=["typed","equalScalar","Matrix"],Nl=Q(Ml,Sl,t=>{var{typed:e,equalScalar:n,Matrix:r}=t;function i(p,m){if(!(this instanceof i))throw new SyntaxError("Constructor must be called with the new operator");if(m&&!Gt(m))throw new Error("Invalid datatype: "+m);if(Vt(p))s(this,p,m);else if(p&&ht(p.index)&&ht(p.ptr)&&ht(p.size))this._values=p.values,this._index=p.index,this._ptr=p.ptr,this._size=p.size,this._datatype=m||p.datatype;else if(ht(p))a(this,p,m);else{if(p)throw new TypeError("Unsupported type of data ("+Be(p)+")");this._values=[],this._index=[],this._ptr=[0],this._size=[0,0],this._datatype=m}}function s(p,m,v){m.type==="SparseMatrix"?(p._values=m._values?gt(m._values):void 0,p._index=gt(m._index),p._ptr=gt(m._ptr),p._size=gt(m._size),p._datatype=v||m._datatype):a(p,m.valueOf(),v||m._datatype)}function a(p,m,v){p._values=[],p._index=[],p._ptr=[],p._datatype=v;var w=m.length,y=0,A=n,E=0;if(Gt(v)&&(A=e.find(n,[v,v])||n,E=e.convert(0,v)),w>0){var x=0;do{p._ptr.push(p._index.length);for(var B=0;B<w;B++){var _=m[B];if(ht(_)){if(x===0&&y<_.length&&(y=_.length),x<_.length){var N=_[x];A(N,E)||(p._values.push(N),p._index.push(B))}}else x===0&&y<1&&(y=1),A(_,E)||(p._values.push(_),p._index.push(B))}x++}while(x<y)}p._ptr.push(p._index.length),p._size=[w,y]}i.prototype=new r,i.prototype.createSparseMatrix=function(p,m){return new i(p,m)},Object.defineProperty(i,"name",{value:"SparseMatrix"}),i.prototype.constructor=i,i.prototype.type="SparseMatrix",i.prototype.isSparseMatrix=!0,i.prototype.getDataType=function(){return li(this._values,Be)},i.prototype.storage=function(){return"sparse"},i.prototype.datatype=function(){return this._datatype},i.prototype.create=function(p,m){return new i(p,m)},i.prototype.density=function(){var p=this._size[0],m=this._size[1];return p!==0&&m!==0?this._index.length/(p*m):0},i.prototype.subset=function(p,m,v){if(!this._values)throw new Error("Cannot invoke subset on a Pattern only matrix");switch(arguments.length){case 1:return u(this,p);case 2:case 3:return o(this,p,m,v);default:throw new SyntaxError("Wrong number of arguments")}};function u(p,m){if(!si(m))throw new TypeError("Invalid index");var v=m.isScalar();if(v)return p.get(m.min());var w=m.size();if(w.length!==p._size.length)throw new tt(w.length,p._size.length);var y,A,E,x,B=m.min(),_=m.max();for(y=0,A=p._size.length;y<A;y++)ot(B[y],p._size[y]),ot(_[y],p._size[y]);var N=p._values,O=p._index,M=p._ptr,$=m.dimension(0),q=m.dimension(1),H=[],G=[];$.forEach(function(K,Nt){G[K]=Nt[0],H[K]=!0});var V=N?[]:void 0,st=[],ut=[];return q.forEach(function(K){for(ut.push(st.length),E=M[K],x=M[K+1];E<x;E++)y=O[E],H[y]===!0&&(st.push(G[y]),V&&V.push(N[E]))}),ut.push(st.length),new i({values:V,index:st,ptr:ut,size:w,datatype:p._datatype})}function o(p,m,v,w){if(!m||m.isIndex!==!0)throw new TypeError("Invalid index");var y=m.size(),A=m.isScalar(),E;if(Vt(v)?(E=v.size(),v=v.toArray()):E=Xt(v),A){if(E.length!==0)throw new TypeError("Scalar expected");p.set(m.min(),v,w)}else{if(y.length!==1&&y.length!==2)throw new tt(y.length,p._size.length,"<");if(E.length<y.length){for(var x=0,B=0;y[x]===1&&E[x]===1;)x++;for(;y[x]===1;)B++,x++;v=aa(v,y.length,B,E)}if(!ve(y,E))throw new tt(y,E,">");if(y.length===1){var _=m.dimension(0);_.forEach(function(M,$){ot(M),p.set([M,0],v[$[0]],w)})}else{var N=m.dimension(0),O=m.dimension(1);N.forEach(function(M,$){ot(M),O.forEach(function(q,H){ot(q),p.set([M,q],v[$[0]][H[0]],w)})})}}return p}i.prototype.get=function(p){if(!ht(p))throw new TypeError("Array expected");if(p.length!==this._size.length)throw new tt(p.length,this._size.length);if(!this._values)throw new Error("Cannot invoke get on a Pattern only matrix");var m=p[0],v=p[1];ot(m,this._size[0]),ot(v,this._size[1]);var w=c(m,this._ptr[v],this._ptr[v+1],this._index);return w<this._ptr[v+1]&&this._index[w]===m?this._values[w]:0},i.prototype.set=function(p,m,v){if(!ht(p))throw new TypeError("Array expected");if(p.length!==this._size.length)throw new tt(p.length,this._size.length);if(!this._values)throw new Error("Cannot invoke set on a Pattern only matrix");var w=p[0],y=p[1],A=this._size[0],E=this._size[1],x=n,B=0;Gt(this._datatype)&&(x=e.find(n,[this._datatype,this._datatype])||n,B=e.convert(0,this._datatype)),(w>A-1||y>E-1)&&(h(this,Math.max(w+1,A),Math.max(y+1,E),v),A=this._size[0],E=this._size[1]),ot(w,A),ot(y,E);var _=c(w,this._ptr[y],this._ptr[y+1],this._index);return _<this._ptr[y+1]&&this._index[_]===w?x(m,B)?l(_,y,this._values,this._index,this._ptr):this._values[_]=m:x(m,B)||f(_,w,y,m,this._values,this._index,this._ptr),this};function c(p,m,v,w){if(v-m===0)return v;for(var y=m;y<v;y++)if(w[y]===p)return y;return m}function l(p,m,v,w,y){v.splice(p,1),w.splice(p,1);for(var A=m+1;A<y.length;A++)y[A]--}function f(p,m,v,w,y,A,E){y.splice(p,0,w),A.splice(p,0,m);for(var x=v+1;x<E.length;x++)E[x]++}i.prototype.resize=function(p,m,v){if(!$n(p))throw new TypeError("Array or Matrix expected");var w=p.valueOf().map(A=>Array.isArray(A)&&A.length===1?A[0]:A);if(w.length!==2)throw new Error("Only two dimensions matrix are supported");w.forEach(function(A){if(!it(A)||!Dt(A)||A<0)throw new TypeError("Invalid size, must contain positive integers (size: "+Bt(w)+")")});var y=v?this.clone():this;return h(y,w[0],w[1],m)};function h(p,m,v,w){var y=w||0,A=n,E=0;Gt(p._datatype)&&(A=e.find(n,[p._datatype,p._datatype])||n,E=e.convert(0,p._datatype),y=e.convert(y,p._datatype));var x=!A(y,E),B=p._size[0],_=p._size[1],N,O,M;if(v>_){for(O=_;O<v;O++)if(p._ptr[O]=p._values.length,x)for(N=0;N<B;N++)p._values.push(y),p._index.push(N);p._ptr[v]=p._values.length}else v<_&&(p._ptr.splice(v+1,_-v),p._values.splice(p._ptr[v],p._values.length),p._index.splice(p._ptr[v],p._index.length));if(_=v,m>B){if(x){var $=0;for(O=0;O<_;O++){p._ptr[O]=p._ptr[O]+$,M=p._ptr[O+1]+$;var q=0;for(N=B;N<m;N++,q++)p._values.splice(M+q,0,y),p._index.splice(M+q,0,N),$++}p._ptr[_]=p._values.length}}else if(m<B){var H=0;for(O=0;O<_;O++){p._ptr[O]=p._ptr[O]-H;var G=p._ptr[O],V=p._ptr[O+1]-H;for(M=G;M<V;M++)N=p._index[M],N>m-1&&(p._values.splice(M,1),p._index.splice(M,1),H++)}p._ptr[O]=p._values.length}return p._size[0]=m,p._size[1]=v,p}i.prototype.reshape=function(p,m){if(!ht(p))throw new TypeError("Array expected");if(p.length!==2)throw new Error("Sparse matrices can only be reshaped in two dimensions");p.forEach(function(K){if(!it(K)||!Dt(K)||K<=-2||K===0)throw new TypeError("Invalid size, must contain positive integers or -1 (size: "+Bt(p)+")")});var v=this._size[0]*this._size[1];p=ci(p,v);var w=p[0]*p[1];if(v!==w)throw new Error("Reshaping sparse matrix will result in the wrong number of elements");var y=m?this.clone():this;if(this._size[0]===p[0]&&this._size[1]===p[1])return y;for(var A=[],E=0;E<y._ptr.length;E++)for(var x=0;x<y._ptr[E+1]-y._ptr[E];x++)A.push(E);for(var B=y._values.slice(),_=y._index.slice(),N=0;N<y._index.length;N++){var O=_[N],M=A[N],$=O*y._size[1]+M;A[N]=$%p[1],_[N]=Math.floor($/p[1])}y._values.length=0,y._index.length=0,y._ptr.length=p[1]+1,y._size=p.slice();for(var q=0;q<y._ptr.length;q++)y._ptr[q]=0;for(var H=0;H<B.length;H++){var G=_[H],V=A[H],st=B[H],ut=c(G,y._ptr[V],y._ptr[V+1],y._index);f(ut,G,V,st,y._values,y._index,y._ptr)}return y},i.prototype.clone=function(){var p=new i({values:this._values?gt(this._values):void 0,index:gt(this._index),ptr:gt(this._ptr),size:gt(this._size),datatype:this._datatype});return p},i.prototype.size=function(){return this._size.slice(0)},i.prototype.map=function(p,m){if(!this._values)throw new Error("Cannot invoke map on a Pattern only matrix");var v=this,w=this._size[0],y=this._size[1],A=Wn(p,v,"map"),E=function(B,_,N){return A.fn(B,[_,N],v)};return d(this,0,w-1,0,y-1,E,m)};function d(p,m,v,w,y,A,E){var x=[],B=[],_=[],N=n,O=0;Gt(p._datatype)&&(N=e.find(n,[p._datatype,p._datatype])||n,O=e.convert(0,p._datatype));for(var M=function(yr,Dn,wr){var vn=A(yr,Dn,wr);N(vn,O)||(x.push(vn),B.push(Dn))},$=w;$<=y;$++){_.push(x.length);var q=p._ptr[$],H=p._ptr[$+1];if(E)for(var G=q;G<H;G++){var V=p._index[G];V>=m&&V<=v&&M(p._values[G],V-m,$-w)}else{for(var st={},ut=q;ut<H;ut++){var K=p._index[ut];st[K]=p._values[ut]}for(var Nt=m;Nt<=v;Nt++){var vr=Nt in st?st[Nt]:0;M(vr,Nt-m,$-w)}}}return _.push(x.length),new i({values:x,index:B,ptr:_,size:[v-m+1,y-w+1]})}i.prototype.forEach=function(p,m){if(!this._values)throw new Error("Cannot invoke forEach on a Pattern only matrix");for(var v=this,w=this._size[0],y=this._size[1],A=Wn(p,v,"forEach"),E=0;E<y;E++){var x=this._ptr[E],B=this._ptr[E+1];if(m)for(var _=x;_<B;_++){var N=this._index[_];A.fn(this._values[_],[N,E],v)}else{for(var O={},M=x;M<B;M++){var $=this._index[M];O[$]=this._values[M]}for(var q=0;q<w;q++){var H=q in O?O[q]:0;A.fn(H,[q,E],v)}}}},i.prototype[Symbol.iterator]=function*(){if(!this._values)throw new Error("Cannot iterate a Pattern only matrix");for(var p=this._size[1],m=0;m<p;m++)for(var v=this._ptr[m],w=this._ptr[m+1],y=v;y<w;y++){var A=this._index[y];yield{value:this._values[y],index:[A,m]}}},i.prototype.toArray=function(){return g(this._values,this._index,this._ptr,this._size,!0)},i.prototype.valueOf=function(){return g(this._values,this._index,this._ptr,this._size,!1)};function g(p,m,v,w,y){var A=w[0],E=w[1],x=[],B,_;for(B=0;B<A;B++)for(x[B]=[],_=0;_<E;_++)x[B][_]=0;for(_=0;_<E;_++)for(var N=v[_],O=v[_+1],M=N;M<O;M++)B=m[M],x[B][_]=p?y?gt(p[M]):p[M]:1;return x}return i.prototype.format=function(p){for(var m=this._size[0],v=this._size[1],w=this.density(),y="Sparse Matrix ["+Bt(m,p)+" x "+Bt(v,p)+"] density: "+Bt(w,p)+`
`,A=0;A<v;A++)for(var E=this._ptr[A],x=this._ptr[A+1],B=E;B<x;B++){var _=this._index[B];y+=`
    (`+Bt(_,p)+", "+Bt(A,p)+") ==> "+(this._values?Bt(this._values[B],p):"X")}return y},i.prototype.toString=function(){return Bt(this.toArray())},i.prototype.toJSON=function(){return{mathjs:"SparseMatrix",values:this._values,index:this._index,ptr:this._ptr,size:this._size,datatype:this._datatype}},i.prototype.diagonal=function(p){if(p){if(vt(p)&&(p=p.toNumber()),!it(p)||!Dt(p))throw new TypeError("The parameter k must be an integer number")}else p=0;var m=p>0?p:0,v=p<0?-p:0,w=this._size[0],y=this._size[1],A=Math.min(w-v,y-m),E=[],x=[],B=[];B[0]=0;for(var _=m;_<y&&E.length<A;_++)for(var N=this._ptr[_],O=this._ptr[_+1],M=N;M<O;M++){var $=this._index[M];if($===_-m+v){E.push(this._values[M]),x[E.length-1]=$-v;break}}return B.push(E.length),new i({values:E,index:x,ptr:B,size:[A,1]})},i.fromJSON=function(p){return new i(p)},i.diagonal=function(p,m,v,w,y){if(!ht(p))throw new TypeError("Array expected, size parameter");if(p.length!==2)throw new Error("Only two dimensions matrix are supported");if(p=p.map(function(K){if(vt(K)&&(K=K.toNumber()),!it(K)||!Dt(K)||K<1)throw new Error("Size values must be positive integers");return K}),v){if(vt(v)&&(v=v.toNumber()),!it(v)||!Dt(v))throw new TypeError("The parameter k must be an integer number")}else v=0;var A=n,E=0;Gt(y)&&(A=e.find(n,[y,y])||n,E=e.convert(0,y));var x=v>0?v:0,B=v<0?-v:0,_=p[0],N=p[1],O=Math.min(_-B,N-x),M;if(ht(m)){if(m.length!==O)throw new Error("Invalid value array length");M=function(Nt){return m[Nt]}}else if(Vt(m)){var $=m.size();if($.length!==1||$[0]!==O)throw new Error("Invalid matrix length");M=function(Nt){return m.get([Nt])}}else M=function(){return m};for(var q=[],H=[],G=[],V=0;V<N;V++){G.push(q.length);var st=V-x;if(st>=0&&st<O){var ut=M(st);A(ut,E)||(H.push(st+B),q.push(ut))}}return G.push(q.length),new i({values:q,index:H,ptr:G,size:[_,N]})},i.prototype.swapRows=function(p,m){if(!it(p)||!Dt(p)||!it(m)||!Dt(m))throw new Error("Row index must be positive integers");if(this._size.length!==2)throw new Error("Only two dimensional matrix is supported");return ot(p,this._size[0]),ot(m,this._size[0]),i._swapRows(p,m,this._size[1],this._values,this._index,this._ptr),this},i._forEachRow=function(p,m,v,w,y){for(var A=w[p],E=w[p+1],x=A;x<E;x++)y(v[x],m[x])},i._swapRows=function(p,m,v,w,y,A){for(var E=0;E<v;E++){var x=A[E],B=A[E+1],_=c(p,x,B,y),N=c(m,x,B,y);if(_<B&&N<B&&y[_]===p&&y[N]===m){if(w){var O=w[_];w[_]=w[N],w[N]=O}continue}if(_<B&&y[_]===p&&(N>=B||y[N]!==m)){var M=w?w[_]:void 0;y.splice(N,0,m),w&&w.splice(N,0,M),y.splice(N<=_?_+1:_,1),w&&w.splice(N<=_?_+1:_,1);continue}if(N<B&&y[N]===m&&(_>=B||y[_]!==p)){var $=w?w[N]:void 0;y.splice(_,0,p),w&&w.splice(_,0,$),y.splice(_<=N?N+1:N,1),w&&w.splice(_<=N?N+1:N,1)}}},i},{isClass:!0}),Ji="matrix",Tl=["typed","Matrix","DenseMatrix","SparseMatrix"],Il=Q(Ji,Tl,t=>{var{typed:e,Matrix:n,DenseMatrix:r,SparseMatrix:i}=t;return e(Ji,{"":function(){return s([])},string:function(u){return s([],u)},"string, string":function(u,o){return s([],u,o)},Array:function(u){return s(u)},Matrix:function(u){return s(u,u.storage())},"Array | Matrix, string":s,"Array | Matrix, string, string":s});function s(a,u,o){if(u==="dense"||u==="default"||u===void 0)return new r(a,o);if(u==="sparse")return new i(a,o);throw new TypeError("Unknown matrix type "+JSON.stringify(u)+".")}}),Pl="matAlgo11xS0s",Rl=["typed","equalScalar"],Ol=Q(Pl,Rl,t=>{var{typed:e,equalScalar:n}=t;return function(i,s,a,u){var o=i._values,c=i._index,l=i._ptr,f=i._size,h=i._datatype;if(!o)throw new Error("Cannot perform operation on Pattern Sparse Matrix and Scalar value");var d=f[0],g=f[1],p,m=n,v=0,w=a;typeof h=="string"&&(p=h,m=e.find(n,[p,p]),v=e.convert(0,p),s=e.convert(s,p),w=e.find(a,[p,p]));for(var y=[],A=[],E=[],x=0;x<g;x++){E[x]=A.length;for(var B=l[x],_=l[x+1],N=B;N<_;N++){var O=c[N],M=u?w(s,o[N]):w(o[N],s);m(M,v)||(A.push(O),y.push(M))}}return E[g]=A.length,i.createSparseMatrix({values:y,index:A,ptr:E,size:[d,g],datatype:p})}}),Ll="matAlgo12xSfs",kl=["typed","DenseMatrix"],$l=Q(Ll,kl,t=>{var{typed:e,DenseMatrix:n}=t;return function(i,s,a,u){var o=i._values,c=i._index,l=i._ptr,f=i._size,h=i._datatype;if(!o)throw new Error("Cannot perform operation on Pattern Sparse Matrix and Scalar value");var d=f[0],g=f[1],p,m=a;typeof h=="string"&&(p=h,s=e.convert(s,p),m=e.find(a,[p,p]));for(var v=[],w=[],y=[],A=0;A<g;A++){for(var E=A+1,x=l[A],B=l[A+1],_=x;_<B;_++){var N=c[_];w[N]=o[_],y[N]=E}for(var O=0;O<d;O++)A===0&&(v[O]=[]),y[O]===E?v[O][A]=u?m(s,w[O]):m(w[O],s):v[O][A]=u?m(s,0):m(0,s)}return new n({data:v,size:[d,g],datatype:p})}}),Ul="matAlgo14xDs",zl=["typed"],ql=Q(Ul,zl,t=>{var{typed:e}=t;return function(i,s,a,u){var o=i._data,c=i._size,l=i._datatype,f,h=a;typeof l=="string"&&(f=l,s=e.convert(s,f),h=e.find(a,[f,f]));var d=c.length>0?n(h,0,c,c[0],o,s,u):[];return i.createDenseMatrix({data:d,size:gt(c),datatype:f})};function n(r,i,s,a,u,o,c){var l=[];if(i===s.length-1)for(var f=0;f<a;f++)l[f]=c?r(o,u[f]):r(u[f],o);else for(var h=0;h<a;h++)l[h]=n(r,i+1,s,s[i+1],u[h],o,c);return l}}),Hl="matAlgo02xDS0",Vl=["typed","equalScalar"],Wl=Q(Hl,Vl,t=>{var{typed:e,equalScalar:n}=t;return function(i,s,a,u){var o=i._data,c=i._size,l=i._datatype||i.getDataType(),f=s._values,h=s._index,d=s._ptr,g=s._size,p=s._datatype||s._data===void 0?s._datatype:s.getDataType();if(c.length!==g.length)throw new tt(c.length,g.length);if(c[0]!==g[0]||c[1]!==g[1])throw new RangeError("Dimension mismatch. Matrix A ("+c+") must match Matrix B ("+g+")");if(!f)throw new Error("Cannot perform operation on Dense Matrix and Pattern Sparse Matrix");var m=c[0],v=c[1],w,y=n,A=0,E=a;typeof l=="string"&&l===p&&l!=="mixed"&&(w=l,y=e.find(n,[w,w]),A=e.convert(0,w),E=e.find(a,[w,w]));for(var x=[],B=[],_=[],N=0;N<v;N++){_[N]=B.length;for(var O=d[N],M=d[N+1],$=O;$<M;$++){var q=h[$],H=u?E(f[$],o[q][N]):E(o[q][N],f[$]);y(H,A)||(B.push(q),x.push(H))}}return _[v]=B.length,s.createSparseMatrix({values:x,index:B,ptr:_,size:[m,v],datatype:l===i._datatype&&p===s._datatype?w:void 0})}}),Zl="matAlgo03xDSf",Xl=["typed"],Yl=Q(Zl,Xl,t=>{var{typed:e}=t;return function(r,i,s,a){var u=r._data,o=r._size,c=r._datatype||r.getDataType(),l=i._values,f=i._index,h=i._ptr,d=i._size,g=i._datatype||i._data===void 0?i._datatype:i.getDataType();if(o.length!==d.length)throw new tt(o.length,d.length);if(o[0]!==d[0]||o[1]!==d[1])throw new RangeError("Dimension mismatch. Matrix A ("+o+") must match Matrix B ("+d+")");if(!l)throw new Error("Cannot perform operation on Dense Matrix and Pattern Sparse Matrix");var p=o[0],m=o[1],v,w=0,y=s;typeof c=="string"&&c===g&&c!=="mixed"&&(v=c,w=e.convert(0,v),y=e.find(s,[v,v]));for(var A=[],E=0;E<p;E++)A[E]=[];for(var x=[],B=[],_=0;_<m;_++){for(var N=_+1,O=h[_],M=h[_+1],$=O;$<M;$++){var q=f[$];x[q]=a?y(l[$],u[q][_]):y(u[q][_],l[$]),B[q]=N}for(var H=0;H<p;H++)B[H]===N?A[H][_]=x[H]:A[H][_]=a?y(w,u[H][_]):y(u[H][_],w)}return r.createDenseMatrix({data:A,size:[p,m],datatype:c===r._datatype&&g===i._datatype?v:void 0})}}),Gl="matAlgo13xDD",Jl=["typed"],Kl=Q(Gl,Jl,t=>{var{typed:e}=t;return function(i,s,a){var u=i._data,o=i._size,c=i._datatype,l=s._data,f=s._size,h=s._datatype,d=[];if(o.length!==f.length)throw new tt(o.length,f.length);for(var g=0;g<o.length;g++){if(o[g]!==f[g])throw new RangeError("Dimension mismatch. Matrix A ("+o+") must match Matrix B ("+f+")");d[g]=o[g]}var p,m=a;typeof c=="string"&&c===h&&(p=c,m=e.find(a,[p,p]));var v=d.length>0?n(m,0,d,d[0],u,l):[];return i.createDenseMatrix({data:v,size:d,datatype:p})};function n(r,i,s,a,u,o){var c=[];if(i===s.length-1)for(var l=0;l<a;l++)c[l]=r(u[l],o[l]);else for(var f=0;f<a;f++)c[f]=n(r,i+1,s,s[i+1],u[f],o[f]);return c}});function dt(t,e){if(ve(t.size(),e.size()))return[t,e];var n=la(t.size(),e.size());return[t,e].map(r=>Ql(r,n))}function Ql(t,e){return ve(t.size(),e)?t:t.create(kr(t.valueOf(),e),t.datatype())}var jl="matrixAlgorithmSuite",tf=["typed","matrix"],ef=Q(jl,tf,t=>{var{typed:e,matrix:n}=t,r=Kl({typed:e}),i=ql({typed:e});return function(a){var u=a.elop,o=a.SD||a.DS,c;u?(c={"DenseMatrix, DenseMatrix":(d,g)=>r(...dt(d,g),u),"Array, Array":(d,g)=>r(...dt(n(d),n(g)),u).valueOf(),"Array, DenseMatrix":(d,g)=>r(...dt(n(d),g),u),"DenseMatrix, Array":(d,g)=>r(...dt(d,n(g)),u)},a.SS&&(c["SparseMatrix, SparseMatrix"]=(d,g)=>a.SS(...dt(d,g),u,!1)),a.DS&&(c["DenseMatrix, SparseMatrix"]=(d,g)=>a.DS(...dt(d,g),u,!1),c["Array, SparseMatrix"]=(d,g)=>a.DS(...dt(n(d),g),u,!1)),o&&(c["SparseMatrix, DenseMatrix"]=(d,g)=>o(...dt(g,d),u,!0),c["SparseMatrix, Array"]=(d,g)=>o(...dt(n(g),d),u,!0))):(c={"DenseMatrix, DenseMatrix":e.referToSelf(d=>(g,p)=>r(...dt(g,p),d)),"Array, Array":e.referToSelf(d=>(g,p)=>r(...dt(n(g),n(p)),d).valueOf()),"Array, DenseMatrix":e.referToSelf(d=>(g,p)=>r(...dt(n(g),p),d)),"DenseMatrix, Array":e.referToSelf(d=>(g,p)=>r(...dt(g,n(p)),d))},a.SS&&(c["SparseMatrix, SparseMatrix"]=e.referToSelf(d=>(g,p)=>a.SS(...dt(g,p),d,!1))),a.DS&&(c["DenseMatrix, SparseMatrix"]=e.referToSelf(d=>(g,p)=>a.DS(...dt(g,p),d,!1)),c["Array, SparseMatrix"]=e.referToSelf(d=>(g,p)=>a.DS(...dt(n(g),p),d,!1))),o&&(c["SparseMatrix, DenseMatrix"]=e.referToSelf(d=>(g,p)=>o(...dt(p,g),d,!0)),c["SparseMatrix, Array"]=e.referToSelf(d=>(g,p)=>o(...dt(n(p),g),d,!0))));var l=a.scalar||"any",f=a.Ds||a.Ss;f&&(u?(c["DenseMatrix,"+l]=(d,g)=>i(d,g,u,!1),c[l+", DenseMatrix"]=(d,g)=>i(g,d,u,!0),c["Array,"+l]=(d,g)=>i(n(d),g,u,!1).valueOf(),c[l+", Array"]=(d,g)=>i(n(g),d,u,!0).valueOf()):(c["DenseMatrix,"+l]=e.referToSelf(d=>(g,p)=>i(g,p,d,!1)),c[l+", DenseMatrix"]=e.referToSelf(d=>(g,p)=>i(p,g,d,!0)),c["Array,"+l]=e.referToSelf(d=>(g,p)=>i(n(g),p,d,!1).valueOf()),c[l+", Array"]=e.referToSelf(d=>(g,p)=>i(n(p),g,d,!0).valueOf())));var h=a.sS!==void 0?a.sS:a.Ss;return u?(a.Ss&&(c["SparseMatrix,"+l]=(d,g)=>a.Ss(d,g,u,!1)),h&&(c[l+", SparseMatrix"]=(d,g)=>h(g,d,u,!0))):(a.Ss&&(c["SparseMatrix,"+l]=e.referToSelf(d=>(g,p)=>a.Ss(g,p,d,!1))),h&&(c[l+", SparseMatrix"]=e.referToSelf(d=>(g,p)=>h(p,g,d,!0)))),u&&u.signatures&&To(c,u.signatures),c}}),nf="sqrt",rf=["config","typed","Complex"],sf=Q(nf,rf,t=>{var{config:e,typed:n,Complex:r}=t;return n("sqrt",{number:i,Complex:function(a){return a.sqrt()},BigNumber:function(a){return!a.isNegative()||e.predictable?a.sqrt():i(a.toNumber())},Unit:function(a){return a.pow(.5)}});function i(s){return isNaN(s)?NaN:s>=0||e.predictable?Math.sqrt(s):new r(s,0).sqrt()}}),af="matAlgo09xS0Sf",uf=["typed","equalScalar"],of=Q(af,uf,t=>{var{typed:e,equalScalar:n}=t;return function(i,s,a){var u=i._values,o=i._index,c=i._ptr,l=i._size,f=i._datatype||i._data===void 0?i._datatype:i.getDataType(),h=s._values,d=s._index,g=s._ptr,p=s._size,m=s._datatype||s._data===void 0?s._datatype:s.getDataType();if(l.length!==p.length)throw new tt(l.length,p.length);if(l[0]!==p[0]||l[1]!==p[1])throw new RangeError("Dimension mismatch. Matrix A ("+l+") must match Matrix B ("+p+")");var v=l[0],w=l[1],y,A=n,E=0,x=a;typeof f=="string"&&f===m&&f!=="mixed"&&(y=f,A=e.find(n,[y,y]),E=e.convert(0,y),x=e.find(a,[y,y]));var B=u&&h?[]:void 0,_=[],N=[],O=B?[]:void 0,M=[],$,q,H,G,V;for(q=0;q<w;q++){N[q]=_.length;var st=q+1;if(O)for(G=g[q],V=g[q+1],H=G;H<V;H++)$=d[H],M[$]=st,O[$]=h[H];for(G=c[q],V=c[q+1],H=G;H<V;H++)if($=o[H],O){var ut=M[$]===st?O[$]:E,K=x(u[H],ut);A(K,E)||(_.push($),B.push(K))}else _.push($)}return N[w]=_.length,i.createSparseMatrix({values:B,index:_,ptr:N,size:[v,w],datatype:f===i._datatype&&m===s._datatype?y:void 0})}}),Ki="concat",cf=["typed","matrix","isInteger"],lf=Q(Ki,cf,t=>{var{typed:e,matrix:n,isInteger:r}=t;return e(Ki,{"...Array | Matrix | number | BigNumber":function(s){var a,u=s.length,o=-1,c,l=!1,f=[];for(a=0;a<u;a++){var h=s[a];if(Vt(h)&&(l=!0),it(h)||vt(h)){if(a!==u-1)throw new Error("Dimension must be specified as last argument");if(c=o,o=h.valueOf(),!r(o))throw new TypeError("Integer number expected for dimension");if(o<0||a>0&&o>c)throw new Te(o,c+1)}else{var d=gt(h).valueOf(),g=Xt(d);if(f[a]=d,c=o,o=g.length-1,a>0&&o!==c)throw new tt(c+1,o+1)}}if(f.length===0)throw new SyntaxError("At least one matrix expected");for(var p=f.shift();f.length;)p=ca(p,f.shift(),o);return l?n(p):p},"...string":function(s){return s.join("")}})});function ff(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function hf(t){var e=0,n=1,r=Object.create(null),i=Object.create(null),s=0,a=function(o){var c=i[o];if(c&&(delete r[c],delete i[o],--e,n===c)){if(!e){s=0,n=1;return}for(;!Object.prototype.hasOwnProperty.call(r,++n););}};return t=Math.abs(t),{hit:function(o){var c=i[o],l=++s;if(r[l]=o,i[o]=l,!c)return++e,e<=t?void 0:(o=r[n],a(o),o);if(delete r[c],n===c)for(;!Object.prototype.hasOwnProperty.call(r,++n););},delete:a,clear:function(){e=s=0,n=1,r=Object.create(null),i=Object.create(null)}}}function cr(t){var{hasher:e,limit:n}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return n=n??Number.POSITIVE_INFINITY,e=e??JSON.stringify,function r(){typeof r.cache!="object"&&(r.cache={values:new Map,lru:hf(n||Number.POSITIVE_INFINITY)});for(var i=[],s=0;s<arguments.length;s++)i[s]=arguments[s];var a=e(i);if(r.cache.values.has(a))return r.cache.lru.hit(a),r.cache.values.get(a);var u=t.apply(t,i);return r.cache.values.set(a,u),r.cache.values.delete(r.cache.lru.hit(a)),u}}cr(function(t){return new t(1).exp()},{hasher:lr});cr(function(t){return new t(1).plus(new t(5).sqrt()).div(2)},{hasher:lr});var pa=cr(function(t){return t.acos(-1)},{hasher:lr});cr(function(t){return pa(t).times(2)},{hasher:lr});function lr(t){return t[0].precision}var Qi="acos",pf=["typed","config","Complex"],df=Q(Qi,pf,t=>{var{typed:e,config:n,Complex:r}=t;return e(Qi,{number:function(s){return s>=-1&&s<=1||n.predictable?Math.acos(s):new r(s,0).acos()},Complex:function(s){return s.acos()},BigNumber:function(s){return s.acos()}})}),ji="asin",mf=["typed","config","Complex"],gf=Q(ji,mf,t=>{var{typed:e,config:n,Complex:r}=t;return e(ji,{number:function(s){return s>=-1&&s<=1||n.predictable?Math.asin(s):new r(s,0).asin()},Complex:function(s){return s.asin()},BigNumber:function(s){return s.asin()}})}),Df="atan",vf=["typed"],yf=Q(Df,vf,t=>{var{typed:e}=t;return e("atan",{number:function(r){return Math.atan(r)},Complex:function(r){return r.atan()},BigNumber:function(r){return r.atan()}})}),ts="atan2",wf=["typed","matrix","equalScalar","BigNumber","DenseMatrix","concat"],Ff=Q(ts,wf,t=>{var{typed:e,matrix:n,equalScalar:r,BigNumber:i,DenseMatrix:s,concat:a}=t,u=Wl({typed:e,equalScalar:r}),o=Yl({typed:e}),c=of({typed:e,equalScalar:r}),l=Ol({typed:e,equalScalar:r}),f=$l({typed:e,DenseMatrix:s}),h=ef({typed:e,matrix:n,concat:a});return e(ts,{"number, number":Math.atan2,"BigNumber, BigNumber":(d,g)=>i.atan2(d,g)},h({scalar:"number | BigNumber",SS:c,DS:o,SD:u,Ss:l,sS:f}))}),fi=Q("trigUnit",["typed"],t=>{var{typed:e}=t;return{Unit:e.referToSelf(n=>r=>{if(!r.hasBase(r.constructor.BASE_UNITS.ANGLE))throw new TypeError("Unit in function cot is no angle");return e.find(n,r.valueType())(r.value)})}}),es="cos",Af=["typed"],Ef=Q(es,Af,t=>{var{typed:e}=t,n=fi({typed:e});return e(es,{number:Math.cos,"Complex | BigNumber":r=>r.cos()},n)}),ns="sin",Cf=["typed"],_f=Q(ns,Cf,t=>{var{typed:e}=t,n=fi({typed:e});return e(ns,{number:Math.sin,"Complex | BigNumber":r=>r.sin()},n)}),rs="tan",xf=["typed"],Bf=Q(rs,xf,t=>{var{typed:e}=t,n=fi({typed:e});return e(rs,{number:Math.tan,"Complex | BigNumber":r=>r.tan()},n)}),bf=Mf("pi",["config","?BigNumber"],t=>{var{config:e,BigNumber:n}=t;return e.number==="BigNumber"?pa(n):El});function Mf(t,e,n){return Q(t,e,n,{recreateOnConfigChange:!0})}var hi=zc({config:Ne}),fr=Zc({}),Sf=jc({}),pi=nl({}),di=yl({Matrix:pi}),we=bf({BigNumber:hi,config:Ne}),Pt=Vo({BigNumber:hi,Complex:fr,DenseMatrix:di,Fraction:Sf}),da=df({Complex:fr,config:Ne,typed:Pt}),ma=yf({typed:Pt}),De=Ef({typed:Pt}),ga=bl({config:Ne,typed:Pt}),Nf=Al({typed:Pt}),ue=_f({typed:Pt}),Tf=Nl({Matrix:pi,equalScalar:ga,typed:Pt}),If=Bf({typed:Pt}),Da=Il({DenseMatrix:di,Matrix:pi,SparseMatrix:Tf,typed:Pt}),Jt=sf({Complex:fr,config:Ne,typed:Pt}),Pf=gf({Complex:fr,config:Ne,typed:Pt}),Rf=lf({isInteger:Nf,matrix:Da,typed:Pt}),Of=Ff({BigNumber:hi,DenseMatrix:di,concat:Rf,equalScalar:ga,matrix:Da,typed:Pt});function va(t,e,n){return Pf(e*ue(Math.PI-n)/t)}function ya(t,e,n,r,i=0,s=0){const a=Math.abs(n-i),u=r-s;return Math.PI-Lf(a,u,t,e)}function an(t,e,n,r){const i=va(n,r,t),a=(n*De(i)-e)/r;return t-da(a)}function Lf(t,e,n,r,i=.001){let s=0,a=Math.PI;const u=ma(e/t),o=t>.001?t/De(u):e/ue(u);let c=(s+a)/2,l=an(c,o,n,r);isNaN(l)&&(s=kf(c,o,n,r));let f=(a-s)/2,h=an(s,o,n,r);for(;f>i&&l!==0;)c=(s+a)/2,l=an(c,o,n,r),l*h<0?a=c:(s=c,h=l),f=(a-s)/2;return(s+a)/2}function kf(t,e,n,r){let i=t,s=an(i,e,n,r);for(;isNaN(s);)i+=.01,s=an(i,e,n,r);return i}function $e(t,e,n){const r=ya(t._R,e._R,e.ry[n],e.rz[n],t.ry[n],t.rz[n]),i=va(t._R,e._R,r);return $f(t._R,e._R,r,i)}function ge(t,e=[0,0]){return Jt((t[0]-e[0])**2+(t[1]-e[1])**2)}function $f(t,e,n,r){const i=un(e,n),s=un(t,r);return i+s}function un(t,e){return t**2*(e-De(e)*ue(e))}function Uf(t,e,n,r,i,s){const a=ge(r,i),u=ge(i,s),o=ge(s,r),c=xr(e,e,a),l=xr(n,n,o),f=xr(t,t,u),h=un(e,c/2),d=un(n,l/2),g=un(t,f/2),p=zf(a,u,o);return h+d+g+p}function zf(t,e,n){const r=(t+e+n)/2;return Jt(r*(r-t)*(r-e)*(r-n))}function xr(t,e,n){return da((t**2+e**2-n**2)/(2*t*e))}const Xn=(t,e,n)=>{const r=(e-t)/(n-1);return Array.from({length:n},(i,s)=>t+s*r)};function wa(t,e){t=t.replace(/^#/,"");let n=parseInt(t.substring(0,2),16),r=parseInt(t.substring(2,4),16),i=parseInt(t.substring(4,6),16);return n=Math.max(0,Math.min(255,Math.floor(n*(1-e/100)))),r=Math.max(0,Math.min(255,Math.floor(r*(1-e/100)))),i=Math.max(0,Math.min(255,Math.floor(i*(1-e/100)))),`#${n.toString(16).padStart(2,"0")}${r.toString(16).padStart(2,"0")}${i.toString(16).padStart(2,"0")}`}function Fa(t,e,n){const r=URL.createObjectURL(t),i=document.createElement("a");document.body.appendChild(i),i.style="display: none",i.href=r,i.download=e+"."+n,i.click(),setTimeout(()=>{URL.revokeObjectURL(r),document.body.removeChild(i)},100)}class hr{constructor(e,n,r="yellow"){this._M=e,this._R=n,this.rx=[],this.ry=[],this.rz=[],this.color=r}get Area(){return Math.PI*this._R**2}get M(){return this._M}get R(){return this._R}setOrbitingTimes(e){this.rx=new Array(e.length).fill(0),this.ry=new Array(e.length).fill(0),this.rz=new Array(e.length).fill(0)}getFullTransits(e){const n=this.rx.length;var r=new Array(n).fill(!1);for(let i=0;i<n;i++)return this.rx[i]>e.rx[i]&&this.getProjectedDistance(e,i)+this._R<=e._R&&(r[i]=!0),r}getPartialTransits(e){const n=this.rx.length;var r=new Array(n).fill(!1);for(let i=0;i<n;i++)if(this.rx[i]>e.rx[i]){const s=this.getProjectedDistance(e,i);r[i]=s-this._R<e._R&&s+this._R>e._R}return r}getProjectedDistance(e,n){return ge([e.ry[n],e.rz[n]],[this.ry[n],this.rz[n]])}copy(){const e=new hr;return Object.assign(e,this),e}draw(e,n,r,i,s=!0){e.save(),e.fillStyle=this.color,e.beginPath();const a=this.ry[i]*r;var u=r;s?u*=this.rx[i]:u*=this.rz[i];const o=n[0]+a,c=n[1]+u;e.arc(o,c,this._R*r,0,2*Math.PI),e.fill(),e.closePath();const l=e.createRadialGradient(o,c,0,o,c,this._R*r);l.addColorStop(0,"rgba(0, 0, 0, 0.01)"),l.addColorStop(1,"rgba(0, 0, 0, 0.5)"),e.fillStyle=l,e.globalCompositeOperation="multiply",e.beginPath(),e.arc(o,c,this._R*r,0,2*Math.PI),e.fill(),e.closePath(),e.restore()}getEclipsingAreas(e){const n=this.rx.length;var r=new Array(e.length),i=new Array(n).fill(0);e.slice().sort((u,o)=>o.R-u.R).forEach((u,o)=>{const[c,l]=u.getTransits(this);l.forEach((f,h)=>{f?i[h]+=$e(this,u,h):c[h]&&(i[h]+=u.Area)}),r.forEach(f=>{console.log("Iterating previous planets",f.planetName);const[h,d]=u.getTransits(f,!1),[g,p]=f.getTransits(this);g.forEach((m,v)=>{if(m){if(c[v])h[v]?(console.log(v,"Full - Full - Full"),i[v]-=u.Area):d[v]&&(console.log(v,"Full - Full - Partial"),i[v]-=$e(f,u,v));else if(l[v]){if(h[v])throw new Error("Full - Partial - Full cannot exist as the previous planet is always larger");d[v]&&(console.log(v,"Full - Partial - Partial"),i[v]-=$e(f,u,v))}}else p[v]&&(c[v]?h[v]?(console.log(v,"Partial - Full - Full"),i[v]-=u.Area):d[v]&&(console.log(v,"Partial - Full - Partial"),i[v]-=$e(f,u,v)):l[v]&&(h[v]?(console.log(v,"Partial - Partial - Full"),i[v]-=$e(star,u,v)):d[v]&&(console.log(v,"Partial - Partial - Partial"),planet_planet_contact_points=f.getContactPoints(u,v),console.log("Partial - Partial - Partial not implemented yet!"))))})}),r[o]=u});const a=i.map(u=>1-u/this.Area);return console.log("fraction",a),a}maxCoordinate(){const e=Math.max(...this.rx.map(Math.abs)),n=Math.max(...this.ry.map(Math.abs)),r=Math.max(...this.rz.map(Math.abs));return Math.max(e,n,r)}getEclipsingAreasNumerical(e,n=500,r=250){const i=Xn(0,this._R,n),s=Xn(0,2*Math.PI,r),a=this.rx.length;let u=new Array(a).fill(0);const o=i[1]-i[0],c=s[1]-s[0];for(let l=0;l<a;l++){let f=i.slice(),h=s.slice();e.forEach(d=>{if(console.log("Iterating planets",d.planetName),d.rx[l]>this.rx[l]&&Jt((this.ry[l]-d.ry[l])**2+(this.rz[l]-d.rz[l]**2))-d._R<this._R){console.log("Planet covers the star at time",l);let p=[],m=[];f.forEach(v=>{const w=o*c*v;let y=!1;h.forEach(A=>{const E=v*Math.cos(A),x=v*Math.sin(A);Jt((E-d.ry[l])**2+(x-d.rz[l])**2)<d._R?u[l]+=w:(y=!0,m.push(A))}),y&&p.push(v)}),f=p,h=m}}),u[l]=1-u[l]/this.Area}return console.log("fraction",u),u}}class Aa extends hr{constructor(e,n,r="yellow"){super(e*bn,n*sn,r)}set M(e){this._M=e*bn}set R(e){this._R=e*sn}get R(){return super.R}get M(){return super.M}toString(){return`Star: ${(this.R/sn).toFixed(1)} $R_odot$ 
 ${(this.M/bn).toFixed(1)} g`}equals(e){return this.R===e.R&&this.M===e.M}}class qf{constructor(e,n){this.onStarUpdate=e,this.onColorChange=n,this.initStar()}initStar(){const e=document.getElementById("star-mass"),n=document.getElementById("star-radius"),r=document.getElementById("star-color"),i=document.getElementById("star-icon");i.addEventListener("click",()=>{r.click()}),e.addEventListener("input",s=>{const a=parseFloat(s.target.value);this.star.M=a,this.onStarUpdate()}),n.addEventListener("input",s=>{const a=parseFloat(s.target.value);this.star.R=a,this.onStarUpdate()}),r.addEventListener("change",s=>{this.star.color=s.target.value,i.style.backgroundColor=s.target.value,this.onColorChange()}),this.star=new Aa(e.value,n.value,r.value),i.style.backgroundColor=this.star.color}setTimes(e){this.star.setOrbitingTimes(e)}}function Hf(t,e,n=0){return e.map(r=>2*ma(Jt((1+t)/(1-t))*If(r/2))%(2*we)+2*we*n)}function Vf(t,e,n){return t.map(r=>e*(r-n)%(2*we))}function is(t,e,n){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)throw new Error("E and M arrays must have the same length");return t.map((r,i)=>r-(e[i]+n*ue(r)))}else{if(!Array.isArray(t)&&!Array.isArray(e))return t-(e+n*ue(t));throw new Error("E and M must be both arrays or both single values")}}function Wf(t,e,n=.001,r=100){let i=0,s=2*we,a=(s-i)/2,u=is(i,t,e);for(let o=0;o<r;o++){const c=(i+s)/2,l=is(c,t,e);if(l*u<0?s=c:(i=c,u=l),a=(s-i)/2,a<n||l===0)return c}return null}function Qe(t,e,n){return(n**2*Os*(t+e)/(4*we**2))**.3333333333333333}function Zf(t,e,n){return 2*we*(n**3/(Os*(t+e)))**.5}function Xf(t,e,n){return n.map(r=>t*(1-e**2)/(1+e*De(r)))}class Ea{constructor(e="jupyter"){if(e.indexOf(e)===-1)throw new Error(`Invalid units: ${e}. Valid units are: ${e.join(", ")}`);e==="solar"?(this.R=sn,this.M=bn,this.symbol="<sub></sub>"):e==="earth"?(this.R=Hu,this.M=Vu,this.symbol="<sub></sub>"):e==="jupyter"&&(this.R=Wu,this.M=Rs,this.symbol="<sub>J</sub>")}}class Yf extends hr{constructor(e,n,r,i,s=0,a=0,u=0,o=0,c=0,l="blue",f="Planet 1",h=new Ea("jupyter")){super(e*h.M,n*h.R,l),this.units=h,this.Runits=this.units.R,this.Munits=this.units.M,this.checkInputParams(e,n,r,s,a,u,o,i),this._e=a,this._Ms=i.M,this._Rs=i.R,this.i=s,this._P=r*de,this.omega0=u,this.Omega0=o,this.phase0=c,this.color=l,this.planetName=f,this._a=Qe(i.M,this._M,this._P),this._b=this._a*Jt(1-this._e**2),this._rmax=this.a*(1+this.e),this.rmin=this.a*(1-this._e),console.log(`Planet max distance: ${(this.rmax/He).toFixed(3)} AU`)}get rmax(){return this._rmax}set planetName(e){this._planetName=e}get planetName(){return this._planetName}set R(e){const n=e*this.Runits;if(this.rmin-n<this._Rs)throw new fe(this.rmin,this._Rs);this._R=n}set phase0(e){return this._phase0=e}get phase0(){return this._phase0}get omega0(){return this._omega0}set omega0(e){this._omega0=e}get Omega0(){return this._Omega0/(2*Math.PI)}set Omega0(e){this._Omega0=e*2*Math.PI}set Ms(e){const n=Qe(e,this._M,this._P),r=n*(1-this._e);if(r-this._R<this._Rs)throw new fe(r,this._Rs);this._Ms=e,this._a=n,this._b=this._a*Jt(1-this._e**2),this._rmin=r,this._rmax=this._a*(1+this._e)}set Rs(e){if(this.rmin-this._R<e)throw new fe(this.rmin,e);this._Rs=e}set e(e){const n=this._a*(1-e);if(n-this._R<this._Rs)throw new fe(n,this._Rs);this._e=e,this.rmin=n,this._rmax=this._a*(1+this._e),this._b=this._a*Jt(1-this._e**2)}set M(e){const n=e*this.Munits,r=Qe(this._Ms,n,this._P),i=r*(1-this._e);if(i-this._R<this._Rs)throw new fe(i,this._Rs);this._M=n,this._a=r,this._b=this._a*Jt(1-this._e**2),this.rmin=i,this._rmax=r*(1+this._e)}set P(e){const n=e*de,r=Qe(this._Ms,this._M,n),i=r*(1-this._e);if(i-this._R<this._Rs)throw new fe(i,this._Rs);this._P=n,this._a=r,this._b=this._a*Jt(1-this._e**2),this.rmin=i,this._rmax=r*(1+this._e)}get R(){return super.R/this.Runits}get M(){return super.M/this.Munits}get e(){return this._e}get a(){return this._a}get b(){return this._b}set i(e){this._i=e/180*Math.PI}get i(){return this._i/Math.PI*180}get P(){return this._P/de}toString(){return`Planet: ${this.R.toFixed(1)} $R_Earth$ 
 ${this.M.toFixed(1)} g 
 i: ${this.i.toFixed(0)} deg`}equals(e){return this.R===e.R&&this.M===e.M&&this.i===e.i&&this.e===e.e&&this.P===e.P}checkInputParams(e,n,r,i,s,a,u,o){if(e*this.Munits>o.M)throw new $r("Planet cannot be heavier than host star!");if(n*this.Runits>o.R)throw new $r("Planet cannot be larger than host star!");if(!(-90<=i&&i<=90))throw new Error(`Inclination ${i.toFixed(1)} must be between -90 and 90!`);if(!(0<=a&&a<=we))throw new Error(`Argument of periastron ${a.toFixed(1)} must be between 0 and pi!`);if(!(0<=u&&u<=1))throw new Error(`Longitude of the ascending ${u} has to be between 0 and 1!`);if(!(0<=s&&s<=1))throw new Error(`Eccentricity ${s} needs to be between 0 and 1!`);const l=Qe(o.M,e*this.Munits,r*de)*(1-s);if(l-n*this.Runits<o.R)throw new fe(l,o.R)}setStar(e){this.Ms=e.M,this.Rs=e.R}setOrbitingTimes(e){const r=Vf(e,2*we/this._P,0).map(h=>Wf(h,this._e)),i=Hf(this._e,r,this.phase0),s=Xf(this._a,this._e,i),a=i.map(h=>ue(h+this.omega0)),u=i.map(h=>De(h+this.omega0)),o=De(this._Omega0),c=ue(this._Omega0),l=De(this._i),f=ue(this._i);this.rx=s.map((h,d)=>h*(o*u[d]*l-c*a[d])),this.ry=s.map((h,d)=>h*(c*u[d]*l+o*a[d])),this.rz=s.map((h,d)=>-h*u[d]*f)}draw(e,n,r,i,s=!0){e.save(),e.globalAlpha=1;const a=this.ry[i]*r;var u=r,o=r;s?(u*=this.rx[i],o*=this.rz[i]):(u*=this.rz[i],o*=-this.rx[i]);const c=n[0]+a,l=n[1]+u,f=Math.atan2(u,a),h=Math.sqrt(a**2+u**2+o**2),d=Math.acos(Math.sqrt(a**2+u**2)/h),g=f+3*Math.PI/2+Math.sign(o)*d,p=f+Math.PI/2-Math.sign(o)*d;e.fillStyle=wa(this.color,50),e.beginPath(),e.arc(c,l,this._R*r,p,g,!0),e.fill(),e.closePath(),e.restore(),e.fillStyle=this.color,e.beginPath(),e.arc(c,l,this._R*r,p,g,!1),e.fill(),e.closePath(),e.restore()}}class fe extends Error{constructor(e,n){const r=`Star-planet distance ${(e/He).toFixed(3)} AU is below stellar radius ${(n/He).toFixed(2)} AU!`;super(r),this.name="StarPlanetDistanceError",this.rmin=e,this._Rs=n}}class $r extends Error{constructor(e){super(e)}}class zt{constructor(e){this.name=e,this.toolTipElement=document.getElementById("tooltip-"+e),this.toolTipElement==null&&console.warn("ToolTip tooltip-"+e+" not found")}setLanguage(e){const n=e[this.name+"_tooltip"].replace("{index}","{0}");this.toolTipElement.innerHTML=n}}class on{constructor(e,n,r=!0){this.eclipsedBody=e,this.eclipsingBody=n,this.checkFront=r,this.datapoints=n.rx.length,[this.fullTransitIndexes,this.partialTransitIndexes]=this.getTransits(this.eclipsingBody,this.eclipsedBody,this.checkFront),this.workoutTransits()}workoutTransits(){console.log("Number of full transits: ",this.fullTransitIndexes.length),console.log("Number of partial transits: ",this.partialTransitIndexes.length),this.eclipsedArea=this.getEclipsedArea(this.fullTransitIndexes,this.partialTransitIndexes),this.visibleFraction=this.eclipsedArea.map(e=>1-e/this.eclipsedBody.Area),this.transitDuration=this.partialTransitIndexes.length+this.fullTransitIndexes.length,this.transitDepth=Math.max(...this.eclipsedArea)/this.eclipsedBody.Area}getEclipsedArea(e,n){var r=new Array(this.datapoints).fill(1);return n.forEach(i=>{r[i]=$e(this.eclipsedBody,this.eclipsingBody,i)}),e.forEach(i=>{r[i]=this.eclipsingBody.Area}),r}getTransits(e,n,r=!0){const s=Array.from({length:this.datapoints},(o,c)=>c).filter(o=>e.rx[o]>n.rx[o]||!r),a=s.filter(o=>n.getProjectedDistance(e,o)+e._R<=n._R),u=s.filter(o=>n.getProjectedDistance(e,o)-e._R<n._R&&n.getProjectedDistance(e,o)+e._R>=n._R);return[a,u]}getContactPoints(e){const n=ya(this.eclipsedBody._R,this.eclipsingBody._R,this.eclipsingBody.ry[e],this.eclipsingBody.rz[e],this.eclipsedBody.ry[e],this.eclipsedBody.rz[e]),r=this.eclipsingBody.ry[e],i=this.eclipsingBody.rz[e],s=Of(i-this.eclipsedBody.rz[e],r-this.eclipsedBody.ry[e]),a=[r,i],u=[this.pointy(a[0],1,n,s),this.pointz(a[1],1,n,s)],o=[this.pointy(a[0],-1,n,s),this.pointz(a[1],-1,n,s)];return[u,o]}pointy(e,n,r,i){return e-this.eclipsingBody._R*De(r+n*i)}pointz(e,n,r,i){return e-n*this.eclipsingBody._R*ue(r+n*i)}}const Gf=15;class Jf{constructor(e,n,r,i){this.onUpdate=e,this.onMenuOpened=n,this.onMenuClosed=r,this.planets=[],this.star=i.copy(),this.units=new Ea("jupyter"),this.setLabelUnits(),this.planetNameCounter=0,this.defaultColor=document.getElementById("planet-period").style.color,this.supressedListener=!1,this.initPlanetMenu(),this.createPlanet(),this.defaultPlanet=this.planet}setLanguage(e){this.labels.forEach(n=>{n.setLanguage(e)})}initCanvas(){const e=document.getElementById("planet-canvas");this.translatePos={x:e.width/2,y:e.height/2},this.scale=1,this.scaleMultiplier=.8,this.startDragOffset={},document.getElementById("plus").addEventListener("click",()=>{this.scale/=this.scaleMultiplier,this.updateCanvas()},!1),document.getElementById("minus").addEventListener("click",()=>{this.scale*=this.scaleMultiplier,this.updateCanvas()},!1)}setLabelUnits(){const e=document.getElementById("planet-radius-label");console.log("Setting units: "+this.units.symbol),e.innerHTML=`Radius (R${this.units.symbol})`;const n=document.getElementById("planet-mass-label");n.innerHTML=`Mass (M${this.units.symbol})`}initPlanetMenu(){this.addPlanetBtn=document.getElementById("add-planet-btn"),this.addPlanetBtn.addEventListener("click",()=>this.showPlanetForm()),this.planetForm=document.getElementById("planet-form"),this.cancelPlanetBtn=document.getElementById("cancel-planet-btn"),this.cancelPlanetBtn.addEventListener("click",()=>{this.closePlanetForm(),this.onMenuClosed()}),this.closePlanetBtn=document.getElementById("close-planet-btn"),this.closePlanetBtn.addEventListener("click",()=>this.cancelPlanetBtn.click()),this.planetList=document.getElementById("planet-list"),this.errorLabel=document.getElementById("planet-error"),this.transitWarningLabel=document.getElementById("transit-error"),this.planetNameInput=document.getElementById("planet-name"),this.periodInput=document.getElementById("planet-period"),this.iInput=document.getElementById("inclination-input"),this.phaseInput=document.getElementById("phase-input"),this.Omega0Input=document.getElementById("longitude-ascending-node-input"),this.eInput=document.getElementById("eccentricity-input"),this.massInput=document.getElementById("planet-mass-input"),this.radiusInput=document.getElementById("planet-radius-input"),this.colorInput=document.getElementById("planet-color");const e=[this.periodInput,this.iInput,this.eInput,this.massInput,this.radiusInput,this.phaseInput,this.Omega0Input];e.forEach(o=>{o.addEventListener("input",c=>{const l=parseFloat(c.target.min),f=parseFloat(c.target.max);var h=parseFloat(c.target.value);h<l?(h=l,c.target.value=h):h>f&&(h=f,c.target.value=h),e.forEach(d=>{d.style.color=this.defaultColor}),this.errorLabel.classList.add("hidden"),!this.supressedListener&&(this.createPlanet(),this.updateCanvas())})}),this.colorInput.addEventListener("input",()=>{this.supressedListener||(console.log("Input Triggered"),this.createPlanet(),this.updateCanvas())}),this.planetNameInput.addEventListener("input",o=>{o.target.style.color=this.defaultColor,this.errorLabel.classList.add("hidden")}),this.randomizeBtn=document.getElementById("randomize-planet-btn"),this.randomizeBtn.addEventListener("click",()=>{this.supressedListener=!0,this.randomizeInputs(),this.errorLabel.classList.remove("hidden"),this.createPlanet(),this.updateCanvas(),this.supressedListener=!1});const n=new zt("longitude-ascending-node"),r=new zt("phase"),i=new zt("eccentricity"),s=new zt("inclination"),a=new zt("planet-mass"),u=new zt("planet-radius");this.labels=[n,r,i,s,a,u],this.planetCounter=document.getElementById("planet-title-number")}createPlanet(){const e=parseFloat(this.massInput.value),n=parseFloat(this.radiusInput.value),r=parseFloat(this.periodInput.value),i=parseFloat(this.iInput.value),s=parseFloat(this.eInput.value),a=parseFloat(this.phaseInput.value),u=parseFloat(this.Omega0Input.value),o=this.colorInput.value,c=this.planetNameInput.value;try{this.planet=new Yf(e,n,r,this.star,i,s,0,u,a,o,c,this.units),this.errorLabel.classList.add("hidden")}catch(l){l instanceof fe?(console.error(`Star-Planet Distance Error: ${l.message}`),this.errorLabel.classList.remove("hidden"),this.errorLabel.textContent="Orbit is whithin the star radius!",this.planet=null):l instanceof $r?(this.errorLabel.classList.remove("hidden"),this.errorLabel.textContent=l.message,this.planet=null):(console.error(`Unknown error: ${l.message}`),this.planet=null)}}updateCanvas(e=1e4){if(this.planet!=null){const n=Math.floor(this.planet.e+.01*(this.planet.P*e));console.log("Updating canvas for "+this.planet.planetName+"with "+n+" datapoints");const r=Xn(0,this.planet._P,n);this.planet.setOrbitingTimes(r),this.star.setOrbitingTimes(r),this.drawOrbit();const i=new on(this.star,this.planet),s=r.map(o=>o/de),a=i.visibleFraction;this.drawLightcurve(a,s),document.getElementById("perihelion").innerText=(this.planet.rmin/He).toFixed(3)+" AU",document.getElementById("aphelion").innerText=(this.planet.rmax/He).toFixed(3)+" AU",document.getElementById("transit-depth").innerText=i.transitDepth.toFixed(3),console.log("Transit duration",i.transitDuration);const u=s[1]-s[0];i.transitDuration==0?this.transitWarningLabel.classList.remove("hidden"):this.transitWarningLabel.classList.add("hidden"),document.getElementById("transit-duration").innerText=(i.transitDuration*u).toFixed(3)+" days"}}drawLightcurve(e,n){const r=document.getElementById("lightcurve-canvas-planet-form"),i=r.getContext("2d"),s=Math.min(...n),a=Math.max(...n),u=Math.min(...e)*.95,o=Math.max(...e)*1.05,c=d=>(d-s)/(a-s)*r.width,l=d=>r.height-(d-u)/(o-u)*r.height;i.clearRect(0,0,r.width,r.height),i.save(),i.beginPath(),i.lineWidth=1.5,i.strokeStyle=this.star.color;const f=c(n[0]),h=l(e[0]);i.moveTo(f,h);for(let d=1;d<n.length;d++){const g=c(n[d]),p=l(e[d]);i.lineTo(g,p)}i.stroke(),i.restore()}drawOrbit(){const e=document.getElementById("planet-canvas"),n=e.getContext("2d"),r=e.width/2/(this.planet.maxCoordinate()*1.1);n.clearRect(0,0,e.width,e.height),n.save(),this.star.rx[0]<this.planet.rx[0]?(this.star.draw(n,[e.width/2,e.height/2],r,0,!0),this.planet.draw(n,[e.width/2,e.height/2],r,0,!0)):(this.planet.draw(n,[e.width/2,e.height/2],r,0,!0),this.star.draw(n,[e.width/2,e.height/2],r,0,!0)),n.beginPath(),n.lineWidth=1.5,n.setLineDash([5,10]),n.moveTo(this.planet.ry[0]*r+e.width/2,this.planet.rx[0]*r+e.height/2);for(let i=0;i<this.planet.rx.length;i++)n.lineTo(this.planet.ry[i]*r+e.width/2,this.planet.rx[i]*r+e.height/2);n.closePath(),n.strokeStyle=this.planet.color,n.stroke(),n.restore()}showPlanetForm(e=null){this.onMenuOpened(),this.savePlanetBtn=document.getElementById("save-planet-btn"),this.savePlanetListener=()=>this.addPlanet(e),this.savePlanetBtn.addEventListener("click",this.savePlanetListener),this.planetForm.classList.remove("hidden"),this.planetForm.focus(),e!=null?(console.log("Editing planet "+e),this.savePlanetBtn.textContent="Accept",this.supressedListener=!0,this.planetNameInput.value=this.planets[e].planetName,this.periodInput.value=this.planets[e].P,this.eInput.value=this.planets[e].e,this.iInput.value=parseFloat(this.planets[e].i).toFixed(2),this.Omega0Input.value=parseFloat(this.planets[e].Omega0).toFixed(2),this.massInput.value=this.planets[e].M,this.phaseInput.value=this.planets[e].phase0,this.radiusInput.value=this.planets[e].R,this.colorInput.value=this.planets[e].color):(this.savePlanetBtn.textContent="Add",this.periodInput.value=this.defaultPlanet.P,this.eInput.value=this.defaultPlanet.e,this.iInput.value=this.defaultPlanet.i.toFixed(2),this.Omega0Input.value=this.defaultPlanet.Omega0.toFixed(2),this.massInput.value=this.defaultPlanet.M,this.radiusInput.value=this.defaultPlanet.R,this.phaseInput.value=this.defaultPlanet.phase0,this.colorInput.value=`#${Math.floor(Math.random()*16777215).toString(16).padStart(6,"0")}`,this.planetNameInput.value="Planet "+(this.planetNameCounter+1)),this.createPlanet(),this.updateCanvas(),this.supressedListener=!1,this.keydownListener=n=>{if(n.key==="Escape")this.closePlanetBtn.click();else if(n.key=="Enter"){const r=document.activeElement;r&&(r.tagName==="INPUT"||r.tagName==="TEXTAREA")&&r.type==="color"&&(n.preventDefault(),n.stopPropagation()),this.savePlanetBtn.click()}else n.key=="R"||n.key=="r"?document.activeElement!=this.planetNameInput&&this.randomizeBtn.click():(n.key=="c"||n.key=="C")&&document.activeElement!=this.planetNameInput&&this.cancelPlanetBtn.click()},this.closeOnOutsideClickListener=n=>{this.planetForm&&!this.planetForm.querySelector(".planet-form-content").contains(n.target)&&this.cancelPlanetBtn.click()},document.addEventListener("keydown",this.keydownListener),setTimeout(()=>{document.addEventListener("click",this.closeOnOutsideClickListener)},0)}randomizeInputs(){const e=Math.random();this.massInput.value=parseFloat((e+1)*20*Rs/this.units.M).toFixed(2),this.radiusInput.value=parseFloat(e*this.star._R/this.units.R/5+sn/this.units.R).toFixed(2);const n=Math.random();this.eInput.value=parseFloat(n.toFixed(2));const i=(this.star._R+this.radiusInput.value*this.units.R)/(1-this.eInput.value),s=Zf(this.star._M,this.massInput.value*this.units.M,i);console.log("Min period: "+(s/de).toFixed(2)+" days"),this.periodInput.value=Math.floor(e*500+s/de),this.iInput.value=parseFloat((2*e-1)*89.9).toFixed(2);const a=Math.random();this.phaseInput.value=a.toFixed(2);const u=Math.random();this.Omega0Input.value=u.toFixed(2)}closePlanetForm(){console.log("Closing Menu"),document.activeElement&&document.activeElement.blur(),this.planetForm.classList.add("hidden"),this.keydownListener&&(document.removeEventListener("keydown",this.keydownListener),this.keydownListener=null),this.savePlanetBtn.removeEventListener("click",this.savePlanetListener),this.closeOnOutsideClickListener&&(document.removeEventListener("click",this.closeOnOutsideClickListener),this.closeOnOutsideClickListener=null),this.savePlanetListener&&(this.savePlanetListener=null)}addPlanet(e=null){const n=this.planetNameInput.value,i=this.planets.map(s=>s.planetName).indexOf(n);if(i!=-1&&i!=e){this.errorLabel.classList.remove("hidden"),this.errorLabel.textContent="Planet name already exists!",this.planetNameInput.style.color="red",this.planetNameInput.focus(),this.planet=null;return}this.planet!=null&&(e==null?(this.planets.push(this.planet),this.planetNameCounter++):this.planets[e]=this.planet,this.closePlanetForm(),this.updateParameters())}createPlanetButton(e,n,r){const i=document.createElement("button");i.className="planet-btns";const s=document.createElement("img");return s.setAttribute("src",e),s.setAttribute("alt",r),s.setAttribute("title",r),i.addEventListener("click",n),i.appendChild(s),i}onRemoveListener(e){console.log("Removing planet"+e),this.planets.splice(e,1),this.updateParameters()}onEditListener(e){console.log("Editing planet "+e),this.showPlanetForm(e)}updateParameters(){this.maxRadius=Math.max(...this.planets.map(e=>e.R)),this.maxP=Math.max(...this.planets.map(e=>e._P)),this.updatePlanetList()}updatePlanetList(){this.planetList.innerHTML="",this.planets.forEach((e,n)=>{const r=this.createPlanetItem(e,n);this.planetList.appendChild(r)}),this.planetCounter.textContent="Planets ("+this.planets.length+")",this.onUpdate()}createPlanetItem(e,n){const r=document.createElement("div");r.className="planet-item",r.dataset.name=e.planetName;const i=document.createElement("div");i.className="dot-planet-container";const s=document.createElement("span");s.className="dot-planet",s.style.backgroundColor=e.color;const a=document.createElement("input");a.type="color",a.value=e.color,a.style.display="none",s.addEventListener("click",()=>{a.click()}),a.addEventListener("input",f=>{this.planets[n].color=f.target.value,s.style.backgroundColor=f.target.value});const u=e.R*Gf/this.maxRadius;s.style.width=u.toString()+"px",s.style.height=u.toString()+"px",i.appendChild(s),s.appendChild(a);const o=document.createElement("span");o.className="planet-name-label",o.title=e.planetName,o.textContent=e.planetName;const c=this.createPlanetButton("/icons/edit.png",()=>this.onEditListener(n),"Edit"),l=this.createPlanetButton("/icons/delete-button.svg",()=>this.onRemoveListener(n),"Delete");return r.appendChild(i),r.appendChild(o),r.appendChild(c),r.appendChild(l),r}setTimes(e){this.planets.forEach(n=>{n.setOrbitingTimes(e)}),this.maxDistance=Math.max(...this.planets.map(n=>n.maxCoordinate()+n._R))}setStar(e){this.star=e.copy(),this.planets.forEach(n=>{n.setStar(e)})}}class Kf{constructor(e,n,r,i){this.onDatapointsUpdate=n,this.onOrbitsUpdate=r,this.onMcPointsUpdate=i,this.initLightcurveMenu(),this.calculateTimes(e)}setLanguage(e){this.datapointsLabel.setLanguage(e),this.orbitsLabel.setLanguage(e),this.mcPointsLabel.setLanguage(e)}initLightcurveMenu(){const e=document.getElementById("input-datapoints");this.datapoints=parseInt(e.value),this.datapointsLabel=new zt("datapoints");const n=document.getElementById("orbits");this.orbits=parseInt(n.value),this.orbitsLabel=new zt("orbits"),this.mcPointsInput=document.getElementById("input-mc-points"),this.mcPoints=parseInt(this.mcPointsInput.value*1e3),this.mcPointsLabel=new zt("mc-points"),this.mcPointsInput.addEventListener("input",r=>{const i=parseFloat(r.target.min);r.target.value<i&&(r.target.value=i),this.mcPoints=parseInt(r.target.value*1e3),this.onMcPointsUpdate()}),e.addEventListener("input",r=>{const i=parseFloat(r.target.min);r.target.value<i&&(r.target.value=i),this.datapoints=parseInt(r.target.value),this.onDatapointsUpdate()}),n.addEventListener("input",r=>{const i=parseFloat(r.target.min);r.target.value<i&&(r.target.value=i),this.orbits=parseInt(r.target.value),this.onOrbitsUpdate()})}calculateTimes(e){this.times=Xn(0,this.orbits*e,this.datapoints),this.timesDays=this.times.map(n=>n/de)}exportLightcurve(e,n){const r="Time (days),RelativeFlux",i=e.map((u,o)=>`${u.toFixed(4)},${n[o].toFixed(5)}`).join(`
`),s=`${r}
${i}`,a=new Blob([s],{type:"text/csv"});Fa(a,"lightcurve","csv")}}class Qf{constructor(e){this.onUpdate=e,this.initFrame()}initFrame(){this.msInput=document.getElementById("ms"),this.msLabel=new zt("frame-rate"),this.ms=parseFloat(this.msInput.value),this.msInput.addEventListener("input",e=>{this.ms=parseFloat(e.target.value),this.onUpdate(this.ms)}),this.saveAnimationButton=document.getElementById("save-animation-btn"),this.saveAnimationButton.disabled=!0,this.durationLabel=document.getElementById("animation-duration-value"),this.durationToolTip=new zt("animation-duration")}setDuration(e){this.durationLabel.innerHTML=(e/1e3).toFixed(3),this.animationDurationms=e}setLanguage(e){this.msLabel.setLanguage(e),this.durationToolTip.setLanguage(e)}disable(e){this.msInput.disabled=e,this.saveAnimationButton.disabled=e}}class Ur{constructor(e){this.activateButton=document.getElementById(e+"-button");const n=document.getElementById(e+"-content");this.activateButton.addEventListener("click",()=>{this.showContent(n,e)}),this.closeButton=document.getElementById("close-"+e+"-btn"),this.closeWindowListener=()=>{this.closeWindow(n)},this.closeButton.addEventListener("click",this.closeWindowListener),this.contentName=e}setLanguage(e){const n=document.getElementById(this.contentName+"-text");console.log("Setting language for "+this.contentName),n.innerHTML=e[this.contentName+"-text"]}showContent(e,n){console.log("Showing "+n),e.classList.remove("hidden"),e.focus(),this.keydownListener=r=>{r.key==="Escape"&&this.closeWindow(e)},this.closeOnOutsideClickListener=r=>{e&&!e.querySelector(".information-container").contains(r.target)&&this.closeWindow(e)},document.addEventListener("keydown",this.keydownListener),setTimeout(()=>{document.addEventListener("click",this.closeOnOutsideClickListener)},0)}closeWindow(e){e.classList.add("hidden"),e.blur(),this.keydownListener&&(document.removeEventListener("keydown",this.keydownListener),this.keydownListener=null),this.closeOnOutsideClickListener&&(document.removeEventListener("click",this.closeOnOutsideClickListener),this.closeOnOutsideClickListener=null)}}function Nn(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function jf(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function Ca(t){let e,n,r;t.length!==2?(e=Nn,n=(u,o)=>Nn(t(u),o),r=(u,o)=>t(u)-o):(e=t===Nn||t===jf?t:th,n=t,r=t);function i(u,o,c=0,l=u.length){if(c<l){if(e(o,o)!==0)return l;do{const f=c+l>>>1;n(u[f],o)<0?c=f+1:l=f}while(c<l)}return c}function s(u,o,c=0,l=u.length){if(c<l){if(e(o,o)!==0)return l;do{const f=c+l>>>1;n(u[f],o)<=0?c=f+1:l=f}while(c<l)}return c}function a(u,o,c=0,l=u.length){const f=i(u,o,c,l-1);return f>c&&r(u[f-1],o)>-r(u[f],o)?f-1:f}return{left:i,center:a,right:s}}function th(){return 0}function eh(t){return t===null?NaN:+t}const nh=Ca(Nn),rh=nh.right;Ca(eh).center;const ih=Math.sqrt(50),sh=Math.sqrt(10),ah=Math.sqrt(2);function Yn(t,e,n){const r=(e-t)/Math.max(0,n),i=Math.floor(Math.log10(r)),s=r/Math.pow(10,i),a=s>=ih?10:s>=sh?5:s>=ah?2:1;let u,o,c;return i<0?(c=Math.pow(10,-i)/a,u=Math.round(t*c),o=Math.round(e*c),u/c<t&&++u,o/c>e&&--o,c=-c):(c=Math.pow(10,i)*a,u=Math.round(t/c),o=Math.round(e/c),u*c<t&&++u,o*c>e&&--o),o<u&&.5<=n&&n<2?Yn(t,e,n*2):[u,o,c]}function uh(t,e,n){if(e=+e,t=+t,n=+n,!(n>0))return[];if(t===e)return[t];const r=e<t,[i,s,a]=r?Yn(e,t,n):Yn(t,e,n);if(!(s>=i))return[];const u=s-i+1,o=new Array(u);if(r)if(a<0)for(let c=0;c<u;++c)o[c]=(s-c)/-a;else for(let c=0;c<u;++c)o[c]=(s-c)*a;else if(a<0)for(let c=0;c<u;++c)o[c]=(i+c)/-a;else for(let c=0;c<u;++c)o[c]=(i+c)*a;return o}function zr(t,e,n){return e=+e,t=+t,n=+n,Yn(t,e,n)[2]}function oh(t,e,n){e=+e,t=+t,n=+n;const r=e<t,i=r?zr(e,t,n):zr(t,e,n);return(r?-1:1)*(i<0?1/-i:i)}function ss(t,e){let n;for(const r of t)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);return n}function as(t,e){let n;for(const r of t)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);return n}function ch(t){return t}var Tn=1,In=2,qr=3,tn=4,us=1e-6;function lh(t){return"translate("+t+",0)"}function fh(t){return"translate(0,"+t+")"}function hh(t){return e=>+t(e)}function ph(t,e){return e=Math.max(0,t.bandwidth()-e*2)/2,t.round()&&(e=Math.round(e)),n=>+t(n)+e}function dh(){return!this.__axis}function pr(t,e){var n=[],r=null,i=null,s=6,a=6,u=3,o=typeof window<"u"&&window.devicePixelRatio>1?0:.5,c=t===Tn||t===tn?-1:1,l=t===tn||t===In?"x":"y",f=t===Tn||t===qr?lh:fh;function h(d){var g=r??(e.ticks?e.ticks.apply(e,n):e.domain()),p=i??(e.tickFormat?e.tickFormat.apply(e,n):ch),m=Math.max(s,0)+u,v=e.range(),w=+v[0]+o,y=+v[v.length-1]+o,A=(e.bandwidth?ph:hh)(e.copy(),o),E=d.selection?d.selection():d,x=E.selectAll(".domain").data([null]),B=E.selectAll(".tick").data(g,e).order(),_=B.exit(),N=B.enter().append("g").attr("class","tick"),O=B.select("line"),M=B.select("text");x=x.merge(x.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),B=B.merge(N),O=O.merge(N.append("line").attr("stroke","currentColor").attr(l+"2",c*s)),M=M.merge(N.append("text").attr("fill","currentColor").attr(l,c*m).attr("dy",t===Tn?"0em":t===qr?"0.71em":"0.32em")),d!==E&&(x=x.transition(d),B=B.transition(d),O=O.transition(d),M=M.transition(d),_=_.transition(d).attr("opacity",us).attr("transform",function($){return isFinite($=A($))?f($+o):this.getAttribute("transform")}),N.attr("opacity",us).attr("transform",function($){var q=this.parentNode.__axis;return f((q&&isFinite(q=q($))?q:A($))+o)})),_.remove(),x.attr("d",t===tn||t===In?a?"M"+c*a+","+w+"H"+o+"V"+y+"H"+c*a:"M"+o+","+w+"V"+y:a?"M"+w+","+c*a+"V"+o+"H"+y+"V"+c*a:"M"+w+","+o+"H"+y),B.attr("opacity",1).attr("transform",function($){return f(A($)+o)}),O.attr(l+"2",c*s),M.attr(l,c*m).text(p),E.filter(dh).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",t===In?"start":t===tn?"end":"middle"),E.each(function(){this.__axis=A})}return h.scale=function(d){return arguments.length?(e=d,h):e},h.ticks=function(){return n=Array.from(arguments),h},h.tickArguments=function(d){return arguments.length?(n=d==null?[]:Array.from(d),h):n.slice()},h.tickValues=function(d){return arguments.length?(r=d==null?null:Array.from(d),h):r&&r.slice()},h.tickFormat=function(d){return arguments.length?(i=d,h):i},h.tickSize=function(d){return arguments.length?(s=a=+d,h):s},h.tickSizeInner=function(d){return arguments.length?(s=+d,h):s},h.tickSizeOuter=function(d){return arguments.length?(a=+d,h):a},h.tickPadding=function(d){return arguments.length?(u=+d,h):u},h.offset=function(d){return arguments.length?(o=+d,h):o},h}function mh(t){return pr(Tn,t)}function gh(t){return pr(In,t)}function Dh(t){return pr(qr,t)}function vh(t){return pr(tn,t)}var yh={value:()=>{}};function _a(){for(var t=0,e=arguments.length,n={},r;t<e;++t){if(!(r=arguments[t]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new Pn(n)}function Pn(t){this._=t}function wh(t,e){return t.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!e.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}Pn.prototype=_a.prototype={constructor:Pn,on:function(t,e){var n=this._,r=wh(t+"",n),i,s=-1,a=r.length;if(arguments.length<2){for(;++s<a;)if((i=(t=r[s]).type)&&(i=Fh(n[i],t.name)))return i;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++s<a;)if(i=(t=r[s]).type)n[i]=os(n[i],t.name,e);else if(e==null)for(i in n)n[i]=os(n[i],t.name,null);return this},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new Pn(t)},call:function(t,e){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,s;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(s=this._[t],r=0,i=s.length;r<i;++r)s[r].value.apply(e,n)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],i=0,s=r.length;i<s;++i)r[i].value.apply(e,n)}};function Fh(t,e){for(var n=0,r=t.length,i;n<r;++n)if((i=t[n]).name===e)return i.value}function os(t,e,n){for(var r=0,i=t.length;r<i;++r)if(t[r].name===e){t[r]=yh,t=t.slice(0,r).concat(t.slice(r+1));break}return n!=null&&t.push({name:e,value:n}),t}var Hr="http://www.w3.org/1999/xhtml";const cs={svg:"http://www.w3.org/2000/svg",xhtml:Hr,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function dr(t){var e=t+="",n=e.indexOf(":");return n>=0&&(e=t.slice(0,n))!=="xmlns"&&(t=t.slice(n+1)),cs.hasOwnProperty(e)?{space:cs[e],local:t}:t}function Ah(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===Hr&&e.documentElement.namespaceURI===Hr?e.createElement(t):e.createElementNS(n,t)}}function Eh(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function xa(t){var e=dr(t);return(e.local?Eh:Ah)(e)}function Ch(){}function mi(t){return t==null?Ch:function(){return this.querySelector(t)}}function _h(t){typeof t!="function"&&(t=mi(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var s=e[i],a=s.length,u=r[i]=new Array(a),o,c,l=0;l<a;++l)(o=s[l])&&(c=t.call(o,o.__data__,l,s))&&("__data__"in o&&(c.__data__=o.__data__),u[l]=c);return new It(r,this._parents)}function xh(t){return t==null?[]:Array.isArray(t)?t:Array.from(t)}function Bh(){return[]}function Ba(t){return t==null?Bh:function(){return this.querySelectorAll(t)}}function bh(t){return function(){return xh(t.apply(this,arguments))}}function Mh(t){typeof t=="function"?t=bh(t):t=Ba(t);for(var e=this._groups,n=e.length,r=[],i=[],s=0;s<n;++s)for(var a=e[s],u=a.length,o,c=0;c<u;++c)(o=a[c])&&(r.push(t.call(o,o.__data__,c,a)),i.push(o));return new It(r,i)}function ba(t){return function(){return this.matches(t)}}function Ma(t){return function(e){return e.matches(t)}}var Sh=Array.prototype.find;function Nh(t){return function(){return Sh.call(this.children,t)}}function Th(){return this.firstElementChild}function Ih(t){return this.select(t==null?Th:Nh(typeof t=="function"?t:Ma(t)))}var Ph=Array.prototype.filter;function Rh(){return Array.from(this.children)}function Oh(t){return function(){return Ph.call(this.children,t)}}function Lh(t){return this.selectAll(t==null?Rh:Oh(typeof t=="function"?t:Ma(t)))}function kh(t){typeof t!="function"&&(t=ba(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var s=e[i],a=s.length,u=r[i]=[],o,c=0;c<a;++c)(o=s[c])&&t.call(o,o.__data__,c,s)&&u.push(o);return new It(r,this._parents)}function Sa(t){return new Array(t.length)}function $h(){return new It(this._enter||this._groups.map(Sa),this._parents)}function Gn(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}Gn.prototype={constructor:Gn,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function Uh(t){return function(){return t}}function zh(t,e,n,r,i,s){for(var a=0,u,o=e.length,c=s.length;a<c;++a)(u=e[a])?(u.__data__=s[a],r[a]=u):n[a]=new Gn(t,s[a]);for(;a<o;++a)(u=e[a])&&(i[a]=u)}function qh(t,e,n,r,i,s,a){var u,o,c=new Map,l=e.length,f=s.length,h=new Array(l),d;for(u=0;u<l;++u)(o=e[u])&&(h[u]=d=a.call(o,o.__data__,u,e)+"",c.has(d)?i[u]=o:c.set(d,o));for(u=0;u<f;++u)d=a.call(t,s[u],u,s)+"",(o=c.get(d))?(r[u]=o,o.__data__=s[u],c.delete(d)):n[u]=new Gn(t,s[u]);for(u=0;u<l;++u)(o=e[u])&&c.get(h[u])===o&&(i[u]=o)}function Hh(t){return t.__data__}function Vh(t,e){if(!arguments.length)return Array.from(this,Hh);var n=e?qh:zh,r=this._parents,i=this._groups;typeof t!="function"&&(t=Uh(t));for(var s=i.length,a=new Array(s),u=new Array(s),o=new Array(s),c=0;c<s;++c){var l=r[c],f=i[c],h=f.length,d=Wh(t.call(l,l&&l.__data__,c,r)),g=d.length,p=u[c]=new Array(g),m=a[c]=new Array(g),v=o[c]=new Array(h);n(l,f,p,m,v,d,e);for(var w=0,y=0,A,E;w<g;++w)if(A=p[w]){for(w>=y&&(y=w+1);!(E=m[y])&&++y<g;);A._next=E||null}}return a=new It(a,r),a._enter=u,a._exit=o,a}function Wh(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function Zh(){return new It(this._exit||this._groups.map(Sa),this._parents)}function Xh(t,e,n){var r=this.enter(),i=this,s=this.exit();return typeof t=="function"?(r=t(r),r&&(r=r.selection())):r=r.append(t+""),e!=null&&(i=e(i),i&&(i=i.selection())),n==null?s.remove():n(s),r&&i?r.merge(i).order():i}function Yh(t){for(var e=t.selection?t.selection():t,n=this._groups,r=e._groups,i=n.length,s=r.length,a=Math.min(i,s),u=new Array(i),o=0;o<a;++o)for(var c=n[o],l=r[o],f=c.length,h=u[o]=new Array(f),d,g=0;g<f;++g)(d=c[g]||l[g])&&(h[g]=d);for(;o<i;++o)u[o]=n[o];return new It(u,this._parents)}function Gh(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var r=t[e],i=r.length-1,s=r[i],a;--i>=0;)(a=r[i])&&(s&&a.compareDocumentPosition(s)^4&&s.parentNode.insertBefore(a,s),s=a);return this}function Jh(t){t||(t=Kh);function e(f,h){return f&&h?t(f.__data__,h.__data__):!f-!h}for(var n=this._groups,r=n.length,i=new Array(r),s=0;s<r;++s){for(var a=n[s],u=a.length,o=i[s]=new Array(u),c,l=0;l<u;++l)(c=a[l])&&(o[l]=c);o.sort(e)}return new It(i,this._parents).order()}function Kh(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function Qh(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}function jh(){return Array.from(this)}function t0(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,s=r.length;i<s;++i){var a=r[i];if(a)return a}return null}function e0(){let t=0;for(const e of this)++t;return t}function n0(){return!this.node()}function r0(t){for(var e=this._groups,n=0,r=e.length;n<r;++n)for(var i=e[n],s=0,a=i.length,u;s<a;++s)(u=i[s])&&t.call(u,u.__data__,s,i);return this}function i0(t){return function(){this.removeAttribute(t)}}function s0(t){return function(){this.removeAttributeNS(t.space,t.local)}}function a0(t,e){return function(){this.setAttribute(t,e)}}function u0(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function o0(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttribute(t):this.setAttribute(t,n)}}function c0(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function l0(t,e){var n=dr(t);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((e==null?n.local?s0:i0:typeof e=="function"?n.local?c0:o0:n.local?u0:a0)(n,e))}function Na(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function f0(t){return function(){this.style.removeProperty(t)}}function h0(t,e,n){return function(){this.style.setProperty(t,e,n)}}function p0(t,e,n){return function(){var r=e.apply(this,arguments);r==null?this.style.removeProperty(t):this.style.setProperty(t,r,n)}}function d0(t,e,n){return arguments.length>1?this.each((e==null?f0:typeof e=="function"?p0:h0)(t,e,n??"")):Ze(this.node(),t)}function Ze(t,e){return t.style.getPropertyValue(e)||Na(t).getComputedStyle(t,null).getPropertyValue(e)}function m0(t){return function(){delete this[t]}}function g0(t,e){return function(){this[t]=e}}function D0(t,e){return function(){var n=e.apply(this,arguments);n==null?delete this[t]:this[t]=n}}function v0(t,e){return arguments.length>1?this.each((e==null?m0:typeof e=="function"?D0:g0)(t,e)):this.node()[t]}function Ta(t){return t.trim().split(/^|\s+/)}function gi(t){return t.classList||new Ia(t)}function Ia(t){this._node=t,this._names=Ta(t.getAttribute("class")||"")}Ia.prototype={add:function(t){var e=this._names.indexOf(t);e<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function Pa(t,e){for(var n=gi(t),r=-1,i=e.length;++r<i;)n.add(e[r])}function Ra(t,e){for(var n=gi(t),r=-1,i=e.length;++r<i;)n.remove(e[r])}function y0(t){return function(){Pa(this,t)}}function w0(t){return function(){Ra(this,t)}}function F0(t,e){return function(){(e.apply(this,arguments)?Pa:Ra)(this,t)}}function A0(t,e){var n=Ta(t+"");if(arguments.length<2){for(var r=gi(this.node()),i=-1,s=n.length;++i<s;)if(!r.contains(n[i]))return!1;return!0}return this.each((typeof e=="function"?F0:e?y0:w0)(n,e))}function E0(){this.textContent=""}function C0(t){return function(){this.textContent=t}}function _0(t){return function(){var e=t.apply(this,arguments);this.textContent=e??""}}function x0(t){return arguments.length?this.each(t==null?E0:(typeof t=="function"?_0:C0)(t)):this.node().textContent}function B0(){this.innerHTML=""}function b0(t){return function(){this.innerHTML=t}}function M0(t){return function(){var e=t.apply(this,arguments);this.innerHTML=e??""}}function S0(t){return arguments.length?this.each(t==null?B0:(typeof t=="function"?M0:b0)(t)):this.node().innerHTML}function N0(){this.nextSibling&&this.parentNode.appendChild(this)}function T0(){return this.each(N0)}function I0(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function P0(){return this.each(I0)}function R0(t){var e=typeof t=="function"?t:xa(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}function O0(){return null}function L0(t,e){var n=typeof t=="function"?t:xa(t),r=e==null?O0:typeof e=="function"?e:mi(e);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function k0(){var t=this.parentNode;t&&t.removeChild(this)}function $0(){return this.each(k0)}function U0(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function z0(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function q0(t){return this.select(t?z0:U0)}function H0(t){return arguments.length?this.property("__data__",t):this.node().__data__}function V0(t){return function(e){t.call(this,e,this.__data__)}}function W0(t){return t.trim().split(/^|\s+/).map(function(e){var n="",r=e.indexOf(".");return r>=0&&(n=e.slice(r+1),e=e.slice(0,r)),{type:e,name:n}})}function Z0(t){return function(){var e=this.__on;if(e){for(var n=0,r=-1,i=e.length,s;n<i;++n)s=e[n],(!t.type||s.type===t.type)&&s.name===t.name?this.removeEventListener(s.type,s.listener,s.options):e[++r]=s;++r?e.length=r:delete this.__on}}}function X0(t,e,n){return function(){var r=this.__on,i,s=V0(e);if(r){for(var a=0,u=r.length;a<u;++a)if((i=r[a]).type===t.type&&i.name===t.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=s,i.options=n),i.value=e;return}}this.addEventListener(t.type,s,n),i={type:t.type,name:t.name,value:e,listener:s,options:n},r?r.push(i):this.__on=[i]}}function Y0(t,e,n){var r=W0(t+""),i,s=r.length,a;if(arguments.length<2){var u=this.node().__on;if(u){for(var o=0,c=u.length,l;o<c;++o)for(i=0,l=u[o];i<s;++i)if((a=r[i]).type===l.type&&a.name===l.name)return l.value}return}for(u=e?X0:Z0,i=0;i<s;++i)this.each(u(r[i],e,n));return this}function Oa(t,e,n){var r=Na(t),i=r.CustomEvent;typeof i=="function"?i=new i(e,n):(i=r.document.createEvent("Event"),n?(i.initEvent(e,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(e,!1,!1)),t.dispatchEvent(i)}function G0(t,e){return function(){return Oa(this,t,e)}}function J0(t,e){return function(){return Oa(this,t,e.apply(this,arguments))}}function K0(t,e){return this.each((typeof e=="function"?J0:G0)(t,e))}function*Q0(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,s=r.length,a;i<s;++i)(a=r[i])&&(yield a)}var La=[null];function It(t,e){this._groups=t,this._parents=e}function mn(){return new It([[document.documentElement]],La)}function j0(){return this}It.prototype=mn.prototype={constructor:It,select:_h,selectAll:Mh,selectChild:Ih,selectChildren:Lh,filter:kh,data:Vh,enter:$h,exit:Zh,join:Xh,merge:Yh,selection:j0,order:Gh,sort:Jh,call:Qh,nodes:jh,node:t0,size:e0,empty:n0,each:r0,attr:l0,style:d0,property:v0,classed:A0,text:x0,html:S0,raise:T0,lower:P0,append:R0,insert:L0,remove:$0,clone:q0,datum:H0,on:Y0,dispatch:K0,[Symbol.iterator]:Q0};function tp(t){return typeof t=="string"?new It([[document.querySelector(t)]],[document.documentElement]):new It([[t]],La)}function Di(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function ka(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function gn(){}var hn=.7,Jn=1/hn,qe="\\s*([+-]?\\d+)\\s*",pn="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Qt="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",ep=/^#([0-9a-f]{3,8})$/,np=new RegExp(`^rgb\\(${qe},${qe},${qe}\\)$`),rp=new RegExp(`^rgb\\(${Qt},${Qt},${Qt}\\)$`),ip=new RegExp(`^rgba\\(${qe},${qe},${qe},${pn}\\)$`),sp=new RegExp(`^rgba\\(${Qt},${Qt},${Qt},${pn}\\)$`),ap=new RegExp(`^hsl\\(${pn},${Qt},${Qt}\\)$`),up=new RegExp(`^hsla\\(${pn},${Qt},${Qt},${pn}\\)$`),ls={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Di(gn,Me,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:fs,formatHex:fs,formatHex8:op,formatHsl:cp,formatRgb:hs,toString:hs});function fs(){return this.rgb().formatHex()}function op(){return this.rgb().formatHex8()}function cp(){return $a(this).formatHsl()}function hs(){return this.rgb().formatRgb()}function Me(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=ep.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?ps(e):n===3?new Mt(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?Cn(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?Cn(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=np.exec(t))?new Mt(e[1],e[2],e[3],1):(e=rp.exec(t))?new Mt(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=ip.exec(t))?Cn(e[1],e[2],e[3],e[4]):(e=sp.exec(t))?Cn(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=ap.exec(t))?gs(e[1],e[2]/100,e[3]/100,1):(e=up.exec(t))?gs(e[1],e[2]/100,e[3]/100,e[4]):ls.hasOwnProperty(t)?ps(ls[t]):t==="transparent"?new Mt(NaN,NaN,NaN,0):null}function ps(t){return new Mt(t>>16&255,t>>8&255,t&255,1)}function Cn(t,e,n,r){return r<=0&&(t=e=n=NaN),new Mt(t,e,n,r)}function lp(t){return t instanceof gn||(t=Me(t)),t?(t=t.rgb(),new Mt(t.r,t.g,t.b,t.opacity)):new Mt}function Vr(t,e,n,r){return arguments.length===1?lp(t):new Mt(t,e,n,r??1)}function Mt(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}Di(Mt,Vr,ka(gn,{brighter(t){return t=t==null?Jn:Math.pow(Jn,t),new Mt(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?hn:Math.pow(hn,t),new Mt(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new Mt(be(this.r),be(this.g),be(this.b),Kn(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:ds,formatHex:ds,formatHex8:fp,formatRgb:ms,toString:ms}));function ds(){return`#${_e(this.r)}${_e(this.g)}${_e(this.b)}`}function fp(){return`#${_e(this.r)}${_e(this.g)}${_e(this.b)}${_e((isNaN(this.opacity)?1:this.opacity)*255)}`}function ms(){const t=Kn(this.opacity);return`${t===1?"rgb(":"rgba("}${be(this.r)}, ${be(this.g)}, ${be(this.b)}${t===1?")":`, ${t})`}`}function Kn(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function be(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function _e(t){return t=be(t),(t<16?"0":"")+t.toString(16)}function gs(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new Ht(t,e,n,r)}function $a(t){if(t instanceof Ht)return new Ht(t.h,t.s,t.l,t.opacity);if(t instanceof gn||(t=Me(t)),!t)return new Ht;if(t instanceof Ht)return t;t=t.rgb();var e=t.r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),s=Math.max(e,n,r),a=NaN,u=s-i,o=(s+i)/2;return u?(e===s?a=(n-r)/u+(n<r)*6:n===s?a=(r-e)/u+2:a=(e-n)/u+4,u/=o<.5?s+i:2-s-i,a*=60):u=o>0&&o<1?0:a,new Ht(a,u,o,t.opacity)}function hp(t,e,n,r){return arguments.length===1?$a(t):new Ht(t,e,n,r??1)}function Ht(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}Di(Ht,hp,ka(gn,{brighter(t){return t=t==null?Jn:Math.pow(Jn,t),new Ht(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?hn:Math.pow(hn,t),new Ht(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new Mt(Br(t>=240?t-240:t+120,i,r),Br(t,i,r),Br(t<120?t+240:t-120,i,r),this.opacity)},clamp(){return new Ht(Ds(this.h),_n(this.s),_n(this.l),Kn(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=Kn(this.opacity);return`${t===1?"hsl(":"hsla("}${Ds(this.h)}, ${_n(this.s)*100}%, ${_n(this.l)*100}%${t===1?")":`, ${t})`}`}}));function Ds(t){return t=(t||0)%360,t<0?t+360:t}function _n(t){return Math.max(0,Math.min(1,t||0))}function Br(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}const vi=t=>()=>t;function pp(t,e){return function(n){return t+n*e}}function dp(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}function mp(t){return(t=+t)==1?Ua:function(e,n){return n-e?dp(e,n,t):vi(isNaN(e)?n:e)}}function Ua(t,e){var n=e-t;return n?pp(t,n):vi(isNaN(t)?e:t)}const Qn=function t(e){var n=mp(e);function r(i,s){var a=n((i=Vr(i)).r,(s=Vr(s)).r),u=n(i.g,s.g),o=n(i.b,s.b),c=Ua(i.opacity,s.opacity);return function(l){return i.r=a(l),i.g=u(l),i.b=o(l),i.opacity=c(l),i+""}}return r.gamma=t,r}(1);function gp(t,e){e||(e=[]);var n=t?Math.min(e.length,t.length):0,r=e.slice(),i;return function(s){for(i=0;i<n;++i)r[i]=t[i]*(1-s)+e[i]*s;return r}}function Dp(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function vp(t,e){var n=e?e.length:0,r=t?Math.min(n,t.length):0,i=new Array(r),s=new Array(n),a;for(a=0;a<r;++a)i[a]=yi(t[a],e[a]);for(;a<n;++a)s[a]=e[a];return function(u){for(a=0;a<r;++a)s[a]=i[a](u);return s}}function yp(t,e){var n=new Date;return t=+t,e=+e,function(r){return n.setTime(t*(1-r)+e*r),n}}function qt(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function wp(t,e){var n={},r={},i;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(i in e)i in t?n[i]=yi(t[i],e[i]):r[i]=e[i];return function(s){for(i in n)r[i]=n[i](s);return r}}var Wr=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,br=new RegExp(Wr.source,"g");function Fp(t){return function(){return t}}function Ap(t){return function(e){return t(e)+""}}function za(t,e){var n=Wr.lastIndex=br.lastIndex=0,r,i,s,a=-1,u=[],o=[];for(t=t+"",e=e+"";(r=Wr.exec(t))&&(i=br.exec(e));)(s=i.index)>n&&(s=e.slice(n,s),u[a]?u[a]+=s:u[++a]=s),(r=r[0])===(i=i[0])?u[a]?u[a]+=i:u[++a]=i:(u[++a]=null,o.push({i:a,x:qt(r,i)})),n=br.lastIndex;return n<e.length&&(s=e.slice(n),u[a]?u[a]+=s:u[++a]=s),u.length<2?o[0]?Ap(o[0].x):Fp(e):(e=o.length,function(c){for(var l=0,f;l<e;++l)u[(f=o[l]).i]=f.x(c);return u.join("")})}function yi(t,e){var n=typeof e,r;return e==null||n==="boolean"?vi(e):(n==="number"?qt:n==="string"?(r=Me(e))?(e=r,Qn):za:e instanceof Me?Qn:e instanceof Date?yp:Dp(e)?gp:Array.isArray(e)?vp:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?wp:qt)(t,e)}function Ep(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}var vs=180/Math.PI,Zr={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function qa(t,e,n,r,i,s){var a,u,o;return(a=Math.sqrt(t*t+e*e))&&(t/=a,e/=a),(o=t*n+e*r)&&(n-=t*o,r-=e*o),(u=Math.sqrt(n*n+r*r))&&(n/=u,r/=u,o/=u),t*r<e*n&&(t=-t,e=-e,o=-o,a=-a),{translateX:i,translateY:s,rotate:Math.atan2(e,t)*vs,skewX:Math.atan(o)*vs,scaleX:a,scaleY:u}}var xn;function Cp(t){const e=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(t+"");return e.isIdentity?Zr:qa(e.a,e.b,e.c,e.d,e.e,e.f)}function _p(t){return t==null||(xn||(xn=document.createElementNS("http://www.w3.org/2000/svg","g")),xn.setAttribute("transform",t),!(t=xn.transform.baseVal.consolidate()))?Zr:(t=t.matrix,qa(t.a,t.b,t.c,t.d,t.e,t.f))}function Ha(t,e,n,r){function i(c){return c.length?c.pop()+" ":""}function s(c,l,f,h,d,g){if(c!==f||l!==h){var p=d.push("translate(",null,e,null,n);g.push({i:p-4,x:qt(c,f)},{i:p-2,x:qt(l,h)})}else(f||h)&&d.push("translate("+f+e+h+n)}function a(c,l,f,h){c!==l?(c-l>180?l+=360:l-c>180&&(c+=360),h.push({i:f.push(i(f)+"rotate(",null,r)-2,x:qt(c,l)})):l&&f.push(i(f)+"rotate("+l+r)}function u(c,l,f,h){c!==l?h.push({i:f.push(i(f)+"skewX(",null,r)-2,x:qt(c,l)}):l&&f.push(i(f)+"skewX("+l+r)}function o(c,l,f,h,d,g){if(c!==f||l!==h){var p=d.push(i(d)+"scale(",null,",",null,")");g.push({i:p-4,x:qt(c,f)},{i:p-2,x:qt(l,h)})}else(f!==1||h!==1)&&d.push(i(d)+"scale("+f+","+h+")")}return function(c,l){var f=[],h=[];return c=t(c),l=t(l),s(c.translateX,c.translateY,l.translateX,l.translateY,f,h),a(c.rotate,l.rotate,f,h),u(c.skewX,l.skewX,f,h),o(c.scaleX,c.scaleY,l.scaleX,l.scaleY,f,h),c=l=null,function(d){for(var g=-1,p=h.length,m;++g<p;)f[(m=h[g]).i]=m.x(d);return f.join("")}}}var xp=Ha(Cp,"px, ","px)","deg)"),Bp=Ha(_p,", ",")",")"),Xe=0,en=0,je=0,Va=1e3,jn,nn,tr=0,Se=0,mr=0,dn=typeof performance=="object"&&performance.now?performance:Date,Wa=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function wi(){return Se||(Wa(bp),Se=dn.now()+mr)}function bp(){Se=0}function er(){this._call=this._time=this._next=null}er.prototype=Za.prototype={constructor:er,restart:function(t,e,n){if(typeof t!="function")throw new TypeError("callback is not a function");n=(n==null?wi():+n)+(e==null?0:+e),!this._next&&nn!==this&&(nn?nn._next=this:jn=this,nn=this),this._call=t,this._time=n,Xr()},stop:function(){this._call&&(this._call=null,this._time=1/0,Xr())}};function Za(t,e,n){var r=new er;return r.restart(t,e,n),r}function Mp(){wi(),++Xe;for(var t=jn,e;t;)(e=Se-t._time)>=0&&t._call.call(void 0,e),t=t._next;--Xe}function ys(){Se=(tr=dn.now())+mr,Xe=en=0;try{Mp()}finally{Xe=0,Np(),Se=0}}function Sp(){var t=dn.now(),e=t-tr;e>Va&&(mr-=e,tr=t)}function Np(){for(var t,e=jn,n,r=1/0;e;)e._call?(r>e._time&&(r=e._time),t=e,e=e._next):(n=e._next,e._next=null,e=t?t._next=n:jn=n);nn=t,Xr(r)}function Xr(t){if(!Xe){en&&(en=clearTimeout(en));var e=t-Se;e>24?(t<1/0&&(en=setTimeout(ys,t-dn.now()-mr)),je&&(je=clearInterval(je))):(je||(tr=dn.now(),je=setInterval(Sp,Va)),Xe=1,Wa(ys))}}function ws(t,e,n){var r=new er;return e=e==null?0:+e,r.restart(i=>{r.stop(),t(i+e)},e,n),r}var Tp=_a("start","end","cancel","interrupt"),Ip=[],Xa=0,Fs=1,Yr=2,Rn=3,As=4,Gr=5,On=6;function gr(t,e,n,r,i,s){var a=t.__transition;if(!a)t.__transition={};else if(n in a)return;Pp(t,n,{name:e,index:r,group:i,on:Tp,tween:Ip,time:s.time,delay:s.delay,duration:s.duration,ease:s.ease,timer:null,state:Xa})}function Fi(t,e){var n=Yt(t,e);if(n.state>Xa)throw new Error("too late; already scheduled");return n}function ne(t,e){var n=Yt(t,e);if(n.state>Rn)throw new Error("too late; already running");return n}function Yt(t,e){var n=t.__transition;if(!n||!(n=n[e]))throw new Error("transition not found");return n}function Pp(t,e,n){var r=t.__transition,i;r[e]=n,n.timer=Za(s,0,n.time);function s(c){n.state=Fs,n.timer.restart(a,n.delay,n.time),n.delay<=c&&a(c-n.delay)}function a(c){var l,f,h,d;if(n.state!==Fs)return o();for(l in r)if(d=r[l],d.name===n.name){if(d.state===Rn)return ws(a);d.state===As?(d.state=On,d.timer.stop(),d.on.call("interrupt",t,t.__data__,d.index,d.group),delete r[l]):+l<e&&(d.state=On,d.timer.stop(),d.on.call("cancel",t,t.__data__,d.index,d.group),delete r[l])}if(ws(function(){n.state===Rn&&(n.state=As,n.timer.restart(u,n.delay,n.time),u(c))}),n.state=Yr,n.on.call("start",t,t.__data__,n.index,n.group),n.state===Yr){for(n.state=Rn,i=new Array(h=n.tween.length),l=0,f=-1;l<h;++l)(d=n.tween[l].value.call(t,t.__data__,n.index,n.group))&&(i[++f]=d);i.length=f+1}}function u(c){for(var l=c<n.duration?n.ease.call(null,c/n.duration):(n.timer.restart(o),n.state=Gr,1),f=-1,h=i.length;++f<h;)i[f].call(t,l);n.state===Gr&&(n.on.call("end",t,t.__data__,n.index,n.group),o())}function o(){n.state=On,n.timer.stop(),delete r[e];for(var c in r)return;delete t.__transition}}function Rp(t,e){var n=t.__transition,r,i,s=!0,a;if(n){e=e==null?null:e+"";for(a in n){if((r=n[a]).name!==e){s=!1;continue}i=r.state>Yr&&r.state<Gr,r.state=On,r.timer.stop(),r.on.call(i?"interrupt":"cancel",t,t.__data__,r.index,r.group),delete n[a]}s&&delete t.__transition}}function Op(t){return this.each(function(){Rp(this,t)})}function Lp(t,e){var n,r;return function(){var i=ne(this,t),s=i.tween;if(s!==n){r=n=s;for(var a=0,u=r.length;a<u;++a)if(r[a].name===e){r=r.slice(),r.splice(a,1);break}}i.tween=r}}function kp(t,e,n){var r,i;if(typeof n!="function")throw new Error;return function(){var s=ne(this,t),a=s.tween;if(a!==r){i=(r=a).slice();for(var u={name:e,value:n},o=0,c=i.length;o<c;++o)if(i[o].name===e){i[o]=u;break}o===c&&i.push(u)}s.tween=i}}function $p(t,e){var n=this._id;if(t+="",arguments.length<2){for(var r=Yt(this.node(),n).tween,i=0,s=r.length,a;i<s;++i)if((a=r[i]).name===t)return a.value;return null}return this.each((e==null?Lp:kp)(n,t,e))}function Ai(t,e,n){var r=t._id;return t.each(function(){var i=ne(this,r);(i.value||(i.value={}))[e]=n.apply(this,arguments)}),function(i){return Yt(i,r).value[e]}}function Ya(t,e){var n;return(typeof e=="number"?qt:e instanceof Me?Qn:(n=Me(e))?(e=n,Qn):za)(t,e)}function Up(t){return function(){this.removeAttribute(t)}}function zp(t){return function(){this.removeAttributeNS(t.space,t.local)}}function qp(t,e,n){var r,i=n+"",s;return function(){var a=this.getAttribute(t);return a===i?null:a===r?s:s=e(r=a,n)}}function Hp(t,e,n){var r,i=n+"",s;return function(){var a=this.getAttributeNS(t.space,t.local);return a===i?null:a===r?s:s=e(r=a,n)}}function Vp(t,e,n){var r,i,s;return function(){var a,u=n(this),o;return u==null?void this.removeAttribute(t):(a=this.getAttribute(t),o=u+"",a===o?null:a===r&&o===i?s:(i=o,s=e(r=a,u)))}}function Wp(t,e,n){var r,i,s;return function(){var a,u=n(this),o;return u==null?void this.removeAttributeNS(t.space,t.local):(a=this.getAttributeNS(t.space,t.local),o=u+"",a===o?null:a===r&&o===i?s:(i=o,s=e(r=a,u)))}}function Zp(t,e){var n=dr(t),r=n==="transform"?Bp:Ya;return this.attrTween(t,typeof e=="function"?(n.local?Wp:Vp)(n,r,Ai(this,"attr."+t,e)):e==null?(n.local?zp:Up)(n):(n.local?Hp:qp)(n,r,e))}function Xp(t,e){return function(n){this.setAttribute(t,e.call(this,n))}}function Yp(t,e){return function(n){this.setAttributeNS(t.space,t.local,e.call(this,n))}}function Gp(t,e){var n,r;function i(){var s=e.apply(this,arguments);return s!==r&&(n=(r=s)&&Yp(t,s)),n}return i._value=e,i}function Jp(t,e){var n,r;function i(){var s=e.apply(this,arguments);return s!==r&&(n=(r=s)&&Xp(t,s)),n}return i._value=e,i}function Kp(t,e){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(e==null)return this.tween(n,null);if(typeof e!="function")throw new Error;var r=dr(t);return this.tween(n,(r.local?Gp:Jp)(r,e))}function Qp(t,e){return function(){Fi(this,t).delay=+e.apply(this,arguments)}}function jp(t,e){return e=+e,function(){Fi(this,t).delay=e}}function td(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?Qp:jp)(e,t)):Yt(this.node(),e).delay}function ed(t,e){return function(){ne(this,t).duration=+e.apply(this,arguments)}}function nd(t,e){return e=+e,function(){ne(this,t).duration=e}}function rd(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?ed:nd)(e,t)):Yt(this.node(),e).duration}function id(t,e){if(typeof e!="function")throw new Error;return function(){ne(this,t).ease=e}}function sd(t){var e=this._id;return arguments.length?this.each(id(e,t)):Yt(this.node(),e).ease}function ad(t,e){return function(){var n=e.apply(this,arguments);if(typeof n!="function")throw new Error;ne(this,t).ease=n}}function ud(t){if(typeof t!="function")throw new Error;return this.each(ad(this._id,t))}function od(t){typeof t!="function"&&(t=ba(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var s=e[i],a=s.length,u=r[i]=[],o,c=0;c<a;++c)(o=s[c])&&t.call(o,o.__data__,c,s)&&u.push(o);return new ce(r,this._parents,this._name,this._id)}function cd(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,r=e.length,i=n.length,s=Math.min(r,i),a=new Array(r),u=0;u<s;++u)for(var o=e[u],c=n[u],l=o.length,f=a[u]=new Array(l),h,d=0;d<l;++d)(h=o[d]||c[d])&&(f[d]=h);for(;u<r;++u)a[u]=e[u];return new ce(a,this._parents,this._name,this._id)}function ld(t){return(t+"").trim().split(/^|\s+/).every(function(e){var n=e.indexOf(".");return n>=0&&(e=e.slice(0,n)),!e||e==="start"})}function fd(t,e,n){var r,i,s=ld(e)?Fi:ne;return function(){var a=s(this,t),u=a.on;u!==r&&(i=(r=u).copy()).on(e,n),a.on=i}}function hd(t,e){var n=this._id;return arguments.length<2?Yt(this.node(),n).on.on(t):this.each(fd(n,t,e))}function pd(t){return function(){var e=this.parentNode;for(var n in this.__transition)if(+n!==t)return;e&&e.removeChild(this)}}function dd(){return this.on("end.remove",pd(this._id))}function md(t){var e=this._name,n=this._id;typeof t!="function"&&(t=mi(t));for(var r=this._groups,i=r.length,s=new Array(i),a=0;a<i;++a)for(var u=r[a],o=u.length,c=s[a]=new Array(o),l,f,h=0;h<o;++h)(l=u[h])&&(f=t.call(l,l.__data__,h,u))&&("__data__"in l&&(f.__data__=l.__data__),c[h]=f,gr(c[h],e,n,h,c,Yt(l,n)));return new ce(s,this._parents,e,n)}function gd(t){var e=this._name,n=this._id;typeof t!="function"&&(t=Ba(t));for(var r=this._groups,i=r.length,s=[],a=[],u=0;u<i;++u)for(var o=r[u],c=o.length,l,f=0;f<c;++f)if(l=o[f]){for(var h=t.call(l,l.__data__,f,o),d,g=Yt(l,n),p=0,m=h.length;p<m;++p)(d=h[p])&&gr(d,e,n,p,h,g);s.push(h),a.push(l)}return new ce(s,a,e,n)}var Dd=mn.prototype.constructor;function vd(){return new Dd(this._groups,this._parents)}function yd(t,e){var n,r,i;return function(){var s=Ze(this,t),a=(this.style.removeProperty(t),Ze(this,t));return s===a?null:s===n&&a===r?i:i=e(n=s,r=a)}}function Ga(t){return function(){this.style.removeProperty(t)}}function wd(t,e,n){var r,i=n+"",s;return function(){var a=Ze(this,t);return a===i?null:a===r?s:s=e(r=a,n)}}function Fd(t,e,n){var r,i,s;return function(){var a=Ze(this,t),u=n(this),o=u+"";return u==null&&(o=u=(this.style.removeProperty(t),Ze(this,t))),a===o?null:a===r&&o===i?s:(i=o,s=e(r=a,u))}}function Ad(t,e){var n,r,i,s="style."+e,a="end."+s,u;return function(){var o=ne(this,t),c=o.on,l=o.value[s]==null?u||(u=Ga(e)):void 0;(c!==n||i!==l)&&(r=(n=c).copy()).on(a,i=l),o.on=r}}function Ed(t,e,n){var r=(t+="")=="transform"?xp:Ya;return e==null?this.styleTween(t,yd(t,r)).on("end.style."+t,Ga(t)):typeof e=="function"?this.styleTween(t,Fd(t,r,Ai(this,"style."+t,e))).each(Ad(this._id,t)):this.styleTween(t,wd(t,r,e),n).on("end.style."+t,null)}function Cd(t,e,n){return function(r){this.style.setProperty(t,e.call(this,r),n)}}function _d(t,e,n){var r,i;function s(){var a=e.apply(this,arguments);return a!==i&&(r=(i=a)&&Cd(t,a,n)),r}return s._value=e,s}function xd(t,e,n){var r="style."+(t+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(e==null)return this.tween(r,null);if(typeof e!="function")throw new Error;return this.tween(r,_d(t,e,n??""))}function Bd(t){return function(){this.textContent=t}}function bd(t){return function(){var e=t(this);this.textContent=e??""}}function Md(t){return this.tween("text",typeof t=="function"?bd(Ai(this,"text",t)):Bd(t==null?"":t+""))}function Sd(t){return function(e){this.textContent=t.call(this,e)}}function Nd(t){var e,n;function r(){var i=t.apply(this,arguments);return i!==n&&(e=(n=i)&&Sd(i)),e}return r._value=t,r}function Td(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(t==null)return this.tween(e,null);if(typeof t!="function")throw new Error;return this.tween(e,Nd(t))}function Id(){for(var t=this._name,e=this._id,n=Ja(),r=this._groups,i=r.length,s=0;s<i;++s)for(var a=r[s],u=a.length,o,c=0;c<u;++c)if(o=a[c]){var l=Yt(o,e);gr(o,t,n,c,a,{time:l.time+l.delay+l.duration,delay:0,duration:l.duration,ease:l.ease})}return new ce(r,this._parents,t,n)}function Pd(){var t,e,n=this,r=n._id,i=n.size();return new Promise(function(s,a){var u={value:a},o={value:function(){--i===0&&s()}};n.each(function(){var c=ne(this,r),l=c.on;l!==t&&(e=(t=l).copy(),e._.cancel.push(u),e._.interrupt.push(u),e._.end.push(o)),c.on=e}),i===0&&s()})}var Rd=0;function ce(t,e,n,r){this._groups=t,this._parents=e,this._name=n,this._id=r}function Ja(){return++Rd}var ie=mn.prototype;ce.prototype={constructor:ce,select:md,selectAll:gd,selectChild:ie.selectChild,selectChildren:ie.selectChildren,filter:od,merge:cd,selection:vd,transition:Id,call:ie.call,nodes:ie.nodes,node:ie.node,size:ie.size,empty:ie.empty,each:ie.each,on:hd,attr:Zp,attrTween:Kp,style:Ed,styleTween:xd,text:Md,textTween:Td,remove:dd,tween:$p,delay:td,duration:rd,ease:sd,easeVarying:ud,end:Pd,[Symbol.iterator]:ie[Symbol.iterator]};function Od(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}var Ld={time:null,delay:0,duration:250,ease:Od};function kd(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))throw new Error(`transition ${e} not found`);return n}function $d(t){var e,n;t instanceof ce?(e=t._id,t=t._name):(e=Ja(),(n=Ld).time=wi(),t=t==null?null:t+"");for(var r=this._groups,i=r.length,s=0;s<i;++s)for(var a=r[s],u=a.length,o,c=0;c<u;++c)(o=a[c])&&gr(o,t,e,c,a,n||kd(o,e));return new ce(r,this._parents,t,e)}mn.prototype.interrupt=Op;mn.prototype.transition=$d;const Jr=Math.PI,Kr=2*Jr,Ee=1e-6,Ud=Kr-Ee;function Ka(t){this._+=t[0];for(let e=1,n=t.length;e<n;++e)this._+=arguments[e]+t[e]}function zd(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return Ka;const n=10**e;return function(r){this._+=r[0];for(let i=1,s=r.length;i<s;++i)this._+=Math.round(arguments[i]*n)/n+r[i]}}class qd{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?Ka:zd(e)}moveTo(e,n){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,n){this._append`L${this._x1=+e},${this._y1=+n}`}quadraticCurveTo(e,n,r,i){this._append`Q${+e},${+n},${this._x1=+r},${this._y1=+i}`}bezierCurveTo(e,n,r,i,s,a){this._append`C${+e},${+n},${+r},${+i},${this._x1=+s},${this._y1=+a}`}arcTo(e,n,r,i,s){if(e=+e,n=+n,r=+r,i=+i,s=+s,s<0)throw new Error(`negative radius: ${s}`);let a=this._x1,u=this._y1,o=r-e,c=i-n,l=a-e,f=u-n,h=l*l+f*f;if(this._x1===null)this._append`M${this._x1=e},${this._y1=n}`;else if(h>Ee)if(!(Math.abs(f*o-c*l)>Ee)||!s)this._append`L${this._x1=e},${this._y1=n}`;else{let d=r-a,g=i-u,p=o*o+c*c,m=d*d+g*g,v=Math.sqrt(p),w=Math.sqrt(h),y=s*Math.tan((Jr-Math.acos((p+h-m)/(2*v*w)))/2),A=y/w,E=y/v;Math.abs(A-1)>Ee&&this._append`L${e+A*l},${n+A*f}`,this._append`A${s},${s},0,0,${+(f*d>l*g)},${this._x1=e+E*o},${this._y1=n+E*c}`}}arc(e,n,r,i,s,a){if(e=+e,n=+n,r=+r,a=!!a,r<0)throw new Error(`negative radius: ${r}`);let u=r*Math.cos(i),o=r*Math.sin(i),c=e+u,l=n+o,f=1^a,h=a?i-s:s-i;this._x1===null?this._append`M${c},${l}`:(Math.abs(this._x1-c)>Ee||Math.abs(this._y1-l)>Ee)&&this._append`L${c},${l}`,r&&(h<0&&(h=h%Kr+Kr),h>Ud?this._append`A${r},${r},0,1,${f},${e-u},${n-o}A${r},${r},0,1,${f},${this._x1=c},${this._y1=l}`:h>Ee&&this._append`A${r},${r},0,${+(h>=Jr)},${f},${this._x1=e+r*Math.cos(s)},${this._y1=n+r*Math.sin(s)}`)}rect(e,n,r,i){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}h${r=+r}v${+i}h${-r}Z`}toString(){return this._}}function Hd(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function nr(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,r=t.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+t.slice(n+1)]}function Ye(t){return t=nr(Math.abs(t)),t?t[1]:NaN}function Vd(t,e){return function(n,r){for(var i=n.length,s=[],a=0,u=t[0],o=0;i>0&&u>0&&(o+u+1>r&&(u=Math.max(1,r-o)),s.push(n.substring(i-=u,i+u)),!((o+=u+1)>r));)u=t[a=(a+1)%t.length];return s.reverse().join(e)}}function Wd(t){return function(e){return e.replace(/[0-9]/g,function(n){return t[+n]})}}var Zd=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function rr(t){if(!(e=Zd.exec(t)))throw new Error("invalid format: "+t);var e;return new Ei({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}rr.prototype=Ei.prototype;function Ei(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}Ei.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function Xd(t){t:for(var e=t.length,n=1,r=-1,i;n<e;++n)switch(t[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+t[n])break t;r>0&&(r=0);break}return r>0?t.slice(0,r)+t.slice(i+1):t}var Qa;function Yd(t,e){var n=nr(t,e);if(!n)return t+"";var r=n[0],i=n[1],s=i-(Qa=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,a=r.length;return s===a?r:s>a?r+new Array(s-a+1).join("0"):s>0?r.slice(0,s)+"."+r.slice(s):"0."+new Array(1-s).join("0")+nr(t,Math.max(0,e+s-1))[0]}function Es(t,e){var n=nr(t,e);if(!n)return t+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const Cs={"%":(t,e)=>(t*100).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:Hd,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>Es(t*100,e),r:Es,s:Yd,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function _s(t){return t}var xs=Array.prototype.map,Bs=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function Gd(t){var e=t.grouping===void 0||t.thousands===void 0?_s:Vd(xs.call(t.grouping,Number),t.thousands+""),n=t.currency===void 0?"":t.currency[0]+"",r=t.currency===void 0?"":t.currency[1]+"",i=t.decimal===void 0?".":t.decimal+"",s=t.numerals===void 0?_s:Wd(xs.call(t.numerals,String)),a=t.percent===void 0?"%":t.percent+"",u=t.minus===void 0?"":t.minus+"",o=t.nan===void 0?"NaN":t.nan+"";function c(f){f=rr(f);var h=f.fill,d=f.align,g=f.sign,p=f.symbol,m=f.zero,v=f.width,w=f.comma,y=f.precision,A=f.trim,E=f.type;E==="n"?(w=!0,E="g"):Cs[E]||(y===void 0&&(y=12),A=!0,E="g"),(m||h==="0"&&d==="=")&&(m=!0,h="0",d="=");var x=p==="$"?n:p==="#"&&/[boxX]/.test(E)?"0"+E.toLowerCase():"",B=p==="$"?r:/[%p]/.test(E)?a:"",_=Cs[E],N=/[defgprs%]/.test(E);y=y===void 0?6:/[gprs]/.test(E)?Math.max(1,Math.min(21,y)):Math.max(0,Math.min(20,y));function O(M){var $=x,q=B,H,G,V;if(E==="c")q=_(M)+q,M="";else{M=+M;var st=M<0||1/M<0;if(M=isNaN(M)?o:_(Math.abs(M),y),A&&(M=Xd(M)),st&&+M==0&&g!=="+"&&(st=!1),$=(st?g==="("?g:u:g==="-"||g==="("?"":g)+$,q=(E==="s"?Bs[8+Qa/3]:"")+q+(st&&g==="("?")":""),N){for(H=-1,G=M.length;++H<G;)if(V=M.charCodeAt(H),48>V||V>57){q=(V===46?i+M.slice(H+1):M.slice(H))+q,M=M.slice(0,H);break}}}w&&!m&&(M=e(M,1/0));var ut=$.length+M.length+q.length,K=ut<v?new Array(v-ut+1).join(h):"";switch(w&&m&&(M=e(K+M,K.length?v-q.length:1/0),K=""),d){case"<":M=$+M+q+K;break;case"=":M=$+K+M+q;break;case"^":M=K.slice(0,ut=K.length>>1)+$+M+q+K.slice(ut);break;default:M=K+$+M+q;break}return s(M)}return O.toString=function(){return f+""},O}function l(f,h){var d=c((f=rr(f),f.type="f",f)),g=Math.max(-8,Math.min(8,Math.floor(Ye(h)/3)))*3,p=Math.pow(10,-g),m=Bs[8+g/3];return function(v){return d(p*v)+m}}return{format:c,formatPrefix:l}}var Bn,ja,tu;Jd({thousands:",",grouping:[3],currency:["$",""]});function Jd(t){return Bn=Gd(t),ja=Bn.format,tu=Bn.formatPrefix,Bn}function Kd(t){return Math.max(0,-Ye(Math.abs(t)))}function Qd(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Ye(e)/3)))*3-Ye(Math.abs(t)))}function jd(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,Ye(e)-Ye(t))+1}function tm(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}function em(t){return function(){return t}}function nm(t){return+t}var bs=[0,1];function Ue(t){return t}function Qr(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:em(isNaN(e)?NaN:.5)}function rm(t,e){var n;return t>e&&(n=t,t=e,e=n),function(r){return Math.max(t,Math.min(e,r))}}function im(t,e,n){var r=t[0],i=t[1],s=e[0],a=e[1];return i<r?(r=Qr(i,r),s=n(a,s)):(r=Qr(r,i),s=n(s,a)),function(u){return s(r(u))}}function sm(t,e,n){var r=Math.min(t.length,e.length)-1,i=new Array(r),s=new Array(r),a=-1;for(t[r]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++a<r;)i[a]=Qr(t[a],t[a+1]),s[a]=n(e[a],e[a+1]);return function(u){var o=rh(t,u,1,r)-1;return s[o](i[o](u))}}function am(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function um(){var t=bs,e=bs,n=yi,r,i,s,a=Ue,u,o,c;function l(){var h=Math.min(t.length,e.length);return a!==Ue&&(a=rm(t[0],t[h-1])),u=h>2?sm:im,o=c=null,f}function f(h){return h==null||isNaN(h=+h)?s:(o||(o=u(t.map(r),e,n)))(r(a(h)))}return f.invert=function(h){return a(i((c||(c=u(e,t.map(r),qt)))(h)))},f.domain=function(h){return arguments.length?(t=Array.from(h,nm),l()):t.slice()},f.range=function(h){return arguments.length?(e=Array.from(h),l()):e.slice()},f.rangeRound=function(h){return e=Array.from(h),n=Ep,l()},f.clamp=function(h){return arguments.length?(a=h?!0:Ue,l()):a!==Ue},f.interpolate=function(h){return arguments.length?(n=h,l()):n},f.unknown=function(h){return arguments.length?(s=h,f):s},function(h,d){return r=h,i=d,l()}}function om(){return um()(Ue,Ue)}function cm(t,e,n,r){var i=oh(t,e,n),s;switch(r=rr(r??",f"),r.type){case"s":{var a=Math.max(Math.abs(t),Math.abs(e));return r.precision==null&&!isNaN(s=Qd(i,a))&&(r.precision=s),tu(r,a)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(s=jd(i,Math.max(Math.abs(t),Math.abs(e))))&&(r.precision=s-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(s=Kd(i))&&(r.precision=s-(r.type==="%")*2);break}}return ja(r)}function lm(t){var e=t.domain;return t.ticks=function(n){var r=e();return uh(r[0],r[r.length-1],n??10)},t.tickFormat=function(n,r){var i=e();return cm(i[0],i[i.length-1],n??10,r)},t.nice=function(n){n==null&&(n=10);var r=e(),i=0,s=r.length-1,a=r[i],u=r[s],o,c,l=10;for(u<a&&(c=a,a=u,u=c,c=i,i=s,s=c);l-- >0;){if(c=zr(a,u,n),c===o)return r[i]=a,r[s]=u,e(r);if(c>0)a=Math.floor(a/c)*c,u=Math.ceil(u/c)*c;else if(c<0)a=Math.ceil(a*c)/c,u=Math.floor(u*c)/c;else break;o=c}return t},t}function jr(){var t=om();return t.copy=function(){return am(t,jr())},tm.apply(t,arguments),lm(t)}function ke(t){return function(){return t}}function fm(t){let e=3;return t.digits=function(n){if(!arguments.length)return e;if(n==null)e=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);e=r}return t},()=>new qd(e)}function hm(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function eu(t){this._context=t}eu.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e);break}}};function pm(t){return new eu(t)}function dm(t){return t[0]}function mm(t){return t[1]}function gm(t,e){var n=ke(!0),r=null,i=pm,s=null,a=fm(u);t=typeof t=="function"?t:t===void 0?dm:ke(t),e=typeof e=="function"?e:e===void 0?mm:ke(e);function u(o){var c,l=(o=hm(o)).length,f,h=!1,d;for(r==null&&(s=i(d=a())),c=0;c<=l;++c)!(c<l&&n(f=o[c],c,o))===h&&((h=!h)?s.lineStart():s.lineEnd()),h&&s.point(+t(f,c,o),+e(f,c,o));if(d)return s=null,d+""||null}return u.x=function(o){return arguments.length?(t=typeof o=="function"?o:ke(+o),u):t},u.y=function(o){return arguments.length?(e=typeof o=="function"?o:ke(+o),u):e},u.defined=function(o){return arguments.length?(n=typeof o=="function"?o:ke(!!o),u):n},u.curve=function(o){return arguments.length?(i=o,r!=null&&(s=i(r)),u):i},u.context=function(o){return arguments.length?(o==null?r=s=null:s=i(r=o),u):r},u}function rn(t,e,n){this.k=t,this.x=e,this.y=n}rn.prototype={constructor:rn,scale:function(t){return t===1?this:new rn(this.k*t,this.x,this.y)},translate:function(t,e){return t===0&e===0?this:new rn(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};rn.prototype;var Mr={exports:{}},Ms;function Dm(){return Ms||(Ms=1,function(t){(function(e,n){t.exports?t.exports=n():window.ysFixWebmDuration=n()})("fix-webm-duration",function(){var e={172351395:{name:"EBML",type:"Container"},646:{name:"EBMLVersion",type:"Uint"},759:{name:"EBMLReadVersion",type:"Uint"},754:{name:"EBMLMaxIDLength",type:"Uint"},755:{name:"EBMLMaxSizeLength",type:"Uint"},642:{name:"DocType",type:"String"},647:{name:"DocTypeVersion",type:"Uint"},645:{name:"DocTypeReadVersion",type:"Uint"},108:{name:"Void",type:"Binary"},63:{name:"CRC-32",type:"Binary"},190023271:{name:"SignatureSlot",type:"Container"},16010:{name:"SignatureAlgo",type:"Uint"},16026:{name:"SignatureHash",type:"Uint"},16037:{name:"SignaturePublicKey",type:"Binary"},16053:{name:"Signature",type:"Binary"},15963:{name:"SignatureElements",type:"Container"},15995:{name:"SignatureElementList",type:"Container"},9522:{name:"SignedElement",type:"Binary"},139690087:{name:"Segment",type:"Container"},21863284:{name:"SeekHead",type:"Container"},3515:{name:"Seek",type:"Container"},5035:{name:"SeekID",type:"Binary"},5036:{name:"SeekPosition",type:"Uint"},88713574:{name:"Info",type:"Container"},13220:{name:"SegmentUID",type:"Binary"},13188:{name:"SegmentFilename",type:"String"},1882403:{name:"PrevUID",type:"Binary"},1868715:{name:"PrevFilename",type:"String"},2013475:{name:"NextUID",type:"Binary"},1999803:{name:"NextFilename",type:"String"},1092:{name:"SegmentFamily",type:"Binary"},10532:{name:"ChapterTranslate",type:"Container"},10748:{name:"ChapterTranslateEditionUID",type:"Uint"},10687:{name:"ChapterTranslateCodec",type:"Uint"},10661:{name:"ChapterTranslateID",type:"Binary"},710577:{name:"TimecodeScale",type:"Uint"},1161:{name:"Duration",type:"Float"},1121:{name:"DateUTC",type:"Date"},15273:{name:"Title",type:"String"},3456:{name:"MuxingApp",type:"String"},5953:{name:"WritingApp",type:"String"},103:{name:"Timecode",type:"Uint"},6228:{name:"SilentTracks",type:"Container"},6359:{name:"SilentTrackNumber",type:"Uint"},39:{name:"Position",type:"Uint"},43:{name:"PrevSize",type:"Uint"},35:{name:"SimpleBlock",type:"Binary"},32:{name:"BlockGroup",type:"Container"},33:{name:"Block",type:"Binary"},34:{name:"BlockVirtual",type:"Binary"},13729:{name:"BlockAdditions",type:"Container"},38:{name:"BlockMore",type:"Container"},110:{name:"BlockAddID",type:"Uint"},37:{name:"BlockAdditional",type:"Binary"},27:{name:"BlockDuration",type:"Uint"},122:{name:"ReferencePriority",type:"Uint"},123:{name:"ReferenceBlock",type:"Int"},125:{name:"ReferenceVirtual",type:"Int"},36:{name:"CodecState",type:"Binary"},13730:{name:"DiscardPadding",type:"Int"},14:{name:"Slices",type:"Container"},104:{name:"TimeSlice",type:"Container"},76:{name:"LaceNumber",type:"Uint"},77:{name:"FrameNumber",type:"Uint"},75:{name:"BlockAdditionID",type:"Uint"},78:{name:"Delay",type:"Uint"},79:{name:"SliceDuration",type:"Uint"},72:{name:"ReferenceFrame",type:"Container"},73:{name:"ReferenceOffset",type:"Uint"},74:{name:"ReferenceTimeCode",type:"Uint"},47:{name:"EncryptedBlock",type:"Binary"},106212971:{name:"Tracks",type:"Container"},46:{name:"TrackEntry",type:"Container"},87:{name:"TrackNumber",type:"Uint"},13253:{name:"TrackUID",type:"Uint"},3:{name:"TrackType",type:"Uint"},57:{name:"FlagEnabled",type:"Uint"},8:{name:"FlagDefault",type:"Uint"},5546:{name:"FlagForced",type:"Uint"},28:{name:"FlagLacing",type:"Uint"},11751:{name:"MinCache",type:"Uint"},11768:{name:"MaxCache",type:"Uint"},254851:{name:"DefaultDuration",type:"Uint"},216698:{name:"DefaultDecodedFieldDuration",type:"Uint"},209231:{name:"TrackTimecodeScale",type:"Float"},4991:{name:"TrackOffset",type:"Int"},5614:{name:"MaxBlockAdditionID",type:"Uint"},4974:{name:"Name",type:"String"},177564:{name:"Language",type:"String"},6:{name:"CodecID",type:"String"},9122:{name:"CodecPrivate",type:"Binary"},362120:{name:"CodecName",type:"String"},13382:{name:"AttachmentLink",type:"Uint"},1742487:{name:"CodecSettings",type:"String"},1785920:{name:"CodecInfoURL",type:"String"},438848:{name:"CodecDownloadURL",type:"String"},42:{name:"CodecDecodeAll",type:"Uint"},12203:{name:"TrackOverlay",type:"Uint"},5802:{name:"CodecDelay",type:"Uint"},5819:{name:"SeekPreRoll",type:"Uint"},9764:{name:"TrackTranslate",type:"Container"},9980:{name:"TrackTranslateEditionUID",type:"Uint"},9919:{name:"TrackTranslateCodec",type:"Uint"},9893:{name:"TrackTranslateTrackID",type:"Binary"},96:{name:"Video",type:"Container"},26:{name:"FlagInterlaced",type:"Uint"},5048:{name:"StereoMode",type:"Uint"},5056:{name:"AlphaMode",type:"Uint"},5049:{name:"OldStereoMode",type:"Uint"},48:{name:"PixelWidth",type:"Uint"},58:{name:"PixelHeight",type:"Uint"},5290:{name:"PixelCropBottom",type:"Uint"},5307:{name:"PixelCropTop",type:"Uint"},5324:{name:"PixelCropLeft",type:"Uint"},5341:{name:"PixelCropRight",type:"Uint"},5296:{name:"DisplayWidth",type:"Uint"},5306:{name:"DisplayHeight",type:"Uint"},5298:{name:"DisplayUnit",type:"Uint"},5299:{name:"AspectRatioType",type:"Uint"},963876:{name:"ColourSpace",type:"Binary"},1029411:{name:"GammaValue",type:"Float"},230371:{name:"FrameRate",type:"Float"},97:{name:"Audio",type:"Container"},53:{name:"SamplingFrequency",type:"Float"},14517:{name:"OutputSamplingFrequency",type:"Float"},31:{name:"Channels",type:"Uint"},15739:{name:"ChannelPositions",type:"Binary"},8804:{name:"BitDepth",type:"Uint"},98:{name:"TrackOperation",type:"Container"},99:{name:"TrackCombinePlanes",type:"Container"},100:{name:"TrackPlane",type:"Container"},101:{name:"TrackPlaneUID",type:"Uint"},102:{name:"TrackPlaneType",type:"Uint"},105:{name:"TrackJoinBlocks",type:"Container"},109:{name:"TrackJoinUID",type:"Uint"},64:{name:"TrickTrackUID",type:"Uint"},65:{name:"TrickTrackSegmentUID",type:"Binary"},70:{name:"TrickTrackFlag",type:"Uint"},71:{name:"TrickMasterTrackUID",type:"Uint"},68:{name:"TrickMasterTrackSegmentUID",type:"Binary"},11648:{name:"ContentEncodings",type:"Container"},8768:{name:"ContentEncoding",type:"Container"},4145:{name:"ContentEncodingOrder",type:"Uint"},4146:{name:"ContentEncodingScope",type:"Uint"},4147:{name:"ContentEncodingType",type:"Uint"},4148:{name:"ContentCompression",type:"Container"},596:{name:"ContentCompAlgo",type:"Uint"},597:{name:"ContentCompSettings",type:"Binary"},4149:{name:"ContentEncryption",type:"Container"},2017:{name:"ContentEncAlgo",type:"Uint"},2018:{name:"ContentEncKeyID",type:"Binary"},2019:{name:"ContentSignature",type:"Binary"},2020:{name:"ContentSigKeyID",type:"Binary"},2021:{name:"ContentSigAlgo",type:"Uint"},2022:{name:"ContentSigHashAlgo",type:"Uint"},206814059:{name:"Cues",type:"Container"},59:{name:"CuePoint",type:"Container"},51:{name:"CueTime",type:"Uint"},55:{name:"CueTrackPositions",type:"Container"},119:{name:"CueTrack",type:"Uint"},113:{name:"CueClusterPosition",type:"Uint"},112:{name:"CueRelativePosition",type:"Uint"},50:{name:"CueDuration",type:"Uint"},4984:{name:"CueBlockNumber",type:"Uint"},106:{name:"CueCodecState",type:"Uint"},91:{name:"CueReference",type:"Container"},22:{name:"CueRefTime",type:"Uint"},23:{name:"CueRefCluster",type:"Uint"},4959:{name:"CueRefNumber",type:"Uint"},107:{name:"CueRefCodecState",type:"Uint"},155296873:{name:"Attachments",type:"Container"},8615:{name:"AttachedFile",type:"Container"},1662:{name:"FileDescription",type:"String"},1646:{name:"FileName",type:"String"},1632:{name:"FileMimeType",type:"String"},1628:{name:"FileData",type:"Binary"},1710:{name:"FileUID",type:"Uint"},1653:{name:"FileReferral",type:"Binary"},1633:{name:"FileUsedStartTime",type:"Uint"},1634:{name:"FileUsedEndTime",type:"Uint"},4433776:{name:"Chapters",type:"Container"},1465:{name:"EditionEntry",type:"Container"},1468:{name:"EditionUID",type:"Uint"},1469:{name:"EditionFlagHidden",type:"Uint"},1499:{name:"EditionFlagDefault",type:"Uint"},1501:{name:"EditionFlagOrdered",type:"Uint"},54:{name:"ChapterAtom",type:"Container"},13252:{name:"ChapterUID",type:"Uint"},5716:{name:"ChapterStringUID",type:"String"},17:{name:"ChapterTimeStart",type:"Uint"},18:{name:"ChapterTimeEnd",type:"Uint"},24:{name:"ChapterFlagHidden",type:"Uint"},1432:{name:"ChapterFlagEnabled",type:"Uint"},11879:{name:"ChapterSegmentUID",type:"Binary"},11964:{name:"ChapterSegmentEditionUID",type:"Uint"},9155:{name:"ChapterPhysicalEquiv",type:"Uint"},15:{name:"ChapterTrack",type:"Container"},9:{name:"ChapterTrackNumber",type:"Uint"},0:{name:"ChapterDisplay",type:"Container"},5:{name:"ChapString",type:"String"},892:{name:"ChapLanguage",type:"String"},894:{name:"ChapCountry",type:"String"},10564:{name:"ChapProcess",type:"Container"},10581:{name:"ChapProcessCodecID",type:"Uint"},1293:{name:"ChapProcessPrivate",type:"Binary"},10513:{name:"ChapProcessCommand",type:"Container"},10530:{name:"ChapProcessTime",type:"Uint"},10547:{name:"ChapProcessData",type:"Binary"},39109479:{name:"Tags",type:"Container"},13171:{name:"Tag",type:"Container"},9152:{name:"Targets",type:"Container"},10442:{name:"TargetTypeValue",type:"Uint"},9162:{name:"TargetType",type:"String"},9157:{name:"TagTrackUID",type:"Uint"},9161:{name:"TagEditionUID",type:"Uint"},9156:{name:"TagChapterUID",type:"Uint"},9158:{name:"TagAttachmentUID",type:"Uint"},10184:{name:"SimpleTag",type:"Container"},1443:{name:"TagName",type:"String"},1146:{name:"TagLanguage",type:"String"},1156:{name:"TagDefault",type:"Uint"},1159:{name:"TagString",type:"String"},1157:{name:"TagBinary",type:"Binary"}};function n(l,f){l.prototype=Object.create(f.prototype),l.prototype.constructor=l}function r(l,f){this.name=l||"Unknown",this.type=f||"Unknown"}r.prototype.updateBySource=function(){},r.prototype.setSource=function(l){this.source=l,this.updateBySource()},r.prototype.updateByData=function(){},r.prototype.setData=function(l){this.data=l,this.updateByData()};function i(l,f){r.call(this,l,f||"Uint")}n(i,r);function s(l){return l.length%2===1?"0"+l:l}i.prototype.updateBySource=function(){this.data="";for(var l=0;l<this.source.length;l++){var f=this.source[l].toString(16);this.data+=s(f)}},i.prototype.updateByData=function(){var l=this.data.length/2;this.source=new Uint8Array(l);for(var f=0;f<l;f++){var h=this.data.substr(f*2,2);this.source[f]=parseInt(h,16)}},i.prototype.getValue=function(){return parseInt(this.data,16)},i.prototype.setValue=function(l){this.setData(s(l.toString(16)))};function a(l,f){r.call(this,l,f||"Float")}n(a,r),a.prototype.getFloatArrayType=function(){return this.source&&this.source.length===4?Float32Array:Float64Array},a.prototype.updateBySource=function(){var l=this.source.reverse(),f=this.getFloatArrayType(),h=new f(l.buffer);this.data=h[0]},a.prototype.updateByData=function(){var l=this.getFloatArrayType(),f=new l([this.data]),h=new Uint8Array(f.buffer);this.source=h.reverse()},a.prototype.getValue=function(){return this.data},a.prototype.setValue=function(l){this.setData(l)};function u(l,f){r.call(this,l,f||"Container")}n(u,r),u.prototype.readByte=function(){return this.source[this.offset++]},u.prototype.readUint=function(){for(var l=this.readByte(),f=8-l.toString(2).length,h=l-(1<<7-f),d=0;d<f;d++)h*=256,h+=this.readByte();return h},u.prototype.updateBySource=function(){for(this.data=[],this.offset=0;this.offset<this.source.length;this.offset=h){var l=this.readUint(),f=this.readUint(),h=Math.min(this.offset+f,this.source.length),d=this.source.slice(this.offset,h),g=e[l]||{name:"Unknown",type:"Unknown"},p=r;switch(g.type){case"Container":p=u;break;case"Uint":p=i;break;case"Float":p=a;break}var m=new p(g.name,g.type);m.setSource(d),this.data.push({id:l,idHex:l.toString(16),data:m})}},u.prototype.writeUint=function(l,f){for(var h=1,d=128;l>=d&&h<8;h++,d*=128);if(!f)for(var g=d+l,p=h-1;p>=0;p--){var m=g%256;this.source[this.offset+p]=m,g=(g-m)/256}this.offset+=h},u.prototype.writeSections=function(l){this.offset=0;for(var f=0;f<this.data.length;f++){var h=this.data[f],d=h.data.source,g=d.length;this.writeUint(h.id,l),this.writeUint(g,l),l||this.source.set(d,this.offset),this.offset+=g}return this.offset},u.prototype.updateByData=function(){var l=this.writeSections("draft");this.source=new Uint8Array(l),this.writeSections()},u.prototype.getSectionById=function(l){for(var f=0;f<this.data.length;f++){var h=this.data[f];if(h.id===l)return h.data}return null};function o(l){u.call(this,"File","File"),this.setSource(l)}n(o,u),o.prototype.fixDuration=function(l,f){var h=f&&f.logger;h===void 0?h=function(v){console.log(v)}:h||(h=function(){});var d=this.getSectionById(139690087);if(!d)return h("[fix-webm-duration] Segment section is missing"),!1;var g=d.getSectionById(88713574);if(!g)return h("[fix-webm-duration] Info section is missing"),!1;var p=g.getSectionById(710577);if(!p)return h("[fix-webm-duration] TimecodeScale section is missing"),!1;var m=g.getSectionById(1161);if(m)if(m.getValue()<=0)h(`[fix-webm-duration] Duration section is present, but the value is ${m.getValue()}`),m.setValue(l);else return h(`[fix-webm-duration] Duration section is present, and the value is ${m.getValue()}`),!1;else h("[fix-webm-duration] Duration section is missing"),m=new a("Duration","Float"),m.setValue(l),g.data.push({id:1161,data:m});return p.setValue(1e6),g.updateByData(),d.updateByData(),this.updateByData(),!0},o.prototype.toBlob=function(l){return new Blob([this.source.buffer],{type:l||"video/webm"})};function c(l,f,h,d){if(typeof h=="object"&&(d=h,h=void 0),!h)return new Promise(function(p){c(l,f,p,d)});try{var g=new FileReader;g.onloadend=function(){try{var p=new o(new Uint8Array(g.result));p.fixDuration(f,d)&&(l=p.toBlob(l.type))}catch{}h(l)},g.readAsArrayBuffer(l)}catch{h(l)}}return c.default=c,c})}(Mr)),Mr.exports}var vm=Dm();const ym=ff(vm),wm="planetsinmotion.live";class nu{constructor(e,n,r,i,s){this.margin=i,this.width=n-this.margin.left-this.margin.right,this.height=r-this.margin.top-this.margin.bottom,this.units=1,this.fontsize=18,this.svgRoot=tp("#"+e).append("svg").attr("width",this.width+this.margin.left+this.margin.right).attr("height",this.height+this.margin.top+this.margin.bottom),this.svg=this.svgRoot.append("g").attr("transform",`translate(${this.margin.left}, ${this.margin.top})`),this.outputname=s}setDomains(e,n,r,i,s=!1){this.svg.selectAll(".axis").remove();const a=[e/this.units,n/this.units],u=[r/this.units,i/this.units];this.xScale=jr().domain(a).range([0,this.width]);const o=s?[0,this.height]:[this.height,0];this.yScale=jr().domain(u).range(o);const c=g=>{g.selectAll("path, line").attr("stroke","white").attr("stroke-width",2).attr("shape-rendering","crispEdges"),g.selectAll("text").attr("fill","white").attr("font-size",`${this.fontsize}px`).attr("font-family","DejaVu Sans")},l=this.svg.append("g").attr("transform",`translate(0,${this.height})`).call(Dh(this.xScale).tickSize(14).ticks(6)).attr("class","axis");c(l);const f=this.svg.append("g").call(vh(this.yScale).tickSize(14).ticks(6)).attr("class","axis");c(f);const h=this.svg.append("g").attr("transform","translate(0,0)").call(mh(this.xScale).tickValues([])).attr("class","axis");c(h);const d=this.svg.append("g").attr("transform",`translate(${this.width},0)`).call(gh(this.yScale).tickValues([])).attr("class","axis");c(d)}setScales(e,n){}clear(){this.xScale=null,this.yScale=null,this.svg.selectAll(".axis").remove()}startRecording(e,n,r){this.canvas=document.createElement("canvas"),this.canvas.width=this.width*2,this.canvas.height=this.height*2,this.ctx=this.canvas.getContext("2d"),this.ctx.font="italic 32px DejaVu Sans",this.ctx.strokeStyle="white",this.ctx.lineWidth=2;var i=[];const s=this.canvas.captureStream(e);this.mediaRecorder=new MediaRecorder(s,{mimeType:n}),this.mediaRecorder.onstart=()=>{console.log(`Recording for ${this.outputname} started and will stop after ${r/1e3} seconds.`)},this.mediaRecorder.ondataavailable=a=>{a.data.size>0&&i.push(a.data)},this.mediaRecorder.onstop=async()=>{const a=new Blob(i,{type:n}),u=await ym(a,r);Fa(u,this.outputname,"webm"),this.canvas=null,this.ctx=null},this.mediaRecorder.start()}updateRecording(){const e=new XMLSerializer().serializeToString(this.svgRoot.node()),n=new Image,r=new Blob([e],{type:"image/svg+xml;charset=utf-8"}),i=URL.createObjectURL(r);n.onload=()=>{this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this.ctx.drawImage(n,0,0,this.canvas.width,this.canvas.height),this.ctx.strokeText(wm,this.canvas.width-500,this.canvas.height-100),URL.revokeObjectURL(i)},n.src=i}stopRecording(){this.mediaRecorder.state==="recording"&&this.mediaRecorder.stop()}}class Fm extends nu{constructor(e,n,r,i){super(e,n,r,i,"lightcurve"),this.xvalues=null,this.yvalues=null}drawLightcurved3(e,n){const r=this.xvalues.slice(0,n+1),i=this.yvalues.slice(0,n+1),s=r.map((o,c)=>({x:o,y:i[c]})),a=gm().x(o=>this.xScale(o.x)).y(o=>this.yScale(o.y)),u=this.svg.select(".line");u.empty()?this.svg.append("path").datum(s).attr("class","line").attr("d",a).attr("stroke",e).attr("stroke-width",2):u.datum(s).attr("d",a)}setScales(e,n){super.setDomains(as(e),ss(e),as(n)*.999,ss(n)*1.01),this.xvalues=e,this.yvalues=n}clear(){super.clear(),this.svg.select(".line").remove(),this.xvalues=null,this.yvalues=null}}class Am extends Ur{constructor(e){super(e);const n="bc1q4xr9agec3ldug0xezqxy252y3kvqmcz62xr6pm";this.donateBTCButton=new Ss("BTC",n);const r="0xaFE3DB130E71404Ed038397D25C26777d4EC8e4F";this.donateETHButton=new Ss("ETH",r)}}class Ss{constructor(e,n){this.walletAddress=n,this.copyButton=document.getElementById("copy"+e+"WalletAddressBtn").addEventListener("click",()=>{navigator.clipboard.writeText(this.walletAddress);const r=document.getElementById("copy-feedback");r.classList.add("visible"),setTimeout(()=>{r.classList.remove("visible")},1e3)})}}class Em{constructor(e,n,r){if(n._R<r._R&&([n,r]=[r,n]),this.eclipsingBody1=n,this.eclipsingBody2=r,this.eclipsedBody=e,this.eclipsingBody1=n,this.eclipsingBody2=r,this.datapoints=n.rx.length,this.datapoints!=r.rx.length)throw new Error("Eclipsing bodies must have the same number of data points");this.planet1StarTransit=new on(e,n),this.planet2StarTransit=new on(e,r),this.planetPlanetTransit=new on(n,r,!1),this.workoutTransits()}workoutTransits(){this.eclipsedArea=this.planet1StarTransit.eclipsedArea.map((s,a)=>s+this.planet2StarTransit.eclipsedArea[a]),this.planet1StarTransit.fullTransitIndexes.filter(s=>this.planet2StarTransit.fullTransitIndexes.includes(s)).forEach(s=>{this.planetPlanetTransit.fullTransitIndexes.includes(s)?(console.log("Full - Full - Full",s),this.eclipsedArea[s]-=this.eclipsingBody2.Area):this.planetPlanetTransit.partialTransitIndexes.includes(s)&&(console.log("Full - Full - Partial",s),this.eclipsedArea[s]-=this.planetPlanetTransit.eclipsedArea[s])}),this.planet1StarTransit.partialTransitIndexes.filter(s=>this.planet2StarTransit.fullTransitIndexes.includes(s)).forEach(s=>{this.planetPlanetTransit.fullTransitIndexes.includes(s)?(console.log("Partial - Full - Full",s),this.eclipsedArea[s]-=this.eclipsingBody2.Area):this.planetPlanetTransit.partialTransitIndexes.includes(s)&&(console.log("Partial - Full - Partial",s),this.eclipsedArea[s]-=this.planetPlanetTransit.eclipsedArea[s])}),this.planet1StarTransit.fullTransitIndexes.filter(s=>this.planet2StarTransit.partialTransitIndexes.includes(s)).forEach(s=>{if(this.planetPlanetTransit.fullTransitIndexes.includes(s))throw console.log("Full - Partial - Full",s),new Error("Full Partial Full transit should not exist!");this.planetPlanetTransit.partialTransitIndexes.includes(s)&&(console.log("Full - Partial - Partial",s),this.eclipsedArea[s]-=this.planetPlanetTransit.eclipsedArea[s])}),this.planet1StarTransit.partialTransitIndexes.filter(s=>this.planet2StarTransit.partialTransitIndexes.includes(s)).forEach(s=>{if(this.planetPlanetTransit.fullTransitIndexes.includes(s))console.log("Partial - Partial - Full",s),this.eclipsedArea[s]-=this.planet2StarTransit.eclipsedArea[s];else if(this.planetPlanetTransit.partialTransitIndexes.includes(s)){const[a,u]=this.planetPlanetTransit.getContactPoints(s),o=ge(a,[this.eclipsedBody.ry[s],this.eclipsedBody.rz[s]]),c=ge(u,[this.eclipsedBody.ry[s],this.eclipsedBody.rz[s]]);if(c<this.eclipsedBody._R&&o<this.eclipsedBody._R)this.eclipsedArea[s]-=this.planetPlanetTransit.eclipsedArea[s],console.log("Partial - Partial - Partial (case 2)",s);else if(Math.min(c,o)<this.eclipsedBody._R){const l=o<c?a:u,f=this.selectContactPoint(this.planet1StarTransit,this.eclipsingBody2,s),h=this.selectContactPoint(this.planet2StarTransit,this.eclipsingBody1,s),d=Uf(this.eclipsedBody._R,this.eclipsingBody2._R,this.eclipsingBody1._R,l,f,h);console.log("Partial - Partial - Partial (case 1): sharedArea",(d/this.eclipsedBody.Area).toFixed(2),"index",s),this.eclipsedArea[s]-=d}else console.log("Partial - Partial - Partial (case 3)",s)}}),this.visibleFraction=this.eclipsedArea.map(s=>1-s/this.eclipsedBody.Area),this.transitDepth=Math.max(...this.eclipsedArea)/this.eclipsedBody.Area}selectContactPoint(e,n,r){const[i,s]=e.getContactPoints(r),a=ge(i,[n.ry[r],n.rz[r]]),u=ge(s,[n.ry[r],n.rz[r]]);return a<u?i:s}}class Ns extends nu{constructor(e,n,r=600,i=600,s={top:20,bottom:40,left:60,right:40}){super(e,r,i,s,n),this.units=He}defineSunGradient(e){this.starColor=e,this.svg.selectAll(".star-gradient").remove(),this.svg.append("defs").attr("class","star-gradient").append("radialGradient").attr("id","sun-glow-gradient").attr("cx","50%").attr("cy","50%").attr("r","58%").selectAll("stop").data([{offset:"0%",color:e},{offset:"100%",color:"black"}]).enter().append("stop").attr("offset",n=>n.offset).attr("stop-color",n=>n.color)}clear(){super.clear(),this.svg.selectAll("circle").remove(),this.svg.selectAll(".planet-defs").remove(),this.svg.selectAll("path").remove()}drawBodies(e,n,r=!1){this.svg.selectAll("circle").remove(),this.svg.selectAll(".planet-defs").remove(),e.forEach(i=>{const s=Math.abs(this.xScale(i._R)-this.xScale(0))/this.units;let a;const u=i.ry[n]/this.units;var o=1/this.units,c=1/this.units;if(r?(o*=-i.rx[n],c*=i.rz[n]):(o*=i.rz[n],c*=i.rx[n]),i instanceof Aa)a="url(#sun-glow-gradient)";else{const h=Math.atan2(r?-o:o,u),d=Math.cos(h),g=Math.sin(h),p=Math.sqrt(u**2+o**2+c**2),m=c/p,v=50*(1-d),w=50*(1+g),y=50*(1+d),A=50*(1-g),E=`planet-gradient-${i.planetName.replace(/\s+/g,"")}-${r?"faceon":"edegeon"}`,x=this.svg.append("defs").attr("class","planet-defs").append("linearGradient").attr("id",E).attr("x1",`${v}%`).attr("y1",`${w}%`).attr("x2",`${y}%`).attr("y2",`${A}%`);x.append("stop").attr("offset","0%").attr("stop-color",i.color),x.append("stop").attr("offset",`${(1-m)/2*100}%`).attr("stop-color",wa(i.color,85)),a=`url(#${E})`}const l=this.xScale(u),f=this.yScale(o);this.svg.append("circle").attr("pointer-events","none").attr("cx",l).attr("cy",f).attr("r",s).style("fill",a)})}}class Cm{constructor(e,n){this._star=e,this.numSamples=n}set star(e){this._star=e,this.drawPoints(this.numSamples)}set numSamples(e){self.theta=Array.from({length:e},()=>Math.random()*2*Math.PI),this._numSamples=e,this.drawPoints(e)}get star(){return this._star}get numSamples(){return this._numSamples}drawPoints(e){console.log("Drawing points for Monte Carlo simulation with numSamples:",e);const n=Array.from({length:e},()=>Math.sqrt(Math.random())*this.star._R);this.ypoints=n.map((r,i)=>r*Math.cos(self.theta[i])),this.zpoints=n.map((r,i)=>r*Math.sin(self.theta[i]))}filterByEclipses(e){const n=new Set,r=new Set;for(let i=0;i<e[0].rx.length;i++)e.forEach(s=>{this.star.getProjectedDistance(s,i)-s._R<=this.star._R&&s.rx[i]>this.star.rx[i]&&(r.add(i),n.add(s))});return[n,r]}getEclipsedFraction(e){const[n,r]=this.filterByEclipses(e);let i=new Float64Array(this.star.rz.length).fill(1);return r.forEach(s=>{let a=0;for(let u=0;u<this.numSamples;u++)for(let o=0;o<n.size;o++){const c=e[o];if(c.rx[s]>this.star.rx[s]&&(this.ypoints[u]-c.ry[s])**2+(this.zpoints[u]-c.rz[s])**2<c._R**2){a+=1;break}}i[s]=1-a/this.numSamples}),i}getEclipsingAreasMonteCarloFast_unused(e,n=1e4){const r=this.rx.length;let i=new Float64Array(r).fill(1);const[s,a]=this.filterByEclipsesSet(e),u=Array.from({length:n},()=>Math.sqrt(Math.random())*this._R),o=Array.from({length:n},()=>Math.random()*2*Math.PI),c=u.map((f,h)=>f*Math.cos(o[h])),l=u.map((f,h)=>f*Math.sin(o[h]));return a.forEach(f=>{let h=Array.from({length:n},(g,p)=>p);s.forEach(g=>{h=h.filter(p=>(c[p]-g.ry[f])**2+(l[p]-g.rz[f])**2>=g._R**2)});const d=n-h.length;i[f]=1-d/n}),i}}let lt,Ct,ct,Ft,ti,ei,ni,se={},Wt,pe,oe,jt,te,xe,Tt=0,ri,Ts,ii=!1,Dr;async function _m(t="en"){se=await(await fetch(`/locales/${t}.json`)).json(),ct.setLanguage(se),Ft.setLanguage(se),lt.setLanguage(se),ei.setLanguage(se),ti.setLanguage(se),ni.setLanguage(se)}const xm=()=>{const t=Ct.star,e=lt.planets,n=ct.datapoints,r=[t,...e],i=r.slice().sort((a,u)=>a.rz[Tt]-u.rz[Tt]);jt.drawBodies(i,Tt,!0);const s=r.slice().sort((a,u)=>a.rx[Tt]-u.rx[Tt]);te.drawBodies(s,Tt),oe.drawLightcurved3(t.color,Tt),ii&&([te,jt,oe].forEach(a=>{a.updateRecording()}),ri==n+1&&(console.log("Finishing recording"),ii=!1,setTimeout(()=>{[te,jt,oe].forEach(u=>{console.log("Stopping recording"),u.stopRecording()}),document.getElementById("recording-dialog").close(),document.body.style.cursor="default"},50),console.log("Recording complete."),console.log("All simulations saved.")),ri++),Tt=(Tt+1)%n};function Bm(){lt.setStar(Ct.star),Dr.star=Ct.star,iu()}function bm(){te.defineSunGradient(Ct.star.color),jt.defineSunGradient(Ct.star.color),Ge(0)}function Mm(){lt.planets.length!=0&&(Ci(),Ft.setDuration(ct.datapoints*Ft.ms))}function Ci(){lt.planets.length!=0&&(console.log("Updating times"),ct.calculateTimes(lt.maxP),iu())}function ru(){if(lt.planets.length==1)pe=new on(Ct.star,lt.planets[0]).visibleFraction,ct.mcPointsInput.disabled=!0;else if(lt.planets.length==2)pe=new Em(Ct.star,lt.planets[0],lt.planets[1]).visibleFraction,ct.mcPointsInput.disabled=!0;else{console.log("Showing modal");const n=document.getElementById("recording-dialog");n.showModal(),pe=Dr.getEclipsedFraction(lt.planets),ct.mcPointsInput.disabled=!1,n.close()}const t=pe.indexOf(Math.min(...pe)),e=ct.timesDays[t];console.log("Transit depth: ",Math.min(...pe).toFixed(3)+" at "+e.toFixed(2)+" days")}function Sm(){Dr.numSamples=ct.mcPoints,ru(),Ge(0)}function iu(){console.log("Updating simulation"),Ct.setTimes(ct.times),lt.setTimes(ct.times),ru();const t=Math.abs(lt.maxDistance*1.02);jt.setDomains(-t,t,-t,t,!0),te.setDomains(-t,t,-t,t,!1),Ge(0)}function Nm(){lt.planets.length>0?(xe.disabled=!1,xe.style.cursor="pointer",Ft.saveAnimationButton.disabled=!1,Ft.saveAnimationButton.style.cursor="pointer",Ci()):lt.planets.length==0&&(xe.disabled=!0,xe.style.cursor="auto",Ft.saveAnimationButton.disabled=!0,Ft.saveAnimationButton.style.cursor="auto",clearInterval(Wt),Wt=null,console.log("No planets to animate, clearing canvas"),oe.clear(),jt.clear(),te.clear())}function Tm(){if(!oe){const t={top:10,bottom:40,left:80,right:80};oe=new Fm("d3-lightcurve-container",1320,500,t)}jt||(jt=new Ns("faceoncanvas","faceon")),te||(te=new Ns("edgeoncanvas","edgeon")),Ct||(Ct=new qf(Bm,bm)),te.defineSunGradient(Ct.star.color),jt.defineSunGradient(Ct.star.color),lt||(lt=new Jf(Nm,au,su,Ct.star)),ct||(ct=new Kf(lt.maxP,Mm,Ci,Sm),ct.mcPointsInput.disabled=!0),xe=document.getElementById("export-lightcurve"),Ft||(Ft=new Qf(t=>{Ft.setDuration(ct.datapoints*t),Ge(Tt)})),ei||(ei=new Ur("about")),ti||(ti=new Ur("manual")),ni||(ni=new Am("donate")),Ct.setTimes(ct.times),lt.setTimes(ct.times),Ft.setDuration(ct.datapoints*Ft.ms),Ts=document.getElementById("main-canvas-container"),Ts.addEventListener("click",Ps),document.addEventListener("keydown",t=>{t.code==="Space"?(t.preventDefault(),Ps()):t.code=="NumpadAdd"&&!t.ctrlKey&&(console.log("Show planet form"),lt.showPlanetForm())}),xe.addEventListener("click",()=>{ct.exportLightcurve(ct.timesDays,pe)}),xe.disabled=!0,Ft.saveAnimationButton.addEventListener("click",()=>{Im()}),_m(),Dr=new Cm(Ct.star,ct.mcPoints)}function Im(t="video/webm"){document.body.style.cursor="wait",document.getElementById("recording-dialog").showModal();const n=Ft.animationDurationms;[te,jt,oe].forEach(r=>{r.startRecording(Ft.ms,t,n)}),ii=!0,ri=0,Ge(0)}function Is(t){const e=document.getElementById("toggle-animation-feedback");e.innerHTML=t,e.classList.add("visible"),setTimeout(()=>{e.classList.remove("visible")},1e3)}function Ps(){Wt?(Is(se["pause-animation"]),au()):(Is(se["resume-animation"]),su())}function su(){console.log("Restarting animation"),Wt||Ge(Tt)}function au(){console.log("Pausing animation"),Wt&&(clearInterval(Wt),Wt=null)}function Ge(t=0){Tt=t,console.log("Restarting simu"),Wt&&(clearInterval(Wt),Wt=null),Tt==0&&oe.clear(),lt.planets.length>0&&(oe.setScales(ct.timesDays,pe),Wt=window.setInterval(xm,Ft.ms))}Tm();
