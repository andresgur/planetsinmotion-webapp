(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const u of s.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&r(u)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();const pe=24*3600,zo=63781e4,qo=597216787e19,nn=6957e7,_n=1989e30,Ts=18981245973360504e14,Ho=71492e5,ze=149597871e5,Is=6.67*10**-8;function Pn(){return Pn=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Pn.apply(null,arguments)}var Ps={relTol:1e-12,absTol:1e-15,matrix:"Matrix",number:"number",numberFallback:"number",precision:64,predictable:!1,randomSeed:null};function Vo(t,e){if(Rn(t,e))return t[e];throw typeof t[e]=="function"&&Zo(t,e)?new Error('Cannot access method "'+e+'" as a property'):new Error('No access to property "'+e+'"')}function Wo(t,e,n){if(Rn(t,e))return t[e]=n,n;throw new Error('No access to property "'+e+'"')}function Rn(t,e){return!Xo(t)&&!Array.isArray(t)?!1:un(Yo,e)?!0:!(e in Object.prototype||e in Function.prototype)}function Zo(t,e){return t==null||typeof t[e]!="function"||un(t,e)&&Object.getPrototypeOf&&e in Object.getPrototypeOf(t)?!1:un(Go,e)?!0:!(e in Object.prototype||e in Function.prototype)}function Xo(t){return typeof t=="object"&&t&&t.constructor===Object}var Yo={length:!0,name:!0},Go={toString:!0,valueOf:!0,toLocaleString:!0};class Jo{constructor(e){this.wrappedObject=e,this[Symbol.iterator]=this.entries}keys(){return Object.keys(this.wrappedObject).filter(e=>this.has(e)).values()}get(e){return Vo(this.wrappedObject,e)}set(e,n){return Wo(this.wrappedObject,e,n),this}has(e){return Rn(this.wrappedObject,e)&&e in this.wrappedObject}entries(){return Ko(this.keys(),e=>[e,this.get(e)])}forEach(e){for(var n of this.keys())e(this.get(n),n,this)}delete(e){Rn(this.wrappedObject,e)&&delete this.wrappedObject[e]}clear(){for(var e of this.keys())this.delete(e)}get size(){return Object.keys(this.wrappedObject).length}}function Ko(t,e){return{next:()=>{var n=t.next();return n.done?n:{value:e(n.value),done:!1}}}}function it(t){return typeof t=="number"}function vt(t){return!t||typeof t!="object"||typeof t.constructor!="function"?!1:t.isBigNumber===!0&&typeof t.constructor.prototype=="object"&&t.constructor.prototype.isBigNumber===!0||typeof t.constructor.isDecimal=="function"&&t.constructor.isDecimal(t)===!0}function Qo(t){return typeof t=="bigint"}function Rs(t){return t&&typeof t=="object"&&Object.getPrototypeOf(t).isComplex===!0||!1}function Os(t){return t&&typeof t=="object"&&Object.getPrototypeOf(t).isFraction===!0||!1}function Ls(t){return t&&t.constructor.prototype.isUnit===!0||!1}function Gt(t){return typeof t=="string"}var ft=Array.isArray;function Vt(t){return t&&t.constructor.prototype.isMatrix===!0||!1}function On(t){return Array.isArray(t)||Vt(t)}function jo(t){return t&&t.isDenseMatrix&&t.constructor.prototype.isMatrix===!0||!1}function ta(t){return t&&t.isSparseMatrix&&t.constructor.prototype.isMatrix===!0||!1}function ea(t){return t&&t.constructor.prototype.isRange===!0||!1}function ei(t){return t&&t.constructor.prototype.isIndex===!0||!1}function na(t){return typeof t=="boolean"}function ra(t){return t&&t.constructor.prototype.isResultSet===!0||!1}function ia(t){return t&&t.constructor.prototype.isHelp===!0||!1}function sa(t){return typeof t=="function"}function ua(t){return t instanceof Date}function oa(t){return t instanceof RegExp}function ni(t){return!!(t&&typeof t=="object"&&t.constructor===Object&&!Rs(t)&&!Os(t))}function aa(t){return t?t instanceof Map||t instanceof Jo||typeof t.set=="function"&&typeof t.get=="function"&&typeof t.keys=="function"&&typeof t.has=="function":!1}function ca(t){return t===null}function la(t){return t===void 0}function fa(t){return t&&t.isAccessorNode===!0&&t.constructor.prototype.isNode===!0||!1}function ha(t){return t&&t.isArrayNode===!0&&t.constructor.prototype.isNode===!0||!1}function pa(t){return t&&t.isAssignmentNode===!0&&t.constructor.prototype.isNode===!0||!1}function da(t){return t&&t.isBlockNode===!0&&t.constructor.prototype.isNode===!0||!1}function ma(t){return t&&t.isConditionalNode===!0&&t.constructor.prototype.isNode===!0||!1}function ga(t){return t&&t.isConstantNode===!0&&t.constructor.prototype.isNode===!0||!1}function Da(t){return t&&t.isFunctionAssignmentNode===!0&&t.constructor.prototype.isNode===!0||!1}function va(t){return t&&t.isFunctionNode===!0&&t.constructor.prototype.isNode===!0||!1}function ya(t){return t&&t.isIndexNode===!0&&t.constructor.prototype.isNode===!0||!1}function wa(t){return t&&t.isNode===!0&&t.constructor.prototype.isNode===!0||!1}function Ea(t){return t&&t.isObjectNode===!0&&t.constructor.prototype.isNode===!0||!1}function Fa(t){return t&&t.isOperatorNode===!0&&t.constructor.prototype.isNode===!0||!1}function Aa(t){return t&&t.isParenthesisNode===!0&&t.constructor.prototype.isNode===!0||!1}function Ca(t){return t&&t.isRangeNode===!0&&t.constructor.prototype.isNode===!0||!1}function _a(t){return t&&t.isRelationalNode===!0&&t.constructor.prototype.isNode===!0||!1}function xa(t){return t&&t.isSymbolNode===!0&&t.constructor.prototype.isNode===!0||!1}function ba(t){return t&&t.constructor.prototype.isChain===!0||!1}function _e(t){var e=typeof t;return e==="object"?t===null?"null":vt(t)?"BigNumber":t.constructor&&t.constructor.name?t.constructor.name:"Object":e}function gt(t){var e=typeof t;if(e==="number"||e==="bigint"||e==="string"||e==="boolean"||t===null||t===void 0)return t;if(typeof t.clone=="function")return t.clone();if(Array.isArray(t))return t.map(function(n){return gt(n)});if(t instanceof Date)return new Date(t.valueOf());if(vt(t))return t;if(ni(t))return Ba(t,gt);if(e==="function")return t;throw new TypeError("Cannot clone: unknown type of value (value: ".concat(t,")"))}function Ba(t,e){var n={};for(var r in t)un(t,r)&&(n[r]=e(t[r]));return n}function Ma(t,e){for(var n in e)un(e,n)&&(t[n]=e[n]);return t}function ge(t,e){var n,r,i;if(Array.isArray(t)){if(!Array.isArray(e)||t.length!==e.length)return!1;for(r=0,i=t.length;r<i;r++)if(!ge(t[r],e[r]))return!1;return!0}else{if(typeof t=="function")return t===e;if(t instanceof Object){if(Array.isArray(e)||!(e instanceof Object))return!1;for(n in t)if(!(n in e)||!ge(t[n],e[n]))return!1;for(n in e)if(!(n in t))return!1;return!0}else return t===e}}function un(t,e){return t&&Object.hasOwnProperty.call(t,e)}function Sa(t,e){for(var n={},r=0;r<e.length;r++){var i=e[r],s=t[i];s!==void 0&&(n[i]=s)}return n}var Na=["Matrix","Array"],Ta=["number","BigNumber","Fraction"],Me=function(e){if(e)throw new Error(`The global config is readonly. 
Please create a mathjs instance if you want to change the default configuration. 
Example:

  import { create, all } from 'mathjs';
  const mathjs = create(all);
  mathjs.config({ number: 'BigNumber' });
`);return Object.freeze(Ps)};Pn(Me,Ps,{MATRIX_OPTIONS:Na,NUMBER_OPTIONS:Ta});function Si(){return!0}function Rt(){return!1}function Ie(){}const Ni="Argument is not a typed-function.";function ks(){function t(D){return typeof D=="object"&&D!==null&&D.constructor===Object}const e=[{name:"number",test:function(D){return typeof D=="number"}},{name:"string",test:function(D){return typeof D=="string"}},{name:"boolean",test:function(D){return typeof D=="boolean"}},{name:"Function",test:function(D){return typeof D=="function"}},{name:"Array",test:Array.isArray},{name:"Date",test:function(D){return D instanceof Date}},{name:"RegExp",test:function(D){return D instanceof RegExp}},{name:"Object",test:t},{name:"null",test:function(D){return D===null}},{name:"undefined",test:function(D){return D===void 0}}],n={name:"any",test:Si,isAny:!0};let r,i,s=0,u={createCount:0};function o(D){const E=r.get(D);if(E)return E;let C='Unknown type "'+D+'"';const S=D.toLowerCase();let P;for(P of i)if(P.toLowerCase()===S){C+='. Did you mean "'+P+'" ?';break}throw new TypeError(C)}function a(D){let E=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"any";const C=E?o(E).index:i.length,S=[];for(let T=0;T<D.length;++T){if(!D[T]||typeof D[T].name!="string"||typeof D[T].test!="function")throw new TypeError("Object with properties {name: string, test: function} expected");const U=D[T].name;if(r.has(U))throw new TypeError('Duplicate type name "'+U+'"');S.push(U),r.set(U,{name:U,test:D[T].test,isAny:D[T].isAny,index:C+T,conversionsTo:[]})}const P=i.slice(C);i=i.slice(0,C).concat(S).concat(P);for(let T=C+S.length;T<i.length;++T)r.get(i[T]).index=T}function l(){r=new Map,i=[],s=0,a([n],!1)}l(),a(e);function c(){let D;for(D of i)r.get(D).conversionsTo=[];s=0}function f(D){const E=i.filter(C=>{const S=r.get(C);return!S.isAny&&S.test(D)});return E.length?E:["any"]}function h(D){return D&&typeof D=="function"&&"_typedFunctionData"in D}function d(D,E,C){if(!h(D))throw new TypeError(Ni);const S=C&&C.exact,P=Array.isArray(E)?E.join(","):E,T=F(P),U=m(T);if(!S||U in D.signatures){const et=D._typedFunctionData.signatureMap.get(U);if(et)return et}const L=T.length;let z;if(S){z=[];let et;for(et in D.signatures)z.push(D._typedFunctionData.signatureMap.get(et))}else z=D._typedFunctionData.signatures;for(let et=0;et<L;++et){const rt=T[et],ct=[];let Ct;for(Ct of z){const At=_(Ct.params,et);if(!(!At||rt.restParam&&!At.restParam)){if(!At.hasAny){const kt=y(At);if(rt.types.some($t=>!kt.has($t.name)))continue}ct.push(Ct)}}if(z=ct,z.length===0)break}let R;for(R of z)if(R.params.length<=L)return R;throw new TypeError("Signature not found (signature: "+(D.name||"unnamed")+"("+m(T,", ")+"))")}function g(D,E,C){return d(D,E,C).implementation}function p(D,E){const C=o(E);if(C.test(D))return D;const S=C.conversionsTo;if(S.length===0)throw new Error("There are no conversions to "+E+" defined.");for(let P=0;P<S.length;P++)if(o(S[P].from).test(D))return S[P].convert(D);throw new Error("Cannot convert "+D+" to "+E)}function m(D){let E=arguments.length>1&&arguments[1]!==void 0?arguments[1]:",";return D.map(C=>C.name).join(E)}function v(D){const E=D.indexOf("...")===0,S=(E?D.length>3?D.slice(3):"any":D).split("|").map(L=>o(L.trim()));let P=!1,T=E?"...":"";return{types:S.map(function(L){return P=L.isAny||P,T+=L.name+"|",{name:L.name,typeIndex:L.index,test:L.test,isAny:L.isAny,conversion:null,conversionIndex:-1}}),name:T.slice(0,-1),hasAny:P,hasConversion:!1,restParam:E}}function w(D){const E=D.types.map(U=>U.name),C=st(E);let S=D.hasAny,P=D.name;const T=C.map(function(U){const L=o(U.from);return S=L.isAny||S,P+="|"+U.from,{name:U.from,typeIndex:L.index,test:L.test,isAny:L.isAny,conversion:U,conversionIndex:U.index}});return{types:D.types.concat(T),name:P,hasAny:S,hasConversion:T.length>0,restParam:D.restParam}}function y(D){return D.typeSet||(D.typeSet=new Set,D.types.forEach(E=>D.typeSet.add(E.name))),D.typeSet}function F(D){const E=[];if(typeof D!="string")throw new TypeError("Signatures must be strings");const C=D.trim();if(C==="")return E;const S=C.split(",");for(let P=0;P<S.length;++P){const T=v(S[P].trim());if(T.restParam&&P!==S.length-1)throw new SyntaxError('Unexpected rest parameter "'+S[P]+'": only allowed for the last parameter');if(T.types.length===0)return null;E.push(T)}return E}function A(D){const E=Ne(D);return E?E.restParam:!1}function x(D){if(!D||D.types.length===0)return Si;if(D.types.length===1)return o(D.types[0].name).test;if(D.types.length===2){const E=o(D.types[0].name).test,C=o(D.types[1].name).test;return function(P){return E(P)||C(P)}}else{const E=D.types.map(function(C){return o(C.name).test});return function(S){for(let P=0;P<E.length;P++)if(E[P](S))return!0;return!1}}}function b(D){let E,C,S;if(A(D)){E=Ai(D).map(x);const P=E.length,T=x(Ne(D)),U=function(L){for(let z=P;z<L.length;z++)if(!T(L[z]))return!1;return!0};return function(z){for(let R=0;R<E.length;R++)if(!E[R](z[R]))return!1;return U(z)&&z.length>=P+1}}else return D.length===0?function(T){return T.length===0}:D.length===1?(C=x(D[0]),function(T){return C(T[0])&&T.length===1}):D.length===2?(C=x(D[0]),S=x(D[1]),function(T){return C(T[0])&&S(T[1])&&T.length===2}):(E=D.map(x),function(T){for(let U=0;U<E.length;U++)if(!E[U](T[U]))return!1;return T.length===E.length})}function _(D,E){return E<D.length?D[E]:A(D)?Ne(D):null}function N(D,E){const C=_(D,E);return C?y(C):new Set}function O(D){return D.conversion===null||D.conversion===void 0}function M(D,E){const C=new Set;return D.forEach(S=>{const P=N(S.params,E);let T;for(T of P)C.add(T)}),C.has("any")?["any"]:Array.from(C)}function $(D,E,C){let S,P;const T=D||"unnamed";let U=C,L;for(L=0;L<E.length;L++){const rt=[];if(U.forEach(ct=>{const Ct=_(ct.params,L),At=x(Ct);(L<ct.params.length||A(ct.params))&&At(E[L])&&rt.push(ct)}),rt.length===0){if(P=M(U,L),P.length>0){const ct=f(E[L]);return S=new TypeError("Unexpected type of argument in function "+T+" (expected: "+P.join(" or ")+", actual: "+ct.join(" | ")+", index: "+L+")"),S.data={category:"wrongType",fn:T,index:L,actual:ct,expected:P},S}}else U=rt}const z=U.map(function(rt){return A(rt.params)?1/0:rt.params.length});if(E.length<Math.min.apply(null,z))return P=M(U,L),S=new TypeError("Too few arguments in function "+T+" (expected: "+P.join(" or ")+", index: "+E.length+")"),S.data={category:"tooFewArgs",fn:T,index:E.length,expected:P},S;const R=Math.max.apply(null,z);if(E.length>R)return S=new TypeError("Too many arguments in function "+T+" (expected: "+R+", actual: "+E.length+")"),S.data={category:"tooManyArgs",fn:T,index:E.length,expectedLength:R},S;const et=[];for(let rt=0;rt<E.length;++rt)et.push(f(E[rt]).join("|"));return S=new TypeError('Arguments of type "'+et.join(", ")+'" do not match any of the defined signatures of function '+T+"."),S.data={category:"mismatch",actual:et},S}function q(D){let E=i.length+1;for(let C=0;C<D.types.length;C++)O(D.types[C])&&(E=Math.min(E,D.types[C].typeIndex));return E}function H(D){let E=s+1;for(let C=0;C<D.types.length;C++)O(D.types[C])||(E=Math.min(E,D.types[C].conversionIndex));return E}function G(D,E){if(D.hasAny){if(!E.hasAny)return 1}else if(E.hasAny)return-1;if(D.restParam){if(!E.restParam)return 1}else if(E.restParam)return-1;if(D.hasConversion){if(!E.hasConversion)return 1}else if(E.hasConversion)return-1;const C=q(D)-q(E);if(C<0)return-1;if(C>0)return 1;const S=H(D)-H(E);return S<0?-1:S>0?1:0}function V(D,E){const C=D.params,S=E.params,P=Ne(C),T=Ne(S),U=A(C),L=A(S);if(U&&P.hasAny){if(!L||!T.hasAny)return 1}else if(L&&T.hasAny)return-1;let z=0,R=0,et;for(et of C)et.hasAny&&++z,et.hasConversion&&++R;let rt=0,ct=0;for(et of S)et.hasAny&&++rt,et.hasConversion&&++ct;if(z!==rt)return z-rt;if(U&&P.hasConversion){if(!L||!T.hasConversion)return 1}else if(L&&T.hasConversion)return-1;if(R!==ct)return R-ct;if(U){if(!L)return 1}else if(L)return-1;const Ct=(C.length-S.length)*(U?-1:1);if(Ct!==0)return Ct;const At=[];let kt=0;for(let Te=0;Te<C.length;++Te){const gn=G(C[Te],S[Te]);At.push(gn),kt+=gn}if(kt!==0)return kt;let $t;for($t of At)if($t!==0)return $t;return 0}function st(D){if(D.length===0)return[];const E=D.map(o);D.length>1&&E.sort((P,T)=>P.index-T.index);let C=E[0].conversionsTo;if(D.length===1)return C;C=C.concat([]);const S=new Set(D);for(let P=1;P<E.length;++P){let T;for(T of E[P].conversionsTo)S.has(T.from)||(C.push(T),S.add(T.from))}return C}function ot(D,E){let C=E;if(D.some(P=>P.hasConversion)){const P=A(D),T=D.map(K);C=function(){const L=[],z=P?arguments.length-1:arguments.length;for(let R=0;R<z;R++)L[R]=T[R](arguments[R]);return P&&(L[z]=arguments[z].map(T[z])),E.apply(this,L)}}let S=C;if(A(D)){const P=D.length-1;S=function(){return C.apply(this,vr(arguments,0,P).concat([vr(arguments,P)]))}}return S}function K(D){let E,C,S,P;const T=[],U=[];switch(D.types.forEach(function(L){L.conversion&&(T.push(o(L.conversion.from).test),U.push(L.conversion.convert))}),U.length){case 0:return function(z){return z};case 1:return E=T[0],S=U[0],function(z){return E(z)?S(z):z};case 2:return E=T[0],C=T[1],S=U[0],P=U[1],function(z){return E(z)?S(z):C(z)?P(z):z};default:return function(z){for(let R=0;R<U.length;R++)if(T[R](z))return U[R](z);return z}}}function Nt(D){function E(C,S,P){if(S<C.length){const T=C[S];let U=[];if(T.restParam){const L=T.types.filter(O);L.length<T.types.length&&U.push({types:L,name:"..."+L.map(z=>z.name).join("|"),hasAny:L.some(z=>z.isAny),hasConversion:!1,restParam:!0}),U.push(T)}else U=T.types.map(function(L){return{types:[L],name:L.name,hasAny:L.isAny,hasConversion:L.conversion,restParam:!1}});return so(U,function(L){return E(C,S+1,P.concat([L]))})}else return[P]}return E(D,0,[])}function mr(D,E){const C=Math.max(D.length,E.length);for(let L=0;L<C;L++){const z=N(D,L),R=N(E,L);let et=!1,rt;for(rt of R)if(z.has(rt)){et=!0;break}if(!et)return!1}const S=D.length,P=E.length,T=A(D),U=A(E);return T?U?S===P:P>=S:U?S>=P:S===P}function Ei(D){return D.map(E=>bi(E)?_i(E.referToSelf.callback):xi(E)?Ci(E.referTo.references,E.referTo.callback):E)}function gr(D,E,C){const S=[];let P;for(P of D){let T=C[P];if(typeof T!="number")throw new TypeError('No definition for referenced signature "'+P+'"');if(T=E[T],typeof T!="function")return!1;S.push(T)}return S}function dn(D,E,C){const S=Ei(D),P=new Array(S.length).fill(!1);let T=!0;for(;T;){T=!1;let U=!0;for(let L=0;L<S.length;++L){if(P[L])continue;const z=S[L];if(bi(z))S[L]=z.referToSelf.callback(C),S[L].referToSelf=z.referToSelf,P[L]=!0,U=!1;else if(xi(z)){const R=gr(z.referTo.references,S,E);R?(S[L]=z.referTo.callback.apply(this,R),S[L].referTo=z.referTo,P[L]=!0,U=!1):T=!0}}if(U&&T)throw new SyntaxError("Circular reference detected in resolving typed.referTo")}return S}function Dr(D){const E=/\bthis(\(|\.signatures\b)/;Object.keys(D).forEach(C=>{const S=D[C];if(E.test(S.toString()))throw new SyntaxError("Using `this` to self-reference a function is deprecated since typed-function@3. Use typed.referTo and typed.referToSelf instead.")})}function mn(D,E){if(u.createCount++,Object.keys(E).length===0)throw new SyntaxError("No signatures provided");u.warnAgainstDeprecatedThis&&Dr(E);const C=[],S=[],P={},T=[];let U;for(U in E){if(!Object.prototype.hasOwnProperty.call(E,U))continue;const j=F(U);if(!j)continue;C.forEach(function(Ge){if(mr(Ge,j))throw new TypeError('Conflicting signatures "'+m(Ge)+'" and "'+m(j)+'".')}),C.push(j);const _t=S.length;S.push(E[U]);const $o=j.map(w);let Dn;for(Dn of Nt($o)){const Ge=m(Dn);T.push({params:Dn,name:Ge,fn:_t}),Dn.every(Uo=>!Uo.hasConversion)&&(P[Ge]=_t)}}T.sort(V);const L=dn(S,P,Ye);let z;for(z in P)Object.prototype.hasOwnProperty.call(P,z)&&(P[z]=L[P[z]]);const R=[],et=new Map;for(z of T)et.has(z.name)||(z.fn=L[z.fn],R.push(z),et.set(z.name,z));const rt=R[0]&&R[0].params.length<=2&&!A(R[0].params),ct=R[1]&&R[1].params.length<=2&&!A(R[1].params),Ct=R[2]&&R[2].params.length<=2&&!A(R[2].params),At=R[3]&&R[3].params.length<=2&&!A(R[3].params),kt=R[4]&&R[4].params.length<=2&&!A(R[4].params),$t=R[5]&&R[5].params.length<=2&&!A(R[5].params),Te=rt&&ct&&Ct&&At&&kt&&$t;for(let j=0;j<R.length;++j)R[j].test=b(R[j].params);const gn=rt?x(R[0].params[0]):Rt,lo=ct?x(R[1].params[0]):Rt,fo=Ct?x(R[2].params[0]):Rt,ho=At?x(R[3].params[0]):Rt,po=kt?x(R[4].params[0]):Rt,mo=$t?x(R[5].params[0]):Rt,go=rt?x(R[0].params[1]):Rt,Do=ct?x(R[1].params[1]):Rt,vo=Ct?x(R[2].params[1]):Rt,yo=At?x(R[3].params[1]):Rt,wo=kt?x(R[4].params[1]):Rt,Eo=$t?x(R[5].params[1]):Rt;for(let j=0;j<R.length;++j)R[j].implementation=ot(R[j].params,R[j].fn);const Fo=rt?R[0].implementation:Ie,Ao=ct?R[1].implementation:Ie,Co=Ct?R[2].implementation:Ie,_o=At?R[3].implementation:Ie,xo=kt?R[4].implementation:Ie,bo=$t?R[5].implementation:Ie,Bo=rt?R[0].params.length:-1,Mo=ct?R[1].params.length:-1,So=Ct?R[2].params.length:-1,No=At?R[3].params.length:-1,To=kt?R[4].params.length:-1,Io=$t?R[5].params.length:-1,Po=Te?6:0,Ro=R.length,Oo=R.map(j=>j.test),Lo=R.map(j=>j.implementation),ko=function(){for(let _t=Po;_t<Ro;_t++)if(Oo[_t](arguments))return Lo[_t].apply(this,arguments);return u.onMismatch(D,arguments,R)};function Ye(j,_t){return arguments.length===Bo&&gn(j)&&go(_t)?Fo.apply(this,arguments):arguments.length===Mo&&lo(j)&&Do(_t)?Ao.apply(this,arguments):arguments.length===So&&fo(j)&&vo(_t)?Co.apply(this,arguments):arguments.length===No&&ho(j)&&yo(_t)?_o.apply(this,arguments):arguments.length===To&&po(j)&&wo(_t)?xo.apply(this,arguments):arguments.length===Io&&mo(j)&&Eo(_t)?bo.apply(this,arguments):ko.apply(this,arguments)}try{Object.defineProperty(Ye,"name",{value:D})}catch{}return Ye.signatures=P,Ye._typedFunctionData={signatures:R,signatureMap:et},Ye}function Fi(D,E,C){throw $(D,E,C)}function Ai(D){return vr(D,0,D.length-1)}function Ne(D){return D[D.length-1]}function vr(D,E,C){return Array.prototype.slice.call(D,E,C)}function io(D,E){for(let C=0;C<D.length;C++)if(E(D[C]))return D[C]}function so(D,E){return Array.prototype.concat.apply([],D.map(E))}function uo(){const D=Ai(arguments).map(C=>m(F(C))),E=Ne(arguments);if(typeof E!="function")throw new TypeError("Callback function expected as last argument");return Ci(D,E)}function Ci(D,E){return{referTo:{references:D,callback:E}}}function _i(D){if(typeof D!="function")throw new TypeError("Callback function expected as first argument");return{referToSelf:{callback:D}}}function xi(D){return D&&typeof D.referTo=="object"&&Array.isArray(D.referTo.references)&&typeof D.referTo.callback=="function"}function bi(D){return D&&typeof D.referToSelf=="object"&&typeof D.referToSelf.callback=="function"}function Bi(D,E){if(!D)return E;if(E&&E!==D){const C=new Error("Function names do not match (expected: "+D+", actual: "+E+")");throw C.data={actual:E,expected:D},C}return D}function oo(D){let E;for(const C in D)Object.prototype.hasOwnProperty.call(D,C)&&(h(D[C])||typeof D[C].signature=="string")&&(E=Bi(E,D[C].name));return E}function ao(D,E){let C;for(C in E)if(Object.prototype.hasOwnProperty.call(E,C)){if(C in D&&E[C]!==D[C]){const S=new Error('Signature "'+C+'" is defined twice');throw S.data={signature:C,sourceFunction:E[C],destFunction:D[C]},S}D[C]=E[C]}}const co=u;u=function(D){const E=typeof D=="string",C=E?1:0;let S=E?D:"";const P={};for(let T=C;T<arguments.length;++T){const U=arguments[T];let L={},z;if(typeof U=="function"?(z=U.name,typeof U.signature=="string"?L[U.signature]=U:h(U)&&(L=U.signatures)):t(U)&&(L=U,E||(z=oo(U))),Object.keys(L).length===0){const R=new TypeError("Argument to 'typed' at index "+T+" is not a (typed) function, nor an object with signatures as keys and functions as values.");throw R.data={index:T,argument:U},R}E||(S=Bi(S,z)),ao(P,L)}return mn(S||"",P)},u.create=ks,u.createCount=co.createCount,u.onMismatch=Fi,u.throwMismatchError=Fi,u.createError=$,u.clear=l,u.clearConversions=c,u.addTypes=a,u._findType=o,u.referTo=uo,u.referToSelf=_i,u.convert=p,u.findSignature=d,u.find=g,u.isTypedFunction=h,u.warnAgainstDeprecatedThis=!0,u.addType=function(D,E){let C="any";E!==!1&&r.has("Object")&&(C="Object"),u.addTypes([D],C)};function Mi(D){if(!D||typeof D.from!="string"||typeof D.to!="string"||typeof D.convert!="function")throw new TypeError("Object with properties {from: string, to: string, convert: function} expected");if(D.to===D.from)throw new SyntaxError('Illegal to define conversion from "'+D.from+'" to itself.')}return u.addConversion=function(D){let E=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{override:!1};Mi(D);const C=o(D.to),S=C.conversionsTo.find(P=>P.from===D.from);if(S)if(E&&E.override)u.removeConversion({from:S.from,to:D.to,convert:S.convert});else throw new Error('There is already a conversion from "'+D.from+'" to "'+C.name+'"');C.conversionsTo.push({from:D.from,convert:D.convert,index:s++})},u.addConversions=function(D,E){D.forEach(C=>u.addConversion(C,E))},u.removeConversion=function(D){Mi(D);const E=o(D.to),C=io(E.conversionsTo,P=>P.from===D.from);if(!C)throw new Error("Attempt to remove nonexistent conversion from "+D.from+" to "+D.to);if(C.convert!==D.convert)throw new Error("Conversion to remove does not match existing conversion");const S=E.conversionsTo.indexOf(C);E.conversionsTo.splice(S,1)},u.resolve=function(D,E){if(!h(D))throw new TypeError(Ni);const C=D._typedFunctionData.signatures;for(let S=0;S<C.length;++S)if(C[S].test(E))return C[S];return null},u}const Ln=ks();function Q(t,e,n,r){function i(s){var u=Sa(s,e.map(Ra));return Ia(t,e,s),n(u)}return i.isFactory=!0,i.fn=t,i.dependencies=e.slice().sort(),r&&(i.meta=r),i}function Ia(t,e,n){var r=e.filter(s=>!Pa(s)).every(s=>n[s]!==void 0);if(!r){var i=e.filter(s=>n[s]===void 0);throw new Error('Cannot create function "'.concat(t,'", ')+"some dependencies are missing: ".concat(i.map(s=>'"'.concat(s,'"')).join(", "),"."))}}function Pa(t){return t&&t[0]==="?"}function Ra(t){return t&&t[0]==="?"?t.slice(1):t}function Dt(t){return typeof t=="boolean"?!0:isFinite(t)?t===Math.round(t):!1}function yr(t,e,n){var r={2:"0b",8:"0o",16:"0x"},i=r[e],s="";if(n){if(n<1)throw new Error("size must be in greater than 0");if(!Dt(n))throw new Error("size must be an integer");if(t>2**(n-1)-1||t<-(2**(n-1)))throw new Error("Value must be in range [-2^".concat(n-1,", 2^").concat(n-1,"-1]"));if(!Dt(t))throw new Error("Value must be an integer");t<0&&(t=t+2**n),s="i".concat(n)}var u="";return t<0&&(t=-t,u="-"),"".concat(u).concat(i).concat(t.toString(e)).concat(s)}function xr(t,e){if(typeof e=="function")return e(t);if(t===1/0)return"Infinity";if(t===-1/0)return"-Infinity";if(isNaN(t))return"NaN";var{notation:n,precision:r,wordSize:i}=$s(e);switch(n){case"fixed":return La(t,r);case"exponential":return Us(t,r);case"engineering":return Oa(t,r);case"bin":return yr(t,2,i);case"oct":return yr(t,8,i);case"hex":return yr(t,16,i);case"auto":return ka(t,r,e).replace(/((\.\d*?)(0+))($|e)/,function(){var s=arguments[2],u=arguments[4];return s!=="."?s+u:u});default:throw new Error('Unknown notation "'+n+'". Choose "auto", "exponential", "fixed", "bin", "oct", or "hex.')}}function $s(t){var e="auto",n,r;if(t!==void 0)if(it(t))n=t;else if(vt(t))n=t.toNumber();else if(ni(t))t.precision!==void 0&&(n=Ti(t.precision,()=>{throw new Error('Option "precision" must be a number or BigNumber')})),t.wordSize!==void 0&&(r=Ti(t.wordSize,()=>{throw new Error('Option "wordSize" must be a number or BigNumber')})),t.notation&&(e=t.notation);else throw new Error("Unsupported type of options, number, BigNumber, or object expected");return{notation:e,precision:n,wordSize:r}}function er(t){var e=String(t).toLowerCase().match(/^(-?)(\d+\.?\d*)(e([+-]?\d+))?$/);if(!e)throw new SyntaxError("Invalid number "+t);var n=e[1],r=e[2],i=parseFloat(e[4]||"0"),s=r.indexOf(".");i+=s!==-1?s-1:r.length-1;var u=r.replace(".","").replace(/^0*/,function(o){return i-=o.length,""}).replace(/0*$/,"").split("").map(function(o){return parseInt(o)});return u.length===0&&(u.push(0),i++),{sign:n,coefficients:u,exponent:i}}function Oa(t,e){if(isNaN(t)||!isFinite(t))return String(t);var n=er(t),r=nr(n,e),i=r.exponent,s=r.coefficients,u=i%3===0?i:i<0?i-3-i%3:i-i%3;if(it(e))for(;e>s.length||i-u+1>s.length;)s.push(0);else for(var o=Math.abs(i-u)-(s.length-1),a=0;a<o;a++)s.push(0);for(var l=Math.abs(i-u),c=1;l>0;)c++,l--;var f=s.slice(c).join(""),h=it(e)&&f.length||f.match(/[1-9]/)?"."+f:"",d=s.slice(0,c).join("")+h+"e"+(i>=0?"+":"")+u.toString();return r.sign+d}function La(t,e){if(isNaN(t)||!isFinite(t))return String(t);var n=er(t),r=typeof e=="number"?nr(n,n.exponent+1+e):n,i=r.coefficients,s=r.exponent+1,u=s+(e||0);return i.length<u&&(i=i.concat($e(u-i.length))),s<0&&(i=$e(-s+1).concat(i),s=1),s<i.length&&i.splice(s,0,s===0?"0.":"."),r.sign+i.join("")}function Us(t,e){if(isNaN(t)||!isFinite(t))return String(t);var n=er(t),r=e?nr(n,e):n,i=r.coefficients,s=r.exponent;i.length<e&&(i=i.concat($e(e-i.length)));var u=i.shift();return r.sign+u+(i.length>0?"."+i.join(""):"")+"e"+(s>=0?"+":"")+s}function ka(t,e,n){if(isNaN(t)||!isFinite(t))return String(t);var r=Ii(n==null?void 0:n.lowerExp,-3),i=Ii(n==null?void 0:n.upperExp,5),s=er(t),u=e?nr(s,e):s;if(u.exponent<r||u.exponent>=i)return Us(t,e);var o=u.coefficients,a=u.exponent;o.length<e&&(o=o.concat($e(e-o.length))),o=o.concat($e(a-o.length+1+(o.length<e?e-o.length:0))),o=$e(-a).concat(o);var l=a>0?a:0;return l<o.length-1&&o.splice(l+1,0,"."),u.sign+o.join("")}function nr(t,e){for(var n={sign:t.sign,coefficients:t.coefficients,exponent:t.exponent},r=n.coefficients;e<=0;)r.unshift(0),n.exponent++,e++;if(r.length>e){var i=r.splice(e,r.length-e);if(i[0]>=5){var s=e-1;for(r[s]++;r[s]===10;)r.pop(),s===0&&(r.unshift(0),n.exponent++,s++),s--,r[s]++}}return n}function $e(t){for(var e=[],n=0;n<t;n++)e.push(0);return e}function $a(t){return t.toExponential().replace(/e.*$/,"").replace(/^0\.?0*|\./,"").length}function kn(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1e-8,r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0;if(n<=0)throw new Error("Relative tolerance must be greater than 0");if(r<0)throw new Error("Absolute tolerance must be at least 0");return isNaN(t)||isNaN(e)?!1:!isFinite(t)||!isFinite(e)?t===e:t===e?!0:Math.abs(t-e)<=Math.max(n*Math.max(Math.abs(t),Math.abs(e)),r)}function Ti(t,e){if(it(t))return t;if(vt(t))return t.toNumber();e()}function Ii(t,e){return it(t)?t:vt(t)?t.toNumber():e}var zs=function(){return zs=Ln.create,Ln},Ua=["?BigNumber","?Complex","?DenseMatrix","?Fraction"],za=Q("typed",Ua,function(e){var{BigNumber:n,Complex:r,DenseMatrix:i,Fraction:s}=e,u=zs();return u.clear(),u.addTypes([{name:"number",test:it},{name:"Complex",test:Rs},{name:"BigNumber",test:vt},{name:"bigint",test:Qo},{name:"Fraction",test:Os},{name:"Unit",test:Ls},{name:"identifier",test:o=>Gt&&/^(?:[A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C8A\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CD\uA7D0\uA7D1\uA7D3\uA7D5-\uA7DC\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF40\uDF42-\uDF49\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDDC0-\uDDF3\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDD4A-\uDD65\uDD6F-\uDD85\uDE80-\uDEA9\uDEB0\uDEB1\uDEC2-\uDEC4\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDF70-\uDF81\uDFB0-\uDFC4\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE3F\uDE40\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61\uDF80-\uDF89\uDF8B\uDF8E\uDF90-\uDFB5\uDFB7\uDFD1\uDFD3]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8\uDFC0-\uDFE0]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDEE0-\uDEF2\uDF02\uDF04-\uDF10\uDF12-\uDF33\uDFB0]|\uD808[\uDC00-\uDF99]|\uD809[\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD80E\uD80F\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883\uD885-\uD887][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2F\uDC41-\uDC46\uDC60-\uDFFF]|\uD810[\uDC00-\uDFFA]|\uD811[\uDC00-\uDE46]|\uD818[\uDD00-\uDD1D]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE70-\uDEBE\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDD40-\uDD6C\uDE40-\uDE7F\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDCFF-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD32\uDD50-\uDD52\uDD55\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD837[\uDF00-\uDF1E\uDF25-\uDF2A]|\uD838[\uDC30-\uDC6D\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB]|\uD839[\uDCD0-\uDCEB\uDDD0-\uDDED\uDDF0\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF39\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0\uDFF0-\uDFFF]|\uD87B[\uDC00-\uDE5D]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A\uDF50-\uDFFF]|\uD888[\uDC00-\uDFAF])(?:[0-9A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C8A\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CD\uA7D0\uA7D1\uA7D3\uA7D5-\uA7DC\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF40\uDF42-\uDF49\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDDC0-\uDDF3\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDD4A-\uDD65\uDD6F-\uDD85\uDE80-\uDEA9\uDEB0\uDEB1\uDEC2-\uDEC4\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDF70-\uDF81\uDFB0-\uDFC4\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE3F\uDE40\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61\uDF80-\uDF89\uDF8B\uDF8E\uDF90-\uDFB5\uDFB7\uDFD1\uDFD3]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8\uDFC0-\uDFE0]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDEE0-\uDEF2\uDF02\uDF04-\uDF10\uDF12-\uDF33\uDFB0]|\uD808[\uDC00-\uDF99]|\uD809[\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD80E\uD80F\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883\uD885-\uD887][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2F\uDC41-\uDC46\uDC60-\uDFFF]|\uD810[\uDC00-\uDFFA]|\uD811[\uDC00-\uDE46]|\uD818[\uDD00-\uDD1D]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE70-\uDEBE\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDD40-\uDD6C\uDE40-\uDE7F\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDCFF-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD32\uDD50-\uDD52\uDD55\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD837[\uDF00-\uDF1E\uDF25-\uDF2A]|\uD838[\uDC30-\uDC6D\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB]|\uD839[\uDCD0-\uDCEB\uDDD0-\uDDED\uDDF0\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF39\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0\uDFF0-\uDFFF]|\uD87B[\uDC00-\uDE5D]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A\uDF50-\uDFFF]|\uD888[\uDC00-\uDFAF])*$/.test(o)},{name:"string",test:Gt},{name:"Chain",test:ba},{name:"Array",test:ft},{name:"Matrix",test:Vt},{name:"DenseMatrix",test:jo},{name:"SparseMatrix",test:ta},{name:"Range",test:ea},{name:"Index",test:ei},{name:"boolean",test:na},{name:"ResultSet",test:ra},{name:"Help",test:ia},{name:"function",test:sa},{name:"Date",test:ua},{name:"RegExp",test:oa},{name:"null",test:ca},{name:"undefined",test:la},{name:"AccessorNode",test:fa},{name:"ArrayNode",test:ha},{name:"AssignmentNode",test:pa},{name:"BlockNode",test:da},{name:"ConditionalNode",test:ma},{name:"ConstantNode",test:ga},{name:"FunctionNode",test:va},{name:"FunctionAssignmentNode",test:Da},{name:"IndexNode",test:ya},{name:"Node",test:wa},{name:"ObjectNode",test:Ea},{name:"OperatorNode",test:Fa},{name:"ParenthesisNode",test:Aa},{name:"RangeNode",test:Ca},{name:"RelationalNode",test:_a},{name:"SymbolNode",test:xa},{name:"Map",test:aa},{name:"Object",test:ni}]),u.addConversions([{from:"number",to:"BigNumber",convert:function(a){if(n||vn(a),$a(a)>15)throw new TypeError("Cannot implicitly convert a number with >15 significant digits to BigNumber (value: "+a+"). Use function bignumber(x) to convert to BigNumber.");return new n(a)}},{from:"number",to:"Complex",convert:function(a){return r||yn(a),new r(a,0)}},{from:"BigNumber",to:"Complex",convert:function(a){return r||yn(a),new r(a.toNumber(),0)}},{from:"bigint",to:"number",convert:function(a){if(a>Number.MAX_SAFE_INTEGER)throw new TypeError("Cannot implicitly convert bigint to number: value exceeds the max safe integer value (value: "+a+")");return Number(a)}},{from:"bigint",to:"BigNumber",convert:function(a){return n||vn(a),new n(a.toString())}},{from:"bigint",to:"Fraction",convert:function(a){return s||wn(a),new s(a)}},{from:"Fraction",to:"BigNumber",convert:function(a){throw new TypeError("Cannot implicitly convert a Fraction to BigNumber or vice versa. Use function bignumber(x) to convert to BigNumber or fraction(x) to convert to Fraction.")}},{from:"Fraction",to:"Complex",convert:function(a){return r||yn(a),new r(a.valueOf(),0)}},{from:"number",to:"Fraction",convert:function(a){s||wn(a);var l=new s(a);if(l.valueOf()!==a)throw new TypeError("Cannot implicitly convert a number to a Fraction when there will be a loss of precision (value: "+a+"). Use function fraction(x) to convert to Fraction.");return l}},{from:"string",to:"number",convert:function(a){var l=Number(a);if(isNaN(l))throw new Error('Cannot convert "'+a+'" to a number');return l}},{from:"string",to:"BigNumber",convert:function(a){n||vn(a);try{return new n(a)}catch{throw new Error('Cannot convert "'+a+'" to BigNumber')}}},{from:"string",to:"bigint",convert:function(a){try{return BigInt(a)}catch{throw new Error('Cannot convert "'+a+'" to BigInt')}}},{from:"string",to:"Fraction",convert:function(a){s||wn(a);try{return new s(a)}catch{throw new Error('Cannot convert "'+a+'" to Fraction')}}},{from:"string",to:"Complex",convert:function(a){r||yn(a);try{return new r(a)}catch{throw new Error('Cannot convert "'+a+'" to Complex')}}},{from:"boolean",to:"number",convert:function(a){return+a}},{from:"boolean",to:"BigNumber",convert:function(a){return n||vn(a),new n(+a)}},{from:"boolean",to:"bigint",convert:function(a){return BigInt(+a)}},{from:"boolean",to:"Fraction",convert:function(a){return s||wn(a),new s(+a)}},{from:"boolean",to:"string",convert:function(a){return String(a)}},{from:"Array",to:"Matrix",convert:function(a){return i||qa(),new i(a)}},{from:"Matrix",to:"Array",convert:function(a){return a.valueOf()}}]),u.onMismatch=(o,a,l)=>{var c=u.createError(o,a,l);if(["wrongType","mismatch"].includes(c.data.category)&&a.length===1&&On(a[0])&&l.some(h=>!h.params.includes(","))){var f=new TypeError("Function '".concat(o,"' doesn't apply to matrices. To call it ")+"elementwise on a matrix 'M', try 'map(M, ".concat(o,")'."));throw f.data=c.data,f}throw c},u.onMismatch=(o,a,l)=>{var c=u.createError(o,a,l);if(["wrongType","mismatch"].includes(c.data.category)&&a.length===1&&On(a[0])&&l.some(h=>!h.params.includes(","))){var f=new TypeError("Function '".concat(o,"' doesn't apply to matrices. To call it ")+"elementwise on a matrix 'M', try 'map(M, ".concat(o,")'."));throw f.data=c.data,f}throw c},u});function vn(t){throw new Error("Cannot convert value ".concat(t," into a BigNumber: no class 'BigNumber' provided"))}function yn(t){throw new Error("Cannot convert value ".concat(t," into a Complex number: no class 'Complex' provided"))}function qa(){throw new Error("Cannot convert array into a Matrix: no class 'DenseMatrix' provided")}function wn(t){throw new Error("Cannot convert value ".concat(t," into a Fraction, no class 'Fraction' provided."))}/*!
 *  decimal.js v10.5.0
 *  An arbitrary-precision Decimal type for JavaScript.
 *  https://github.com/MikeMcl/decimal.js
 *  Copyright (c) 2025 Michael Mclaughlin <M8ch88l@gmail.com>
 *  MIT Licence
 */var br=9e15,ye=1e9,Br="0123456789abcdef",$n="2.3025850929940456840179914546843642076011014886287729760333279009675726096773524802359972050895982983419677840422862486334095254650828067566662873690987816894829072083255546808437998948262331985283935053089653777326288461633662222876982198867465436674744042432743651550489343149393914796194044002221051017141748003688084012647080685567743216228355220114804663715659121373450747856947683463616792101806445070648000277502684916746550586856935673420670581136429224554405758925724208241314695689016758940256776311356919292033376587141660230105703089634572075440370847469940168269282808481184289314848524948644871927809676271275775397027668605952496716674183485704422507197965004714951050492214776567636938662976979522110718264549734772662425709429322582798502585509785265383207606726317164309505995087807523710333101197857547331541421808427543863591778117054309827482385045648019095610299291824318237525357709750539565187697510374970888692180205189339507238539205144634197265287286965110862571492198849978748873771345686209167058",Un="3.1415926535897932384626433832795028841971693993751058209749445923078164062862089986280348253421170679821480865132823066470938446095505822317253594081284811174502841027019385211055596446229489549303819644288109756659334461284756482337867831652712019091456485669234603486104543266482133936072602491412737245870066063155881748815209209628292540917153643678925903600113305305488204665213841469519415116094330572703657595919530921861173819326117931051185480744623799627495673518857527248912279381830119491298336733624406566430860213949463952247371907021798609437027705392171762931767523846748184676694051320005681271452635608277857713427577896091736371787214684409012249534301465495853710507922796892589235420199561121290219608640344181598136297747713099605187072113499999983729780499510597317328160963185950244594553469083026425223082533446850352619311881710100031378387528865875332083814206171776691473035982534904287554687311595628638823537875937519577818577805321712268066130019278766111959092164201989380952572010654858632789",Mr={precision:20,rounding:4,modulo:1,toExpNeg:-7,toExpPos:21,minE:-9e15,maxE:br,crypto:!1},qs,ue,Y=!0,rr="[DecimalError] ",De=rr+"Invalid argument: ",Hs=rr+"Precision limit exceeded",Vs=rr+"crypto unavailable",Ws="[object Decimal]",Ft=Math.floor,ht=Math.pow,Ha=/^0b([01]+(\.[01]*)?|\.[01]+)(p[+-]?\d+)?$/i,Va=/^0x([0-9a-f]+(\.[0-9a-f]*)?|\.[0-9a-f]+)(p[+-]?\d+)?$/i,Wa=/^0o([0-7]+(\.[0-7]*)?|\.[0-7]+)(p[+-]?\d+)?$/i,Zs=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,Zt=1e7,X=7,Za=9007199254740991,Xa=$n.length-1,Sr=Un.length-1,I={toStringTag:Ws};I.absoluteValue=I.abs=function(){var t=new this.constructor(this);return t.s<0&&(t.s=1),Z(t)};I.ceil=function(){return Z(new this.constructor(this),this.e+1,2)};I.clampedTo=I.clamp=function(t,e){var n,r=this,i=r.constructor;if(t=new i(t),e=new i(e),!t.s||!e.s)return new i(NaN);if(t.gt(e))throw Error(De+e);return n=r.cmp(t),n<0?t:r.cmp(e)>0?e:new i(r)};I.comparedTo=I.cmp=function(t){var e,n,r,i,s=this,u=s.d,o=(t=new s.constructor(t)).d,a=s.s,l=t.s;if(!u||!o)return!a||!l?NaN:a!==l?a:u===o?0:!u^a<0?1:-1;if(!u[0]||!o[0])return u[0]?a:o[0]?-l:0;if(a!==l)return a;if(s.e!==t.e)return s.e>t.e^a<0?1:-1;for(r=u.length,i=o.length,e=0,n=r<i?r:i;e<n;++e)if(u[e]!==o[e])return u[e]>o[e]^a<0?1:-1;return r===i?0:r>i^a<0?1:-1};I.cosine=I.cos=function(){var t,e,n=this,r=n.constructor;return n.d?n.d[0]?(t=r.precision,e=r.rounding,r.precision=t+Math.max(n.e,n.sd())+X,r.rounding=1,n=Ya(r,Ks(r,n)),r.precision=t,r.rounding=e,Z(ue==2||ue==3?n.neg():n,t,e,!0)):new r(1):new r(NaN)};I.cubeRoot=I.cbrt=function(){var t,e,n,r,i,s,u,o,a,l,c=this,f=c.constructor;if(!c.isFinite()||c.isZero())return new f(c);for(Y=!1,s=c.s*ht(c.s*c,1/3),!s||Math.abs(s)==1/0?(n=yt(c.d),t=c.e,(s=(t-n.length+1)%3)&&(n+=s==1||s==-2?"0":"00"),s=ht(n,1/3),t=Ft((t+1)/3)-(t%3==(t<0?-1:2)),s==1/0?n="5e"+t:(n=s.toExponential(),n=n.slice(0,n.indexOf("e")+1)+t),r=new f(n),r.s=c.s):r=new f(s.toString()),u=(t=f.precision)+3;;)if(o=r,a=o.times(o).times(o),l=a.plus(c),r=nt(l.plus(c).times(o),l.plus(a),u+2,1),yt(o.d).slice(0,u)===(n=yt(r.d)).slice(0,u))if(n=n.slice(u-3,u+1),n=="9999"||!i&&n=="4999"){if(!i&&(Z(o,t+1,0),o.times(o).times(o).eq(c))){r=o;break}u+=4,i=1}else{(!+n||!+n.slice(1)&&n.charAt(0)=="5")&&(Z(r,t+1,1),e=!r.times(r).times(r).eq(c));break}return Y=!0,Z(r,t,f.rounding,e)};I.decimalPlaces=I.dp=function(){var t,e=this.d,n=NaN;if(e){if(t=e.length-1,n=(t-Ft(this.e/X))*X,t=e[t],t)for(;t%10==0;t/=10)n--;n<0&&(n=0)}return n};I.dividedBy=I.div=function(t){return nt(this,new this.constructor(t))};I.dividedToIntegerBy=I.divToInt=function(t){var e=this,n=e.constructor;return Z(nt(e,new n(t),0,1,1),n.precision,n.rounding)};I.equals=I.eq=function(t){return this.cmp(t)===0};I.floor=function(){return Z(new this.constructor(this),this.e+1,3)};I.greaterThan=I.gt=function(t){return this.cmp(t)>0};I.greaterThanOrEqualTo=I.gte=function(t){var e=this.cmp(t);return e==1||e===0};I.hyperbolicCosine=I.cosh=function(){var t,e,n,r,i,s=this,u=s.constructor,o=new u(1);if(!s.isFinite())return new u(s.s?1/0:NaN);if(s.isZero())return o;n=u.precision,r=u.rounding,u.precision=n+Math.max(s.e,s.sd())+4,u.rounding=1,i=s.d.length,i<32?(t=Math.ceil(i/3),e=(1/sr(4,t)).toString()):(t=16,e="2.3283064365386962890625e-10"),s=qe(u,1,s.times(e),new u(1),!0);for(var a,l=t,c=new u(8);l--;)a=s.times(s),s=o.minus(a.times(c.minus(a.times(c))));return Z(s,u.precision=n,u.rounding=r,!0)};I.hyperbolicSine=I.sinh=function(){var t,e,n,r,i=this,s=i.constructor;if(!i.isFinite()||i.isZero())return new s(i);if(e=s.precision,n=s.rounding,s.precision=e+Math.max(i.e,i.sd())+4,s.rounding=1,r=i.d.length,r<3)i=qe(s,2,i,i,!0);else{t=1.4*Math.sqrt(r),t=t>16?16:t|0,i=i.times(1/sr(5,t)),i=qe(s,2,i,i,!0);for(var u,o=new s(5),a=new s(16),l=new s(20);t--;)u=i.times(i),i=i.times(o.plus(u.times(a.times(u).plus(l))))}return s.precision=e,s.rounding=n,Z(i,e,n,!0)};I.hyperbolicTangent=I.tanh=function(){var t,e,n=this,r=n.constructor;return n.isFinite()?n.isZero()?new r(n):(t=r.precision,e=r.rounding,r.precision=t+7,r.rounding=1,nt(n.sinh(),n.cosh(),r.precision=t,r.rounding=e)):new r(n.s)};I.inverseCosine=I.acos=function(){var t=this,e=t.constructor,n=t.abs().cmp(1),r=e.precision,i=e.rounding;return n!==-1?n===0?t.isNeg()?Jt(e,r,i):new e(0):new e(NaN):t.isZero()?Jt(e,r+4,i).times(.5):(e.precision=r+6,e.rounding=1,t=new e(1).minus(t).div(t.plus(1)).sqrt().atan(),e.precision=r,e.rounding=i,t.times(2))};I.inverseHyperbolicCosine=I.acosh=function(){var t,e,n=this,r=n.constructor;return n.lte(1)?new r(n.eq(1)?0:NaN):n.isFinite()?(t=r.precision,e=r.rounding,r.precision=t+Math.max(Math.abs(n.e),n.sd())+4,r.rounding=1,Y=!1,n=n.times(n).minus(1).sqrt().plus(n),Y=!0,r.precision=t,r.rounding=e,n.ln()):new r(n)};I.inverseHyperbolicSine=I.asinh=function(){var t,e,n=this,r=n.constructor;return!n.isFinite()||n.isZero()?new r(n):(t=r.precision,e=r.rounding,r.precision=t+2*Math.max(Math.abs(n.e),n.sd())+6,r.rounding=1,Y=!1,n=n.times(n).plus(1).sqrt().plus(n),Y=!0,r.precision=t,r.rounding=e,n.ln())};I.inverseHyperbolicTangent=I.atanh=function(){var t,e,n,r,i=this,s=i.constructor;return i.isFinite()?i.e>=0?new s(i.abs().eq(1)?i.s/0:i.isZero()?i:NaN):(t=s.precision,e=s.rounding,r=i.sd(),Math.max(r,t)<2*-i.e-1?Z(new s(i),t,e,!0):(s.precision=n=r-i.e,i=nt(i.plus(1),new s(1).minus(i),n+t,1),s.precision=t+4,s.rounding=1,i=i.ln(),s.precision=t,s.rounding=e,i.times(.5))):new s(NaN)};I.inverseSine=I.asin=function(){var t,e,n,r,i=this,s=i.constructor;return i.isZero()?new s(i):(e=i.abs().cmp(1),n=s.precision,r=s.rounding,e!==-1?e===0?(t=Jt(s,n+4,r).times(.5),t.s=i.s,t):new s(NaN):(s.precision=n+6,s.rounding=1,i=i.div(new s(1).minus(i.times(i)).sqrt().plus(1)).atan(),s.precision=n,s.rounding=r,i.times(2)))};I.inverseTangent=I.atan=function(){var t,e,n,r,i,s,u,o,a,l=this,c=l.constructor,f=c.precision,h=c.rounding;if(l.isFinite()){if(l.isZero())return new c(l);if(l.abs().eq(1)&&f+4<=Sr)return u=Jt(c,f+4,h).times(.25),u.s=l.s,u}else{if(!l.s)return new c(NaN);if(f+4<=Sr)return u=Jt(c,f+4,h).times(.5),u.s=l.s,u}for(c.precision=o=f+10,c.rounding=1,n=Math.min(28,o/X+2|0),t=n;t;--t)l=l.div(l.times(l).plus(1).sqrt().plus(1));for(Y=!1,e=Math.ceil(o/X),r=1,a=l.times(l),u=new c(l),i=l;t!==-1;)if(i=i.times(a),s=u.minus(i.div(r+=2)),i=i.times(a),u=s.plus(i.div(r+=2)),u.d[e]!==void 0)for(t=e;u.d[t]===s.d[t]&&t--;);return n&&(u=u.times(2<<n-1)),Y=!0,Z(u,c.precision=f,c.rounding=h,!0)};I.isFinite=function(){return!!this.d};I.isInteger=I.isInt=function(){return!!this.d&&Ft(this.e/X)>this.d.length-2};I.isNaN=function(){return!this.s};I.isNegative=I.isNeg=function(){return this.s<0};I.isPositive=I.isPos=function(){return this.s>0};I.isZero=function(){return!!this.d&&this.d[0]===0};I.lessThan=I.lt=function(t){return this.cmp(t)<0};I.lessThanOrEqualTo=I.lte=function(t){return this.cmp(t)<1};I.logarithm=I.log=function(t){var e,n,r,i,s,u,o,a,l=this,c=l.constructor,f=c.precision,h=c.rounding,d=5;if(t==null)t=new c(10),e=!0;else{if(t=new c(t),n=t.d,t.s<0||!n||!n[0]||t.eq(1))return new c(NaN);e=t.eq(10)}if(n=l.d,l.s<0||!n||!n[0]||l.eq(1))return new c(n&&!n[0]?-1/0:l.s!=1?NaN:n?0:1/0);if(e)if(n.length>1)s=!0;else{for(i=n[0];i%10===0;)i/=10;s=i!==1}if(Y=!1,o=f+d,u=de(l,o),r=e?zn(c,o+10):de(t,o),a=nt(u,r,o,1),on(a.d,i=f,h))do if(o+=10,u=de(l,o),r=e?zn(c,o+10):de(t,o),a=nt(u,r,o,1),!s){+yt(a.d).slice(i+1,i+15)+1==1e14&&(a=Z(a,f+1,0));break}while(on(a.d,i+=10,h));return Y=!0,Z(a,f,h)};I.minus=I.sub=function(t){var e,n,r,i,s,u,o,a,l,c,f,h,d=this,g=d.constructor;if(t=new g(t),!d.d||!t.d)return!d.s||!t.s?t=new g(NaN):d.d?t.s=-t.s:t=new g(t.d||d.s!==t.s?d:NaN),t;if(d.s!=t.s)return t.s=-t.s,d.plus(t);if(l=d.d,h=t.d,o=g.precision,a=g.rounding,!l[0]||!h[0]){if(h[0])t.s=-t.s;else if(l[0])t=new g(d);else return new g(a===3?-0:0);return Y?Z(t,o,a):t}if(n=Ft(t.e/X),c=Ft(d.e/X),l=l.slice(),s=c-n,s){for(f=s<0,f?(e=l,s=-s,u=h.length):(e=h,n=c,u=l.length),r=Math.max(Math.ceil(o/X),u)+2,s>r&&(s=r,e.length=1),e.reverse(),r=s;r--;)e.push(0);e.reverse()}else{for(r=l.length,u=h.length,f=r<u,f&&(u=r),r=0;r<u;r++)if(l[r]!=h[r]){f=l[r]<h[r];break}s=0}for(f&&(e=l,l=h,h=e,t.s=-t.s),u=l.length,r=h.length-u;r>0;--r)l[u++]=0;for(r=h.length;r>s;){if(l[--r]<h[r]){for(i=r;i&&l[--i]===0;)l[i]=Zt-1;--l[i],l[r]+=Zt}l[r]-=h[r]}for(;l[--u]===0;)l.pop();for(;l[0]===0;l.shift())--n;return l[0]?(t.d=l,t.e=ir(l,n),Y?Z(t,o,a):t):new g(a===3?-0:0)};I.modulo=I.mod=function(t){var e,n=this,r=n.constructor;return t=new r(t),!n.d||!t.s||t.d&&!t.d[0]?new r(NaN):!t.d||n.d&&!n.d[0]?Z(new r(n),r.precision,r.rounding):(Y=!1,r.modulo==9?(e=nt(n,t.abs(),0,3,1),e.s*=t.s):e=nt(n,t,0,r.modulo,1),e=e.times(t),Y=!0,n.minus(e))};I.naturalExponential=I.exp=function(){return Nr(this)};I.naturalLogarithm=I.ln=function(){return de(this)};I.negated=I.neg=function(){var t=new this.constructor(this);return t.s=-t.s,Z(t)};I.plus=I.add=function(t){var e,n,r,i,s,u,o,a,l,c,f=this,h=f.constructor;if(t=new h(t),!f.d||!t.d)return!f.s||!t.s?t=new h(NaN):f.d||(t=new h(t.d||f.s===t.s?f:NaN)),t;if(f.s!=t.s)return t.s=-t.s,f.minus(t);if(l=f.d,c=t.d,o=h.precision,a=h.rounding,!l[0]||!c[0])return c[0]||(t=new h(f)),Y?Z(t,o,a):t;if(s=Ft(f.e/X),r=Ft(t.e/X),l=l.slice(),i=s-r,i){for(i<0?(n=l,i=-i,u=c.length):(n=c,r=s,u=l.length),s=Math.ceil(o/X),u=s>u?s+1:u+1,i>u&&(i=u,n.length=1),n.reverse();i--;)n.push(0);n.reverse()}for(u=l.length,i=c.length,u-i<0&&(i=u,n=c,c=l,l=n),e=0;i;)e=(l[--i]=l[i]+c[i]+e)/Zt|0,l[i]%=Zt;for(e&&(l.unshift(e),++r),u=l.length;l[--u]==0;)l.pop();return t.d=l,t.e=ir(l,r),Y?Z(t,o,a):t};I.precision=I.sd=function(t){var e,n=this;if(t!==void 0&&t!==!!t&&t!==1&&t!==0)throw Error(De+t);return n.d?(e=Xs(n.d),t&&n.e+1>e&&(e=n.e+1)):e=NaN,e};I.round=function(){var t=this,e=t.constructor;return Z(new e(t),t.e+1,e.rounding)};I.sine=I.sin=function(){var t,e,n=this,r=n.constructor;return n.isFinite()?n.isZero()?new r(n):(t=r.precision,e=r.rounding,r.precision=t+Math.max(n.e,n.sd())+X,r.rounding=1,n=Ja(r,Ks(r,n)),r.precision=t,r.rounding=e,Z(ue>2?n.neg():n,t,e,!0)):new r(NaN)};I.squareRoot=I.sqrt=function(){var t,e,n,r,i,s,u=this,o=u.d,a=u.e,l=u.s,c=u.constructor;if(l!==1||!o||!o[0])return new c(!l||l<0&&(!o||o[0])?NaN:o?u:1/0);for(Y=!1,l=Math.sqrt(+u),l==0||l==1/0?(e=yt(o),(e.length+a)%2==0&&(e+="0"),l=Math.sqrt(e),a=Ft((a+1)/2)-(a<0||a%2),l==1/0?e="5e"+a:(e=l.toExponential(),e=e.slice(0,e.indexOf("e")+1)+a),r=new c(e)):r=new c(l.toString()),n=(a=c.precision)+3;;)if(s=r,r=s.plus(nt(u,s,n+2,1)).times(.5),yt(s.d).slice(0,n)===(e=yt(r.d)).slice(0,n))if(e=e.slice(n-3,n+1),e=="9999"||!i&&e=="4999"){if(!i&&(Z(s,a+1,0),s.times(s).eq(u))){r=s;break}n+=4,i=1}else{(!+e||!+e.slice(1)&&e.charAt(0)=="5")&&(Z(r,a+1,1),t=!r.times(r).eq(u));break}return Y=!0,Z(r,a,c.rounding,t)};I.tangent=I.tan=function(){var t,e,n=this,r=n.constructor;return n.isFinite()?n.isZero()?new r(n):(t=r.precision,e=r.rounding,r.precision=t+10,r.rounding=1,n=n.sin(),n.s=1,n=nt(n,new r(1).minus(n.times(n)).sqrt(),t+10,0),r.precision=t,r.rounding=e,Z(ue==2||ue==4?n.neg():n,t,e,!0)):new r(NaN)};I.times=I.mul=function(t){var e,n,r,i,s,u,o,a,l,c=this,f=c.constructor,h=c.d,d=(t=new f(t)).d;if(t.s*=c.s,!h||!h[0]||!d||!d[0])return new f(!t.s||h&&!h[0]&&!d||d&&!d[0]&&!h?NaN:!h||!d?t.s/0:t.s*0);for(n=Ft(c.e/X)+Ft(t.e/X),a=h.length,l=d.length,a<l&&(s=h,h=d,d=s,u=a,a=l,l=u),s=[],u=a+l,r=u;r--;)s.push(0);for(r=l;--r>=0;){for(e=0,i=a+r;i>r;)o=s[i]+d[r]*h[i-r-1]+e,s[i--]=o%Zt|0,e=o/Zt|0;s[i]=(s[i]+e)%Zt|0}for(;!s[--u];)s.pop();return e?++n:s.shift(),t.d=s,t.e=ir(s,n),Y?Z(t,f.precision,f.rounding):t};I.toBinary=function(t,e){return ri(this,2,t,e)};I.toDecimalPlaces=I.toDP=function(t,e){var n=this,r=n.constructor;return n=new r(n),t===void 0?n:(St(t,0,ye),e===void 0?e=r.rounding:St(e,0,8),Z(n,t+n.e+1,e))};I.toExponential=function(t,e){var n,r=this,i=r.constructor;return t===void 0?n=te(r,!0):(St(t,0,ye),e===void 0?e=i.rounding:St(e,0,8),r=Z(new i(r),t+1,e),n=te(r,!0,t+1)),r.isNeg()&&!r.isZero()?"-"+n:n};I.toFixed=function(t,e){var n,r,i=this,s=i.constructor;return t===void 0?n=te(i):(St(t,0,ye),e===void 0?e=s.rounding:St(e,0,8),r=Z(new s(i),t+i.e+1,e),n=te(r,!1,t+r.e+1)),i.isNeg()&&!i.isZero()?"-"+n:n};I.toFraction=function(t){var e,n,r,i,s,u,o,a,l,c,f,h,d=this,g=d.d,p=d.constructor;if(!g)return new p(d);if(l=n=new p(1),r=a=new p(0),e=new p(r),s=e.e=Xs(g)-d.e-1,u=s%X,e.d[0]=ht(10,u<0?X+u:u),t==null)t=s>0?e:l;else{if(o=new p(t),!o.isInt()||o.lt(l))throw Error(De+o);t=o.gt(e)?s>0?e:l:o}for(Y=!1,o=new p(yt(g)),c=p.precision,p.precision=s=g.length*X*2;f=nt(o,e,0,1,1),i=n.plus(f.times(r)),i.cmp(t)!=1;)n=r,r=i,i=l,l=a.plus(f.times(i)),a=i,i=e,e=o.minus(f.times(i)),o=i;return i=nt(t.minus(n),r,0,1,1),a=a.plus(i.times(l)),n=n.plus(i.times(r)),a.s=l.s=d.s,h=nt(l,r,s,1).minus(d).abs().cmp(nt(a,n,s,1).minus(d).abs())<1?[l,r]:[a,n],p.precision=c,Y=!0,h};I.toHexadecimal=I.toHex=function(t,e){return ri(this,16,t,e)};I.toNearest=function(t,e){var n=this,r=n.constructor;if(n=new r(n),t==null){if(!n.d)return n;t=new r(1),e=r.rounding}else{if(t=new r(t),e===void 0?e=r.rounding:St(e,0,8),!n.d)return t.s?n:t;if(!t.d)return t.s&&(t.s=n.s),t}return t.d[0]?(Y=!1,n=nt(n,t,0,e,1).times(t),Y=!0,Z(n)):(t.s=n.s,n=t),n};I.toNumber=function(){return+this};I.toOctal=function(t,e){return ri(this,8,t,e)};I.toPower=I.pow=function(t){var e,n,r,i,s,u,o=this,a=o.constructor,l=+(t=new a(t));if(!o.d||!t.d||!o.d[0]||!t.d[0])return new a(ht(+o,l));if(o=new a(o),o.eq(1))return o;if(r=a.precision,s=a.rounding,t.eq(1))return Z(o,r,s);if(e=Ft(t.e/X),e>=t.d.length-1&&(n=l<0?-l:l)<=Za)return i=Ys(a,o,n,r),t.s<0?new a(1).div(i):Z(i,r,s);if(u=o.s,u<0){if(e<t.d.length-1)return new a(NaN);if((t.d[e]&1)==0&&(u=1),o.e==0&&o.d[0]==1&&o.d.length==1)return o.s=u,o}return n=ht(+o,l),e=n==0||!isFinite(n)?Ft(l*(Math.log("0."+yt(o.d))/Math.LN10+o.e+1)):new a(n+"").e,e>a.maxE+1||e<a.minE-1?new a(e>0?u/0:0):(Y=!1,a.rounding=o.s=1,n=Math.min(12,(e+"").length),i=Nr(t.times(de(o,r+n)),r),i.d&&(i=Z(i,r+5,1),on(i.d,r,s)&&(e=r+10,i=Z(Nr(t.times(de(o,e+n)),e),e+5,1),+yt(i.d).slice(r+1,r+15)+1==1e14&&(i=Z(i,r+1,0)))),i.s=u,Y=!0,a.rounding=s,Z(i,r,s))};I.toPrecision=function(t,e){var n,r=this,i=r.constructor;return t===void 0?n=te(r,r.e<=i.toExpNeg||r.e>=i.toExpPos):(St(t,1,ye),e===void 0?e=i.rounding:St(e,0,8),r=Z(new i(r),t,e),n=te(r,t<=r.e||r.e<=i.toExpNeg,t)),r.isNeg()&&!r.isZero()?"-"+n:n};I.toSignificantDigits=I.toSD=function(t,e){var n=this,r=n.constructor;return t===void 0?(t=r.precision,e=r.rounding):(St(t,1,ye),e===void 0?e=r.rounding:St(e,0,8)),Z(new r(n),t,e)};I.toString=function(){var t=this,e=t.constructor,n=te(t,t.e<=e.toExpNeg||t.e>=e.toExpPos);return t.isNeg()&&!t.isZero()?"-"+n:n};I.truncated=I.trunc=function(){return Z(new this.constructor(this),this.e+1,1)};I.valueOf=I.toJSON=function(){var t=this,e=t.constructor,n=te(t,t.e<=e.toExpNeg||t.e>=e.toExpPos);return t.isNeg()?"-"+n:n};function yt(t){var e,n,r,i=t.length-1,s="",u=t[0];if(i>0){for(s+=u,e=1;e<i;e++)r=t[e]+"",n=X-r.length,n&&(s+=he(n)),s+=r;u=t[e],r=u+"",n=X-r.length,n&&(s+=he(n))}else if(u===0)return"0";for(;u%10===0;)u/=10;return s+u}function St(t,e,n){if(t!==~~t||t<e||t>n)throw Error(De+t)}function on(t,e,n,r){var i,s,u,o;for(s=t[0];s>=10;s/=10)--e;return--e<0?(e+=X,i=0):(i=Math.ceil((e+1)/X),e%=X),s=ht(10,X-e),o=t[i]%s|0,r==null?e<3?(e==0?o=o/100|0:e==1&&(o=o/10|0),u=n<4&&o==99999||n>3&&o==49999||o==5e4||o==0):u=(n<4&&o+1==s||n>3&&o+1==s/2)&&(t[i+1]/s/100|0)==ht(10,e-2)-1||(o==s/2||o==0)&&(t[i+1]/s/100|0)==0:e<4?(e==0?o=o/1e3|0:e==1?o=o/100|0:e==2&&(o=o/10|0),u=(r||n<4)&&o==9999||!r&&n>3&&o==4999):u=((r||n<4)&&o+1==s||!r&&n>3&&o+1==s/2)&&(t[i+1]/s/1e3|0)==ht(10,e-3)-1,u}function xn(t,e,n){for(var r,i=[0],s,u=0,o=t.length;u<o;){for(s=i.length;s--;)i[s]*=e;for(i[0]+=Br.indexOf(t.charAt(u++)),r=0;r<i.length;r++)i[r]>n-1&&(i[r+1]===void 0&&(i[r+1]=0),i[r+1]+=i[r]/n|0,i[r]%=n)}return i.reverse()}function Ya(t,e){var n,r,i;if(e.isZero())return e;r=e.d.length,r<32?(n=Math.ceil(r/3),i=(1/sr(4,n)).toString()):(n=16,i="2.3283064365386962890625e-10"),t.precision+=n,e=qe(t,1,e.times(i),new t(1));for(var s=n;s--;){var u=e.times(e);e=u.times(u).minus(u).times(8).plus(1)}return t.precision-=n,e}var nt=function(){function t(r,i,s){var u,o=0,a=r.length;for(r=r.slice();a--;)u=r[a]*i+o,r[a]=u%s|0,o=u/s|0;return o&&r.unshift(o),r}function e(r,i,s,u){var o,a;if(s!=u)a=s>u?1:-1;else for(o=a=0;o<s;o++)if(r[o]!=i[o]){a=r[o]>i[o]?1:-1;break}return a}function n(r,i,s,u){for(var o=0;s--;)r[s]-=o,o=r[s]<i[s]?1:0,r[s]=o*u+r[s]-i[s];for(;!r[0]&&r.length>1;)r.shift()}return function(r,i,s,u,o,a){var l,c,f,h,d,g,p,m,v,w,y,F,A,x,b,_,N,O,M,$,q=r.constructor,H=r.s==i.s?1:-1,G=r.d,V=i.d;if(!G||!G[0]||!V||!V[0])return new q(!r.s||!i.s||(G?V&&G[0]==V[0]:!V)?NaN:G&&G[0]==0||!V?H*0:H/0);for(a?(d=1,c=r.e-i.e):(a=Zt,d=X,c=Ft(r.e/d)-Ft(i.e/d)),M=V.length,N=G.length,v=new q(H),w=v.d=[],f=0;V[f]==(G[f]||0);f++);if(V[f]>(G[f]||0)&&c--,s==null?(x=s=q.precision,u=q.rounding):o?x=s+(r.e-i.e)+1:x=s,x<0)w.push(1),g=!0;else{if(x=x/d+2|0,f=0,M==1){for(h=0,V=V[0],x++;(f<N||h)&&x--;f++)b=h*a+(G[f]||0),w[f]=b/V|0,h=b%V|0;g=h||f<N}else{for(h=a/(V[0]+1)|0,h>1&&(V=t(V,h,a),G=t(G,h,a),M=V.length,N=G.length),_=M,y=G.slice(0,M),F=y.length;F<M;)y[F++]=0;$=V.slice(),$.unshift(0),O=V[0],V[1]>=a/2&&++O;do h=0,l=e(V,y,M,F),l<0?(A=y[0],M!=F&&(A=A*a+(y[1]||0)),h=A/O|0,h>1?(h>=a&&(h=a-1),p=t(V,h,a),m=p.length,F=y.length,l=e(p,y,m,F),l==1&&(h--,n(p,M<m?$:V,m,a))):(h==0&&(l=h=1),p=V.slice()),m=p.length,m<F&&p.unshift(0),n(y,p,F,a),l==-1&&(F=y.length,l=e(V,y,M,F),l<1&&(h++,n(y,M<F?$:V,F,a))),F=y.length):l===0&&(h++,y=[0]),w[f++]=h,l&&y[0]?y[F++]=G[_]||0:(y=[G[_]],F=1);while((_++<N||y[0]!==void 0)&&x--);g=y[0]!==void 0}w[0]||w.shift()}if(d==1)v.e=c,qs=g;else{for(f=1,h=w[0];h>=10;h/=10)f++;v.e=f+c*d-1,Z(v,o?s+v.e+1:s,u,g)}return v}}();function Z(t,e,n,r){var i,s,u,o,a,l,c,f,h,d=t.constructor;t:if(e!=null){if(f=t.d,!f)return t;for(i=1,o=f[0];o>=10;o/=10)i++;if(s=e-i,s<0)s+=X,u=e,c=f[h=0],a=c/ht(10,i-u-1)%10|0;else if(h=Math.ceil((s+1)/X),o=f.length,h>=o)if(r){for(;o++<=h;)f.push(0);c=a=0,i=1,s%=X,u=s-X+1}else break t;else{for(c=o=f[h],i=1;o>=10;o/=10)i++;s%=X,u=s-X+i,a=u<0?0:c/ht(10,i-u-1)%10|0}if(r=r||e<0||f[h+1]!==void 0||(u<0?c:c%ht(10,i-u-1)),l=n<4?(a||r)&&(n==0||n==(t.s<0?3:2)):a>5||a==5&&(n==4||r||n==6&&(s>0?u>0?c/ht(10,i-u):0:f[h-1])%10&1||n==(t.s<0?8:7)),e<1||!f[0])return f.length=0,l?(e-=t.e+1,f[0]=ht(10,(X-e%X)%X),t.e=-e||0):f[0]=t.e=0,t;if(s==0?(f.length=h,o=1,h--):(f.length=h+1,o=ht(10,X-s),f[h]=u>0?(c/ht(10,i-u)%ht(10,u)|0)*o:0),l)for(;;)if(h==0){for(s=1,u=f[0];u>=10;u/=10)s++;for(u=f[0]+=o,o=1;u>=10;u/=10)o++;s!=o&&(t.e++,f[0]==Zt&&(f[0]=1));break}else{if(f[h]+=o,f[h]!=Zt)break;f[h--]=0,o=1}for(s=f.length;f[--s]===0;)f.pop()}return Y&&(t.e>d.maxE?(t.d=null,t.e=NaN):t.e<d.minE&&(t.e=0,t.d=[0])),t}function te(t,e,n){if(!t.isFinite())return Js(t);var r,i=t.e,s=yt(t.d),u=s.length;return e?(n&&(r=n-u)>0?s=s.charAt(0)+"."+s.slice(1)+he(r):u>1&&(s=s.charAt(0)+"."+s.slice(1)),s=s+(t.e<0?"e":"e+")+t.e):i<0?(s="0."+he(-i-1)+s,n&&(r=n-u)>0&&(s+=he(r))):i>=u?(s+=he(i+1-u),n&&(r=n-i-1)>0&&(s=s+"."+he(r))):((r=i+1)<u&&(s=s.slice(0,r)+"."+s.slice(r)),n&&(r=n-u)>0&&(i+1===u&&(s+="."),s+=he(r))),s}function ir(t,e){var n=t[0];for(e*=X;n>=10;n/=10)e++;return e}function zn(t,e,n){if(e>Xa)throw Y=!0,n&&(t.precision=n),Error(Hs);return Z(new t($n),e,1,!0)}function Jt(t,e,n){if(e>Sr)throw Error(Hs);return Z(new t(Un),e,n,!0)}function Xs(t){var e=t.length-1,n=e*X+1;if(e=t[e],e){for(;e%10==0;e/=10)n--;for(e=t[0];e>=10;e/=10)n++}return n}function he(t){for(var e="";t--;)e+="0";return e}function Ys(t,e,n,r){var i,s=new t(1),u=Math.ceil(r/X+4);for(Y=!1;;){if(n%2&&(s=s.times(e),Ri(s.d,u)&&(i=!0)),n=Ft(n/2),n===0){n=s.d.length-1,i&&s.d[n]===0&&++s.d[n];break}e=e.times(e),Ri(e.d,u)}return Y=!0,s}function Pi(t){return t.d[t.d.length-1]&1}function Gs(t,e,n){for(var r,i,s=new t(e[0]),u=0;++u<e.length;){if(i=new t(e[u]),!i.s){s=i;break}r=s.cmp(i),(r===n||r===0&&s.s===n)&&(s=i)}return s}function Nr(t,e){var n,r,i,s,u,o,a,l=0,c=0,f=0,h=t.constructor,d=h.rounding,g=h.precision;if(!t.d||!t.d[0]||t.e>17)return new h(t.d?t.d[0]?t.s<0?0:1/0:1:t.s?t.s<0?0:t:NaN);for(e==null?(Y=!1,a=g):a=e,o=new h(.03125);t.e>-2;)t=t.times(o),f+=5;for(r=Math.log(ht(2,f))/Math.LN10*2+5|0,a+=r,n=s=u=new h(1),h.precision=a;;){if(s=Z(s.times(t),a,1),n=n.times(++c),o=u.plus(nt(s,n,a,1)),yt(o.d).slice(0,a)===yt(u.d).slice(0,a)){for(i=f;i--;)u=Z(u.times(u),a,1);if(e==null)if(l<3&&on(u.d,a-r,d,l))h.precision=a+=10,n=s=o=new h(1),c=0,l++;else return Z(u,h.precision=g,d,Y=!0);else return h.precision=g,u}u=o}}function de(t,e){var n,r,i,s,u,o,a,l,c,f,h,d=1,g=10,p=t,m=p.d,v=p.constructor,w=v.rounding,y=v.precision;if(p.s<0||!m||!m[0]||!p.e&&m[0]==1&&m.length==1)return new v(m&&!m[0]?-1/0:p.s!=1?NaN:m?0:p);if(e==null?(Y=!1,c=y):c=e,v.precision=c+=g,n=yt(m),r=n.charAt(0),Math.abs(s=p.e)<15e14){for(;r<7&&r!=1||r==1&&n.charAt(1)>3;)p=p.times(t),n=yt(p.d),r=n.charAt(0),d++;s=p.e,r>1?(p=new v("0."+n),s++):p=new v(r+"."+n.slice(1))}else return l=zn(v,c+2,y).times(s+""),p=de(new v(r+"."+n.slice(1)),c-g).plus(l),v.precision=y,e==null?Z(p,y,w,Y=!0):p;for(f=p,a=u=p=nt(p.minus(1),p.plus(1),c,1),h=Z(p.times(p),c,1),i=3;;){if(u=Z(u.times(h),c,1),l=a.plus(nt(u,new v(i),c,1)),yt(l.d).slice(0,c)===yt(a.d).slice(0,c))if(a=a.times(2),s!==0&&(a=a.plus(zn(v,c+2,y).times(s+""))),a=nt(a,new v(d),c,1),e==null)if(on(a.d,c-g,w,o))v.precision=c+=g,l=u=p=nt(f.minus(1),f.plus(1),c,1),h=Z(p.times(p),c,1),i=o=1;else return Z(a,v.precision=y,w,Y=!0);else return v.precision=y,a;a=l,i+=2}}function Js(t){return String(t.s*t.s/0)}function bn(t,e){var n,r,i;for((n=e.indexOf("."))>-1&&(e=e.replace(".","")),(r=e.search(/e/i))>0?(n<0&&(n=r),n+=+e.slice(r+1),e=e.substring(0,r)):n<0&&(n=e.length),r=0;e.charCodeAt(r)===48;r++);for(i=e.length;e.charCodeAt(i-1)===48;--i);if(e=e.slice(r,i),e){if(i-=r,t.e=n=n-r-1,t.d=[],r=(n+1)%X,n<0&&(r+=X),r<i){for(r&&t.d.push(+e.slice(0,r)),i-=X;r<i;)t.d.push(+e.slice(r,r+=X));e=e.slice(r),r=X-e.length}else r-=i;for(;r--;)e+="0";t.d.push(+e),Y&&(t.e>t.constructor.maxE?(t.d=null,t.e=NaN):t.e<t.constructor.minE&&(t.e=0,t.d=[0]))}else t.e=0,t.d=[0];return t}function Ga(t,e){var n,r,i,s,u,o,a,l,c;if(e.indexOf("_")>-1){if(e=e.replace(/(\d)_(?=\d)/g,"$1"),Zs.test(e))return bn(t,e)}else if(e==="Infinity"||e==="NaN")return+e||(t.s=NaN),t.e=NaN,t.d=null,t;if(Va.test(e))n=16,e=e.toLowerCase();else if(Ha.test(e))n=2;else if(Wa.test(e))n=8;else throw Error(De+e);for(s=e.search(/p/i),s>0?(a=+e.slice(s+1),e=e.substring(2,s)):e=e.slice(2),s=e.indexOf("."),u=s>=0,r=t.constructor,u&&(e=e.replace(".",""),o=e.length,s=o-s,i=Ys(r,new r(n),s,s*2)),l=xn(e,n,Zt),c=l.length-1,s=c;l[s]===0;--s)l.pop();return s<0?new r(t.s*0):(t.e=ir(l,c),t.d=l,Y=!1,u&&(t=nt(t,i,o*4)),a&&(t=t.times(Math.abs(a)<54?ht(2,a):He.pow(2,a))),Y=!0,t)}function Ja(t,e){var n,r=e.d.length;if(r<3)return e.isZero()?e:qe(t,2,e,e);n=1.4*Math.sqrt(r),n=n>16?16:n|0,e=e.times(1/sr(5,n)),e=qe(t,2,e,e);for(var i,s=new t(5),u=new t(16),o=new t(20);n--;)i=e.times(e),e=e.times(s.plus(i.times(u.times(i).minus(o))));return e}function qe(t,e,n,r,i){var s,u,o,a,l=t.precision,c=Math.ceil(l/X);for(Y=!1,a=n.times(n),o=new t(r);;){if(u=nt(o.times(a),new t(e++*e++),l,1),o=i?r.plus(u):r.minus(u),r=nt(u.times(a),new t(e++*e++),l,1),u=o.plus(r),u.d[c]!==void 0){for(s=c;u.d[s]===o.d[s]&&s--;);if(s==-1)break}s=o,o=r,r=u,u=s}return Y=!0,u.d.length=c+1,u}function sr(t,e){for(var n=t;--e;)n*=t;return n}function Ks(t,e){var n,r=e.s<0,i=Jt(t,t.precision,1),s=i.times(.5);if(e=e.abs(),e.lte(s))return ue=r?4:1,e;if(n=e.divToInt(i),n.isZero())ue=r?3:2;else{if(e=e.minus(n.times(i)),e.lte(s))return ue=Pi(n)?r?2:3:r?4:1,e;ue=Pi(n)?r?1:4:r?3:2}return e.minus(i).abs()}function ri(t,e,n,r){var i,s,u,o,a,l,c,f,h,d=t.constructor,g=n!==void 0;if(g?(St(n,1,ye),r===void 0?r=d.rounding:St(r,0,8)):(n=d.precision,r=d.rounding),!t.isFinite())c=Js(t);else{for(c=te(t),u=c.indexOf("."),g?(i=2,e==16?n=n*4-3:e==8&&(n=n*3-2)):i=e,u>=0&&(c=c.replace(".",""),h=new d(1),h.e=c.length-u,h.d=xn(te(h),10,i),h.e=h.d.length),f=xn(c,10,i),s=a=f.length;f[--a]==0;)f.pop();if(!f[0])c=g?"0p+0":"0";else{if(u<0?s--:(t=new d(t),t.d=f,t.e=s,t=nt(t,h,n,r,0,i),f=t.d,s=t.e,l=qs),u=f[n],o=i/2,l=l||f[n+1]!==void 0,l=r<4?(u!==void 0||l)&&(r===0||r===(t.s<0?3:2)):u>o||u===o&&(r===4||l||r===6&&f[n-1]&1||r===(t.s<0?8:7)),f.length=n,l)for(;++f[--n]>i-1;)f[n]=0,n||(++s,f.unshift(1));for(a=f.length;!f[a-1];--a);for(u=0,c="";u<a;u++)c+=Br.charAt(f[u]);if(g){if(a>1)if(e==16||e==8){for(u=e==16?4:3,--a;a%u;a++)c+="0";for(f=xn(c,i,e),a=f.length;!f[a-1];--a);for(u=1,c="1.";u<a;u++)c+=Br.charAt(f[u])}else c=c.charAt(0)+"."+c.slice(1);c=c+(s<0?"p":"p+")+s}else if(s<0){for(;++s;)c="0"+c;c="0."+c}else if(++s>a)for(s-=a;s--;)c+="0";else s<a&&(c=c.slice(0,s)+"."+c.slice(s))}c=(e==16?"0x":e==2?"0b":e==8?"0o":"")+c}return t.s<0?"-"+c:c}function Ri(t,e){if(t.length>e)return t.length=e,!0}function Ka(t){return new this(t).abs()}function Qa(t){return new this(t).acos()}function ja(t){return new this(t).acosh()}function tc(t,e){return new this(t).plus(e)}function ec(t){return new this(t).asin()}function nc(t){return new this(t).asinh()}function rc(t){return new this(t).atan()}function ic(t){return new this(t).atanh()}function sc(t,e){t=new this(t),e=new this(e);var n,r=this.precision,i=this.rounding,s=r+4;return!t.s||!e.s?n=new this(NaN):!t.d&&!e.d?(n=Jt(this,s,1).times(e.s>0?.25:.75),n.s=t.s):!e.d||t.isZero()?(n=e.s<0?Jt(this,r,i):new this(0),n.s=t.s):!t.d||e.isZero()?(n=Jt(this,s,1).times(.5),n.s=t.s):e.s<0?(this.precision=s,this.rounding=1,n=this.atan(nt(t,e,s,1)),e=Jt(this,s,1),this.precision=r,this.rounding=i,n=t.s<0?n.minus(e):n.plus(e)):n=this.atan(nt(t,e,s,1)),n}function uc(t){return new this(t).cbrt()}function oc(t){return Z(t=new this(t),t.e+1,2)}function ac(t,e,n){return new this(t).clamp(e,n)}function cc(t){if(!t||typeof t!="object")throw Error(rr+"Object expected");var e,n,r,i=t.defaults===!0,s=["precision",1,ye,"rounding",0,8,"toExpNeg",-9e15,0,"toExpPos",0,br,"maxE",0,br,"minE",-9e15,0,"modulo",0,9];for(e=0;e<s.length;e+=3)if(n=s[e],i&&(this[n]=Mr[n]),(r=t[n])!==void 0)if(Ft(r)===r&&r>=s[e+1]&&r<=s[e+2])this[n]=r;else throw Error(De+n+": "+r);if(n="crypto",i&&(this[n]=Mr[n]),(r=t[n])!==void 0)if(r===!0||r===!1||r===0||r===1)if(r)if(typeof crypto<"u"&&crypto&&(crypto.getRandomValues||crypto.randomBytes))this[n]=!0;else throw Error(Vs);else this[n]=!1;else throw Error(De+n+": "+r);return this}function lc(t){return new this(t).cos()}function fc(t){return new this(t).cosh()}function Qs(t){var e,n,r;function i(s){var u,o,a,l=this;if(!(l instanceof i))return new i(s);if(l.constructor=i,Oi(s)){l.s=s.s,Y?!s.d||s.e>i.maxE?(l.e=NaN,l.d=null):s.e<i.minE?(l.e=0,l.d=[0]):(l.e=s.e,l.d=s.d.slice()):(l.e=s.e,l.d=s.d?s.d.slice():s.d);return}if(a=typeof s,a==="number"){if(s===0){l.s=1/s<0?-1:1,l.e=0,l.d=[0];return}if(s<0?(s=-s,l.s=-1):l.s=1,s===~~s&&s<1e7){for(u=0,o=s;o>=10;o/=10)u++;Y?u>i.maxE?(l.e=NaN,l.d=null):u<i.minE?(l.e=0,l.d=[0]):(l.e=u,l.d=[s]):(l.e=u,l.d=[s]);return}if(s*0!==0){s||(l.s=NaN),l.e=NaN,l.d=null;return}return bn(l,s.toString())}if(a==="string")return(o=s.charCodeAt(0))===45?(s=s.slice(1),l.s=-1):(o===43&&(s=s.slice(1)),l.s=1),Zs.test(s)?bn(l,s):Ga(l,s);if(a==="bigint")return s<0?(s=-s,l.s=-1):l.s=1,bn(l,s.toString());throw Error(De+s)}if(i.prototype=I,i.ROUND_UP=0,i.ROUND_DOWN=1,i.ROUND_CEIL=2,i.ROUND_FLOOR=3,i.ROUND_HALF_UP=4,i.ROUND_HALF_DOWN=5,i.ROUND_HALF_EVEN=6,i.ROUND_HALF_CEIL=7,i.ROUND_HALF_FLOOR=8,i.EUCLID=9,i.config=i.set=cc,i.clone=Qs,i.isDecimal=Oi,i.abs=Ka,i.acos=Qa,i.acosh=ja,i.add=tc,i.asin=ec,i.asinh=nc,i.atan=rc,i.atanh=ic,i.atan2=sc,i.cbrt=uc,i.ceil=oc,i.clamp=ac,i.cos=lc,i.cosh=fc,i.div=hc,i.exp=pc,i.floor=dc,i.hypot=mc,i.ln=gc,i.log=Dc,i.log10=yc,i.log2=vc,i.max=wc,i.min=Ec,i.mod=Fc,i.mul=Ac,i.pow=Cc,i.random=_c,i.round=xc,i.sign=bc,i.sin=Bc,i.sinh=Mc,i.sqrt=Sc,i.sub=Nc,i.sum=Tc,i.tan=Ic,i.tanh=Pc,i.trunc=Rc,t===void 0&&(t={}),t&&t.defaults!==!0)for(r=["precision","rounding","toExpNeg","toExpPos","maxE","minE","modulo","crypto"],e=0;e<r.length;)t.hasOwnProperty(n=r[e++])||(t[n]=this[n]);return i.config(t),i}function hc(t,e){return new this(t).div(e)}function pc(t){return new this(t).exp()}function dc(t){return Z(t=new this(t),t.e+1,3)}function mc(){var t,e,n=new this(0);for(Y=!1,t=0;t<arguments.length;)if(e=new this(arguments[t++]),e.d)n.d&&(n=n.plus(e.times(e)));else{if(e.s)return Y=!0,new this(1/0);n=e}return Y=!0,n.sqrt()}function Oi(t){return t instanceof He||t&&t.toStringTag===Ws||!1}function gc(t){return new this(t).ln()}function Dc(t,e){return new this(t).log(e)}function vc(t){return new this(t).log(2)}function yc(t){return new this(t).log(10)}function wc(){return Gs(this,arguments,-1)}function Ec(){return Gs(this,arguments,1)}function Fc(t,e){return new this(t).mod(e)}function Ac(t,e){return new this(t).mul(e)}function Cc(t,e){return new this(t).pow(e)}function _c(t){var e,n,r,i,s=0,u=new this(1),o=[];if(t===void 0?t=this.precision:St(t,1,ye),r=Math.ceil(t/X),this.crypto)if(crypto.getRandomValues)for(e=crypto.getRandomValues(new Uint32Array(r));s<r;)i=e[s],i>=429e7?e[s]=crypto.getRandomValues(new Uint32Array(1))[0]:o[s++]=i%1e7;else if(crypto.randomBytes){for(e=crypto.randomBytes(r*=4);s<r;)i=e[s]+(e[s+1]<<8)+(e[s+2]<<16)+((e[s+3]&127)<<24),i>=214e7?crypto.randomBytes(4).copy(e,s):(o.push(i%1e7),s+=4);s=r/4}else throw Error(Vs);else for(;s<r;)o[s++]=Math.random()*1e7|0;for(r=o[--s],t%=X,r&&t&&(i=ht(10,X-t),o[s]=(r/i|0)*i);o[s]===0;s--)o.pop();if(s<0)n=0,o=[0];else{for(n=-1;o[0]===0;n-=X)o.shift();for(r=1,i=o[0];i>=10;i/=10)r++;r<X&&(n-=X-r)}return u.e=n,u.d=o,u}function xc(t){return Z(t=new this(t),t.e+1,this.rounding)}function bc(t){return t=new this(t),t.d?t.d[0]?t.s:0*t.s:t.s||NaN}function Bc(t){return new this(t).sin()}function Mc(t){return new this(t).sinh()}function Sc(t){return new this(t).sqrt()}function Nc(t,e){return new this(t).sub(e)}function Tc(){var t=0,e=arguments,n=new this(e[t]);for(Y=!1;n.s&&++t<e.length;)n=n.plus(e[t]);return Y=!0,Z(n,this.precision,this.rounding)}function Ic(t){return new this(t).tan()}function Pc(t){return new this(t).tanh()}function Rc(t){return Z(t=new this(t),t.e+1,1)}I[Symbol.for("nodejs.util.inspect.custom")]=I.toString;I[Symbol.toStringTag]="Decimal";var He=I.constructor=Qs(Mr);$n=new He($n);Un=new He(Un);var Oc="BigNumber",Lc=["?on","config"],kc=Q(Oc,Lc,t=>{var{on:e,config:n}=t,r=He.clone({precision:n.precision,modulo:He.EUCLID});return r.prototype=Object.create(r.prototype),r.prototype.type="BigNumber",r.prototype.isBigNumber=!0,r.prototype.toJSON=function(){return{mathjs:"BigNumber",value:this.toString()}},r.fromJSON=function(i){return new r(i.value)},e&&e("config",function(i,s){i.precision!==s.precision&&r.config({precision:i.precision})}),r},{isClass:!0});const wt=Math.cosh||function(t){return Math.abs(t)<1e-9?1-t:(Math.exp(t)+Math.exp(-t))*.5},Ot=Math.sinh||function(t){return Math.abs(t)<1e-9?t:(Math.exp(t)-Math.exp(-t))*.5},$c=function(t){const e=Math.PI/4;if(-e>t||t>e)return Math.cos(t)-1;const n=t*t;return n*(n*(n*(n*(n*(n*(n*(n/20922789888e3-1/87178291200)+1/479001600)-1/3628800)+1/40320)-1/720)+1/24)-1/2)},wr=function(t,e){return t=Math.abs(t),e=Math.abs(e),t<e&&([t,e]=[e,t]),t<1e8?Math.sqrt(t*t+e*e):(e/=t,t*Math.sqrt(1+e*e))},Pe=function(){throw SyntaxError("Invalid Param")};function Er(t,e){const n=Math.abs(t),r=Math.abs(e);return t===0?Math.log(r):e===0?Math.log(n):n<3e3&&r<3e3?Math.log(t*t+e*e)*.5:(t=t*.5,e=e*.5,.5*Math.log(t*t+e*e)+Math.LN2)}const Uc={re:0,im:0},we=function(t,e){const n=Uc;if(t==null)n.re=n.im=0;else if(e!==void 0)n.re=t,n.im=e;else switch(typeof t){case"object":if("im"in t&&"re"in t)n.re=t.re,n.im=t.im;else if("abs"in t&&"arg"in t){if(!isFinite(t.abs)&&isFinite(t.arg))return B.INFINITY;n.re=t.abs*Math.cos(t.arg),n.im=t.abs*Math.sin(t.arg)}else if("r"in t&&"phi"in t){if(!isFinite(t.r)&&isFinite(t.phi))return B.INFINITY;n.re=t.r*Math.cos(t.phi),n.im=t.r*Math.sin(t.phi)}else t.length===2?(n.re=t[0],n.im=t[1]):Pe();break;case"string":n.im=n.re=0;const r=t.replace(/_/g,"").match(/\d+\.?\d*e[+-]?\d+|\d+\.?\d*|\.\d+|./g);let i=1,s=0;r===null&&Pe();for(let u=0;u<r.length;u++){const o=r[u];o===" "||o==="	"||o===`
`||(o==="+"?i++:o==="-"?s++:o==="i"||o==="I"?(i+s===0&&Pe(),r[u+1]!==" "&&!isNaN(r[u+1])?(n.im+=parseFloat((s%2?"-":"")+r[u+1]),u++):n.im+=parseFloat((s%2?"-":"")+"1"),i=s=0):((i+s===0||isNaN(o))&&Pe(),r[u+1]==="i"||r[u+1]==="I"?(n.im+=parseFloat((s%2?"-":"")+o),u++):n.re+=parseFloat((s%2?"-":"")+o),i=s=0))}i+s>0&&Pe();break;case"number":n.im=0,n.re=t;break;default:Pe()}return isNaN(n.re)||isNaN(n.im),n};function B(t,e){if(!(this instanceof B))return new B(t,e);const n=we(t,e);this.re=n.re,this.im=n.im}B.prototype={re:0,im:0,sign:function(){const t=wr(this.re,this.im);return new B(this.re/t,this.im/t)},add:function(t,e){const n=we(t,e),r=this.isInfinite(),i=!(isFinite(n.re)&&isFinite(n.im));return r||i?r&&i?B.NAN:B.INFINITY:new B(this.re+n.re,this.im+n.im)},sub:function(t,e){const n=we(t,e),r=this.isInfinite(),i=!(isFinite(n.re)&&isFinite(n.im));return r||i?r&&i?B.NAN:B.INFINITY:new B(this.re-n.re,this.im-n.im)},mul:function(t,e){const n=we(t,e),r=this.isInfinite(),i=!(isFinite(n.re)&&isFinite(n.im)),s=this.re===0&&this.im===0,u=n.re===0&&n.im===0;return r&&u||i&&s?B.NAN:r||i?B.INFINITY:n.im===0&&this.im===0?new B(this.re*n.re,0):new B(this.re*n.re-this.im*n.im,this.re*n.im+this.im*n.re)},div:function(t,e){const n=we(t,e),r=this.isInfinite(),i=!(isFinite(n.re)&&isFinite(n.im)),s=this.re===0&&this.im===0,u=n.re===0&&n.im===0;if(s&&u||r&&i)return B.NAN;if(u||r)return B.INFINITY;if(s||i)return B.ZERO;if(n.im===0)return new B(this.re/n.re,this.im/n.re);if(Math.abs(n.re)<Math.abs(n.im)){const o=n.re/n.im,a=n.re*o+n.im;return new B((this.re*o+this.im)/a,(this.im*o-this.re)/a)}else{const o=n.im/n.re,a=n.im*o+n.re;return new B((this.re+this.im*o)/a,(this.im-this.re*o)/a)}},pow:function(t,e){const n=we(t,e),r=this.re===0&&this.im===0;if(n.re===0&&n.im===0)return B.ONE;if(n.im===0){if(this.im===0&&this.re>0)return new B(Math.pow(this.re,n.re),0);if(this.re===0)switch((n.re%4+4)%4){case 0:return new B(Math.pow(this.im,n.re),0);case 1:return new B(0,Math.pow(this.im,n.re));case 2:return new B(-Math.pow(this.im,n.re),0);case 3:return new B(0,-Math.pow(this.im,n.re))}}if(r&&n.re>0)return B.ZERO;const s=Math.atan2(this.im,this.re),u=Er(this.re,this.im);let o=Math.exp(n.re*u-n.im*s),a=n.im*u+n.re*s;return new B(o*Math.cos(a),o*Math.sin(a))},sqrt:function(){const t=this.re,e=this.im;if(e===0)return t>=0?new B(Math.sqrt(t),0):new B(0,Math.sqrt(-t));const n=wr(t,e);let r=Math.sqrt(.5*(n+Math.abs(t))),i=Math.abs(e)/(2*r);return t>=0?new B(r,e<0?-i:i):new B(i,e<0?-r:r)},exp:function(){const t=Math.exp(this.re);return this.im===0?new B(t,0):new B(t*Math.cos(this.im),t*Math.sin(this.im))},expm1:function(){const t=this.re,e=this.im;return new B(Math.expm1(t)*Math.cos(e)+$c(e),Math.exp(t)*Math.sin(e))},log:function(){const t=this.re,e=this.im;return e===0&&t>0?new B(Math.log(t),0):new B(Er(t,e),Math.atan2(e,t))},abs:function(){return wr(this.re,this.im)},arg:function(){return Math.atan2(this.im,this.re)},sin:function(){const t=this.re,e=this.im;return new B(Math.sin(t)*wt(e),Math.cos(t)*Ot(e))},cos:function(){const t=this.re,e=this.im;return new B(Math.cos(t)*wt(e),-Math.sin(t)*Ot(e))},tan:function(){const t=2*this.re,e=2*this.im,n=Math.cos(t)+wt(e);return new B(Math.sin(t)/n,Ot(e)/n)},cot:function(){const t=2*this.re,e=2*this.im,n=Math.cos(t)-wt(e);return new B(-Math.sin(t)/n,Ot(e)/n)},sec:function(){const t=this.re,e=this.im,n=.5*wt(2*e)+.5*Math.cos(2*t);return new B(Math.cos(t)*wt(e)/n,Math.sin(t)*Ot(e)/n)},csc:function(){const t=this.re,e=this.im,n=.5*wt(2*e)-.5*Math.cos(2*t);return new B(Math.sin(t)*wt(e)/n,-Math.cos(t)*Ot(e)/n)},asin:function(){const t=this.re,e=this.im,n=new B(e*e-t*t+1,-2*t*e).sqrt(),r=new B(n.re-e,n.im+t).log();return new B(r.im,-r.re)},acos:function(){const t=this.re,e=this.im,n=new B(e*e-t*t+1,-2*t*e).sqrt(),r=new B(n.re-e,n.im+t).log();return new B(Math.PI/2-r.im,r.re)},atan:function(){const t=this.re,e=this.im;if(t===0){if(e===1)return new B(0,1/0);if(e===-1)return new B(0,-1/0)}const n=t*t+(1-e)*(1-e),r=new B((1-e*e-t*t)/n,-2*t/n).log();return new B(-.5*r.im,.5*r.re)},acot:function(){const t=this.re,e=this.im;if(e===0)return new B(Math.atan2(1,t),0);const n=t*t+e*e;return n!==0?new B(t/n,-e/n).atan():new B(t!==0?t/0:0,e!==0?-e/0:0).atan()},asec:function(){const t=this.re,e=this.im;if(t===0&&e===0)return new B(0,1/0);const n=t*t+e*e;return n!==0?new B(t/n,-e/n).acos():new B(t!==0?t/0:0,e!==0?-e/0:0).acos()},acsc:function(){const t=this.re,e=this.im;if(t===0&&e===0)return new B(Math.PI/2,1/0);const n=t*t+e*e;return n!==0?new B(t/n,-e/n).asin():new B(t!==0?t/0:0,e!==0?-e/0:0).asin()},sinh:function(){const t=this.re,e=this.im;return new B(Ot(t)*Math.cos(e),wt(t)*Math.sin(e))},cosh:function(){const t=this.re,e=this.im;return new B(wt(t)*Math.cos(e),Ot(t)*Math.sin(e))},tanh:function(){const t=2*this.re,e=2*this.im,n=wt(t)+Math.cos(e);return new B(Ot(t)/n,Math.sin(e)/n)},coth:function(){const t=2*this.re,e=2*this.im,n=wt(t)-Math.cos(e);return new B(Ot(t)/n,-Math.sin(e)/n)},csch:function(){const t=this.re,e=this.im,n=Math.cos(2*e)-wt(2*t);return new B(-2*Ot(t)*Math.cos(e)/n,2*wt(t)*Math.sin(e)/n)},sech:function(){const t=this.re,e=this.im,n=Math.cos(2*e)+wt(2*t);return new B(2*wt(t)*Math.cos(e)/n,-2*Ot(t)*Math.sin(e)/n)},asinh:function(){let t=this.im;this.im=-this.re,this.re=t;const e=this.asin();return this.re=-this.im,this.im=t,t=e.re,e.re=-e.im,e.im=t,e},acosh:function(){const t=this.acos();if(t.im<=0){const e=t.re;t.re=-t.im,t.im=e}else{const e=t.im;t.im=-t.re,t.re=e}return t},atanh:function(){const t=this.re,e=this.im,n=t>1&&e===0,r=1-t,i=1+t,s=r*r+e*e,u=s!==0?new B((i*r-e*e)/s,(e*r+i*e)/s):new B(t!==-1?t/0:0,e!==0?e/0:0),o=u.re;return u.re=Er(u.re,u.im)/2,u.im=Math.atan2(u.im,o)/2,n&&(u.im=-u.im),u},acoth:function(){const t=this.re,e=this.im;if(t===0&&e===0)return new B(0,Math.PI/2);const n=t*t+e*e;return n!==0?new B(t/n,-e/n).atanh():new B(t!==0?t/0:0,e!==0?-e/0:0).atanh()},acsch:function(){const t=this.re,e=this.im;if(e===0)return new B(t!==0?Math.log(t+Math.sqrt(t*t+1)):1/0,0);const n=t*t+e*e;return n!==0?new B(t/n,-e/n).asinh():new B(t!==0?t/0:0,e!==0?-e/0:0).asinh()},asech:function(){const t=this.re,e=this.im;if(this.isZero())return B.INFINITY;const n=t*t+e*e;return n!==0?new B(t/n,-e/n).acosh():new B(t!==0?t/0:0,e!==0?-e/0:0).acosh()},inverse:function(){if(this.isZero())return B.INFINITY;if(this.isInfinite())return B.ZERO;const t=this.re,e=this.im,n=t*t+e*e;return new B(t/n,-e/n)},conjugate:function(){return new B(this.re,-this.im)},neg:function(){return new B(-this.re,-this.im)},ceil:function(t){return t=Math.pow(10,t||0),new B(Math.ceil(this.re*t)/t,Math.ceil(this.im*t)/t)},floor:function(t){return t=Math.pow(10,t||0),new B(Math.floor(this.re*t)/t,Math.floor(this.im*t)/t)},round:function(t){return t=Math.pow(10,t||0),new B(Math.round(this.re*t)/t,Math.round(this.im*t)/t)},equals:function(t,e){const n=we(t,e);return Math.abs(n.re-this.re)<=B.EPSILON&&Math.abs(n.im-this.im)<=B.EPSILON},clone:function(){return new B(this.re,this.im)},toString:function(){let t=this.re,e=this.im,n="";return this.isNaN()?"NaN":this.isInfinite()?"Infinity":(Math.abs(t)<B.EPSILON&&(t=0),Math.abs(e)<B.EPSILON&&(e=0),e===0?n+t:(t!==0?(n+=t,n+=" ",e<0?(e=-e,n+="-"):n+="+",n+=" "):e<0&&(e=-e,n+="-"),e!==1&&(n+=e),n+"i"))},toVector:function(){return[this.re,this.im]},valueOf:function(){return this.im===0?this.re:null},isNaN:function(){return isNaN(this.re)||isNaN(this.im)},isZero:function(){return this.im===0&&this.re===0},isFinite:function(){return isFinite(this.re)&&isFinite(this.im)},isInfinite:function(){return!this.isFinite()}};B.ZERO=new B(0,0);B.ONE=new B(1,0);B.I=new B(0,1);B.PI=new B(Math.PI,0);B.E=new B(Math.E,0);B.INFINITY=new B(1/0,1/0);B.NAN=new B(NaN,NaN);B.EPSILON=1e-15;var zc="Complex",qc=[],Hc=Q(zc,qc,()=>(Object.defineProperty(B,"name",{value:"Complex"}),B.prototype.constructor=B,B.prototype.type="Complex",B.prototype.isComplex=!0,B.prototype.toJSON=function(){return{mathjs:"Complex",re:this.re,im:this.im}},B.prototype.toPolar=function(){return{r:this.abs(),phi:this.arg()}},B.prototype.format=function(t){var e="",n=this.im,r=this.re,i=xr(this.re,t),s=xr(this.im,t),u=it(t)?t:t?t.precision:null;if(u!==null){var o=Math.pow(10,-u);Math.abs(r/n)<o&&(r=0),Math.abs(n/r)<o&&(n=0)}return n===0?e=i:r===0?n===1?e="i":n===-1?e="-i":e=s+"i":n<0?n===-1?e=i+" - i":e=i+" - "+s.substring(1)+"i":n===1?e=i+" + i":e=i+" + "+s+"i",e},B.fromPolar=function(t){switch(arguments.length){case 1:{var e=arguments[0];if(typeof e=="object")return B(e);throw new TypeError("Input has to be an object with r and phi keys.")}case 2:{var n=arguments[0],r=arguments[1];if(it(n)){if(Ls(r)&&r.hasBase("ANGLE")&&(r=r.toNumber("rad")),it(r))return new B({r:n,phi:r});throw new TypeError("Phi is not a number nor an angle unit.")}else throw new TypeError("Radius r is not a number.")}default:throw new SyntaxError("Wrong number of arguments in function fromPolar")}},B.prototype.valueOf=B.prototype.toString,B.fromJSON=function(t){return new B(t)},B.compare=function(t,e){return t.re>e.re?1:t.re<e.re?-1:t.im>e.im?1:t.im<e.im?-1:0},B),{isClass:!0});typeof BigInt>"u"&&(BigInt=function(t){if(isNaN(t))throw new Error("");return t});const W=BigInt(0),J=BigInt(1),an=BigInt(2),Tr=BigInt(5),bt=BigInt(10),Vc=2e3,k={s:J,n:W,d:J};function ne(t,e){try{t=BigInt(t)}catch{throw le()}return t*e}function Ut(t){return typeof t=="bigint"?t:Math.floor(t)}function ut(t,e){if(e===W)throw ii();const n=Object.create(Lt.prototype);n.s=t<W?-J:J,t=t<W?-t:t;const r=Fe(t,e);return n.n=t/r,n.d=e/r,n}function Re(t){const e={};let n=t,r=an,i=Tr-J;for(;i<=n;){for(;n%r===W;)n/=r,e[r]=(e[r]||W)+J;i+=J+an*r++}return n!==t?n>1&&(e[n]=(e[n]||W)+J):e[t]=(e[t]||W)+J,e}const mt=function(t,e){let n=W,r=J,i=J;if(t!=null)if(e!==void 0){if(typeof t=="bigint")n=t;else{if(isNaN(t))throw le();if(t%1!==0)throw Li();n=BigInt(t)}if(typeof e=="bigint")r=e;else{if(isNaN(e))throw le();if(e%1!==0)throw Li();r=BigInt(e)}i=n*r}else if(typeof t=="object"){if("d"in t&&"n"in t)n=BigInt(t.n),r=BigInt(t.d),"s"in t&&(n*=BigInt(t.s));else if(0 in t)n=BigInt(t[0]),1 in t&&(r=BigInt(t[1]));else if(typeof t=="bigint")n=t;else throw le();i=n*r}else if(typeof t=="number"){if(isNaN(t))throw le();if(t<0&&(i=-J,t=-t),t%1===0)n=BigInt(t);else{let s=1,u=0,o=1,a=1,l=1,c=1e7;for(t>=1&&(s=10**Math.floor(1+Math.log10(t)),t/=s);o<=c&&l<=c;){let f=(u+a)/(o+l);if(t===f){o+l<=c?(n=u+a,r=o+l):l>o?(n=a,r=l):(n=u,r=o);break}else t>f?(u+=a,o+=l):(a+=u,l+=o),o>c?(n=a,r=l):(n=u,r=o)}n=BigInt(n)*BigInt(s),r=BigInt(r)}}else if(typeof t=="string"){let s=0,u=W,o=W,a=W,l=J,c=J,f=t.replace(/_/g,"").match(/\d+|./g);if(f===null)throw le();if(f[s]==="-"?(i=-J,s++):f[s]==="+"&&s++,f.length===s+1?o=ne(f[s++],i):f[s+1]==="."||f[s]==="."?(f[s]!=="."&&(u=ne(f[s++],i)),s++,(s+1===f.length||f[s+1]==="("&&f[s+3]===")"||f[s+1]==="'"&&f[s+3]==="'")&&(o=ne(f[s],i),l=bt**BigInt(f[s].length),s++),(f[s]==="("&&f[s+2]===")"||f[s]==="'"&&f[s+2]==="'")&&(a=ne(f[s+1],i),c=bt**BigInt(f[s+1].length)-J,s+=3)):f[s+1]==="/"||f[s+1]===":"?(o=ne(f[s],i),l=ne(f[s+2],J),s+=3):f[s+3]==="/"&&f[s+1]===" "&&(u=ne(f[s],i),o=ne(f[s+2],i),l=ne(f[s+4],J),s+=5),f.length<=s)r=l*c,i=n=a+r*u+c*o;else throw le()}else if(typeof t=="bigint")n=t,i=t,r=J;else throw le();if(r===W)throw ii();k.s=i<W?-J:J,k.n=n<W?-n:n,k.d=r<W?-r:r};function Wc(t,e,n){let r=J;for(;e>W;t=t*t%n,e>>=J)e&J&&(r=r*t%n);return r}function Zc(t,e){for(;e%an===W;e/=an);for(;e%Tr===W;e/=Tr);if(e===J)return W;let n=bt%e,r=1;for(;n!==J;r++)if(n=n*bt%e,r>Vc)return W;return BigInt(r)}function Xc(t,e,n){let r=J,i=Wc(bt,n,e);for(let s=0;s<300;s++){if(r===i)return BigInt(s);r=r*bt%e,i=i*bt%e}return 0}function Fe(t,e){if(!t)return e;if(!e)return t;for(;;){if(t%=e,!t)return e;if(e%=t,!e)return t}}function Lt(t,e){if(mt(t,e),this instanceof Lt)t=Fe(k.d,k.n),this.s=k.s,this.n=k.n/t,this.d=k.d/t;else return ut(k.s*k.n,k.d)}var ii=function(){return new Error("Division by Zero")},le=function(){return new Error("Invalid argument")},Li=function(){return new Error("Parameters must be integer")};Lt.prototype={s:J,n:W,d:J,abs:function(){return ut(this.n,this.d)},neg:function(){return ut(-this.s*this.n,this.d)},add:function(t,e){return mt(t,e),ut(this.s*this.n*k.d+k.s*this.d*k.n,this.d*k.d)},sub:function(t,e){return mt(t,e),ut(this.s*this.n*k.d-k.s*this.d*k.n,this.d*k.d)},mul:function(t,e){return mt(t,e),ut(this.s*k.s*this.n*k.n,this.d*k.d)},div:function(t,e){return mt(t,e),ut(this.s*k.s*this.n*k.d,this.d*k.n)},clone:function(){return ut(this.s*this.n,this.d)},mod:function(t,e){if(t===void 0)return ut(this.s*this.n%this.d,J);if(mt(t,e),W===k.n*this.d)throw ii();return ut(this.s*(k.d*this.n)%(k.n*this.d),k.d*this.d)},gcd:function(t,e){return mt(t,e),ut(Fe(k.n,this.n)*Fe(k.d,this.d),k.d*this.d)},lcm:function(t,e){return mt(t,e),k.n===W&&this.n===W?ut(W,J):ut(k.n*this.n,Fe(k.n,this.n)*Fe(k.d,this.d))},inverse:function(){return ut(this.s*this.d,this.n)},pow:function(t,e){if(mt(t,e),k.d===J)return k.s<W?ut((this.s*this.d)**k.n,this.n**k.n):ut((this.s*this.n)**k.n,this.d**k.n);if(this.s<W)return null;let n=Re(this.n),r=Re(this.d),i=J,s=J;for(let u in n)if(u!=="1"){if(u==="0"){i=W;break}if(n[u]*=k.n,n[u]%k.d===W)n[u]/=k.d;else return null;i*=BigInt(u)**n[u]}for(let u in r)if(u!=="1"){if(r[u]*=k.n,r[u]%k.d===W)r[u]/=k.d;else return null;s*=BigInt(u)**r[u]}return k.s<W?ut(s,i):ut(i,s)},log:function(t,e){if(mt(t,e),this.s<=W||k.s<=W)return null;const n={},r=Re(k.n),i=Re(k.d),s=Re(this.n),u=Re(this.d);for(const l in i)r[l]=(r[l]||W)-i[l];for(const l in u)s[l]=(s[l]||W)-u[l];for(const l in r)l!=="1"&&(n[l]=!0);for(const l in s)l!=="1"&&(n[l]=!0);let o=null,a=null;for(const l in n){const c=r[l]||W,f=s[l]||W;if(c===W){if(f!==W)return null;continue}let h=f,d=c;const g=Fe(h,d);if(h/=g,d/=g,o===null&&a===null)o=h,a=d;else if(h*a!==o*d)return null}return o!==null&&a!==null?ut(o,a):null},equals:function(t,e){return mt(t,e),this.s*this.n*k.d===k.s*k.n*this.d},lt:function(t,e){return mt(t,e),this.s*this.n*k.d<k.s*k.n*this.d},lte:function(t,e){return mt(t,e),this.s*this.n*k.d<=k.s*k.n*this.d},gt:function(t,e){return mt(t,e),this.s*this.n*k.d>k.s*k.n*this.d},gte:function(t,e){return mt(t,e),this.s*this.n*k.d>=k.s*k.n*this.d},compare:function(t,e){mt(t,e);let n=this.s*this.n*k.d-k.s*k.n*this.d;return(W<n)-(n<W)},ceil:function(t){return t=bt**BigInt(t||0),ut(Ut(this.s*t*this.n/this.d)+(t*this.n%this.d>W&&this.s>=W?J:W),t)},floor:function(t){return t=bt**BigInt(t||0),ut(Ut(this.s*t*this.n/this.d)-(t*this.n%this.d>W&&this.s<W?J:W),t)},round:function(t){return t=bt**BigInt(t||0),ut(Ut(this.s*t*this.n/this.d)+this.s*((this.s>=W?J:W)+an*(t*this.n%this.d)>this.d?J:W),t)},roundTo:function(t,e){mt(t,e);const n=this.n*k.d,r=this.d*k.n,i=n%r;let s=Ut(n/r);return i+i>=r&&s++,ut(this.s*s*k.n,k.d)},divisible:function(t,e){return mt(t,e),!(!(k.n*this.d)||this.n*k.d%(k.n*this.d))},valueOf:function(){return Number(this.s*this.n)/Number(this.d)},toString:function(t){let e=this.n,n=this.d;t=t||15;let r=Zc(e,n),i=Xc(e,n,r),s=this.s<W?"-":"";if(s+=Ut(e/n),e%=n,e*=bt,e&&(s+="."),r){for(let u=i;u--;)s+=Ut(e/n),e%=n,e*=bt;s+="(";for(let u=r;u--;)s+=Ut(e/n),e%=n,e*=bt;s+=")"}else for(let u=t;e&&u--;)s+=Ut(e/n),e%=n,e*=bt;return s},toFraction:function(t){let e=this.n,n=this.d,r=this.s<W?"-":"";if(n===J)r+=e;else{let i=Ut(e/n);t&&i>W&&(r+=i,r+=" ",e%=n),r+=e,r+="/",r+=n}return r},toLatex:function(t){let e=this.n,n=this.d,r=this.s<W?"-":"";if(n===J)r+=e;else{let i=Ut(e/n);t&&i>W&&(r+=i,e%=n),r+="\\frac{",r+=e,r+="}{",r+=n,r+="}"}return r},toContinued:function(){let t=this.n,e=this.d,n=[];do{n.push(Ut(t/e));let r=t%e;t=e,e=r}while(t!==J);return n},simplify:function(t){const e=BigInt(1/(t||.001)|0),n=this.abs(),r=n.toContinued();for(let i=1;i<r.length;i++){let s=ut(r[i-1],J);for(let o=i-2;o>=0;o--)s=s.inverse().add(r[o]);let u=s.sub(n);if(u.n*e<u.d)return s.mul(this.s)}return this}};var Yc="Fraction",Gc=[],Jc=Q(Yc,Gc,()=>(Object.defineProperty(Lt,"name",{value:"Fraction"}),Lt.prototype.constructor=Lt,Lt.prototype.type="Fraction",Lt.prototype.isFraction=!0,Lt.prototype.toJSON=function(){return{mathjs:"Fraction",n:String(this.s*this.n),d:String(this.d)}},Lt.fromJSON=function(t){return new Lt(t)},Lt),{isClass:!0}),Kc="Matrix",Qc=[],jc=Q(Kc,Qc,()=>{function t(){if(!(this instanceof t))throw new SyntaxError("Constructor must be called with the new operator")}return t.prototype.type="Matrix",t.prototype.isMatrix=!0,t.prototype.storage=function(){throw new Error("Cannot invoke storage on a Matrix interface")},t.prototype.datatype=function(){throw new Error("Cannot invoke datatype on a Matrix interface")},t.prototype.create=function(e,n){throw new Error("Cannot invoke create on a Matrix interface")},t.prototype.subset=function(e,n,r){throw new Error("Cannot invoke subset on a Matrix interface")},t.prototype.get=function(e){throw new Error("Cannot invoke get on a Matrix interface")},t.prototype.set=function(e,n,r){throw new Error("Cannot invoke set on a Matrix interface")},t.prototype.resize=function(e,n){throw new Error("Cannot invoke resize on a Matrix interface")},t.prototype.reshape=function(e,n){throw new Error("Cannot invoke reshape on a Matrix interface")},t.prototype.clone=function(){throw new Error("Cannot invoke clone on a Matrix interface")},t.prototype.size=function(){throw new Error("Cannot invoke size on a Matrix interface")},t.prototype.map=function(e,n){throw new Error("Cannot invoke map on a Matrix interface")},t.prototype.forEach=function(e){throw new Error("Cannot invoke forEach on a Matrix interface")},t.prototype[Symbol.iterator]=function(){throw new Error("Cannot iterate a Matrix interface")},t.prototype.toArray=function(){throw new Error("Cannot invoke toArray on a Matrix interface")},t.prototype.valueOf=function(){throw new Error("Cannot invoke valueOf on a Matrix interface")},t.prototype.format=function(e){throw new Error("Cannot invoke format on a Matrix interface")},t.prototype.toString=function(){throw new Error("Cannot invoke toString on a Matrix interface")},t},{isClass:!0});function Fr(t,e,n){var r=t.constructor,i=new r(2),s="";if(n){if(n<1)throw new Error("size must be in greater than 0");if(!Dt(n))throw new Error("size must be an integer");if(t.greaterThan(i.pow(n-1).sub(1))||t.lessThan(i.pow(n-1).mul(-1)))throw new Error("Value must be in range [-2^".concat(n-1,", 2^").concat(n-1,"-1]"));if(!t.isInteger())throw new Error("Value must be an integer");t.lessThan(0)&&(t=t.add(i.pow(n))),s="i".concat(n)}switch(e){case 2:return"".concat(t.toBinary()).concat(s);case 8:return"".concat(t.toOctal()).concat(s);case 16:return"".concat(t.toHexadecimal()).concat(s);default:throw new Error("Base ".concat(e," not supported "))}}function tl(t,e){if(typeof e=="function")return e(t);if(!t.isFinite())return t.isNaN()?"NaN":t.gt(0)?"Infinity":"-Infinity";var{notation:n,precision:r,wordSize:i}=$s(e);switch(n){case"fixed":return nl(t,r);case"exponential":return ki(t,r);case"engineering":return el(t,r);case"bin":return Fr(t,2,i);case"oct":return Fr(t,8,i);case"hex":return Fr(t,16,i);case"auto":{var s=$i(e==null?void 0:e.lowerExp,-3),u=$i(e==null?void 0:e.upperExp,5);if(t.isZero())return"0";var o,a=t.toSignificantDigits(r),l=a.e;return l>=s&&l<u?o=a.toFixed():o=ki(t,r),o.replace(/((\.\d*?)(0+))($|e)/,function(){var c=arguments[2],f=arguments[4];return c!=="."?c+f:f})}default:throw new Error('Unknown notation "'+n+'". Choose "auto", "exponential", "fixed", "bin", "oct", or "hex.')}}function el(t,e){var n=t.e,r=n%3===0?n:n<0?n-3-n%3:n-n%3,i=t.mul(Math.pow(10,-r)),s=i.toPrecision(e);if(s.includes("e")){var u=t.constructor;s=new u(s).toFixed()}return s+"e"+(n>=0?"+":"")+r.toString()}function ki(t,e){return e!==void 0?t.toExponential(e-1):t.toExponential()}function nl(t,e){return t.toFixed(e)}function $i(t,e){return it(t)?t:vt(t)?t.toNumber():e}function xt(t,e){var n=rl(t,e);return e&&typeof e=="object"&&"truncate"in e&&n.length>e.truncate?n.substring(0,e.truncate-3)+"...":n}function rl(t,e){if(typeof t=="number")return xr(t,e);if(vt(t))return tl(t,e);if(il(t))return!e||e.fraction!=="decimal"?"".concat(t.s*t.n,"/").concat(t.d):t.toString();if(Array.isArray(t))return js(t,e);if(Gt(t))return Ui(t);if(typeof t=="function")return t.syntax?String(t.syntax):"function";if(t&&typeof t=="object"){if(typeof t.format=="function")return t.format(e);if(t&&t.toString(e)!=={}.toString())return t.toString(e);var n=Object.keys(t).map(r=>Ui(r)+": "+xt(t[r],e));return"{"+n.join(", ")+"}"}return String(t)}function Ui(t){for(var e=String(t),n="",r=0;r<e.length;){var i=e.charAt(r);n+=i in zi?zi[i]:i,r++}return'"'+n+'"'}var zi={'"':'\\"',"\\":"\\\\","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","	":"\\t"};function js(t,e){if(Array.isArray(t)){for(var n="[",r=t.length,i=0;i<r;i++)i!==0&&(n+=", "),n+=js(t[i],e);return n+="]",n}else return xt(t,e)}function il(t){return t&&typeof t=="object"&&typeof t.s=="bigint"&&typeof t.n=="bigint"&&typeof t.d=="bigint"||!1}function tt(t,e,n){if(!(this instanceof tt))throw new SyntaxError("Constructor must be called with the new operator");this.actual=t,this.expected=e,this.relation=n,this.message="Dimension mismatch ("+(Array.isArray(t)?"["+t.join(", ")+"]":t)+" "+(this.relation||"!=")+" "+(Array.isArray(e)?"["+e.join(", ")+"]":e)+")",this.stack=new Error().stack}tt.prototype=new RangeError;tt.prototype.constructor=RangeError;tt.prototype.name="DimensionError";tt.prototype.isDimensionError=!0;function Se(t,e,n){if(!(this instanceof Se))throw new SyntaxError("Constructor must be called with the new operator");this.index=t,arguments.length<3?(this.min=0,this.max=e):(this.min=e,this.max=n),this.min!==void 0&&this.index<this.min?this.message="Index out of range ("+this.index+" < "+this.min+")":this.max!==void 0&&this.index>=this.max?this.message="Index out of range ("+this.index+" > "+(this.max-1)+")":this.message="Index out of range ("+this.index+")",this.stack=new Error().stack}Se.prototype=new RangeError;Se.prototype.constructor=RangeError;Se.prototype.name="IndexError";Se.prototype.isIndexError=!0;function Xt(t){for(var e=[];Array.isArray(t);)e.push(t.length),t=t[0];return e}function tu(t,e,n){var r,i=t.length;if(i!==e[n])throw new tt(i,e[n]);if(n<e.length-1){var s=n+1;for(r=0;r<i;r++){var u=t[r];if(!Array.isArray(u))throw new tt(e.length-1,e.length,"<");tu(t[r],e,s)}}else for(r=0;r<i;r++)if(Array.isArray(t[r]))throw new tt(e.length+1,e.length,">")}function qi(t,e){var n=e.length===0;if(n){if(Array.isArray(t))throw new tt(t.length,0)}else tu(t,e,0)}function at(t,e){if(t!==void 0){if(!it(t)||!Dt(t))throw new TypeError("Index must be an integer (value: "+t+")");if(t<0||typeof e=="number"&&t>=e)throw new Se(t,e)}}function Hi(t,e,n){if(!Array.isArray(e))throw new TypeError("Array expected");if(e.length===0)throw new Error("Resizing to scalar is not supported");e.forEach(function(i){if(!it(i)||!Dt(i)||i<0)throw new TypeError("Invalid size, must contain positive integers (size: "+xt(e)+")")}),(it(t)||vt(t))&&(t=[t]);var r=n!==void 0?n:0;return Ir(t,e,0,r),t}function Ir(t,e,n,r){var i,s,u=t.length,o=e[n],a=Math.min(u,o);if(t.length=o,n<e.length-1){var l=n+1;for(i=0;i<a;i++)s=t[i],Array.isArray(s)||(s=[s],t[i]=s),Ir(s,e,l,r);for(i=a;i<o;i++)s=[],t[i]=s,Ir(s,e,l,r)}else{for(i=0;i<a;i++)for(;Array.isArray(t[i]);)t[i]=t[i][0];for(i=a;i<o;i++)t[i]=r}}function eu(t,e){var n=ul(t,!0),r=n.length;if(!Array.isArray(t)||!Array.isArray(e))throw new TypeError("Array expected");if(e.length===0)throw new tt(0,r,"!=");e=si(e,r);var i=nu(e);if(r!==i)throw new tt(i,r,"!=");try{return sl(n,e)}catch(s){throw s instanceof tt?new tt(i,r,"!="):s}}function si(t,e){var n=nu(t),r=t.slice(),i=-1,s=t.indexOf(i),u=t.indexOf(i,s+1)>=0;if(u)throw new Error("More than one wildcard in sizes");var o=s>=0,a=e%n===0;if(o)if(a)r[s]=-e/n;else throw new Error("Could not replace wildcard, since "+e+" is no multiple of "+-n);return r}function nu(t){return t.reduce((e,n)=>e*n,1)}function sl(t,e){for(var n=t,r,i=e.length-1;i>0;i--){var s=e[i];r=[];for(var u=n.length/s,o=0;o<u;o++)r.push(n.slice(o*s,(o+1)*s));n=r}return n}function ru(t,e,n,r){var i=r||Xt(t);if(n)for(var s=0;s<n;s++)t=[t],i.unshift(1);for(t=iu(t,e,0);i.length<e;)i.push(1);return t}function iu(t,e,n){var r,i;if(Array.isArray(t)){var s=n+1;for(r=0,i=t.length;r<i;r++)t[r]=iu(t[r],e,s)}else for(var u=n;u<e;u++)t=[t];return t}function ul(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(!Array.isArray(t))return t;if(typeof e!="boolean")throw new TypeError("Boolean expected for second argument of flatten");var n=[];return e?i(t):r(t),n;function r(s){for(var u=0;u<s.length;u++){var o=s[u];Array.isArray(o)?r(o):n.push(o)}}function i(s){if(Array.isArray(s[0]))for(var u=0;u<s.length;u++)i(s[u]);else for(var o=0;o<s.length;o++)n.push(s[o])}}function ui(t,e){for(var n,r=0,i=0;i<t.length;i++){var s=t[i],u=Array.isArray(s);if(i===0&&u&&(r=s.length),u&&s.length!==r)return;var o=u?ui(s,e):e(s);if(n===void 0)n=o;else if(n!==o)return"mixed"}return n}function su(t,e,n,r){if(r<n){if(t.length!==e.length)throw new tt(t.length,e.length);for(var i=[],s=0;s<t.length;s++)i[s]=su(t[s],e[s],n,r+1);return i}else return t.concat(e)}function uu(){var t=Array.prototype.slice.call(arguments,0,-1),e=Array.prototype.slice.call(arguments,-1);if(t.length===1)return t[0];if(t.length>1)return t.slice(1).reduce(function(n,r){return su(n,r,e,0)},t[0]);throw new Error("Wrong number of arguments in function concat")}function ou(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];for(var r=e.map(h=>h.length),i=Math.max(...r),s=new Array(i).fill(null),u=0;u<e.length;u++)for(var o=e[u],a=r[u],l=0;l<a;l++){var c=i-a+l;o[l]>s[c]&&(s[c]=o[l])}for(var f=0;f<e.length;f++)au(e[f],s);return s}function au(t,e){for(var n=e.length,r=t.length,i=0;i<r;i++){var s=n-r+i;if(t[i]<e[s]&&t[i]>1||t[i]>e[s])throw new Error("shape mismatch: mismatch is found in arg with shape (".concat(t,") not possible to broadcast dimension ").concat(r," with size ").concat(t[i]," to size ").concat(e[s]))}}function Pr(t,e){var n=Xt(t);if(ge(n,e))return t;au(n,e);var r=ou(n,e),i=r.length,s=[...Array(i-n.length).fill(1),...n],u=cl(t);n.length<i&&(u=eu(u,s),n=Xt(u));for(var o=0;o<i;o++)n[o]<r[o]&&(u=ol(u,r[o],o),n=Xt(u));return u}function ol(t,e,n){return uu(...Array(e).fill(t),n)}function cu(t,e){if(!Array.isArray(t))throw new Error("Array expected");var n=Xt(t);if(e.length!==n.length)throw new tt(e.length,n.length);for(var r=0;r<e.length;r++)at(e[r],n[r]);return e.reduce((i,s)=>i[s],t)}function al(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(t.length===0)return[];if(n)return s(t);var r=[];return i(t,0);function i(u,o){if(Array.isArray(u)){for(var a=u.length,l=Array(a),c=0;c<a;c++)r[o]=c,l[c]=i(u[c],o+1);return l}else return e(u,r.slice(0,o),t)}function s(u){if(Array.isArray(u)){for(var o=u.length,a=Array(o),l=0;l<o;l++)a[l]=s(u[l]);return a}else return e(u)}}function cl(t){return Pn([],t)}function qn(t,e,n){var r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(Ln.isTypedFunction(t)){var i;if(r)i=1;else{var s=(e.isMatrix?e.size():Xt(e)).map(()=>0),u=e.isMatrix?e.get(s):cu(e,s);i=hl(t,u,s,e)}var o;if(e.isMatrix&&e.dataType!=="mixed"&&e.dataType!==void 0){var a=ll(t,i);o=a!==void 0?a:t}else o=t;return i>=1&&i<=3?{isUnary:i===1,fn:function(){for(var c=arguments.length,f=new Array(c),h=0;h<c;h++)f[h]=arguments[h];return Vi(o,f.slice(0,i),n,t.name)}}:{isUnary:!1,fn:function(){for(var c=arguments.length,f=new Array(c),h=0;h<c;h++)f[h]=arguments[h];return Vi(o,f,n,t.name)}}}return r===void 0?{isUnary:fl(t),fn:t}:{isUnary:r,fn:t}}function ll(t,e){var n=[];if(Object.entries(t.signatures).forEach(r=>{var[i,s]=r;i.split(",").length===e&&n.push(s)}),n.length===1)return n[0]}function fl(t){if(t.length!==1)return!1;var e=t.toString();if(/arguments/.test(e))return!1;var n=e.match(/\(.*?\)/);return!/\.\.\./.test(n)}function hl(t,e,n,r){for(var i=[e,n,r],s=3;s>0;s--){var u=i.slice(0,s);if(Ln.resolve(t,u)!==null)return s}}function Vi(t,e,n,r){try{return t(...e)}catch(i){pl(i,e,n,r)}}function pl(t,e,n,r){var i;if(t instanceof TypeError&&((i=t.data)===null||i===void 0?void 0:i.category)==="wrongType"){var s=[];throw s.push("value: ".concat(_e(e[0]))),e.length>=2&&s.push("index: ".concat(_e(e[1]))),e.length>=3&&s.push("array: ".concat(_e(e[2]))),new TypeError("Function ".concat(n," cannot apply callback arguments ")+"".concat(r,"(").concat(s.join(", "),") at index ").concat(JSON.stringify(e[1])))}else throw new TypeError("Function ".concat(n," cannot apply callback arguments ")+"to function ".concat(r,": ").concat(t.message))}var dl="DenseMatrix",ml=["Matrix"],gl=Q(dl,ml,t=>{var{Matrix:e}=t;function n(c,f){if(!(this instanceof n))throw new SyntaxError("Constructor must be called with the new operator");if(f&&!Gt(f))throw new Error("Invalid datatype: "+f);if(Vt(c))c.type==="DenseMatrix"?(this._data=gt(c._data),this._size=gt(c._size),this._datatype=f||c._datatype):(this._data=c.toArray(),this._size=c.size(),this._datatype=f||c._datatype);else if(c&&ft(c.data)&&ft(c.size))this._data=c.data,this._size=c.size,qi(this._data,this._size),this._datatype=f||c.datatype;else if(ft(c))this._data=l(c),this._size=Xt(this._data),qi(this._data,this._size),this._datatype=f;else{if(c)throw new TypeError("Unsupported type of data ("+_e(c)+")");this._data=[],this._size=[0],this._datatype=f}}n.prototype=new e,n.prototype.createDenseMatrix=function(c,f){return new n(c,f)},Object.defineProperty(n,"name",{value:"DenseMatrix"}),n.prototype.constructor=n,n.prototype.type="DenseMatrix",n.prototype.isDenseMatrix=!0,n.prototype.getDataType=function(){return ui(this._data,_e)},n.prototype.storage=function(){return"dense"},n.prototype.datatype=function(){return this._datatype},n.prototype.create=function(c,f){return new n(c,f)},n.prototype.subset=function(c,f,h){switch(arguments.length){case 1:return r(this,c);case 2:case 3:return s(this,c,f,h);default:throw new SyntaxError("Wrong number of arguments")}},n.prototype.get=function(c){return cu(this._data,c)},n.prototype.set=function(c,f,h){if(!ft(c))throw new TypeError("Array expected");if(c.length<this._size.length)throw new tt(c.length,this._size.length,"<");var d,g,p,m=c.map(function(w){return w+1});a(this,m,h);var v=this._data;for(d=0,g=c.length-1;d<g;d++)p=c[d],at(p,v.length),v=v[p];return p=c[c.length-1],at(p,v.length),v[p]=f,this};function r(c,f){if(!ei(f))throw new TypeError("Invalid index");var h=f.isScalar();if(h)return c.get(f.min());var d=f.size();if(d.length!==c._size.length)throw new tt(d.length,c._size.length);for(var g=f.min(),p=f.max(),m=0,v=c._size.length;m<v;m++)at(g[m],c._size[m]),at(p[m],c._size[m]);var w=new n([]),y=i(c._data,f);return w._size=y.size,w._datatype=c._datatype,w._data=y.data,w}function i(c,f){var h=f.size().length-1,d=Array(h);return{data:g(c),size:d};function g(p){var m=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,v=f.dimension(m);return d[m]=v.size()[0],m<h?v.map(w=>(at(w,p.length),g(p[w],m+1))).valueOf():v.map(w=>(at(w,p.length),p[w])).valueOf()}}function s(c,f,h,d){if(!f||f.isIndex!==!0)throw new TypeError("Invalid index");var g=f.size(),p=f.isScalar(),m;if(Vt(h)?(m=h.size(),h=h.valueOf()):m=Xt(h),p){if(m.length!==0)throw new TypeError("Scalar expected");c.set(f.min(),h,d)}else{if(!ge(m,g))try{m.length===0?h=Pr([h],g):h=Pr(h,g),m=Xt(h)}catch{}if(g.length<c._size.length)throw new tt(g.length,c._size.length,"<");if(m.length<g.length){for(var v=0,w=0;g[v]===1&&m[v]===1;)v++;for(;g[v]===1;)w++,v++;h=ru(h,g.length,w,m)}if(!ge(g,m))throw new tt(g,m,">");var y=f.max().map(function(F){return F+1});a(c,y,d),u(c._data,f,h)}return c}function u(c,f,h){var d=f.size().length-1;g(c,h);function g(p,m){var v=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,w=f.dimension(v);v<d?w.forEach((y,F)=>{at(y,p.length),g(p[y],m[F[0]],v+1)}):w.forEach((y,F)=>{at(y,p.length),p[y]=m[F[0]]})}}n.prototype.resize=function(c,f,h){if(!On(c))throw new TypeError("Array or Matrix expected");var d=c.valueOf().map(p=>Array.isArray(p)&&p.length===1?p[0]:p),g=h?this.clone():this;return o(g,d,f)};function o(c,f,h){if(f.length===0){for(var d=c._data;ft(d);)d=d[0];return d}return c._size=f.slice(0),c._data=Hi(c._data,c._size,h),c}n.prototype.reshape=function(c,f){var h=f?this.clone():this;h._data=eu(h._data,c);var d=h._size.reduce((g,p)=>g*p);return h._size=si(c,d),h};function a(c,f,h){for(var d=c._size.slice(0),g=!1;d.length<f.length;)d.push(0),g=!0;for(var p=0,m=f.length;p<m;p++)f[p]>d[p]&&(d[p]=f[p],g=!0);g&&o(c,d,h)}n.prototype.clone=function(){var c=new n({data:gt(this._data),size:gt(this._size),datatype:this._datatype});return c},n.prototype.size=function(){return this._size.slice(0)},n.prototype.map=function(c){var f=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,h=this,d=h._size.length-1;if(d<0)return h.clone();var g=qn(c,h,"map",f),p=g.fn,m=h.create(void 0,h._datatype);if(m._size=h._size,f||g.isUnary)return m._data=x(h._data),m;if(d===0){for(var v=h.valueOf(),w=Array(v.length),y=0;y<v.length;y++)w[y]=p(v[y],[y],h);return m._data=w,m}var F=[];return m._data=A(h._data),m;function A(b){var _=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,N=Array(b.length);if(_<d)for(var O=0;O<b.length;O++)F[_]=O,N[O]=A(b[O],_+1);else for(var M=0;M<b.length;M++)F[_]=M,N[M]=p(b[M],F.slice(),h);return N}function x(b){var _=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,N=Array(b.length);if(_<d)for(var O=0;O<b.length;O++)N[O]=x(b[O],_+1);else for(var M=0;M<b.length;M++)N[M]=p(b[M]);return N}},n.prototype.forEach=function(c){var f=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,h=this,d=h._size.length-1;if(d<0)return;var g=qn(c,h,"map",f),p=g.fn;if(f||g.isUnary){y(h._data);return}if(d===0){for(var m=0;m<h._data.length;m++)p(h._data[m],[m],h);return}var v=[];w(h._data);function w(F){var A=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;if(A<d)for(var x=0;x<F.length;x++)v[A]=x,w(F[x],A+1);else for(var b=0;b<F.length;b++)v[A]=b,p(F[b],v.slice(),h)}function y(F){var A=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;if(A<d)for(var x=0;x<F.length;x++)y(F[x],A+1);else for(var b=0;b<F.length;b++)p(F[b])}},n.prototype[Symbol.iterator]=function*(){var c=this._size.length-1;if(!(c<0)){if(c===0){for(var f=0;f<this._data.length;f++)yield{value:this._data[f],index:[f]};return}var h=[],d=function*(p,m){if(m<c)for(var v=0;v<p.length;v++)h[m]=v,yield*d(p[v],m+1);else for(var w=0;w<p.length;w++)h[m]=w,yield{value:p[w],index:h.slice()}};yield*d(this._data,0)}},n.prototype.rows=function(){var c=[],f=this.size();if(f.length!==2)throw new TypeError("Rows can only be returned for a 2D matrix.");var h=this._data;for(var d of h)c.push(new n([d],this._datatype));return c},n.prototype.columns=function(){var c=this,f=[],h=this.size();if(h.length!==2)throw new TypeError("Rows can only be returned for a 2D matrix.");for(var d=this._data,g=function(v){var w=d.map(y=>[y[v]]);f.push(new n(w,c._datatype))},p=0;p<h[1];p++)g(p);return f},n.prototype.toArray=function(){return gt(this._data)},n.prototype.valueOf=function(){return this._data},n.prototype.format=function(c){return xt(this._data,c)},n.prototype.toString=function(){return xt(this._data)},n.prototype.toJSON=function(){return{mathjs:"DenseMatrix",data:this._data,size:this._size,datatype:this._datatype}},n.prototype.diagonal=function(c){if(c){if(vt(c)&&(c=c.toNumber()),!it(c)||!Dt(c))throw new TypeError("The parameter k must be an integer number")}else c=0;for(var f=c>0?c:0,h=c<0?-c:0,d=this._size[0],g=this._size[1],p=Math.min(d-h,g-f),m=[],v=0;v<p;v++)m[v]=this._data[v+h][v+f];return new n({data:m,size:[p],datatype:this._datatype})},n.diagonal=function(c,f,h,d){if(!ft(c))throw new TypeError("Array expected, size parameter");if(c.length!==2)throw new Error("Only two dimensions matrix are supported");if(c=c.map(function(b){if(vt(b)&&(b=b.toNumber()),!it(b)||!Dt(b)||b<1)throw new Error("Size values must be positive integers");return b}),h){if(vt(h)&&(h=h.toNumber()),!it(h)||!Dt(h))throw new TypeError("The parameter k must be an integer number")}else h=0;var g=h>0?h:0,p=h<0?-h:0,m=c[0],v=c[1],w=Math.min(m-p,v-g),y;if(ft(f)){if(f.length!==w)throw new Error("Invalid value array length");y=function(_){return f[_]}}else if(Vt(f)){var F=f.size();if(F.length!==1||F[0]!==w)throw new Error("Invalid matrix length");y=function(_){return f.get([_])}}else y=function(){return f};d||(d=vt(y(0))?y(0).mul(0):0);var A=[];if(c.length>0){A=Hi(A,c,d);for(var x=0;x<w;x++)A[x+p][x+g]=y(x)}return new n({data:A,size:[m,v]})},n.fromJSON=function(c){return new n(c)},n.prototype.swapRows=function(c,f){if(!it(c)||!Dt(c)||!it(f)||!Dt(f))throw new Error("Row index must be positive integers");if(this._size.length!==2)throw new Error("Only two dimensional matrix is supported");return at(c,this._size[0]),at(f,this._size[0]),n._swapRows(c,f,this._data),this},n._swapRows=function(c,f,h){var d=h[c];h[c]=h[f],h[f]=d};function l(c){return Vt(c)?l(c.valueOf()):ft(c)?c.map(l):c}return n},{isClass:!0});function Dl(t,e,n){return Vt(t)?t.map(r=>e(r),!1,!0):al(t,e,!0)}var Wi="isInteger",vl=["typed"],yl=Q(Wi,vl,t=>{var{typed:e}=t;return e(Wi,{number:Dt,BigNumber:function(r){return r.isInt()},bigint:function(r){return!0},Fraction:function(r){return r.d===1n},"Array | Matrix":e.referToSelf(n=>r=>Dl(r,n))})}),wl=Math.PI;function El(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1e-9,r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0;if(n<=0)throw new Error("Relative tolerance must be greater than 0");if(r<0)throw new Error("Absolute tolerance must be at least 0");return t.isNaN()||e.isNaN()?!1:!t.isFinite()||!e.isFinite()?t.eq(e):t.eq(e)?!0:t.minus(e).abs().lte(t.constructor.max(t.constructor.max(t.abs(),e.abs()).mul(n),r))}function Fl(t,e,n,r){return kn(t.re,e.re,n,r)&&kn(t.im,e.im,n,r)}var Al=Q("compareUnits",["typed"],t=>{var{typed:e}=t;return{"Unit, Unit":e.referToSelf(n=>(r,i)=>{if(!r.equalBase(i))throw new Error("Cannot compare units with different base");return e.find(n,[r.valueType(),i.valueType()])(r.value,i.value)})}}),Hn="equalScalar",Cl=["typed","config"],_l=Q(Hn,Cl,t=>{var{typed:e,config:n}=t,r=Al({typed:e});return e(Hn,{"boolean, boolean":function(s,u){return s===u},"number, number":function(s,u){return kn(s,u,n.relTol,n.absTol)},"BigNumber, BigNumber":function(s,u){return s.eq(u)||El(s,u,n.relTol,n.absTol)},"bigint, bigint":function(s,u){return s===u},"Fraction, Fraction":function(s,u){return s.equals(u)},"Complex, Complex":function(s,u){return Fl(s,u,n.relTol,n.absTol)}},r)});Q(Hn,["typed","config"],t=>{var{typed:e,config:n}=t;return e(Hn,{"number, number":function(i,s){return kn(i,s,n.relTol,n.absTol)}})});var xl="SparseMatrix",bl=["typed","equalScalar","Matrix"],Bl=Q(xl,bl,t=>{var{typed:e,equalScalar:n,Matrix:r}=t;function i(p,m){if(!(this instanceof i))throw new SyntaxError("Constructor must be called with the new operator");if(m&&!Gt(m))throw new Error("Invalid datatype: "+m);if(Vt(p))s(this,p,m);else if(p&&ft(p.index)&&ft(p.ptr)&&ft(p.size))this._values=p.values,this._index=p.index,this._ptr=p.ptr,this._size=p.size,this._datatype=m||p.datatype;else if(ft(p))u(this,p,m);else{if(p)throw new TypeError("Unsupported type of data ("+_e(p)+")");this._values=[],this._index=[],this._ptr=[0],this._size=[0,0],this._datatype=m}}function s(p,m,v){m.type==="SparseMatrix"?(p._values=m._values?gt(m._values):void 0,p._index=gt(m._index),p._ptr=gt(m._ptr),p._size=gt(m._size),p._datatype=v||m._datatype):u(p,m.valueOf(),v||m._datatype)}function u(p,m,v){p._values=[],p._index=[],p._ptr=[],p._datatype=v;var w=m.length,y=0,F=n,A=0;if(Gt(v)&&(F=e.find(n,[v,v])||n,A=e.convert(0,v)),w>0){var x=0;do{p._ptr.push(p._index.length);for(var b=0;b<w;b++){var _=m[b];if(ft(_)){if(x===0&&y<_.length&&(y=_.length),x<_.length){var N=_[x];F(N,A)||(p._values.push(N),p._index.push(b))}}else x===0&&y<1&&(y=1),F(_,A)||(p._values.push(_),p._index.push(b))}x++}while(x<y)}p._ptr.push(p._index.length),p._size=[w,y]}i.prototype=new r,i.prototype.createSparseMatrix=function(p,m){return new i(p,m)},Object.defineProperty(i,"name",{value:"SparseMatrix"}),i.prototype.constructor=i,i.prototype.type="SparseMatrix",i.prototype.isSparseMatrix=!0,i.prototype.getDataType=function(){return ui(this._values,_e)},i.prototype.storage=function(){return"sparse"},i.prototype.datatype=function(){return this._datatype},i.prototype.create=function(p,m){return new i(p,m)},i.prototype.density=function(){var p=this._size[0],m=this._size[1];return p!==0&&m!==0?this._index.length/(p*m):0},i.prototype.subset=function(p,m,v){if(!this._values)throw new Error("Cannot invoke subset on a Pattern only matrix");switch(arguments.length){case 1:return o(this,p);case 2:case 3:return a(this,p,m,v);default:throw new SyntaxError("Wrong number of arguments")}};function o(p,m){if(!ei(m))throw new TypeError("Invalid index");var v=m.isScalar();if(v)return p.get(m.min());var w=m.size();if(w.length!==p._size.length)throw new tt(w.length,p._size.length);var y,F,A,x,b=m.min(),_=m.max();for(y=0,F=p._size.length;y<F;y++)at(b[y],p._size[y]),at(_[y],p._size[y]);var N=p._values,O=p._index,M=p._ptr,$=m.dimension(0),q=m.dimension(1),H=[],G=[];$.forEach(function(K,Nt){G[K]=Nt[0],H[K]=!0});var V=N?[]:void 0,st=[],ot=[];return q.forEach(function(K){for(ot.push(st.length),A=M[K],x=M[K+1];A<x;A++)y=O[A],H[y]===!0&&(st.push(G[y]),V&&V.push(N[A]))}),ot.push(st.length),new i({values:V,index:st,ptr:ot,size:w,datatype:p._datatype})}function a(p,m,v,w){if(!m||m.isIndex!==!0)throw new TypeError("Invalid index");var y=m.size(),F=m.isScalar(),A;if(Vt(v)?(A=v.size(),v=v.toArray()):A=Xt(v),F){if(A.length!==0)throw new TypeError("Scalar expected");p.set(m.min(),v,w)}else{if(y.length!==1&&y.length!==2)throw new tt(y.length,p._size.length,"<");if(A.length<y.length){for(var x=0,b=0;y[x]===1&&A[x]===1;)x++;for(;y[x]===1;)b++,x++;v=ru(v,y.length,b,A)}if(!ge(y,A))throw new tt(y,A,">");if(y.length===1){var _=m.dimension(0);_.forEach(function(M,$){at(M),p.set([M,0],v[$[0]],w)})}else{var N=m.dimension(0),O=m.dimension(1);N.forEach(function(M,$){at(M),O.forEach(function(q,H){at(q),p.set([M,q],v[$[0]][H[0]],w)})})}}return p}i.prototype.get=function(p){if(!ft(p))throw new TypeError("Array expected");if(p.length!==this._size.length)throw new tt(p.length,this._size.length);if(!this._values)throw new Error("Cannot invoke get on a Pattern only matrix");var m=p[0],v=p[1];at(m,this._size[0]),at(v,this._size[1]);var w=l(m,this._ptr[v],this._ptr[v+1],this._index);return w<this._ptr[v+1]&&this._index[w]===m?this._values[w]:0},i.prototype.set=function(p,m,v){if(!ft(p))throw new TypeError("Array expected");if(p.length!==this._size.length)throw new tt(p.length,this._size.length);if(!this._values)throw new Error("Cannot invoke set on a Pattern only matrix");var w=p[0],y=p[1],F=this._size[0],A=this._size[1],x=n,b=0;Gt(this._datatype)&&(x=e.find(n,[this._datatype,this._datatype])||n,b=e.convert(0,this._datatype)),(w>F-1||y>A-1)&&(h(this,Math.max(w+1,F),Math.max(y+1,A),v),F=this._size[0],A=this._size[1]),at(w,F),at(y,A);var _=l(w,this._ptr[y],this._ptr[y+1],this._index);return _<this._ptr[y+1]&&this._index[_]===w?x(m,b)?c(_,y,this._values,this._index,this._ptr):this._values[_]=m:x(m,b)||f(_,w,y,m,this._values,this._index,this._ptr),this};function l(p,m,v,w){if(v-m===0)return v;for(var y=m;y<v;y++)if(w[y]===p)return y;return m}function c(p,m,v,w,y){v.splice(p,1),w.splice(p,1);for(var F=m+1;F<y.length;F++)y[F]--}function f(p,m,v,w,y,F,A){y.splice(p,0,w),F.splice(p,0,m);for(var x=v+1;x<A.length;x++)A[x]++}i.prototype.resize=function(p,m,v){if(!On(p))throw new TypeError("Array or Matrix expected");var w=p.valueOf().map(F=>Array.isArray(F)&&F.length===1?F[0]:F);if(w.length!==2)throw new Error("Only two dimensions matrix are supported");w.forEach(function(F){if(!it(F)||!Dt(F)||F<0)throw new TypeError("Invalid size, must contain positive integers (size: "+xt(w)+")")});var y=v?this.clone():this;return h(y,w[0],w[1],m)};function h(p,m,v,w){var y=w||0,F=n,A=0;Gt(p._datatype)&&(F=e.find(n,[p._datatype,p._datatype])||n,A=e.convert(0,p._datatype),y=e.convert(y,p._datatype));var x=!F(y,A),b=p._size[0],_=p._size[1],N,O,M;if(v>_){for(O=_;O<v;O++)if(p._ptr[O]=p._values.length,x)for(N=0;N<b;N++)p._values.push(y),p._index.push(N);p._ptr[v]=p._values.length}else v<_&&(p._ptr.splice(v+1,_-v),p._values.splice(p._ptr[v],p._values.length),p._index.splice(p._ptr[v],p._index.length));if(_=v,m>b){if(x){var $=0;for(O=0;O<_;O++){p._ptr[O]=p._ptr[O]+$,M=p._ptr[O+1]+$;var q=0;for(N=b;N<m;N++,q++)p._values.splice(M+q,0,y),p._index.splice(M+q,0,N),$++}p._ptr[_]=p._values.length}}else if(m<b){var H=0;for(O=0;O<_;O++){p._ptr[O]=p._ptr[O]-H;var G=p._ptr[O],V=p._ptr[O+1]-H;for(M=G;M<V;M++)N=p._index[M],N>m-1&&(p._values.splice(M,1),p._index.splice(M,1),H++)}p._ptr[O]=p._values.length}return p._size[0]=m,p._size[1]=v,p}i.prototype.reshape=function(p,m){if(!ft(p))throw new TypeError("Array expected");if(p.length!==2)throw new Error("Sparse matrices can only be reshaped in two dimensions");p.forEach(function(K){if(!it(K)||!Dt(K)||K<=-2||K===0)throw new TypeError("Invalid size, must contain positive integers or -1 (size: "+xt(p)+")")});var v=this._size[0]*this._size[1];p=si(p,v);var w=p[0]*p[1];if(v!==w)throw new Error("Reshaping sparse matrix will result in the wrong number of elements");var y=m?this.clone():this;if(this._size[0]===p[0]&&this._size[1]===p[1])return y;for(var F=[],A=0;A<y._ptr.length;A++)for(var x=0;x<y._ptr[A+1]-y._ptr[A];x++)F.push(A);for(var b=y._values.slice(),_=y._index.slice(),N=0;N<y._index.length;N++){var O=_[N],M=F[N],$=O*y._size[1]+M;F[N]=$%p[1],_[N]=Math.floor($/p[1])}y._values.length=0,y._index.length=0,y._ptr.length=p[1]+1,y._size=p.slice();for(var q=0;q<y._ptr.length;q++)y._ptr[q]=0;for(var H=0;H<b.length;H++){var G=_[H],V=F[H],st=b[H],ot=l(G,y._ptr[V],y._ptr[V+1],y._index);f(ot,G,V,st,y._values,y._index,y._ptr)}return y},i.prototype.clone=function(){var p=new i({values:this._values?gt(this._values):void 0,index:gt(this._index),ptr:gt(this._ptr),size:gt(this._size),datatype:this._datatype});return p},i.prototype.size=function(){return this._size.slice(0)},i.prototype.map=function(p,m){if(!this._values)throw new Error("Cannot invoke map on a Pattern only matrix");var v=this,w=this._size[0],y=this._size[1],F=qn(p,v,"map"),A=function(b,_,N){return F.fn(b,[_,N],v)};return d(this,0,w-1,0,y-1,A,m)};function d(p,m,v,w,y,F,A){var x=[],b=[],_=[],N=n,O=0;Gt(p._datatype)&&(N=e.find(n,[p._datatype,p._datatype])||n,O=e.convert(0,p._datatype));for(var M=function(gr,dn,Dr){var mn=F(gr,dn,Dr);N(mn,O)||(x.push(mn),b.push(dn))},$=w;$<=y;$++){_.push(x.length);var q=p._ptr[$],H=p._ptr[$+1];if(A)for(var G=q;G<H;G++){var V=p._index[G];V>=m&&V<=v&&M(p._values[G],V-m,$-w)}else{for(var st={},ot=q;ot<H;ot++){var K=p._index[ot];st[K]=p._values[ot]}for(var Nt=m;Nt<=v;Nt++){var mr=Nt in st?st[Nt]:0;M(mr,Nt-m,$-w)}}}return _.push(x.length),new i({values:x,index:b,ptr:_,size:[v-m+1,y-w+1]})}i.prototype.forEach=function(p,m){if(!this._values)throw new Error("Cannot invoke forEach on a Pattern only matrix");for(var v=this,w=this._size[0],y=this._size[1],F=qn(p,v,"forEach"),A=0;A<y;A++){var x=this._ptr[A],b=this._ptr[A+1];if(m)for(var _=x;_<b;_++){var N=this._index[_];F.fn(this._values[_],[N,A],v)}else{for(var O={},M=x;M<b;M++){var $=this._index[M];O[$]=this._values[M]}for(var q=0;q<w;q++){var H=q in O?O[q]:0;F.fn(H,[q,A],v)}}}},i.prototype[Symbol.iterator]=function*(){if(!this._values)throw new Error("Cannot iterate a Pattern only matrix");for(var p=this._size[1],m=0;m<p;m++)for(var v=this._ptr[m],w=this._ptr[m+1],y=v;y<w;y++){var F=this._index[y];yield{value:this._values[y],index:[F,m]}}},i.prototype.toArray=function(){return g(this._values,this._index,this._ptr,this._size,!0)},i.prototype.valueOf=function(){return g(this._values,this._index,this._ptr,this._size,!1)};function g(p,m,v,w,y){var F=w[0],A=w[1],x=[],b,_;for(b=0;b<F;b++)for(x[b]=[],_=0;_<A;_++)x[b][_]=0;for(_=0;_<A;_++)for(var N=v[_],O=v[_+1],M=N;M<O;M++)b=m[M],x[b][_]=p?y?gt(p[M]):p[M]:1;return x}return i.prototype.format=function(p){for(var m=this._size[0],v=this._size[1],w=this.density(),y="Sparse Matrix ["+xt(m,p)+" x "+xt(v,p)+"] density: "+xt(w,p)+`
`,F=0;F<v;F++)for(var A=this._ptr[F],x=this._ptr[F+1],b=A;b<x;b++){var _=this._index[b];y+=`
    (`+xt(_,p)+", "+xt(F,p)+") ==> "+(this._values?xt(this._values[b],p):"X")}return y},i.prototype.toString=function(){return xt(this.toArray())},i.prototype.toJSON=function(){return{mathjs:"SparseMatrix",values:this._values,index:this._index,ptr:this._ptr,size:this._size,datatype:this._datatype}},i.prototype.diagonal=function(p){if(p){if(vt(p)&&(p=p.toNumber()),!it(p)||!Dt(p))throw new TypeError("The parameter k must be an integer number")}else p=0;var m=p>0?p:0,v=p<0?-p:0,w=this._size[0],y=this._size[1],F=Math.min(w-v,y-m),A=[],x=[],b=[];b[0]=0;for(var _=m;_<y&&A.length<F;_++)for(var N=this._ptr[_],O=this._ptr[_+1],M=N;M<O;M++){var $=this._index[M];if($===_-m+v){A.push(this._values[M]),x[A.length-1]=$-v;break}}return b.push(A.length),new i({values:A,index:x,ptr:b,size:[F,1]})},i.fromJSON=function(p){return new i(p)},i.diagonal=function(p,m,v,w,y){if(!ft(p))throw new TypeError("Array expected, size parameter");if(p.length!==2)throw new Error("Only two dimensions matrix are supported");if(p=p.map(function(K){if(vt(K)&&(K=K.toNumber()),!it(K)||!Dt(K)||K<1)throw new Error("Size values must be positive integers");return K}),v){if(vt(v)&&(v=v.toNumber()),!it(v)||!Dt(v))throw new TypeError("The parameter k must be an integer number")}else v=0;var F=n,A=0;Gt(y)&&(F=e.find(n,[y,y])||n,A=e.convert(0,y));var x=v>0?v:0,b=v<0?-v:0,_=p[0],N=p[1],O=Math.min(_-b,N-x),M;if(ft(m)){if(m.length!==O)throw new Error("Invalid value array length");M=function(Nt){return m[Nt]}}else if(Vt(m)){var $=m.size();if($.length!==1||$[0]!==O)throw new Error("Invalid matrix length");M=function(Nt){return m.get([Nt])}}else M=function(){return m};for(var q=[],H=[],G=[],V=0;V<N;V++){G.push(q.length);var st=V-x;if(st>=0&&st<O){var ot=M(st);F(ot,A)||(H.push(st+b),q.push(ot))}}return G.push(q.length),new i({values:q,index:H,ptr:G,size:[_,N]})},i.prototype.swapRows=function(p,m){if(!it(p)||!Dt(p)||!it(m)||!Dt(m))throw new Error("Row index must be positive integers");if(this._size.length!==2)throw new Error("Only two dimensional matrix is supported");return at(p,this._size[0]),at(m,this._size[0]),i._swapRows(p,m,this._size[1],this._values,this._index,this._ptr),this},i._forEachRow=function(p,m,v,w,y){for(var F=w[p],A=w[p+1],x=F;x<A;x++)y(v[x],m[x])},i._swapRows=function(p,m,v,w,y,F){for(var A=0;A<v;A++){var x=F[A],b=F[A+1],_=l(p,x,b,y),N=l(m,x,b,y);if(_<b&&N<b&&y[_]===p&&y[N]===m){if(w){var O=w[_];w[_]=w[N],w[N]=O}continue}if(_<b&&y[_]===p&&(N>=b||y[N]!==m)){var M=w?w[_]:void 0;y.splice(N,0,m),w&&w.splice(N,0,M),y.splice(N<=_?_+1:_,1),w&&w.splice(N<=_?_+1:_,1);continue}if(N<b&&y[N]===m&&(_>=b||y[_]!==p)){var $=w?w[N]:void 0;y.splice(_,0,p),w&&w.splice(_,0,$),y.splice(_<=N?N+1:N,1),w&&w.splice(_<=N?N+1:N,1)}}},i},{isClass:!0}),Zi="matrix",Ml=["typed","Matrix","DenseMatrix","SparseMatrix"],Sl=Q(Zi,Ml,t=>{var{typed:e,Matrix:n,DenseMatrix:r,SparseMatrix:i}=t;return e(Zi,{"":function(){return s([])},string:function(o){return s([],o)},"string, string":function(o,a){return s([],o,a)},Array:function(o){return s(o)},Matrix:function(o){return s(o,o.storage())},"Array | Matrix, string":s,"Array | Matrix, string, string":s});function s(u,o,a){if(o==="dense"||o==="default"||o===void 0)return new r(u,a);if(o==="sparse")return new i(u,a);throw new TypeError("Unknown matrix type "+JSON.stringify(o)+".")}}),Nl="matAlgo11xS0s",Tl=["typed","equalScalar"],Il=Q(Nl,Tl,t=>{var{typed:e,equalScalar:n}=t;return function(i,s,u,o){var a=i._values,l=i._index,c=i._ptr,f=i._size,h=i._datatype;if(!a)throw new Error("Cannot perform operation on Pattern Sparse Matrix and Scalar value");var d=f[0],g=f[1],p,m=n,v=0,w=u;typeof h=="string"&&(p=h,m=e.find(n,[p,p]),v=e.convert(0,p),s=e.convert(s,p),w=e.find(u,[p,p]));for(var y=[],F=[],A=[],x=0;x<g;x++){A[x]=F.length;for(var b=c[x],_=c[x+1],N=b;N<_;N++){var O=l[N],M=o?w(s,a[N]):w(a[N],s);m(M,v)||(F.push(O),y.push(M))}}return A[g]=F.length,i.createSparseMatrix({values:y,index:F,ptr:A,size:[d,g],datatype:p})}}),Pl="matAlgo12xSfs",Rl=["typed","DenseMatrix"],Ol=Q(Pl,Rl,t=>{var{typed:e,DenseMatrix:n}=t;return function(i,s,u,o){var a=i._values,l=i._index,c=i._ptr,f=i._size,h=i._datatype;if(!a)throw new Error("Cannot perform operation on Pattern Sparse Matrix and Scalar value");var d=f[0],g=f[1],p,m=u;typeof h=="string"&&(p=h,s=e.convert(s,p),m=e.find(u,[p,p]));for(var v=[],w=[],y=[],F=0;F<g;F++){for(var A=F+1,x=c[F],b=c[F+1],_=x;_<b;_++){var N=l[_];w[N]=a[_],y[N]=A}for(var O=0;O<d;O++)F===0&&(v[O]=[]),y[O]===A?v[O][F]=o?m(s,w[O]):m(w[O],s):v[O][F]=o?m(s,0):m(0,s)}return new n({data:v,size:[d,g],datatype:p})}}),Ll="matAlgo14xDs",kl=["typed"],$l=Q(Ll,kl,t=>{var{typed:e}=t;return function(i,s,u,o){var a=i._data,l=i._size,c=i._datatype,f,h=u;typeof c=="string"&&(f=c,s=e.convert(s,f),h=e.find(u,[f,f]));var d=l.length>0?n(h,0,l,l[0],a,s,o):[];return i.createDenseMatrix({data:d,size:gt(l),datatype:f})};function n(r,i,s,u,o,a,l){var c=[];if(i===s.length-1)for(var f=0;f<u;f++)c[f]=l?r(a,o[f]):r(o[f],a);else for(var h=0;h<u;h++)c[h]=n(r,i+1,s,s[i+1],o[h],a,l);return c}}),Ul="matAlgo02xDS0",zl=["typed","equalScalar"],ql=Q(Ul,zl,t=>{var{typed:e,equalScalar:n}=t;return function(i,s,u,o){var a=i._data,l=i._size,c=i._datatype||i.getDataType(),f=s._values,h=s._index,d=s._ptr,g=s._size,p=s._datatype||s._data===void 0?s._datatype:s.getDataType();if(l.length!==g.length)throw new tt(l.length,g.length);if(l[0]!==g[0]||l[1]!==g[1])throw new RangeError("Dimension mismatch. Matrix A ("+l+") must match Matrix B ("+g+")");if(!f)throw new Error("Cannot perform operation on Dense Matrix and Pattern Sparse Matrix");var m=l[0],v=l[1],w,y=n,F=0,A=u;typeof c=="string"&&c===p&&c!=="mixed"&&(w=c,y=e.find(n,[w,w]),F=e.convert(0,w),A=e.find(u,[w,w]));for(var x=[],b=[],_=[],N=0;N<v;N++){_[N]=b.length;for(var O=d[N],M=d[N+1],$=O;$<M;$++){var q=h[$],H=o?A(f[$],a[q][N]):A(a[q][N],f[$]);y(H,F)||(b.push(q),x.push(H))}}return _[v]=b.length,s.createSparseMatrix({values:x,index:b,ptr:_,size:[m,v],datatype:c===i._datatype&&p===s._datatype?w:void 0})}}),Hl="matAlgo03xDSf",Vl=["typed"],Wl=Q(Hl,Vl,t=>{var{typed:e}=t;return function(r,i,s,u){var o=r._data,a=r._size,l=r._datatype||r.getDataType(),c=i._values,f=i._index,h=i._ptr,d=i._size,g=i._datatype||i._data===void 0?i._datatype:i.getDataType();if(a.length!==d.length)throw new tt(a.length,d.length);if(a[0]!==d[0]||a[1]!==d[1])throw new RangeError("Dimension mismatch. Matrix A ("+a+") must match Matrix B ("+d+")");if(!c)throw new Error("Cannot perform operation on Dense Matrix and Pattern Sparse Matrix");var p=a[0],m=a[1],v,w=0,y=s;typeof l=="string"&&l===g&&l!=="mixed"&&(v=l,w=e.convert(0,v),y=e.find(s,[v,v]));for(var F=[],A=0;A<p;A++)F[A]=[];for(var x=[],b=[],_=0;_<m;_++){for(var N=_+1,O=h[_],M=h[_+1],$=O;$<M;$++){var q=f[$];x[q]=u?y(c[$],o[q][_]):y(o[q][_],c[$]),b[q]=N}for(var H=0;H<p;H++)b[H]===N?F[H][_]=x[H]:F[H][_]=u?y(w,o[H][_]):y(o[H][_],w)}return r.createDenseMatrix({data:F,size:[p,m],datatype:l===r._datatype&&g===i._datatype?v:void 0})}}),Zl="matAlgo13xDD",Xl=["typed"],Yl=Q(Zl,Xl,t=>{var{typed:e}=t;return function(i,s,u){var o=i._data,a=i._size,l=i._datatype,c=s._data,f=s._size,h=s._datatype,d=[];if(a.length!==f.length)throw new tt(a.length,f.length);for(var g=0;g<a.length;g++){if(a[g]!==f[g])throw new RangeError("Dimension mismatch. Matrix A ("+a+") must match Matrix B ("+f+")");d[g]=a[g]}var p,m=u;typeof l=="string"&&l===h&&(p=l,m=e.find(u,[p,p]));var v=d.length>0?n(m,0,d,d[0],o,c):[];return i.createDenseMatrix({data:v,size:d,datatype:p})};function n(r,i,s,u,o,a){var l=[];if(i===s.length-1)for(var c=0;c<u;c++)l[c]=r(o[c],a[c]);else for(var f=0;f<u;f++)l[f]=n(r,i+1,s,s[i+1],o[f],a[f]);return l}});function dt(t,e){if(ge(t.size(),e.size()))return[t,e];var n=ou(t.size(),e.size());return[t,e].map(r=>Gl(r,n))}function Gl(t,e){return ge(t.size(),e)?t:t.create(Pr(t.valueOf(),e),t.datatype())}var Jl="matrixAlgorithmSuite",Kl=["typed","matrix"],Ql=Q(Jl,Kl,t=>{var{typed:e,matrix:n}=t,r=Yl({typed:e}),i=$l({typed:e});return function(u){var o=u.elop,a=u.SD||u.DS,l;o?(l={"DenseMatrix, DenseMatrix":(d,g)=>r(...dt(d,g),o),"Array, Array":(d,g)=>r(...dt(n(d),n(g)),o).valueOf(),"Array, DenseMatrix":(d,g)=>r(...dt(n(d),g),o),"DenseMatrix, Array":(d,g)=>r(...dt(d,n(g)),o)},u.SS&&(l["SparseMatrix, SparseMatrix"]=(d,g)=>u.SS(...dt(d,g),o,!1)),u.DS&&(l["DenseMatrix, SparseMatrix"]=(d,g)=>u.DS(...dt(d,g),o,!1),l["Array, SparseMatrix"]=(d,g)=>u.DS(...dt(n(d),g),o,!1)),a&&(l["SparseMatrix, DenseMatrix"]=(d,g)=>a(...dt(g,d),o,!0),l["SparseMatrix, Array"]=(d,g)=>a(...dt(n(g),d),o,!0))):(l={"DenseMatrix, DenseMatrix":e.referToSelf(d=>(g,p)=>r(...dt(g,p),d)),"Array, Array":e.referToSelf(d=>(g,p)=>r(...dt(n(g),n(p)),d).valueOf()),"Array, DenseMatrix":e.referToSelf(d=>(g,p)=>r(...dt(n(g),p),d)),"DenseMatrix, Array":e.referToSelf(d=>(g,p)=>r(...dt(g,n(p)),d))},u.SS&&(l["SparseMatrix, SparseMatrix"]=e.referToSelf(d=>(g,p)=>u.SS(...dt(g,p),d,!1))),u.DS&&(l["DenseMatrix, SparseMatrix"]=e.referToSelf(d=>(g,p)=>u.DS(...dt(g,p),d,!1)),l["Array, SparseMatrix"]=e.referToSelf(d=>(g,p)=>u.DS(...dt(n(g),p),d,!1))),a&&(l["SparseMatrix, DenseMatrix"]=e.referToSelf(d=>(g,p)=>a(...dt(p,g),d,!0)),l["SparseMatrix, Array"]=e.referToSelf(d=>(g,p)=>a(...dt(n(p),g),d,!0))));var c=u.scalar||"any",f=u.Ds||u.Ss;f&&(o?(l["DenseMatrix,"+c]=(d,g)=>i(d,g,o,!1),l[c+", DenseMatrix"]=(d,g)=>i(g,d,o,!0),l["Array,"+c]=(d,g)=>i(n(d),g,o,!1).valueOf(),l[c+", Array"]=(d,g)=>i(n(g),d,o,!0).valueOf()):(l["DenseMatrix,"+c]=e.referToSelf(d=>(g,p)=>i(g,p,d,!1)),l[c+", DenseMatrix"]=e.referToSelf(d=>(g,p)=>i(p,g,d,!0)),l["Array,"+c]=e.referToSelf(d=>(g,p)=>i(n(g),p,d,!1).valueOf()),l[c+", Array"]=e.referToSelf(d=>(g,p)=>i(n(p),g,d,!0).valueOf())));var h=u.sS!==void 0?u.sS:u.Ss;return o?(u.Ss&&(l["SparseMatrix,"+c]=(d,g)=>u.Ss(d,g,o,!1)),h&&(l[c+", SparseMatrix"]=(d,g)=>h(g,d,o,!0))):(u.Ss&&(l["SparseMatrix,"+c]=e.referToSelf(d=>(g,p)=>u.Ss(g,p,d,!1))),h&&(l[c+", SparseMatrix"]=e.referToSelf(d=>(g,p)=>h(p,g,d,!0)))),o&&o.signatures&&Ma(l,o.signatures),l}}),jl="sqrt",tf=["config","typed","Complex"],ef=Q(jl,tf,t=>{var{config:e,typed:n,Complex:r}=t;return n("sqrt",{number:i,Complex:function(u){return u.sqrt()},BigNumber:function(u){return!u.isNegative()||e.predictable?u.sqrt():i(u.toNumber())},Unit:function(u){return u.pow(.5)}});function i(s){return isNaN(s)?NaN:s>=0||e.predictable?Math.sqrt(s):new r(s,0).sqrt()}}),nf="matAlgo09xS0Sf",rf=["typed","equalScalar"],sf=Q(nf,rf,t=>{var{typed:e,equalScalar:n}=t;return function(i,s,u){var o=i._values,a=i._index,l=i._ptr,c=i._size,f=i._datatype||i._data===void 0?i._datatype:i.getDataType(),h=s._values,d=s._index,g=s._ptr,p=s._size,m=s._datatype||s._data===void 0?s._datatype:s.getDataType();if(c.length!==p.length)throw new tt(c.length,p.length);if(c[0]!==p[0]||c[1]!==p[1])throw new RangeError("Dimension mismatch. Matrix A ("+c+") must match Matrix B ("+p+")");var v=c[0],w=c[1],y,F=n,A=0,x=u;typeof f=="string"&&f===m&&f!=="mixed"&&(y=f,F=e.find(n,[y,y]),A=e.convert(0,y),x=e.find(u,[y,y]));var b=o&&h?[]:void 0,_=[],N=[],O=b?[]:void 0,M=[],$,q,H,G,V;for(q=0;q<w;q++){N[q]=_.length;var st=q+1;if(O)for(G=g[q],V=g[q+1],H=G;H<V;H++)$=d[H],M[$]=st,O[$]=h[H];for(G=l[q],V=l[q+1],H=G;H<V;H++)if($=a[H],O){var ot=M[$]===st?O[$]:A,K=x(o[H],ot);F(K,A)||(_.push($),b.push(K))}else _.push($)}return N[w]=_.length,i.createSparseMatrix({values:b,index:_,ptr:N,size:[v,w],datatype:f===i._datatype&&m===s._datatype?y:void 0})}}),Xi="concat",uf=["typed","matrix","isInteger"],of=Q(Xi,uf,t=>{var{typed:e,matrix:n,isInteger:r}=t;return e(Xi,{"...Array | Matrix | number | BigNumber":function(s){var u,o=s.length,a=-1,l,c=!1,f=[];for(u=0;u<o;u++){var h=s[u];if(Vt(h)&&(c=!0),it(h)||vt(h)){if(u!==o-1)throw new Error("Dimension must be specified as last argument");if(l=a,a=h.valueOf(),!r(a))throw new TypeError("Integer number expected for dimension");if(a<0||u>0&&a>l)throw new Se(a,l+1)}else{var d=gt(h).valueOf(),g=Xt(d);if(f[u]=d,l=a,a=g.length-1,u>0&&a!==l)throw new tt(l+1,a+1)}}if(f.length===0)throw new SyntaxError("At least one matrix expected");for(var p=f.shift();f.length;)p=uu(p,f.shift(),a);return c?n(p):p},"...string":function(s){return s.join("")}})});function af(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function cf(t){var e=0,n=1,r=Object.create(null),i=Object.create(null),s=0,u=function(a){var l=i[a];if(l&&(delete r[l],delete i[a],--e,n===l)){if(!e){s=0,n=1;return}for(;!Object.prototype.hasOwnProperty.call(r,++n););}};return t=Math.abs(t),{hit:function(a){var l=i[a],c=++s;if(r[c]=a,i[a]=c,!l)return++e,e<=t?void 0:(a=r[n],u(a),a);if(delete r[l],n===l)for(;!Object.prototype.hasOwnProperty.call(r,++n););},delete:u,clear:function(){e=s=0,n=1,r=Object.create(null),i=Object.create(null)}}}function ur(t){var{hasher:e,limit:n}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return n=n??Number.POSITIVE_INFINITY,e=e??JSON.stringify,function r(){typeof r.cache!="object"&&(r.cache={values:new Map,lru:cf(n||Number.POSITIVE_INFINITY)});for(var i=[],s=0;s<arguments.length;s++)i[s]=arguments[s];var u=e(i);if(r.cache.values.has(u))return r.cache.lru.hit(u),r.cache.values.get(u);var o=t.apply(t,i);return r.cache.values.set(u,o),r.cache.values.delete(r.cache.lru.hit(u)),o}}ur(function(t){return new t(1).exp()},{hasher:or});ur(function(t){return new t(1).plus(new t(5).sqrt()).div(2)},{hasher:or});var lu=ur(function(t){return t.acos(-1)},{hasher:or});ur(function(t){return lu(t).times(2)},{hasher:or});function or(t){return t[0].precision}var Yi="acos",lf=["typed","config","Complex"],ff=Q(Yi,lf,t=>{var{typed:e,config:n,Complex:r}=t;return e(Yi,{number:function(s){return s>=-1&&s<=1||n.predictable?Math.acos(s):new r(s,0).acos()},Complex:function(s){return s.acos()},BigNumber:function(s){return s.acos()}})}),Gi="asin",hf=["typed","config","Complex"],pf=Q(Gi,hf,t=>{var{typed:e,config:n,Complex:r}=t;return e(Gi,{number:function(s){return s>=-1&&s<=1||n.predictable?Math.asin(s):new r(s,0).asin()},Complex:function(s){return s.asin()},BigNumber:function(s){return s.asin()}})}),df="atan",mf=["typed"],gf=Q(df,mf,t=>{var{typed:e}=t;return e("atan",{number:function(r){return Math.atan(r)},Complex:function(r){return r.atan()},BigNumber:function(r){return r.atan()}})}),Ji="atan2",Df=["typed","matrix","equalScalar","BigNumber","DenseMatrix","concat"],vf=Q(Ji,Df,t=>{var{typed:e,matrix:n,equalScalar:r,BigNumber:i,DenseMatrix:s,concat:u}=t,o=ql({typed:e,equalScalar:r}),a=Wl({typed:e}),l=sf({typed:e,equalScalar:r}),c=Il({typed:e,equalScalar:r}),f=Ol({typed:e,DenseMatrix:s}),h=Ql({typed:e,matrix:n,concat:u});return e(Ji,{"number, number":Math.atan2,"BigNumber, BigNumber":(d,g)=>i.atan2(d,g)},h({scalar:"number | BigNumber",SS:l,DS:a,SD:o,Ss:c,sS:f}))}),oi=Q("trigUnit",["typed"],t=>{var{typed:e}=t;return{Unit:e.referToSelf(n=>r=>{if(!r.hasBase(r.constructor.BASE_UNITS.ANGLE))throw new TypeError("Unit in function cot is no angle");return e.find(n,r.valueType())(r.value)})}}),Ki="cos",yf=["typed"],wf=Q(Ki,yf,t=>{var{typed:e}=t,n=oi({typed:e});return e(Ki,{number:Math.cos,"Complex | BigNumber":r=>r.cos()},n)}),Qi="sin",Ef=["typed"],Ff=Q(Qi,Ef,t=>{var{typed:e}=t,n=oi({typed:e});return e(Qi,{number:Math.sin,"Complex | BigNumber":r=>r.sin()},n)}),ji="tan",Af=["typed"],Cf=Q(ji,Af,t=>{var{typed:e}=t,n=oi({typed:e});return e(ji,{number:Math.tan,"Complex | BigNumber":r=>r.tan()},n)}),_f=xf("pi",["config","?BigNumber"],t=>{var{config:e,BigNumber:n}=t;return e.number==="BigNumber"?lu(n):wl});function xf(t,e,n){return Q(t,e,n,{recreateOnConfigChange:!0})}var ai=kc({config:Me}),ar=Hc({}),bf=Jc({}),ci=jc({}),li=gl({Matrix:ci}),ve=_f({BigNumber:ai,config:Me}),Pt=za({BigNumber:ai,Complex:ar,DenseMatrix:li,Fraction:bf}),Bf=ff({Complex:ar,config:Me,typed:Pt}),fu=gf({typed:Pt}),me=wf({typed:Pt}),hu=_l({config:Me,typed:Pt}),Mf=yl({typed:Pt}),oe=Ff({typed:Pt}),Sf=Bl({Matrix:ci,equalScalar:hu,typed:Pt}),Nf=Cf({typed:Pt}),pu=Sl({DenseMatrix:li,Matrix:ci,SparseMatrix:Sf,typed:Pt}),se=ef({Complex:ar,config:Me,typed:Pt}),Tf=pf({Complex:ar,config:Me,typed:Pt}),If=of({isInteger:Mf,matrix:pu,typed:Pt}),Pf=vf({BigNumber:ai,DenseMatrix:li,concat:If,equalScalar:hu,matrix:pu,typed:Pt});function du(t,e,n){return Tf(e*oe(Math.PI-n)/t)}function mu(t,e,n,r,i=0,s=0){const u=Math.abs(n-i),o=r-s;return Math.PI-Rf(u,o,t,e)}function rn(t,e,n,r){const i=du(n,r,t),u=(n*me(i)-e)/r;return t-Bf(u)}function Rf(t,e,n,r,i=.001){let s=0,u=Math.PI;const o=fu(e/t),a=t>.001?t/me(o):e/oe(o);let l=(s+u)/2,c=rn(l,a,n,r);isNaN(c)&&(s=Of(l,a,n,r));let f=(u-s)/2,h=rn(s,a,n,r);for(;f>i&&c!==0;)l=(s+u)/2,c=rn(l,a,n,r),c*h<0?u=l:(s=l,h=c),f=(u-s)/2;return(s+u)/2}function Of(t,e,n,r){let i=t,s=rn(i,e,n,r);for(;isNaN(s);)i+=.01,s=rn(i,e,n,r);return i}function Le(t,e,n){const r=mu(t._R,e._R,e.ry[n],e.rz[n],t.ry[n],t.rz[n]),i=du(t._R,e._R,r);return kf(t._R,e._R,r,i)}function Lf(t,e=[0,0]){return se((t[0]-e[0])**2+(t[1]-e[1])**2)}function kf(t,e,n,r){const i=ts(e,n),s=ts(t,r);return i+s}function ts(t,e){return t**2*(e-me(e)*oe(e))}const Vn=(t,e,n)=>{const r=(e-t)/(n-1);return Array.from({length:n},(i,s)=>t+s*r)};function gu(t,e){t=t.replace(/^#/,"");let n=parseInt(t.substring(0,2),16),r=parseInt(t.substring(2,4),16),i=parseInt(t.substring(4,6),16);return n=Math.max(0,Math.min(255,Math.floor(n*(1-e/100)))),r=Math.max(0,Math.min(255,Math.floor(r*(1-e/100)))),i=Math.max(0,Math.min(255,Math.floor(i*(1-e/100)))),`#${n.toString(16).padStart(2,"0")}${r.toString(16).padStart(2,"0")}${i.toString(16).padStart(2,"0")}`}function Du(t,e,n){const r=URL.createObjectURL(t),i=document.createElement("a");document.body.appendChild(i),i.style="display: none",i.href=r,i.download=e+"."+n,i.click(),setTimeout(()=>{URL.revokeObjectURL(r),document.body.removeChild(i)},100)}class vu{constructor(e,n,r=!0){this.eclipsedBody=e,this.eclipsingBody=n,this.checkFront=r,this.datapoints=n.rx.length,this.workoutTransits()}workoutTransits(){const[e,n]=this.getTransits(this.eclipsingBody,this.eclipsedBody,this.checkFront);console.log("Number of full transits: ",e.length),console.log("Number of partial transits: ",n.length),this.eclipsedArea=this.getEclipsedArea(e,n),this.visibleFraction=this.eclipsedArea.map(r=>1-r/this.eclipsedBody.Area),this.transitDuration=n.length+e.length,this.transitDepth=Math.max(...this.eclipsedArea)/this.eclipsedBody.Area}getEclipsedArea(e,n){var r=new Array(this.datapoints).fill(1);return n.forEach(i=>{r[i]=Le(this.eclipsedBody,this.eclipsingBody,i)}),e.forEach(i=>{r[i]=this.eclipsingBody.Area}),r}getTransits(e,n,r=!0){const s=Array.from({length:this.datapoints},(a,l)=>l).filter(a=>e.rx[a]>n.rx[a]||!r),u=s.filter(a=>n.getProjectedDistance(e,a)+e._R<=n._R),o=s.filter(a=>n.getProjectedDistance(e,a)-e._R<n._R&&n.getProjectedDistance(e,a)+e._R>=n._R);return[u,o]}}class cr{constructor(e,n,r="yellow"){this._M=e,this._R=n,this.rx=[],this.ry=[],this.rz=[],this.color=r}get Area(){return Math.PI*this._R**2}get M(){return this._M}get R(){return this._R}setOrbitingTimes(e){this.rx=new Array(e.length).fill(0),this.ry=new Array(e.length).fill(0),this.rz=new Array(e.length).fill(0)}getFullTransits(e){const n=this.rx.length;var r=new Array(n).fill(!1);for(let i=0;i<n;i++)return this.rx[i]>e.rx[i]&&this.getProjectedDistance(e,i)+this._R<=e._R&&(r[i]=!0),r}getPartialTransits(e){const n=this.rx.length;var r=new Array(n).fill(!1);for(let i=0;i<n;i++)if(this.rx[i]>e.rx[i]){const s=this.getProjectedDistance(e,i);r[i]=s-this._R<e._R&&s+this._R>e._R}return r}getProjectedDistance(e,n){return Lf([e.ry[n],e.rz[n]],[this.ry[n],this.rz[n]])}copy(){const e=new cr;return Object.assign(e,this),e}draw(e,n,r,i,s=!0){e.save(),e.fillStyle=this.color,e.beginPath();const u=this.ry[i]*r;var o=r;s?o*=this.rx[i]:o*=this.rz[i];const a=n[0]+u,l=n[1]+o;e.arc(a,l,this._R*r,0,2*Math.PI),e.fill(),e.closePath();const c=e.createRadialGradient(a,l,0,a,l,this._R*r);c.addColorStop(0,"rgba(0, 0, 0, 0.01)"),c.addColorStop(1,"rgba(0, 0, 0, 0.5)"),e.fillStyle=c,e.globalCompositeOperation="multiply",e.beginPath(),e.arc(a,l,this._R*r,0,2*Math.PI),e.fill(),e.closePath(),e.restore()}getEclipsingAreas(e){const n=this.rx.length;var r=new Array(e.length),i=new Array(n).fill(0);e.slice().sort((o,a)=>a.R-o.R).forEach((o,a)=>{const[l,c]=o.getTransits(this);c.forEach((f,h)=>{f?i[h]+=Le(this,o,h):l[h]&&(i[h]+=o.Area)}),r.forEach(f=>{console.log("Iterating previous planets",f.planetName);const[h,d]=o.getTransits(f,!1),[g,p]=f.getTransits(this);g.forEach((m,v)=>{if(m){if(l[v])h[v]?(console.log(v,"Full - Full - Full"),i[v]-=o.Area):d[v]&&(console.log(v,"Full - Full - Partial"),i[v]-=Le(f,o,v));else if(c[v]){if(h[v])throw new Error("Full - Partial - Full cannot exist as the previous planet is always larger");d[v]&&(console.log(v,"Full - Partial - Partial"),i[v]-=Le(f,o,v))}}else p[v]&&(l[v]?h[v]?(console.log(v,"Partial - Full - Full"),i[v]-=o.Area):d[v]&&(console.log(v,"Partial - Full - Partial"),i[v]-=Le(f,o,v)):c[v]&&(h[v]?(console.log(v,"Partial - Partial - Full"),i[v]-=Le(star,o,v)):d[v]&&(console.log(v,"Partial - Partial - Partial"),planet_planet_contact_points=f.getContactPoints(o,v),console.log("Partial - Partial - Partial not implemented yet!"))))})}),r[a]=o});const u=i.map(o=>1-o/this.Area);return console.log("fraction",u),u}maxCoordinate(){const e=Math.max(...this.rx.map(Math.abs)),n=Math.max(...this.ry.map(Math.abs)),r=Math.max(...this.rz.map(Math.abs));return Math.max(e,n,r)}getEclipsingAreasNumerical(e,n=500,r=250){const i=Vn(0,this._R,n),s=Vn(0,2*Math.PI,r),u=this.rx.length;let o=new Array(u).fill(0);const a=i[1]-i[0],l=s[1]-s[0];for(let c=0;c<u;c++){let f=i.slice(),h=s.slice();e.forEach(d=>{if(console.log("Iterating planets",d.planetName),d.rx[c]>this.rx[c]&&se((this.ry[c]-d.ry[c])**2+(this.rz[c]-d.rz[c]**2))-d._R<this._R){console.log("Planet covers the star at time",c);let p=[],m=[];f.forEach(v=>{const w=a*l*v;let y=!1;h.forEach(F=>{const A=v*Math.cos(F),x=v*Math.sin(F);se((A-d.ry[c])**2+(x-d.rz[c])**2)<d._R?o[c]+=w:(y=!0,m.push(F))}),y&&p.push(v)}),f=p,h=m}}),o[c]=1-o[c]/this.Area}return console.log("fraction",o),o}getContactPoints(e,n){const r=mu(this._R,e._R,e.ry[n],e.rz[n],this.ry[n],this.rz[n]),i=e.ry[n],s=e.rz[n],u=Pf(s,i),o=s;return pointy(o[0],1,e._R,r,u),pointz(o[1],1,e._R,r,u),pointy(o[0],-1,e._R,r,u),pointz(o[1],-1,e._R,r,u)}pointy(e,n,r,i,s){return e-n*me(i+r*s)}pointz(e,n,r,i,s){return e-r*n*oe(i+r*s)}}class yu extends cr{constructor(e,n,r="yellow"){super(e*_n,n*nn,r)}set M(e){this._M=e*_n}set R(e){this._R=e*nn}get R(){return super.R}get M(){return super.M}toString(){return`Star: ${(this.R/nn).toFixed(1)} $R_odot$ 
 ${(this.M/_n).toFixed(1)} g`}equals(e){return this.R===e.R&&this.M===e.M}}class $f{constructor(e,n){this.onStarUpdate=e,this.onColorChange=n,this.initStar()}initStar(){const e=document.getElementById("star-mass"),n=document.getElementById("star-radius"),r=document.getElementById("star-color"),i=document.getElementById("star-icon");i.addEventListener("click",()=>{r.click()}),e.addEventListener("input",s=>{const u=parseFloat(s.target.value);this.star.M=u,this.onStarUpdate()}),n.addEventListener("input",s=>{const u=parseFloat(s.target.value);this.star.R=u,this.onStarUpdate()}),r.addEventListener("change",s=>{this.star.color=s.target.value,i.style.backgroundColor=s.target.value,this.onColorChange()}),this.star=new yu(e.value,n.value,r.value),i.style.backgroundColor=this.star.color}setTimes(e){this.star.setOrbitingTimes(e)}}function Uf(t,e,n=0){return e.map(r=>2*fu(se((1+t)/(1-t))*Nf(r/2))%(2*ve)+2*ve*n)}function zf(t,e,n){return t.map(r=>e*(r-n)%(2*ve))}function es(t,e,n){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)throw new Error("E and M arrays must have the same length");return t.map((r,i)=>r-(e[i]+n*oe(r)))}else{if(!Array.isArray(t)&&!Array.isArray(e))return t-(e+n*oe(t));throw new Error("E and M must be both arrays or both single values")}}function qf(t,e,n=.001,r=100){let i=0,s=2*ve,u=(s-i)/2,o=es(i,t,e);for(let a=0;a<r;a++){const l=(i+s)/2,c=es(l,t,e);if(c*o<0?s=l:(i=l,o=c),u=(s-i)/2,u<n||c===0)return l}return null}function Je(t,e,n){return(n**2*Is*(t+e)/(4*ve**2))**.3333333333333333}function Hf(t,e,n){return 2*ve*(n**3/(Is*(t+e)))**.5}function Vf(t,e,n){return n.map(r=>t*(1-e**2)/(1+e*me(r)))}class wu{constructor(e="jupyter"){if(e.indexOf(e)===-1)throw new Error(`Invalid units: ${e}. Valid units are: ${e.join(", ")}`);e==="solar"?(this.R=nn,this.M=_n,this.symbol="<sub>☉</sub>"):e==="earth"?(this.R=zo,this.M=qo,this.symbol="<sub>⊕</sub>"):e==="jupyter"&&(this.R=Ho,this.M=Ts,this.symbol="<sub>J</sub>")}}class Wf extends cr{constructor(e,n,r,i,s=0,u=0,o=0,a=0,l=0,c="blue",f="Planet 1",h=new wu("jupyter")){super(e*h.M,n*h.R,c),this.units=h,this.Runits=this.units.R,this.Munits=this.units.M,this.checkInputParams(e,n,r,s,u,o,a,i),this._e=u,this._Ms=i.M,this._Rs=i.R,this.i=s,this._P=r*pe,this.omega0=o,this.Omega0=a,this.phase0=l,this.color=c,this.planetName=f,this._a=Je(i.M,this._M,this._P),this._b=this._a*se(1-this._e**2),this._rmax=this.a*(1+this.e),this.rmin=this.a*(1-this._e),console.log(`Planet max distance: ${(this.rmax/ze).toFixed(3)} AU`)}get rmax(){return this._rmax}set planetName(e){this._planetName=e}get planetName(){return this._planetName}set R(e){const n=e*this.Runits;if(this.rmin-n<this._Rs)throw new fe(this.rmin,this._Rs);this._R=n}set phase0(e){return this._phase0=e}get phase0(){return this._phase0}get omega0(){return this._omega0}set omega0(e){this._omega0=e}get Omega0(){return this._Omega0/(2*Math.PI)}set Omega0(e){this._Omega0=e*2*Math.PI}set Ms(e){const n=Je(e,this._M,this._P),r=n*(1-this._e);if(r-this._R<this._Rs)throw new fe(r,this._Rs);this._Ms=e,this._a=n,this._b=this._a*se(1-this._e**2),this._rmin=r,this._rmax=this._a*(1+this._e)}set Rs(e){if(this.rmin-this._R<e)throw new fe(this.rmin,e);this._Rs=e}set e(e){const n=this._a*(1-e);if(n-this._R<this._Rs)throw new fe(n,this._Rs);this._e=e,this.rmin=n,this._rmax=this._a*(1+this._e),this._b=this._a*se(1-this._e**2)}set M(e){const n=e*this.Munits,r=Je(this._Ms,n,this._P),i=r*(1-this._e);if(i-this._R<this._Rs)throw new fe(i,this._Rs);this._M=n,this._a=r,this._b=this._a*se(1-this._e**2),this.rmin=i,this._rmax=r*(1+this._e)}set P(e){const n=e*pe,r=Je(this._Ms,this._M,n),i=r*(1-this._e);if(i-this._R<this._Rs)throw new fe(i,this._Rs);this._P=n,this._a=r,this._b=this._a*se(1-this._e**2),this.rmin=i,this._rmax=r*(1+this._e)}get R(){return super.R/this.Runits}get M(){return super.M/this.Munits}get e(){return this._e}get a(){return this._a}get b(){return this._b}set i(e){this._i=e/180*Math.PI}get i(){return this._i/Math.PI*180}get P(){return this._P/pe}toString(){return`Planet: ${this.R.toFixed(1)} $R_Earth$ 
 ${this.M.toFixed(1)} g 
 i: ${this.i.toFixed(0)} deg`}equals(e){return this.R===e.R&&this.M===e.M&&this.i===e.i&&this.e===e.e&&this.P===e.P}checkInputParams(e,n,r,i,s,u,o,a){if(e*this.Munits>a.M)throw new Rr("Planet cannot be heavier than host star!");if(n*this.Runits>a.R)throw new Rr("Planet cannot be larger than host star!");if(!(-90<=i&&i<=90))throw new Error(`Inclination ${i.toFixed(1)} must be between -90 and 90!`);if(!(0<=u&&u<=ve))throw new Error(`Argument of periastron ${u.toFixed(1)} must be between 0 and pi!`);if(!(0<=o&&o<=1))throw new Error(`Longitude of the ascending ${o} has to be between 0 and 1!`);if(!(0<=s&&s<=1))throw new Error(`Eccentricity ${s} needs to be between 0 and 1!`);const c=Je(a.M,e*this.Munits,r*pe)*(1-s);if(c-n*this.Runits<a.R)throw new fe(c,a.R)}setStar(e){this.Ms=e.M,this.Rs=e.R}setOrbitingTimes(e){const r=zf(e,2*ve/this._P,0).map(h=>qf(h,this._e)),i=Uf(this._e,r,this.phase0),s=Vf(this._a,this._e,i),u=i.map(h=>oe(h+this.omega0)),o=i.map(h=>me(h+this.omega0)),a=me(this._Omega0),l=oe(this._Omega0),c=me(this._i),f=oe(this._i);this.rx=s.map((h,d)=>h*(a*o[d]*c-l*u[d])),this.ry=s.map((h,d)=>h*(l*o[d]*c+a*u[d])),this.rz=s.map((h,d)=>-h*o[d]*f)}draw(e,n,r,i,s=!0){e.save(),e.globalAlpha=1;const u=this.ry[i]*r;var o=r,a=r;s?(o*=this.rx[i],a*=this.rz[i]):(o*=this.rz[i],a*=-this.rx[i]);const l=n[0]+u,c=n[1]+o,f=Math.atan2(o,u),h=Math.sqrt(u**2+o**2+a**2),d=Math.acos(Math.sqrt(u**2+o**2)/h),g=f+3*Math.PI/2+Math.sign(a)*d,p=f+Math.PI/2-Math.sign(a)*d;e.fillStyle=gu(this.color,50),e.beginPath(),e.arc(l,c,this._R*r,p,g,!0),e.fill(),e.closePath(),e.restore(),e.fillStyle=this.color,e.beginPath(),e.arc(l,c,this._R*r,p,g,!1),e.fill(),e.closePath(),e.restore()}}class fe extends Error{constructor(e,n){const r=`Star-planet distance ${(e/ze).toFixed(3)} AU is below stellar radius ${(n/ze).toFixed(2)} AU!`;super(r),this.name="StarPlanetDistanceError",this.rmin=e,this._Rs=n}}class Rr extends Error{constructor(e){super(e)}}class zt{constructor(e){this.name=e,this.toolTipElement=document.getElementById("tooltip-"+e),this.toolTipElement==null&&console.warn("ToolTip tooltip-"+e+" not found")}setLanguage(e){const n=e[this.name+"_tooltip"].replace("{index}","{0}");this.toolTipElement.innerHTML=n}}const Zf=15;class Xf{constructor(e,n,r,i){this.onUpdate=e,this.onMenuOpened=n,this.onMenuClosed=r,this.planets=[],this.star=i.copy(),this.units=new wu("jupyter"),this.setLabelUnits(),this.planetNameCounter=0,this.defaultColor=document.getElementById("planet-period").style.color,this.supressedListener=!1,this.initPlanetMenu(),this.createPlanet(),this.defaultPlanet=this.planet}setLanguage(e){this.labels.forEach(n=>{n.setLanguage(e)})}initCanvas(){const e=document.getElementById("planet-canvas");this.translatePos={x:e.width/2,y:e.height/2},this.scale=1,this.scaleMultiplier=.8,this.startDragOffset={},document.getElementById("plus").addEventListener("click",()=>{this.scale/=this.scaleMultiplier,this.updateCanvas()},!1),document.getElementById("minus").addEventListener("click",()=>{this.scale*=this.scaleMultiplier,this.updateCanvas()},!1)}setLabelUnits(){const e=document.getElementById("planet-radius-label");console.log("Setting units: "+this.units.symbol),e.innerHTML=`Radius (R${this.units.symbol})`;const n=document.getElementById("planet-mass-label");n.innerHTML=`Mass (M${this.units.symbol})`}initPlanetMenu(){this.addPlanetBtn=document.getElementById("add-planet-btn"),this.addPlanetBtn.addEventListener("click",()=>this.showPlanetForm()),this.planetForm=document.getElementById("planet-form"),this.cancelPlanetBtn=document.getElementById("cancel-planet-btn"),this.cancelPlanetBtn.addEventListener("click",()=>{this.closePlanetForm(),this.onMenuClosed()}),this.closePlanetBtn=document.getElementById("close-planet-btn"),this.closePlanetBtn.addEventListener("click",()=>this.cancelPlanetBtn.click()),this.planetList=document.getElementById("planet-list"),this.errorLabel=document.getElementById("planet-error"),this.transitWarningLabel=document.getElementById("transit-error"),this.planetNameInput=document.getElementById("planet-name"),this.periodInput=document.getElementById("planet-period"),this.iInput=document.getElementById("inclination-input"),this.phaseInput=document.getElementById("phase-input"),this.Omega0Input=document.getElementById("longitude-ascending-node-input"),this.eInput=document.getElementById("eccentricity-input"),this.massInput=document.getElementById("planet-mass-input"),this.radiusInput=document.getElementById("planet-radius-input"),this.colorInput=document.getElementById("planet-color");const e=[this.periodInput,this.iInput,this.eInput,this.massInput,this.radiusInput,this.phaseInput,this.Omega0Input];e.forEach(a=>{a.addEventListener("input",l=>{const c=parseFloat(l.target.min),f=parseFloat(l.target.max);var h=parseFloat(l.target.value);h<c?(h=c,l.target.value=h):h>f&&(h=f,l.target.value=h),e.forEach(d=>{d.style.color=this.defaultColor}),this.errorLabel.classList.add("hidden"),!this.supressedListener&&(this.createPlanet(),this.updateCanvas())})}),this.colorInput.addEventListener("input",()=>{this.supressedListener||(console.log("Input Triggered"),this.createPlanet(),this.updateCanvas())}),this.planetNameInput.addEventListener("input",a=>{a.target.style.color=this.defaultColor,this.errorLabel.classList.add("hidden")}),this.randomizeBtn=document.getElementById("randomize-planet-btn"),this.randomizeBtn.addEventListener("click",()=>{this.supressedListener=!0,this.randomizeInputs(),this.errorLabel.classList.remove("hidden"),this.createPlanet(),this.updateCanvas(),this.supressedListener=!1});const n=new zt("longitude-ascending-node"),r=new zt("phase"),i=new zt("eccentricity"),s=new zt("inclination"),u=new zt("planet-mass"),o=new zt("planet-radius");this.labels=[n,r,i,s,u,o],this.planetCounter=document.getElementById("planet-title-number")}createPlanet(){const e=parseFloat(this.massInput.value),n=parseFloat(this.radiusInput.value),r=parseFloat(this.periodInput.value),i=parseFloat(this.iInput.value),s=parseFloat(this.eInput.value),u=parseFloat(this.phaseInput.value),o=parseFloat(this.Omega0Input.value),a=this.colorInput.value,l=this.planetNameInput.value;try{this.planet=new Wf(e,n,r,this.star,i,s,0,o,u,a,l,this.units),this.errorLabel.classList.add("hidden")}catch(c){c instanceof fe?(console.error(`Star-Planet Distance Error: ${c.message}`),this.errorLabel.classList.remove("hidden"),this.errorLabel.textContent="Orbit is whithin the star radius!",this.planet=null):c instanceof Rr?(this.errorLabel.classList.remove("hidden"),this.errorLabel.textContent=c.message,this.planet=null):(console.error(`Unknown error: ${c.message}`),this.planet=null)}}updateCanvas(e=1e4){if(this.planet!=null){const n=Math.floor(this.planet.e+.01*(this.planet.P*e));console.log("Updating canvas for "+this.planet.planetName+"with "+n+" datapoints");const r=Vn(0,this.planet._P,n);this.planet.setOrbitingTimes(r),this.star.setOrbitingTimes(r),this.drawOrbit();const i=new vu(this.star,this.planet),s=r.map(a=>a/pe),u=i.visibleFraction;this.drawLightcurve(u,s),document.getElementById("perihelion").innerText=(this.planet.rmin/ze).toFixed(3)+" AU",document.getElementById("aphelion").innerText=(this.planet.rmax/ze).toFixed(3)+" AU",document.getElementById("transit-depth").innerText=i.transitDepth.toFixed(3),console.log("Transit duration",i.transitDuration);const o=s[1]-s[0];i.transitDuration==0?this.transitWarningLabel.classList.remove("hidden"):this.transitWarningLabel.classList.add("hidden"),document.getElementById("transit-duration").innerText=(i.transitDuration*o).toFixed(3)+" days"}}drawLightcurve(e,n){const r=document.getElementById("lightcurve-canvas-planet-form"),i=r.getContext("2d"),s=Math.min(...n),u=Math.max(...n),o=Math.min(...e)*.95,a=Math.max(...e)*1.05,l=d=>(d-s)/(u-s)*r.width,c=d=>r.height-(d-o)/(a-o)*r.height;i.clearRect(0,0,r.width,r.height),i.save(),i.beginPath(),i.lineWidth=1.5,i.strokeStyle=this.star.color;const f=l(n[0]),h=c(e[0]);i.moveTo(f,h);for(let d=1;d<n.length;d++){const g=l(n[d]),p=c(e[d]);i.lineTo(g,p)}i.stroke(),i.restore()}drawOrbit(){const e=document.getElementById("planet-canvas"),n=e.getContext("2d"),r=e.width/2/(this.planet.maxCoordinate()*1.1);n.clearRect(0,0,e.width,e.height),n.save(),this.star.rx[0]<this.planet.rx[0]?(this.star.draw(n,[e.width/2,e.height/2],r,0,!0),this.planet.draw(n,[e.width/2,e.height/2],r,0,!0)):(this.planet.draw(n,[e.width/2,e.height/2],r,0,!0),this.star.draw(n,[e.width/2,e.height/2],r,0,!0)),n.beginPath(),n.lineWidth=1.5,n.setLineDash([5,10]),n.moveTo(this.planet.ry[0]*r+e.width/2,this.planet.rx[0]*r+e.height/2);for(let i=0;i<this.planet.rx.length;i++)n.lineTo(this.planet.ry[i]*r+e.width/2,this.planet.rx[i]*r+e.height/2);n.closePath(),n.strokeStyle=this.planet.color,n.stroke(),n.restore()}showPlanetForm(e=null){this.onMenuOpened(),this.savePlanetBtn=document.getElementById("save-planet-btn"),this.savePlanetListener=()=>this.addPlanet(e),this.savePlanetBtn.addEventListener("click",this.savePlanetListener),this.planetForm.classList.remove("hidden"),this.planetForm.focus(),e!=null?(console.log("Editing planet "+e),this.savePlanetBtn.textContent="Accept",this.supressedListener=!0,this.planetNameInput.value=this.planets[e].planetName,this.periodInput.value=this.planets[e].P,this.eInput.value=this.planets[e].e,this.iInput.value=parseFloat(this.planets[e].i).toFixed(2),this.Omega0Input.value=parseFloat(this.planets[e].Omega0).toFixed(2),this.massInput.value=this.planets[e].M,this.phaseInput.value=this.planets[e].phase0,this.radiusInput.value=this.planets[e].R,this.colorInput.value=this.planets[e].color):(this.savePlanetBtn.textContent="Add",this.periodInput.value=this.defaultPlanet.P,this.eInput.value=this.defaultPlanet.e,this.iInput.value=this.defaultPlanet.i.toFixed(2),this.Omega0Input.value=this.defaultPlanet.Omega0.toFixed(2),this.massInput.value=this.defaultPlanet.M,this.radiusInput.value=this.defaultPlanet.R,this.phaseInput.value=this.defaultPlanet.phase0,this.colorInput.value=`#${Math.floor(Math.random()*16777215).toString(16).padStart(6,"0")}`,this.planetNameInput.value="Planet "+(this.planetNameCounter+1)),this.createPlanet(),this.updateCanvas(),this.supressedListener=!1,this.keydownListener=n=>{if(n.key==="Escape")this.closePlanetBtn.click();else if(n.key=="Enter"){const r=document.activeElement;r&&(r.tagName==="INPUT"||r.tagName==="TEXTAREA")&&r.type==="color"&&(n.preventDefault(),n.stopPropagation()),this.savePlanetBtn.click()}else n.key=="R"||n.key=="r"?document.activeElement!=this.planetNameInput&&this.randomizeBtn.click():(n.key=="c"||n.key=="C")&&document.activeElement!=this.planetNameInput&&this.cancelPlanetBtn.click()},this.closeOnOutsideClickListener=n=>{this.planetForm&&!this.planetForm.querySelector(".planet-form-content").contains(n.target)&&this.cancelPlanetBtn.click()},document.addEventListener("keydown",this.keydownListener),setTimeout(()=>{document.addEventListener("click",this.closeOnOutsideClickListener)},0)}randomizeInputs(){const e=Math.random();this.massInput.value=parseFloat((e+1)*20*Ts/this.units.M).toFixed(2),this.radiusInput.value=parseFloat(e*this.star._R/this.units.R/5+nn/this.units.R).toFixed(2);const n=Math.random();this.eInput.value=parseFloat(n.toFixed(2));const i=(this.star._R+this.radiusInput.value*this.units.R)/(1-this.eInput.value),s=Hf(this.star._M,this.massInput.value*this.units.M,i);console.log("Min period: "+(s/pe).toFixed(2)+" days"),this.periodInput.value=Math.floor(e*500+s/pe),this.iInput.value=parseFloat((2*e-1)*89.9).toFixed(2);const u=Math.random();this.phaseInput.value=u.toFixed(2);const o=Math.random();this.Omega0Input.value=o.toFixed(2)}closePlanetForm(){console.log("Closing Menu"),document.activeElement&&document.activeElement.blur(),this.planetForm.classList.add("hidden"),this.keydownListener&&(document.removeEventListener("keydown",this.keydownListener),this.keydownListener=null),this.savePlanetBtn.removeEventListener("click",this.savePlanetListener),this.closeOnOutsideClickListener&&(document.removeEventListener("click",this.closeOnOutsideClickListener),this.closeOnOutsideClickListener=null),this.savePlanetListener&&(this.savePlanetListener=null)}addPlanet(e=null){const n=this.planetNameInput.value,i=this.planets.map(s=>s.planetName).indexOf(n);if(i!=-1&&i!=e){this.errorLabel.classList.remove("hidden"),this.errorLabel.textContent="Planet name already exists!",this.planetNameInput.style.color="red",this.planetNameInput.focus(),this.planet=null;return}this.planet!=null&&(e==null?(this.planets.push(this.planet),this.planetNameCounter++):this.planets[e]=this.planet,this.closePlanetForm(),this.updateParameters())}createPlanetButton(e,n,r){const i=document.createElement("button");i.className="planet-btns";const s=document.createElement("img");return s.setAttribute("src",e),s.setAttribute("alt",r),s.setAttribute("title",r),i.addEventListener("click",n),i.appendChild(s),i}onRemoveListener(e){console.log("Removing planet"+e),this.planets.splice(e,1),this.updateParameters()}onEditListener(e){console.log("Editing planet "+e),this.showPlanetForm(e)}updateParameters(){this.maxRadius=Math.max(...this.planets.map(e=>e.R)),this.maxP=Math.max(...this.planets.map(e=>e._P)),this.updatePlanetList()}updatePlanetList(){this.planetList.innerHTML="",this.planets.forEach((e,n)=>{const r=this.createPlanetItem(e,n);this.planetList.appendChild(r)}),this.planetCounter.textContent="Planets ("+this.planets.length+")",this.onUpdate()}createPlanetItem(e,n){const r=document.createElement("div");r.className="planet-item",r.dataset.name=e.planetName;const i=document.createElement("div");i.className="dot-planet-container";const s=document.createElement("span");s.className="dot-planet",s.style.backgroundColor=e.color;const u=document.createElement("input");u.type="color",u.value=e.color,u.style.display="none",s.addEventListener("click",()=>{u.click()}),u.addEventListener("input",f=>{this.planets[n].color=f.target.value,s.style.backgroundColor=f.target.value});const o=e.R*Zf/this.maxRadius;s.style.width=o.toString()+"px",s.style.height=o.toString()+"px",i.appendChild(s),s.appendChild(u);const a=document.createElement("span");a.className="planet-name-label",a.title=e.planetName,a.textContent=e.planetName;const l=this.createPlanetButton("/icons/edit.png",()=>this.onEditListener(n),"Edit"),c=this.createPlanetButton("/icons/delete-button.svg",()=>this.onRemoveListener(n),"Delete");return r.appendChild(i),r.appendChild(a),r.appendChild(l),r.appendChild(c),r}setTimes(e){this.planets.forEach(n=>{n.setOrbitingTimes(e)}),this.maxDistance=Math.max(...this.planets.map(n=>n.maxCoordinate()+n._R))}setStar(e){this.star=e.copy(),this.planets.forEach(n=>{n.setStar(e)})}}class Yf{constructor(e,n,r,i){this.onDatapointsUpdate=n,this.onOrbitsUpdate=r,this.onMcPointsUpdate=i,this.initLightcurveMenu(),this.calculateTimes(e)}setLanguage(e){this.datapointsLabel.setLanguage(e),this.orbitsLabel.setLanguage(e),this.mcPointsLabel.setLanguage(e)}initLightcurveMenu(){const e=document.getElementById("input-datapoints");this.datapoints=parseInt(e.value),this.datapointsLabel=new zt("datapoints");const n=document.getElementById("orbits");this.orbits=parseInt(n.value),this.orbitsLabel=new zt("orbits"),this.mcPointsInput=document.getElementById("input-mc-points"),this.mcPoints=parseInt(this.mcPointsInput.value*1e3),this.mcPointsLabel=new zt("mc-points"),this.mcPointsInput.addEventListener("input",r=>{const i=parseFloat(r.target.min);r.target.value<i&&(r.target.value=i),this.mcPoints=parseInt(r.target.value*1e3),this.onMcPointsUpdate()}),e.addEventListener("input",r=>{const i=parseFloat(r.target.min);r.target.value<i&&(r.target.value=i),this.datapoints=parseInt(r.target.value),this.onDatapointsUpdate()}),n.addEventListener("input",r=>{const i=parseFloat(r.target.min);r.target.value<i&&(r.target.value=i),this.orbits=parseInt(r.target.value),this.onOrbitsUpdate()})}calculateTimes(e){this.times=Vn(0,this.orbits*e,this.datapoints),this.timesDays=this.times.map(n=>n/pe)}exportLightcurve(e,n){const r="Time (days),RelativeFlux",i=e.map((o,a)=>`${o.toFixed(4)},${n[a].toFixed(5)}`).join(`
`),s=`${r}
${i}`,u=new Blob([s],{type:"text/csv"});Du(u,"lightcurve","csv")}}class Gf{constructor(e){this.onUpdate=e,this.initFrame()}initFrame(){this.msInput=document.getElementById("ms"),this.msLabel=new zt("frame-rate"),this.ms=parseFloat(this.msInput.value),this.msInput.addEventListener("input",e=>{this.ms=parseFloat(e.target.value),this.onUpdate(this.ms)}),this.saveAnimationButton=document.getElementById("save-animation-btn"),this.saveAnimationButton.disabled=!0,this.durationLabel=document.getElementById("animation-duration-value"),this.durationToolTip=new zt("animation-duration")}setDuration(e){this.durationLabel.innerHTML=(e/1e3).toFixed(3),this.animationDurationms=e}setLanguage(e){this.msLabel.setLanguage(e),this.durationToolTip.setLanguage(e)}disable(e){this.msInput.disabled=e,this.saveAnimationButton.disabled=e}}class Or{constructor(e){this.activateButton=document.getElementById(e+"-button");const n=document.getElementById(e+"-content");this.activateButton.addEventListener("click",()=>{this.showContent(n,e)}),this.closeButton=document.getElementById("close-"+e+"-btn"),this.closeWindowListener=()=>{this.closeWindow(n)},this.closeButton.addEventListener("click",this.closeWindowListener),this.contentName=e}setLanguage(e){const n=document.getElementById(this.contentName+"-text");console.log("Setting language for "+this.contentName),n.innerHTML=e[this.contentName+"-text"]}showContent(e,n){console.log("Showing "+n),e.classList.remove("hidden"),e.focus(),this.keydownListener=r=>{r.key==="Escape"&&this.closeWindow(e)},this.closeOnOutsideClickListener=r=>{e&&!e.querySelector(".information-container").contains(r.target)&&this.closeWindow(e)},document.addEventListener("keydown",this.keydownListener),setTimeout(()=>{document.addEventListener("click",this.closeOnOutsideClickListener)},0)}closeWindow(e){console.log("Closing "+e),e.classList.add("hidden"),e.blur(),this.keydownListener&&(document.removeEventListener("keydown",this.keydownListener),this.keydownListener=null),this.closeOnOutsideClickListener&&(document.removeEventListener("click",this.closeOnOutsideClickListener),this.closeOnOutsideClickListener=null)}}function Bn(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function Jf(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function Eu(t){let e,n,r;t.length!==2?(e=Bn,n=(o,a)=>Bn(t(o),a),r=(o,a)=>t(o)-a):(e=t===Bn||t===Jf?t:Kf,n=t,r=t);function i(o,a,l=0,c=o.length){if(l<c){if(e(a,a)!==0)return c;do{const f=l+c>>>1;n(o[f],a)<0?l=f+1:c=f}while(l<c)}return l}function s(o,a,l=0,c=o.length){if(l<c){if(e(a,a)!==0)return c;do{const f=l+c>>>1;n(o[f],a)<=0?l=f+1:c=f}while(l<c)}return l}function u(o,a,l=0,c=o.length){const f=i(o,a,l,c-1);return f>l&&r(o[f-1],a)>-r(o[f],a)?f-1:f}return{left:i,center:u,right:s}}function Kf(){return 0}function Qf(t){return t===null?NaN:+t}const jf=Eu(Bn),th=jf.right;Eu(Qf).center;const eh=Math.sqrt(50),nh=Math.sqrt(10),rh=Math.sqrt(2);function Wn(t,e,n){const r=(e-t)/Math.max(0,n),i=Math.floor(Math.log10(r)),s=r/Math.pow(10,i),u=s>=eh?10:s>=nh?5:s>=rh?2:1;let o,a,l;return i<0?(l=Math.pow(10,-i)/u,o=Math.round(t*l),a=Math.round(e*l),o/l<t&&++o,a/l>e&&--a,l=-l):(l=Math.pow(10,i)*u,o=Math.round(t/l),a=Math.round(e/l),o*l<t&&++o,a*l>e&&--a),a<o&&.5<=n&&n<2?Wn(t,e,n*2):[o,a,l]}function ih(t,e,n){if(e=+e,t=+t,n=+n,!(n>0))return[];if(t===e)return[t];const r=e<t,[i,s,u]=r?Wn(e,t,n):Wn(t,e,n);if(!(s>=i))return[];const o=s-i+1,a=new Array(o);if(r)if(u<0)for(let l=0;l<o;++l)a[l]=(s-l)/-u;else for(let l=0;l<o;++l)a[l]=(s-l)*u;else if(u<0)for(let l=0;l<o;++l)a[l]=(i+l)/-u;else for(let l=0;l<o;++l)a[l]=(i+l)*u;return a}function Lr(t,e,n){return e=+e,t=+t,n=+n,Wn(t,e,n)[2]}function sh(t,e,n){e=+e,t=+t,n=+n;const r=e<t,i=r?Lr(e,t,n):Lr(t,e,n);return(r?-1:1)*(i<0?1/-i:i)}function ns(t,e){let n;for(const r of t)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);return n}function rs(t,e){let n;for(const r of t)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);return n}function uh(t){return t}var Mn=1,Sn=2,kr=3,Qe=4,is=1e-6;function oh(t){return"translate("+t+",0)"}function ah(t){return"translate(0,"+t+")"}function ch(t){return e=>+t(e)}function lh(t,e){return e=Math.max(0,t.bandwidth()-e*2)/2,t.round()&&(e=Math.round(e)),n=>+t(n)+e}function fh(){return!this.__axis}function lr(t,e){var n=[],r=null,i=null,s=6,u=6,o=3,a=typeof window<"u"&&window.devicePixelRatio>1?0:.5,l=t===Mn||t===Qe?-1:1,c=t===Qe||t===Sn?"x":"y",f=t===Mn||t===kr?oh:ah;function h(d){var g=r??(e.ticks?e.ticks.apply(e,n):e.domain()),p=i??(e.tickFormat?e.tickFormat.apply(e,n):uh),m=Math.max(s,0)+o,v=e.range(),w=+v[0]+a,y=+v[v.length-1]+a,F=(e.bandwidth?lh:ch)(e.copy(),a),A=d.selection?d.selection():d,x=A.selectAll(".domain").data([null]),b=A.selectAll(".tick").data(g,e).order(),_=b.exit(),N=b.enter().append("g").attr("class","tick"),O=b.select("line"),M=b.select("text");x=x.merge(x.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),b=b.merge(N),O=O.merge(N.append("line").attr("stroke","currentColor").attr(c+"2",l*s)),M=M.merge(N.append("text").attr("fill","currentColor").attr(c,l*m).attr("dy",t===Mn?"0em":t===kr?"0.71em":"0.32em")),d!==A&&(x=x.transition(d),b=b.transition(d),O=O.transition(d),M=M.transition(d),_=_.transition(d).attr("opacity",is).attr("transform",function($){return isFinite($=F($))?f($+a):this.getAttribute("transform")}),N.attr("opacity",is).attr("transform",function($){var q=this.parentNode.__axis;return f((q&&isFinite(q=q($))?q:F($))+a)})),_.remove(),x.attr("d",t===Qe||t===Sn?u?"M"+l*u+","+w+"H"+a+"V"+y+"H"+l*u:"M"+a+","+w+"V"+y:u?"M"+w+","+l*u+"V"+a+"H"+y+"V"+l*u:"M"+w+","+a+"H"+y),b.attr("opacity",1).attr("transform",function($){return f(F($)+a)}),O.attr(c+"2",l*s),M.attr(c,l*m).text(p),A.filter(fh).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",t===Sn?"start":t===Qe?"end":"middle"),A.each(function(){this.__axis=F})}return h.scale=function(d){return arguments.length?(e=d,h):e},h.ticks=function(){return n=Array.from(arguments),h},h.tickArguments=function(d){return arguments.length?(n=d==null?[]:Array.from(d),h):n.slice()},h.tickValues=function(d){return arguments.length?(r=d==null?null:Array.from(d),h):r&&r.slice()},h.tickFormat=function(d){return arguments.length?(i=d,h):i},h.tickSize=function(d){return arguments.length?(s=u=+d,h):s},h.tickSizeInner=function(d){return arguments.length?(s=+d,h):s},h.tickSizeOuter=function(d){return arguments.length?(u=+d,h):u},h.tickPadding=function(d){return arguments.length?(o=+d,h):o},h.offset=function(d){return arguments.length?(a=+d,h):a},h}function hh(t){return lr(Mn,t)}function ph(t){return lr(Sn,t)}function dh(t){return lr(kr,t)}function mh(t){return lr(Qe,t)}var gh={value:()=>{}};function Fu(){for(var t=0,e=arguments.length,n={},r;t<e;++t){if(!(r=arguments[t]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new Nn(n)}function Nn(t){this._=t}function Dh(t,e){return t.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!e.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}Nn.prototype=Fu.prototype={constructor:Nn,on:function(t,e){var n=this._,r=Dh(t+"",n),i,s=-1,u=r.length;if(arguments.length<2){for(;++s<u;)if((i=(t=r[s]).type)&&(i=vh(n[i],t.name)))return i;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++s<u;)if(i=(t=r[s]).type)n[i]=ss(n[i],t.name,e);else if(e==null)for(i in n)n[i]=ss(n[i],t.name,null);return this},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new Nn(t)},call:function(t,e){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,s;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(s=this._[t],r=0,i=s.length;r<i;++r)s[r].value.apply(e,n)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],i=0,s=r.length;i<s;++i)r[i].value.apply(e,n)}};function vh(t,e){for(var n=0,r=t.length,i;n<r;++n)if((i=t[n]).name===e)return i.value}function ss(t,e,n){for(var r=0,i=t.length;r<i;++r)if(t[r].name===e){t[r]=gh,t=t.slice(0,r).concat(t.slice(r+1));break}return n!=null&&t.push({name:e,value:n}),t}var $r="http://www.w3.org/1999/xhtml";const us={svg:"http://www.w3.org/2000/svg",xhtml:$r,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function fr(t){var e=t+="",n=e.indexOf(":");return n>=0&&(e=t.slice(0,n))!=="xmlns"&&(t=t.slice(n+1)),us.hasOwnProperty(e)?{space:us[e],local:t}:t}function yh(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===$r&&e.documentElement.namespaceURI===$r?e.createElement(t):e.createElementNS(n,t)}}function wh(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function Au(t){var e=fr(t);return(e.local?wh:yh)(e)}function Eh(){}function fi(t){return t==null?Eh:function(){return this.querySelector(t)}}function Fh(t){typeof t!="function"&&(t=fi(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var s=e[i],u=s.length,o=r[i]=new Array(u),a,l,c=0;c<u;++c)(a=s[c])&&(l=t.call(a,a.__data__,c,s))&&("__data__"in a&&(l.__data__=a.__data__),o[c]=l);return new It(r,this._parents)}function Ah(t){return t==null?[]:Array.isArray(t)?t:Array.from(t)}function Ch(){return[]}function Cu(t){return t==null?Ch:function(){return this.querySelectorAll(t)}}function _h(t){return function(){return Ah(t.apply(this,arguments))}}function xh(t){typeof t=="function"?t=_h(t):t=Cu(t);for(var e=this._groups,n=e.length,r=[],i=[],s=0;s<n;++s)for(var u=e[s],o=u.length,a,l=0;l<o;++l)(a=u[l])&&(r.push(t.call(a,a.__data__,l,u)),i.push(a));return new It(r,i)}function _u(t){return function(){return this.matches(t)}}function xu(t){return function(e){return e.matches(t)}}var bh=Array.prototype.find;function Bh(t){return function(){return bh.call(this.children,t)}}function Mh(){return this.firstElementChild}function Sh(t){return this.select(t==null?Mh:Bh(typeof t=="function"?t:xu(t)))}var Nh=Array.prototype.filter;function Th(){return Array.from(this.children)}function Ih(t){return function(){return Nh.call(this.children,t)}}function Ph(t){return this.selectAll(t==null?Th:Ih(typeof t=="function"?t:xu(t)))}function Rh(t){typeof t!="function"&&(t=_u(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var s=e[i],u=s.length,o=r[i]=[],a,l=0;l<u;++l)(a=s[l])&&t.call(a,a.__data__,l,s)&&o.push(a);return new It(r,this._parents)}function bu(t){return new Array(t.length)}function Oh(){return new It(this._enter||this._groups.map(bu),this._parents)}function Zn(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}Zn.prototype={constructor:Zn,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function Lh(t){return function(){return t}}function kh(t,e,n,r,i,s){for(var u=0,o,a=e.length,l=s.length;u<l;++u)(o=e[u])?(o.__data__=s[u],r[u]=o):n[u]=new Zn(t,s[u]);for(;u<a;++u)(o=e[u])&&(i[u]=o)}function $h(t,e,n,r,i,s,u){var o,a,l=new Map,c=e.length,f=s.length,h=new Array(c),d;for(o=0;o<c;++o)(a=e[o])&&(h[o]=d=u.call(a,a.__data__,o,e)+"",l.has(d)?i[o]=a:l.set(d,a));for(o=0;o<f;++o)d=u.call(t,s[o],o,s)+"",(a=l.get(d))?(r[o]=a,a.__data__=s[o],l.delete(d)):n[o]=new Zn(t,s[o]);for(o=0;o<c;++o)(a=e[o])&&l.get(h[o])===a&&(i[o]=a)}function Uh(t){return t.__data__}function zh(t,e){if(!arguments.length)return Array.from(this,Uh);var n=e?$h:kh,r=this._parents,i=this._groups;typeof t!="function"&&(t=Lh(t));for(var s=i.length,u=new Array(s),o=new Array(s),a=new Array(s),l=0;l<s;++l){var c=r[l],f=i[l],h=f.length,d=qh(t.call(c,c&&c.__data__,l,r)),g=d.length,p=o[l]=new Array(g),m=u[l]=new Array(g),v=a[l]=new Array(h);n(c,f,p,m,v,d,e);for(var w=0,y=0,F,A;w<g;++w)if(F=p[w]){for(w>=y&&(y=w+1);!(A=m[y])&&++y<g;);F._next=A||null}}return u=new It(u,r),u._enter=o,u._exit=a,u}function qh(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function Hh(){return new It(this._exit||this._groups.map(bu),this._parents)}function Vh(t,e,n){var r=this.enter(),i=this,s=this.exit();return typeof t=="function"?(r=t(r),r&&(r=r.selection())):r=r.append(t+""),e!=null&&(i=e(i),i&&(i=i.selection())),n==null?s.remove():n(s),r&&i?r.merge(i).order():i}function Wh(t){for(var e=t.selection?t.selection():t,n=this._groups,r=e._groups,i=n.length,s=r.length,u=Math.min(i,s),o=new Array(i),a=0;a<u;++a)for(var l=n[a],c=r[a],f=l.length,h=o[a]=new Array(f),d,g=0;g<f;++g)(d=l[g]||c[g])&&(h[g]=d);for(;a<i;++a)o[a]=n[a];return new It(o,this._parents)}function Zh(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var r=t[e],i=r.length-1,s=r[i],u;--i>=0;)(u=r[i])&&(s&&u.compareDocumentPosition(s)^4&&s.parentNode.insertBefore(u,s),s=u);return this}function Xh(t){t||(t=Yh);function e(f,h){return f&&h?t(f.__data__,h.__data__):!f-!h}for(var n=this._groups,r=n.length,i=new Array(r),s=0;s<r;++s){for(var u=n[s],o=u.length,a=i[s]=new Array(o),l,c=0;c<o;++c)(l=u[c])&&(a[c]=l);a.sort(e)}return new It(i,this._parents).order()}function Yh(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function Gh(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}function Jh(){return Array.from(this)}function Kh(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,s=r.length;i<s;++i){var u=r[i];if(u)return u}return null}function Qh(){let t=0;for(const e of this)++t;return t}function jh(){return!this.node()}function t0(t){for(var e=this._groups,n=0,r=e.length;n<r;++n)for(var i=e[n],s=0,u=i.length,o;s<u;++s)(o=i[s])&&t.call(o,o.__data__,s,i);return this}function e0(t){return function(){this.removeAttribute(t)}}function n0(t){return function(){this.removeAttributeNS(t.space,t.local)}}function r0(t,e){return function(){this.setAttribute(t,e)}}function i0(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function s0(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttribute(t):this.setAttribute(t,n)}}function u0(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function o0(t,e){var n=fr(t);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((e==null?n.local?n0:e0:typeof e=="function"?n.local?u0:s0:n.local?i0:r0)(n,e))}function Bu(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function a0(t){return function(){this.style.removeProperty(t)}}function c0(t,e,n){return function(){this.style.setProperty(t,e,n)}}function l0(t,e,n){return function(){var r=e.apply(this,arguments);r==null?this.style.removeProperty(t):this.style.setProperty(t,r,n)}}function f0(t,e,n){return arguments.length>1?this.each((e==null?a0:typeof e=="function"?l0:c0)(t,e,n??"")):Ve(this.node(),t)}function Ve(t,e){return t.style.getPropertyValue(e)||Bu(t).getComputedStyle(t,null).getPropertyValue(e)}function h0(t){return function(){delete this[t]}}function p0(t,e){return function(){this[t]=e}}function d0(t,e){return function(){var n=e.apply(this,arguments);n==null?delete this[t]:this[t]=n}}function m0(t,e){return arguments.length>1?this.each((e==null?h0:typeof e=="function"?d0:p0)(t,e)):this.node()[t]}function Mu(t){return t.trim().split(/^|\s+/)}function hi(t){return t.classList||new Su(t)}function Su(t){this._node=t,this._names=Mu(t.getAttribute("class")||"")}Su.prototype={add:function(t){var e=this._names.indexOf(t);e<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function Nu(t,e){for(var n=hi(t),r=-1,i=e.length;++r<i;)n.add(e[r])}function Tu(t,e){for(var n=hi(t),r=-1,i=e.length;++r<i;)n.remove(e[r])}function g0(t){return function(){Nu(this,t)}}function D0(t){return function(){Tu(this,t)}}function v0(t,e){return function(){(e.apply(this,arguments)?Nu:Tu)(this,t)}}function y0(t,e){var n=Mu(t+"");if(arguments.length<2){for(var r=hi(this.node()),i=-1,s=n.length;++i<s;)if(!r.contains(n[i]))return!1;return!0}return this.each((typeof e=="function"?v0:e?g0:D0)(n,e))}function w0(){this.textContent=""}function E0(t){return function(){this.textContent=t}}function F0(t){return function(){var e=t.apply(this,arguments);this.textContent=e??""}}function A0(t){return arguments.length?this.each(t==null?w0:(typeof t=="function"?F0:E0)(t)):this.node().textContent}function C0(){this.innerHTML=""}function _0(t){return function(){this.innerHTML=t}}function x0(t){return function(){var e=t.apply(this,arguments);this.innerHTML=e??""}}function b0(t){return arguments.length?this.each(t==null?C0:(typeof t=="function"?x0:_0)(t)):this.node().innerHTML}function B0(){this.nextSibling&&this.parentNode.appendChild(this)}function M0(){return this.each(B0)}function S0(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function N0(){return this.each(S0)}function T0(t){var e=typeof t=="function"?t:Au(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}function I0(){return null}function P0(t,e){var n=typeof t=="function"?t:Au(t),r=e==null?I0:typeof e=="function"?e:fi(e);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function R0(){var t=this.parentNode;t&&t.removeChild(this)}function O0(){return this.each(R0)}function L0(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function k0(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function $0(t){return this.select(t?k0:L0)}function U0(t){return arguments.length?this.property("__data__",t):this.node().__data__}function z0(t){return function(e){t.call(this,e,this.__data__)}}function q0(t){return t.trim().split(/^|\s+/).map(function(e){var n="",r=e.indexOf(".");return r>=0&&(n=e.slice(r+1),e=e.slice(0,r)),{type:e,name:n}})}function H0(t){return function(){var e=this.__on;if(e){for(var n=0,r=-1,i=e.length,s;n<i;++n)s=e[n],(!t.type||s.type===t.type)&&s.name===t.name?this.removeEventListener(s.type,s.listener,s.options):e[++r]=s;++r?e.length=r:delete this.__on}}}function V0(t,e,n){return function(){var r=this.__on,i,s=z0(e);if(r){for(var u=0,o=r.length;u<o;++u)if((i=r[u]).type===t.type&&i.name===t.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=s,i.options=n),i.value=e;return}}this.addEventListener(t.type,s,n),i={type:t.type,name:t.name,value:e,listener:s,options:n},r?r.push(i):this.__on=[i]}}function W0(t,e,n){var r=q0(t+""),i,s=r.length,u;if(arguments.length<2){var o=this.node().__on;if(o){for(var a=0,l=o.length,c;a<l;++a)for(i=0,c=o[a];i<s;++i)if((u=r[i]).type===c.type&&u.name===c.name)return c.value}return}for(o=e?V0:H0,i=0;i<s;++i)this.each(o(r[i],e,n));return this}function Iu(t,e,n){var r=Bu(t),i=r.CustomEvent;typeof i=="function"?i=new i(e,n):(i=r.document.createEvent("Event"),n?(i.initEvent(e,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(e,!1,!1)),t.dispatchEvent(i)}function Z0(t,e){return function(){return Iu(this,t,e)}}function X0(t,e){return function(){return Iu(this,t,e.apply(this,arguments))}}function Y0(t,e){return this.each((typeof e=="function"?X0:Z0)(t,e))}function*G0(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,s=r.length,u;i<s;++i)(u=r[i])&&(yield u)}var Pu=[null];function It(t,e){this._groups=t,this._parents=e}function hn(){return new It([[document.documentElement]],Pu)}function J0(){return this}It.prototype=hn.prototype={constructor:It,select:Fh,selectAll:xh,selectChild:Sh,selectChildren:Ph,filter:Rh,data:zh,enter:Oh,exit:Hh,join:Vh,merge:Wh,selection:J0,order:Zh,sort:Xh,call:Gh,nodes:Jh,node:Kh,size:Qh,empty:jh,each:t0,attr:o0,style:f0,property:m0,classed:y0,text:A0,html:b0,raise:M0,lower:N0,append:T0,insert:P0,remove:O0,clone:$0,datum:U0,on:W0,dispatch:Y0,[Symbol.iterator]:G0};function K0(t){return typeof t=="string"?new It([[document.querySelector(t)]],[document.documentElement]):new It([[t]],Pu)}function pi(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function Ru(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function pn(){}var cn=.7,Xn=1/cn,Ue="\\s*([+-]?\\d+)\\s*",ln="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Kt="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Q0=/^#([0-9a-f]{3,8})$/,j0=new RegExp(`^rgb\\(${Ue},${Ue},${Ue}\\)$`),tp=new RegExp(`^rgb\\(${Kt},${Kt},${Kt}\\)$`),ep=new RegExp(`^rgba\\(${Ue},${Ue},${Ue},${ln}\\)$`),np=new RegExp(`^rgba\\(${Kt},${Kt},${Kt},${ln}\\)$`),rp=new RegExp(`^hsl\\(${ln},${Kt},${Kt}\\)$`),ip=new RegExp(`^hsla\\(${ln},${Kt},${Kt},${ln}\\)$`),os={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};pi(pn,be,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:as,formatHex:as,formatHex8:sp,formatHsl:up,formatRgb:cs,toString:cs});function as(){return this.rgb().formatHex()}function sp(){return this.rgb().formatHex8()}function up(){return Ou(this).formatHsl()}function cs(){return this.rgb().formatRgb()}function be(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=Q0.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?ls(e):n===3?new Mt(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?En(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?En(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=j0.exec(t))?new Mt(e[1],e[2],e[3],1):(e=tp.exec(t))?new Mt(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=ep.exec(t))?En(e[1],e[2],e[3],e[4]):(e=np.exec(t))?En(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=rp.exec(t))?ps(e[1],e[2]/100,e[3]/100,1):(e=ip.exec(t))?ps(e[1],e[2]/100,e[3]/100,e[4]):os.hasOwnProperty(t)?ls(os[t]):t==="transparent"?new Mt(NaN,NaN,NaN,0):null}function ls(t){return new Mt(t>>16&255,t>>8&255,t&255,1)}function En(t,e,n,r){return r<=0&&(t=e=n=NaN),new Mt(t,e,n,r)}function op(t){return t instanceof pn||(t=be(t)),t?(t=t.rgb(),new Mt(t.r,t.g,t.b,t.opacity)):new Mt}function Ur(t,e,n,r){return arguments.length===1?op(t):new Mt(t,e,n,r??1)}function Mt(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}pi(Mt,Ur,Ru(pn,{brighter(t){return t=t==null?Xn:Math.pow(Xn,t),new Mt(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?cn:Math.pow(cn,t),new Mt(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new Mt(xe(this.r),xe(this.g),xe(this.b),Yn(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:fs,formatHex:fs,formatHex8:ap,formatRgb:hs,toString:hs}));function fs(){return`#${Ae(this.r)}${Ae(this.g)}${Ae(this.b)}`}function ap(){return`#${Ae(this.r)}${Ae(this.g)}${Ae(this.b)}${Ae((isNaN(this.opacity)?1:this.opacity)*255)}`}function hs(){const t=Yn(this.opacity);return`${t===1?"rgb(":"rgba("}${xe(this.r)}, ${xe(this.g)}, ${xe(this.b)}${t===1?")":`, ${t})`}`}function Yn(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function xe(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function Ae(t){return t=xe(t),(t<16?"0":"")+t.toString(16)}function ps(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new Ht(t,e,n,r)}function Ou(t){if(t instanceof Ht)return new Ht(t.h,t.s,t.l,t.opacity);if(t instanceof pn||(t=be(t)),!t)return new Ht;if(t instanceof Ht)return t;t=t.rgb();var e=t.r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),s=Math.max(e,n,r),u=NaN,o=s-i,a=(s+i)/2;return o?(e===s?u=(n-r)/o+(n<r)*6:n===s?u=(r-e)/o+2:u=(e-n)/o+4,o/=a<.5?s+i:2-s-i,u*=60):o=a>0&&a<1?0:u,new Ht(u,o,a,t.opacity)}function cp(t,e,n,r){return arguments.length===1?Ou(t):new Ht(t,e,n,r??1)}function Ht(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}pi(Ht,cp,Ru(pn,{brighter(t){return t=t==null?Xn:Math.pow(Xn,t),new Ht(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?cn:Math.pow(cn,t),new Ht(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new Mt(Ar(t>=240?t-240:t+120,i,r),Ar(t,i,r),Ar(t<120?t+240:t-120,i,r),this.opacity)},clamp(){return new Ht(ds(this.h),Fn(this.s),Fn(this.l),Yn(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=Yn(this.opacity);return`${t===1?"hsl(":"hsla("}${ds(this.h)}, ${Fn(this.s)*100}%, ${Fn(this.l)*100}%${t===1?")":`, ${t})`}`}}));function ds(t){return t=(t||0)%360,t<0?t+360:t}function Fn(t){return Math.max(0,Math.min(1,t||0))}function Ar(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}const di=t=>()=>t;function lp(t,e){return function(n){return t+n*e}}function fp(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}function hp(t){return(t=+t)==1?Lu:function(e,n){return n-e?fp(e,n,t):di(isNaN(e)?n:e)}}function Lu(t,e){var n=e-t;return n?lp(t,n):di(isNaN(t)?e:t)}const Gn=function t(e){var n=hp(e);function r(i,s){var u=n((i=Ur(i)).r,(s=Ur(s)).r),o=n(i.g,s.g),a=n(i.b,s.b),l=Lu(i.opacity,s.opacity);return function(c){return i.r=u(c),i.g=o(c),i.b=a(c),i.opacity=l(c),i+""}}return r.gamma=t,r}(1);function pp(t,e){e||(e=[]);var n=t?Math.min(e.length,t.length):0,r=e.slice(),i;return function(s){for(i=0;i<n;++i)r[i]=t[i]*(1-s)+e[i]*s;return r}}function dp(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function mp(t,e){var n=e?e.length:0,r=t?Math.min(n,t.length):0,i=new Array(r),s=new Array(n),u;for(u=0;u<r;++u)i[u]=mi(t[u],e[u]);for(;u<n;++u)s[u]=e[u];return function(o){for(u=0;u<r;++u)s[u]=i[u](o);return s}}function gp(t,e){var n=new Date;return t=+t,e=+e,function(r){return n.setTime(t*(1-r)+e*r),n}}function qt(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function Dp(t,e){var n={},r={},i;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(i in e)i in t?n[i]=mi(t[i],e[i]):r[i]=e[i];return function(s){for(i in n)r[i]=n[i](s);return r}}var zr=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Cr=new RegExp(zr.source,"g");function vp(t){return function(){return t}}function yp(t){return function(e){return t(e)+""}}function ku(t,e){var n=zr.lastIndex=Cr.lastIndex=0,r,i,s,u=-1,o=[],a=[];for(t=t+"",e=e+"";(r=zr.exec(t))&&(i=Cr.exec(e));)(s=i.index)>n&&(s=e.slice(n,s),o[u]?o[u]+=s:o[++u]=s),(r=r[0])===(i=i[0])?o[u]?o[u]+=i:o[++u]=i:(o[++u]=null,a.push({i:u,x:qt(r,i)})),n=Cr.lastIndex;return n<e.length&&(s=e.slice(n),o[u]?o[u]+=s:o[++u]=s),o.length<2?a[0]?yp(a[0].x):vp(e):(e=a.length,function(l){for(var c=0,f;c<e;++c)o[(f=a[c]).i]=f.x(l);return o.join("")})}function mi(t,e){var n=typeof e,r;return e==null||n==="boolean"?di(e):(n==="number"?qt:n==="string"?(r=be(e))?(e=r,Gn):ku:e instanceof be?Gn:e instanceof Date?gp:dp(e)?pp:Array.isArray(e)?mp:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?Dp:qt)(t,e)}function wp(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}var ms=180/Math.PI,qr={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function $u(t,e,n,r,i,s){var u,o,a;return(u=Math.sqrt(t*t+e*e))&&(t/=u,e/=u),(a=t*n+e*r)&&(n-=t*a,r-=e*a),(o=Math.sqrt(n*n+r*r))&&(n/=o,r/=o,a/=o),t*r<e*n&&(t=-t,e=-e,a=-a,u=-u),{translateX:i,translateY:s,rotate:Math.atan2(e,t)*ms,skewX:Math.atan(a)*ms,scaleX:u,scaleY:o}}var An;function Ep(t){const e=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(t+"");return e.isIdentity?qr:$u(e.a,e.b,e.c,e.d,e.e,e.f)}function Fp(t){return t==null||(An||(An=document.createElementNS("http://www.w3.org/2000/svg","g")),An.setAttribute("transform",t),!(t=An.transform.baseVal.consolidate()))?qr:(t=t.matrix,$u(t.a,t.b,t.c,t.d,t.e,t.f))}function Uu(t,e,n,r){function i(l){return l.length?l.pop()+" ":""}function s(l,c,f,h,d,g){if(l!==f||c!==h){var p=d.push("translate(",null,e,null,n);g.push({i:p-4,x:qt(l,f)},{i:p-2,x:qt(c,h)})}else(f||h)&&d.push("translate("+f+e+h+n)}function u(l,c,f,h){l!==c?(l-c>180?c+=360:c-l>180&&(l+=360),h.push({i:f.push(i(f)+"rotate(",null,r)-2,x:qt(l,c)})):c&&f.push(i(f)+"rotate("+c+r)}function o(l,c,f,h){l!==c?h.push({i:f.push(i(f)+"skewX(",null,r)-2,x:qt(l,c)}):c&&f.push(i(f)+"skewX("+c+r)}function a(l,c,f,h,d,g){if(l!==f||c!==h){var p=d.push(i(d)+"scale(",null,",",null,")");g.push({i:p-4,x:qt(l,f)},{i:p-2,x:qt(c,h)})}else(f!==1||h!==1)&&d.push(i(d)+"scale("+f+","+h+")")}return function(l,c){var f=[],h=[];return l=t(l),c=t(c),s(l.translateX,l.translateY,c.translateX,c.translateY,f,h),u(l.rotate,c.rotate,f,h),o(l.skewX,c.skewX,f,h),a(l.scaleX,l.scaleY,c.scaleX,c.scaleY,f,h),l=c=null,function(d){for(var g=-1,p=h.length,m;++g<p;)f[(m=h[g]).i]=m.x(d);return f.join("")}}}var Ap=Uu(Ep,"px, ","px)","deg)"),Cp=Uu(Fp,", ",")",")"),We=0,je=0,Ke=0,zu=1e3,Jn,tn,Kn=0,Be=0,hr=0,fn=typeof performance=="object"&&performance.now?performance:Date,qu=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function gi(){return Be||(qu(_p),Be=fn.now()+hr)}function _p(){Be=0}function Qn(){this._call=this._time=this._next=null}Qn.prototype=Hu.prototype={constructor:Qn,restart:function(t,e,n){if(typeof t!="function")throw new TypeError("callback is not a function");n=(n==null?gi():+n)+(e==null?0:+e),!this._next&&tn!==this&&(tn?tn._next=this:Jn=this,tn=this),this._call=t,this._time=n,Hr()},stop:function(){this._call&&(this._call=null,this._time=1/0,Hr())}};function Hu(t,e,n){var r=new Qn;return r.restart(t,e,n),r}function xp(){gi(),++We;for(var t=Jn,e;t;)(e=Be-t._time)>=0&&t._call.call(void 0,e),t=t._next;--We}function gs(){Be=(Kn=fn.now())+hr,We=je=0;try{xp()}finally{We=0,Bp(),Be=0}}function bp(){var t=fn.now(),e=t-Kn;e>zu&&(hr-=e,Kn=t)}function Bp(){for(var t,e=Jn,n,r=1/0;e;)e._call?(r>e._time&&(r=e._time),t=e,e=e._next):(n=e._next,e._next=null,e=t?t._next=n:Jn=n);tn=t,Hr(r)}function Hr(t){if(!We){je&&(je=clearTimeout(je));var e=t-Be;e>24?(t<1/0&&(je=setTimeout(gs,t-fn.now()-hr)),Ke&&(Ke=clearInterval(Ke))):(Ke||(Kn=fn.now(),Ke=setInterval(bp,zu)),We=1,qu(gs))}}function Ds(t,e,n){var r=new Qn;return e=e==null?0:+e,r.restart(i=>{r.stop(),t(i+e)},e,n),r}var Mp=Fu("start","end","cancel","interrupt"),Sp=[],Vu=0,vs=1,Vr=2,Tn=3,ys=4,Wr=5,In=6;function pr(t,e,n,r,i,s){var u=t.__transition;if(!u)t.__transition={};else if(n in u)return;Np(t,n,{name:e,index:r,group:i,on:Mp,tween:Sp,time:s.time,delay:s.delay,duration:s.duration,ease:s.ease,timer:null,state:Vu})}function Di(t,e){var n=Yt(t,e);if(n.state>Vu)throw new Error("too late; already scheduled");return n}function ee(t,e){var n=Yt(t,e);if(n.state>Tn)throw new Error("too late; already running");return n}function Yt(t,e){var n=t.__transition;if(!n||!(n=n[e]))throw new Error("transition not found");return n}function Np(t,e,n){var r=t.__transition,i;r[e]=n,n.timer=Hu(s,0,n.time);function s(l){n.state=vs,n.timer.restart(u,n.delay,n.time),n.delay<=l&&u(l-n.delay)}function u(l){var c,f,h,d;if(n.state!==vs)return a();for(c in r)if(d=r[c],d.name===n.name){if(d.state===Tn)return Ds(u);d.state===ys?(d.state=In,d.timer.stop(),d.on.call("interrupt",t,t.__data__,d.index,d.group),delete r[c]):+c<e&&(d.state=In,d.timer.stop(),d.on.call("cancel",t,t.__data__,d.index,d.group),delete r[c])}if(Ds(function(){n.state===Tn&&(n.state=ys,n.timer.restart(o,n.delay,n.time),o(l))}),n.state=Vr,n.on.call("start",t,t.__data__,n.index,n.group),n.state===Vr){for(n.state=Tn,i=new Array(h=n.tween.length),c=0,f=-1;c<h;++c)(d=n.tween[c].value.call(t,t.__data__,n.index,n.group))&&(i[++f]=d);i.length=f+1}}function o(l){for(var c=l<n.duration?n.ease.call(null,l/n.duration):(n.timer.restart(a),n.state=Wr,1),f=-1,h=i.length;++f<h;)i[f].call(t,c);n.state===Wr&&(n.on.call("end",t,t.__data__,n.index,n.group),a())}function a(){n.state=In,n.timer.stop(),delete r[e];for(var l in r)return;delete t.__transition}}function Tp(t,e){var n=t.__transition,r,i,s=!0,u;if(n){e=e==null?null:e+"";for(u in n){if((r=n[u]).name!==e){s=!1;continue}i=r.state>Vr&&r.state<Wr,r.state=In,r.timer.stop(),r.on.call(i?"interrupt":"cancel",t,t.__data__,r.index,r.group),delete n[u]}s&&delete t.__transition}}function Ip(t){return this.each(function(){Tp(this,t)})}function Pp(t,e){var n,r;return function(){var i=ee(this,t),s=i.tween;if(s!==n){r=n=s;for(var u=0,o=r.length;u<o;++u)if(r[u].name===e){r=r.slice(),r.splice(u,1);break}}i.tween=r}}function Rp(t,e,n){var r,i;if(typeof n!="function")throw new Error;return function(){var s=ee(this,t),u=s.tween;if(u!==r){i=(r=u).slice();for(var o={name:e,value:n},a=0,l=i.length;a<l;++a)if(i[a].name===e){i[a]=o;break}a===l&&i.push(o)}s.tween=i}}function Op(t,e){var n=this._id;if(t+="",arguments.length<2){for(var r=Yt(this.node(),n).tween,i=0,s=r.length,u;i<s;++i)if((u=r[i]).name===t)return u.value;return null}return this.each((e==null?Pp:Rp)(n,t,e))}function vi(t,e,n){var r=t._id;return t.each(function(){var i=ee(this,r);(i.value||(i.value={}))[e]=n.apply(this,arguments)}),function(i){return Yt(i,r).value[e]}}function Wu(t,e){var n;return(typeof e=="number"?qt:e instanceof be?Gn:(n=be(e))?(e=n,Gn):ku)(t,e)}function Lp(t){return function(){this.removeAttribute(t)}}function kp(t){return function(){this.removeAttributeNS(t.space,t.local)}}function $p(t,e,n){var r,i=n+"",s;return function(){var u=this.getAttribute(t);return u===i?null:u===r?s:s=e(r=u,n)}}function Up(t,e,n){var r,i=n+"",s;return function(){var u=this.getAttributeNS(t.space,t.local);return u===i?null:u===r?s:s=e(r=u,n)}}function zp(t,e,n){var r,i,s;return function(){var u,o=n(this),a;return o==null?void this.removeAttribute(t):(u=this.getAttribute(t),a=o+"",u===a?null:u===r&&a===i?s:(i=a,s=e(r=u,o)))}}function qp(t,e,n){var r,i,s;return function(){var u,o=n(this),a;return o==null?void this.removeAttributeNS(t.space,t.local):(u=this.getAttributeNS(t.space,t.local),a=o+"",u===a?null:u===r&&a===i?s:(i=a,s=e(r=u,o)))}}function Hp(t,e){var n=fr(t),r=n==="transform"?Cp:Wu;return this.attrTween(t,typeof e=="function"?(n.local?qp:zp)(n,r,vi(this,"attr."+t,e)):e==null?(n.local?kp:Lp)(n):(n.local?Up:$p)(n,r,e))}function Vp(t,e){return function(n){this.setAttribute(t,e.call(this,n))}}function Wp(t,e){return function(n){this.setAttributeNS(t.space,t.local,e.call(this,n))}}function Zp(t,e){var n,r;function i(){var s=e.apply(this,arguments);return s!==r&&(n=(r=s)&&Wp(t,s)),n}return i._value=e,i}function Xp(t,e){var n,r;function i(){var s=e.apply(this,arguments);return s!==r&&(n=(r=s)&&Vp(t,s)),n}return i._value=e,i}function Yp(t,e){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(e==null)return this.tween(n,null);if(typeof e!="function")throw new Error;var r=fr(t);return this.tween(n,(r.local?Zp:Xp)(r,e))}function Gp(t,e){return function(){Di(this,t).delay=+e.apply(this,arguments)}}function Jp(t,e){return e=+e,function(){Di(this,t).delay=e}}function Kp(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?Gp:Jp)(e,t)):Yt(this.node(),e).delay}function Qp(t,e){return function(){ee(this,t).duration=+e.apply(this,arguments)}}function jp(t,e){return e=+e,function(){ee(this,t).duration=e}}function td(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?Qp:jp)(e,t)):Yt(this.node(),e).duration}function ed(t,e){if(typeof e!="function")throw new Error;return function(){ee(this,t).ease=e}}function nd(t){var e=this._id;return arguments.length?this.each(ed(e,t)):Yt(this.node(),e).ease}function rd(t,e){return function(){var n=e.apply(this,arguments);if(typeof n!="function")throw new Error;ee(this,t).ease=n}}function id(t){if(typeof t!="function")throw new Error;return this.each(rd(this._id,t))}function sd(t){typeof t!="function"&&(t=_u(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var s=e[i],u=s.length,o=r[i]=[],a,l=0;l<u;++l)(a=s[l])&&t.call(a,a.__data__,l,s)&&o.push(a);return new ce(r,this._parents,this._name,this._id)}function ud(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,r=e.length,i=n.length,s=Math.min(r,i),u=new Array(r),o=0;o<s;++o)for(var a=e[o],l=n[o],c=a.length,f=u[o]=new Array(c),h,d=0;d<c;++d)(h=a[d]||l[d])&&(f[d]=h);for(;o<r;++o)u[o]=e[o];return new ce(u,this._parents,this._name,this._id)}function od(t){return(t+"").trim().split(/^|\s+/).every(function(e){var n=e.indexOf(".");return n>=0&&(e=e.slice(0,n)),!e||e==="start"})}function ad(t,e,n){var r,i,s=od(e)?Di:ee;return function(){var u=s(this,t),o=u.on;o!==r&&(i=(r=o).copy()).on(e,n),u.on=i}}function cd(t,e){var n=this._id;return arguments.length<2?Yt(this.node(),n).on.on(t):this.each(ad(n,t,e))}function ld(t){return function(){var e=this.parentNode;for(var n in this.__transition)if(+n!==t)return;e&&e.removeChild(this)}}function fd(){return this.on("end.remove",ld(this._id))}function hd(t){var e=this._name,n=this._id;typeof t!="function"&&(t=fi(t));for(var r=this._groups,i=r.length,s=new Array(i),u=0;u<i;++u)for(var o=r[u],a=o.length,l=s[u]=new Array(a),c,f,h=0;h<a;++h)(c=o[h])&&(f=t.call(c,c.__data__,h,o))&&("__data__"in c&&(f.__data__=c.__data__),l[h]=f,pr(l[h],e,n,h,l,Yt(c,n)));return new ce(s,this._parents,e,n)}function pd(t){var e=this._name,n=this._id;typeof t!="function"&&(t=Cu(t));for(var r=this._groups,i=r.length,s=[],u=[],o=0;o<i;++o)for(var a=r[o],l=a.length,c,f=0;f<l;++f)if(c=a[f]){for(var h=t.call(c,c.__data__,f,a),d,g=Yt(c,n),p=0,m=h.length;p<m;++p)(d=h[p])&&pr(d,e,n,p,h,g);s.push(h),u.push(c)}return new ce(s,u,e,n)}var dd=hn.prototype.constructor;function md(){return new dd(this._groups,this._parents)}function gd(t,e){var n,r,i;return function(){var s=Ve(this,t),u=(this.style.removeProperty(t),Ve(this,t));return s===u?null:s===n&&u===r?i:i=e(n=s,r=u)}}function Zu(t){return function(){this.style.removeProperty(t)}}function Dd(t,e,n){var r,i=n+"",s;return function(){var u=Ve(this,t);return u===i?null:u===r?s:s=e(r=u,n)}}function vd(t,e,n){var r,i,s;return function(){var u=Ve(this,t),o=n(this),a=o+"";return o==null&&(a=o=(this.style.removeProperty(t),Ve(this,t))),u===a?null:u===r&&a===i?s:(i=a,s=e(r=u,o))}}function yd(t,e){var n,r,i,s="style."+e,u="end."+s,o;return function(){var a=ee(this,t),l=a.on,c=a.value[s]==null?o||(o=Zu(e)):void 0;(l!==n||i!==c)&&(r=(n=l).copy()).on(u,i=c),a.on=r}}function wd(t,e,n){var r=(t+="")=="transform"?Ap:Wu;return e==null?this.styleTween(t,gd(t,r)).on("end.style."+t,Zu(t)):typeof e=="function"?this.styleTween(t,vd(t,r,vi(this,"style."+t,e))).each(yd(this._id,t)):this.styleTween(t,Dd(t,r,e),n).on("end.style."+t,null)}function Ed(t,e,n){return function(r){this.style.setProperty(t,e.call(this,r),n)}}function Fd(t,e,n){var r,i;function s(){var u=e.apply(this,arguments);return u!==i&&(r=(i=u)&&Ed(t,u,n)),r}return s._value=e,s}function Ad(t,e,n){var r="style."+(t+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(e==null)return this.tween(r,null);if(typeof e!="function")throw new Error;return this.tween(r,Fd(t,e,n??""))}function Cd(t){return function(){this.textContent=t}}function _d(t){return function(){var e=t(this);this.textContent=e??""}}function xd(t){return this.tween("text",typeof t=="function"?_d(vi(this,"text",t)):Cd(t==null?"":t+""))}function bd(t){return function(e){this.textContent=t.call(this,e)}}function Bd(t){var e,n;function r(){var i=t.apply(this,arguments);return i!==n&&(e=(n=i)&&bd(i)),e}return r._value=t,r}function Md(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(t==null)return this.tween(e,null);if(typeof t!="function")throw new Error;return this.tween(e,Bd(t))}function Sd(){for(var t=this._name,e=this._id,n=Xu(),r=this._groups,i=r.length,s=0;s<i;++s)for(var u=r[s],o=u.length,a,l=0;l<o;++l)if(a=u[l]){var c=Yt(a,e);pr(a,t,n,l,u,{time:c.time+c.delay+c.duration,delay:0,duration:c.duration,ease:c.ease})}return new ce(r,this._parents,t,n)}function Nd(){var t,e,n=this,r=n._id,i=n.size();return new Promise(function(s,u){var o={value:u},a={value:function(){--i===0&&s()}};n.each(function(){var l=ee(this,r),c=l.on;c!==t&&(e=(t=c).copy(),e._.cancel.push(o),e._.interrupt.push(o),e._.end.push(a)),l.on=e}),i===0&&s()})}var Td=0;function ce(t,e,n,r){this._groups=t,this._parents=e,this._name=n,this._id=r}function Xu(){return++Td}var re=hn.prototype;ce.prototype={constructor:ce,select:hd,selectAll:pd,selectChild:re.selectChild,selectChildren:re.selectChildren,filter:sd,merge:ud,selection:md,transition:Sd,call:re.call,nodes:re.nodes,node:re.node,size:re.size,empty:re.empty,each:re.each,on:cd,attr:Hp,attrTween:Yp,style:wd,styleTween:Ad,text:xd,textTween:Md,remove:fd,tween:Op,delay:Kp,duration:td,ease:nd,easeVarying:id,end:Nd,[Symbol.iterator]:re[Symbol.iterator]};function Id(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}var Pd={time:null,delay:0,duration:250,ease:Id};function Rd(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))throw new Error(`transition ${e} not found`);return n}function Od(t){var e,n;t instanceof ce?(e=t._id,t=t._name):(e=Xu(),(n=Pd).time=gi(),t=t==null?null:t+"");for(var r=this._groups,i=r.length,s=0;s<i;++s)for(var u=r[s],o=u.length,a,l=0;l<o;++l)(a=u[l])&&pr(a,t,e,l,u,n||Rd(a,e));return new ce(r,this._parents,t,e)}hn.prototype.interrupt=Ip;hn.prototype.transition=Od;const Zr=Math.PI,Xr=2*Zr,Ee=1e-6,Ld=Xr-Ee;function Yu(t){this._+=t[0];for(let e=1,n=t.length;e<n;++e)this._+=arguments[e]+t[e]}function kd(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return Yu;const n=10**e;return function(r){this._+=r[0];for(let i=1,s=r.length;i<s;++i)this._+=Math.round(arguments[i]*n)/n+r[i]}}class $d{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?Yu:kd(e)}moveTo(e,n){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,n){this._append`L${this._x1=+e},${this._y1=+n}`}quadraticCurveTo(e,n,r,i){this._append`Q${+e},${+n},${this._x1=+r},${this._y1=+i}`}bezierCurveTo(e,n,r,i,s,u){this._append`C${+e},${+n},${+r},${+i},${this._x1=+s},${this._y1=+u}`}arcTo(e,n,r,i,s){if(e=+e,n=+n,r=+r,i=+i,s=+s,s<0)throw new Error(`negative radius: ${s}`);let u=this._x1,o=this._y1,a=r-e,l=i-n,c=u-e,f=o-n,h=c*c+f*f;if(this._x1===null)this._append`M${this._x1=e},${this._y1=n}`;else if(h>Ee)if(!(Math.abs(f*a-l*c)>Ee)||!s)this._append`L${this._x1=e},${this._y1=n}`;else{let d=r-u,g=i-o,p=a*a+l*l,m=d*d+g*g,v=Math.sqrt(p),w=Math.sqrt(h),y=s*Math.tan((Zr-Math.acos((p+h-m)/(2*v*w)))/2),F=y/w,A=y/v;Math.abs(F-1)>Ee&&this._append`L${e+F*c},${n+F*f}`,this._append`A${s},${s},0,0,${+(f*d>c*g)},${this._x1=e+A*a},${this._y1=n+A*l}`}}arc(e,n,r,i,s,u){if(e=+e,n=+n,r=+r,u=!!u,r<0)throw new Error(`negative radius: ${r}`);let o=r*Math.cos(i),a=r*Math.sin(i),l=e+o,c=n+a,f=1^u,h=u?i-s:s-i;this._x1===null?this._append`M${l},${c}`:(Math.abs(this._x1-l)>Ee||Math.abs(this._y1-c)>Ee)&&this._append`L${l},${c}`,r&&(h<0&&(h=h%Xr+Xr),h>Ld?this._append`A${r},${r},0,1,${f},${e-o},${n-a}A${r},${r},0,1,${f},${this._x1=l},${this._y1=c}`:h>Ee&&this._append`A${r},${r},0,${+(h>=Zr)},${f},${this._x1=e+r*Math.cos(s)},${this._y1=n+r*Math.sin(s)}`)}rect(e,n,r,i){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}h${r=+r}v${+i}h${-r}Z`}toString(){return this._}}function Ud(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function jn(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,r=t.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+t.slice(n+1)]}function Ze(t){return t=jn(Math.abs(t)),t?t[1]:NaN}function zd(t,e){return function(n,r){for(var i=n.length,s=[],u=0,o=t[0],a=0;i>0&&o>0&&(a+o+1>r&&(o=Math.max(1,r-a)),s.push(n.substring(i-=o,i+o)),!((a+=o+1)>r));)o=t[u=(u+1)%t.length];return s.reverse().join(e)}}function qd(t){return function(e){return e.replace(/[0-9]/g,function(n){return t[+n]})}}var Hd=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function tr(t){if(!(e=Hd.exec(t)))throw new Error("invalid format: "+t);var e;return new yi({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}tr.prototype=yi.prototype;function yi(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}yi.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function Vd(t){t:for(var e=t.length,n=1,r=-1,i;n<e;++n)switch(t[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+t[n])break t;r>0&&(r=0);break}return r>0?t.slice(0,r)+t.slice(i+1):t}var Gu;function Wd(t,e){var n=jn(t,e);if(!n)return t+"";var r=n[0],i=n[1],s=i-(Gu=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,u=r.length;return s===u?r:s>u?r+new Array(s-u+1).join("0"):s>0?r.slice(0,s)+"."+r.slice(s):"0."+new Array(1-s).join("0")+jn(t,Math.max(0,e+s-1))[0]}function ws(t,e){var n=jn(t,e);if(!n)return t+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const Es={"%":(t,e)=>(t*100).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:Ud,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>ws(t*100,e),r:ws,s:Wd,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function Fs(t){return t}var As=Array.prototype.map,Cs=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function Zd(t){var e=t.grouping===void 0||t.thousands===void 0?Fs:zd(As.call(t.grouping,Number),t.thousands+""),n=t.currency===void 0?"":t.currency[0]+"",r=t.currency===void 0?"":t.currency[1]+"",i=t.decimal===void 0?".":t.decimal+"",s=t.numerals===void 0?Fs:qd(As.call(t.numerals,String)),u=t.percent===void 0?"%":t.percent+"",o=t.minus===void 0?"−":t.minus+"",a=t.nan===void 0?"NaN":t.nan+"";function l(f){f=tr(f);var h=f.fill,d=f.align,g=f.sign,p=f.symbol,m=f.zero,v=f.width,w=f.comma,y=f.precision,F=f.trim,A=f.type;A==="n"?(w=!0,A="g"):Es[A]||(y===void 0&&(y=12),F=!0,A="g"),(m||h==="0"&&d==="=")&&(m=!0,h="0",d="=");var x=p==="$"?n:p==="#"&&/[boxX]/.test(A)?"0"+A.toLowerCase():"",b=p==="$"?r:/[%p]/.test(A)?u:"",_=Es[A],N=/[defgprs%]/.test(A);y=y===void 0?6:/[gprs]/.test(A)?Math.max(1,Math.min(21,y)):Math.max(0,Math.min(20,y));function O(M){var $=x,q=b,H,G,V;if(A==="c")q=_(M)+q,M="";else{M=+M;var st=M<0||1/M<0;if(M=isNaN(M)?a:_(Math.abs(M),y),F&&(M=Vd(M)),st&&+M==0&&g!=="+"&&(st=!1),$=(st?g==="("?g:o:g==="-"||g==="("?"":g)+$,q=(A==="s"?Cs[8+Gu/3]:"")+q+(st&&g==="("?")":""),N){for(H=-1,G=M.length;++H<G;)if(V=M.charCodeAt(H),48>V||V>57){q=(V===46?i+M.slice(H+1):M.slice(H))+q,M=M.slice(0,H);break}}}w&&!m&&(M=e(M,1/0));var ot=$.length+M.length+q.length,K=ot<v?new Array(v-ot+1).join(h):"";switch(w&&m&&(M=e(K+M,K.length?v-q.length:1/0),K=""),d){case"<":M=$+M+q+K;break;case"=":M=$+K+M+q;break;case"^":M=K.slice(0,ot=K.length>>1)+$+M+q+K.slice(ot);break;default:M=K+$+M+q;break}return s(M)}return O.toString=function(){return f+""},O}function c(f,h){var d=l((f=tr(f),f.type="f",f)),g=Math.max(-8,Math.min(8,Math.floor(Ze(h)/3)))*3,p=Math.pow(10,-g),m=Cs[8+g/3];return function(v){return d(p*v)+m}}return{format:l,formatPrefix:c}}var Cn,Ju,Ku;Xd({thousands:",",grouping:[3],currency:["$",""]});function Xd(t){return Cn=Zd(t),Ju=Cn.format,Ku=Cn.formatPrefix,Cn}function Yd(t){return Math.max(0,-Ze(Math.abs(t)))}function Gd(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Ze(e)/3)))*3-Ze(Math.abs(t)))}function Jd(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,Ze(e)-Ze(t))+1}function Kd(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}function Qd(t){return function(){return t}}function jd(t){return+t}var _s=[0,1];function ke(t){return t}function Yr(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:Qd(isNaN(e)?NaN:.5)}function tm(t,e){var n;return t>e&&(n=t,t=e,e=n),function(r){return Math.max(t,Math.min(e,r))}}function em(t,e,n){var r=t[0],i=t[1],s=e[0],u=e[1];return i<r?(r=Yr(i,r),s=n(u,s)):(r=Yr(r,i),s=n(s,u)),function(o){return s(r(o))}}function nm(t,e,n){var r=Math.min(t.length,e.length)-1,i=new Array(r),s=new Array(r),u=-1;for(t[r]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++u<r;)i[u]=Yr(t[u],t[u+1]),s[u]=n(e[u],e[u+1]);return function(o){var a=th(t,o,1,r)-1;return s[a](i[a](o))}}function rm(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function im(){var t=_s,e=_s,n=mi,r,i,s,u=ke,o,a,l;function c(){var h=Math.min(t.length,e.length);return u!==ke&&(u=tm(t[0],t[h-1])),o=h>2?nm:em,a=l=null,f}function f(h){return h==null||isNaN(h=+h)?s:(a||(a=o(t.map(r),e,n)))(r(u(h)))}return f.invert=function(h){return u(i((l||(l=o(e,t.map(r),qt)))(h)))},f.domain=function(h){return arguments.length?(t=Array.from(h,jd),c()):t.slice()},f.range=function(h){return arguments.length?(e=Array.from(h),c()):e.slice()},f.rangeRound=function(h){return e=Array.from(h),n=wp,c()},f.clamp=function(h){return arguments.length?(u=h?!0:ke,c()):u!==ke},f.interpolate=function(h){return arguments.length?(n=h,c()):n},f.unknown=function(h){return arguments.length?(s=h,f):s},function(h,d){return r=h,i=d,c()}}function sm(){return im()(ke,ke)}function um(t,e,n,r){var i=sh(t,e,n),s;switch(r=tr(r??",f"),r.type){case"s":{var u=Math.max(Math.abs(t),Math.abs(e));return r.precision==null&&!isNaN(s=Gd(i,u))&&(r.precision=s),Ku(r,u)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(s=Jd(i,Math.max(Math.abs(t),Math.abs(e))))&&(r.precision=s-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(s=Yd(i))&&(r.precision=s-(r.type==="%")*2);break}}return Ju(r)}function om(t){var e=t.domain;return t.ticks=function(n){var r=e();return ih(r[0],r[r.length-1],n??10)},t.tickFormat=function(n,r){var i=e();return um(i[0],i[i.length-1],n??10,r)},t.nice=function(n){n==null&&(n=10);var r=e(),i=0,s=r.length-1,u=r[i],o=r[s],a,l,c=10;for(o<u&&(l=u,u=o,o=l,l=i,i=s,s=l);c-- >0;){if(l=Lr(u,o,n),l===a)return r[i]=u,r[s]=o,e(r);if(l>0)u=Math.floor(u/l)*l,o=Math.ceil(o/l)*l;else if(l<0)u=Math.ceil(u*l)/l,o=Math.floor(o*l)/l;else break;a=l}return t},t}function Gr(){var t=sm();return t.copy=function(){return rm(t,Gr())},Kd.apply(t,arguments),om(t)}function Oe(t){return function(){return t}}function am(t){let e=3;return t.digits=function(n){if(!arguments.length)return e;if(n==null)e=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);e=r}return t},()=>new $d(e)}function cm(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function Qu(t){this._context=t}Qu.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e);break}}};function lm(t){return new Qu(t)}function fm(t){return t[0]}function hm(t){return t[1]}function pm(t,e){var n=Oe(!0),r=null,i=lm,s=null,u=am(o);t=typeof t=="function"?t:t===void 0?fm:Oe(t),e=typeof e=="function"?e:e===void 0?hm:Oe(e);function o(a){var l,c=(a=cm(a)).length,f,h=!1,d;for(r==null&&(s=i(d=u())),l=0;l<=c;++l)!(l<c&&n(f=a[l],l,a))===h&&((h=!h)?s.lineStart():s.lineEnd()),h&&s.point(+t(f,l,a),+e(f,l,a));if(d)return s=null,d+""||null}return o.x=function(a){return arguments.length?(t=typeof a=="function"?a:Oe(+a),o):t},o.y=function(a){return arguments.length?(e=typeof a=="function"?a:Oe(+a),o):e},o.defined=function(a){return arguments.length?(n=typeof a=="function"?a:Oe(!!a),o):n},o.curve=function(a){return arguments.length?(i=a,r!=null&&(s=i(r)),o):i},o.context=function(a){return arguments.length?(a==null?r=s=null:s=i(r=a),o):r},o}function en(t,e,n){this.k=t,this.x=e,this.y=n}en.prototype={constructor:en,scale:function(t){return t===1?this:new en(this.k*t,this.x,this.y)},translate:function(t,e){return t===0&e===0?this:new en(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};en.prototype;var _r={exports:{}},xs;function dm(){return xs||(xs=1,function(t){(function(e,n){t.exports?t.exports=n():window.ysFixWebmDuration=n()})("fix-webm-duration",function(){var e={172351395:{name:"EBML",type:"Container"},646:{name:"EBMLVersion",type:"Uint"},759:{name:"EBMLReadVersion",type:"Uint"},754:{name:"EBMLMaxIDLength",type:"Uint"},755:{name:"EBMLMaxSizeLength",type:"Uint"},642:{name:"DocType",type:"String"},647:{name:"DocTypeVersion",type:"Uint"},645:{name:"DocTypeReadVersion",type:"Uint"},108:{name:"Void",type:"Binary"},63:{name:"CRC-32",type:"Binary"},190023271:{name:"SignatureSlot",type:"Container"},16010:{name:"SignatureAlgo",type:"Uint"},16026:{name:"SignatureHash",type:"Uint"},16037:{name:"SignaturePublicKey",type:"Binary"},16053:{name:"Signature",type:"Binary"},15963:{name:"SignatureElements",type:"Container"},15995:{name:"SignatureElementList",type:"Container"},9522:{name:"SignedElement",type:"Binary"},139690087:{name:"Segment",type:"Container"},21863284:{name:"SeekHead",type:"Container"},3515:{name:"Seek",type:"Container"},5035:{name:"SeekID",type:"Binary"},5036:{name:"SeekPosition",type:"Uint"},88713574:{name:"Info",type:"Container"},13220:{name:"SegmentUID",type:"Binary"},13188:{name:"SegmentFilename",type:"String"},1882403:{name:"PrevUID",type:"Binary"},1868715:{name:"PrevFilename",type:"String"},2013475:{name:"NextUID",type:"Binary"},1999803:{name:"NextFilename",type:"String"},1092:{name:"SegmentFamily",type:"Binary"},10532:{name:"ChapterTranslate",type:"Container"},10748:{name:"ChapterTranslateEditionUID",type:"Uint"},10687:{name:"ChapterTranslateCodec",type:"Uint"},10661:{name:"ChapterTranslateID",type:"Binary"},710577:{name:"TimecodeScale",type:"Uint"},1161:{name:"Duration",type:"Float"},1121:{name:"DateUTC",type:"Date"},15273:{name:"Title",type:"String"},3456:{name:"MuxingApp",type:"String"},5953:{name:"WritingApp",type:"String"},103:{name:"Timecode",type:"Uint"},6228:{name:"SilentTracks",type:"Container"},6359:{name:"SilentTrackNumber",type:"Uint"},39:{name:"Position",type:"Uint"},43:{name:"PrevSize",type:"Uint"},35:{name:"SimpleBlock",type:"Binary"},32:{name:"BlockGroup",type:"Container"},33:{name:"Block",type:"Binary"},34:{name:"BlockVirtual",type:"Binary"},13729:{name:"BlockAdditions",type:"Container"},38:{name:"BlockMore",type:"Container"},110:{name:"BlockAddID",type:"Uint"},37:{name:"BlockAdditional",type:"Binary"},27:{name:"BlockDuration",type:"Uint"},122:{name:"ReferencePriority",type:"Uint"},123:{name:"ReferenceBlock",type:"Int"},125:{name:"ReferenceVirtual",type:"Int"},36:{name:"CodecState",type:"Binary"},13730:{name:"DiscardPadding",type:"Int"},14:{name:"Slices",type:"Container"},104:{name:"TimeSlice",type:"Container"},76:{name:"LaceNumber",type:"Uint"},77:{name:"FrameNumber",type:"Uint"},75:{name:"BlockAdditionID",type:"Uint"},78:{name:"Delay",type:"Uint"},79:{name:"SliceDuration",type:"Uint"},72:{name:"ReferenceFrame",type:"Container"},73:{name:"ReferenceOffset",type:"Uint"},74:{name:"ReferenceTimeCode",type:"Uint"},47:{name:"EncryptedBlock",type:"Binary"},106212971:{name:"Tracks",type:"Container"},46:{name:"TrackEntry",type:"Container"},87:{name:"TrackNumber",type:"Uint"},13253:{name:"TrackUID",type:"Uint"},3:{name:"TrackType",type:"Uint"},57:{name:"FlagEnabled",type:"Uint"},8:{name:"FlagDefault",type:"Uint"},5546:{name:"FlagForced",type:"Uint"},28:{name:"FlagLacing",type:"Uint"},11751:{name:"MinCache",type:"Uint"},11768:{name:"MaxCache",type:"Uint"},254851:{name:"DefaultDuration",type:"Uint"},216698:{name:"DefaultDecodedFieldDuration",type:"Uint"},209231:{name:"TrackTimecodeScale",type:"Float"},4991:{name:"TrackOffset",type:"Int"},5614:{name:"MaxBlockAdditionID",type:"Uint"},4974:{name:"Name",type:"String"},177564:{name:"Language",type:"String"},6:{name:"CodecID",type:"String"},9122:{name:"CodecPrivate",type:"Binary"},362120:{name:"CodecName",type:"String"},13382:{name:"AttachmentLink",type:"Uint"},1742487:{name:"CodecSettings",type:"String"},1785920:{name:"CodecInfoURL",type:"String"},438848:{name:"CodecDownloadURL",type:"String"},42:{name:"CodecDecodeAll",type:"Uint"},12203:{name:"TrackOverlay",type:"Uint"},5802:{name:"CodecDelay",type:"Uint"},5819:{name:"SeekPreRoll",type:"Uint"},9764:{name:"TrackTranslate",type:"Container"},9980:{name:"TrackTranslateEditionUID",type:"Uint"},9919:{name:"TrackTranslateCodec",type:"Uint"},9893:{name:"TrackTranslateTrackID",type:"Binary"},96:{name:"Video",type:"Container"},26:{name:"FlagInterlaced",type:"Uint"},5048:{name:"StereoMode",type:"Uint"},5056:{name:"AlphaMode",type:"Uint"},5049:{name:"OldStereoMode",type:"Uint"},48:{name:"PixelWidth",type:"Uint"},58:{name:"PixelHeight",type:"Uint"},5290:{name:"PixelCropBottom",type:"Uint"},5307:{name:"PixelCropTop",type:"Uint"},5324:{name:"PixelCropLeft",type:"Uint"},5341:{name:"PixelCropRight",type:"Uint"},5296:{name:"DisplayWidth",type:"Uint"},5306:{name:"DisplayHeight",type:"Uint"},5298:{name:"DisplayUnit",type:"Uint"},5299:{name:"AspectRatioType",type:"Uint"},963876:{name:"ColourSpace",type:"Binary"},1029411:{name:"GammaValue",type:"Float"},230371:{name:"FrameRate",type:"Float"},97:{name:"Audio",type:"Container"},53:{name:"SamplingFrequency",type:"Float"},14517:{name:"OutputSamplingFrequency",type:"Float"},31:{name:"Channels",type:"Uint"},15739:{name:"ChannelPositions",type:"Binary"},8804:{name:"BitDepth",type:"Uint"},98:{name:"TrackOperation",type:"Container"},99:{name:"TrackCombinePlanes",type:"Container"},100:{name:"TrackPlane",type:"Container"},101:{name:"TrackPlaneUID",type:"Uint"},102:{name:"TrackPlaneType",type:"Uint"},105:{name:"TrackJoinBlocks",type:"Container"},109:{name:"TrackJoinUID",type:"Uint"},64:{name:"TrickTrackUID",type:"Uint"},65:{name:"TrickTrackSegmentUID",type:"Binary"},70:{name:"TrickTrackFlag",type:"Uint"},71:{name:"TrickMasterTrackUID",type:"Uint"},68:{name:"TrickMasterTrackSegmentUID",type:"Binary"},11648:{name:"ContentEncodings",type:"Container"},8768:{name:"ContentEncoding",type:"Container"},4145:{name:"ContentEncodingOrder",type:"Uint"},4146:{name:"ContentEncodingScope",type:"Uint"},4147:{name:"ContentEncodingType",type:"Uint"},4148:{name:"ContentCompression",type:"Container"},596:{name:"ContentCompAlgo",type:"Uint"},597:{name:"ContentCompSettings",type:"Binary"},4149:{name:"ContentEncryption",type:"Container"},2017:{name:"ContentEncAlgo",type:"Uint"},2018:{name:"ContentEncKeyID",type:"Binary"},2019:{name:"ContentSignature",type:"Binary"},2020:{name:"ContentSigKeyID",type:"Binary"},2021:{name:"ContentSigAlgo",type:"Uint"},2022:{name:"ContentSigHashAlgo",type:"Uint"},206814059:{name:"Cues",type:"Container"},59:{name:"CuePoint",type:"Container"},51:{name:"CueTime",type:"Uint"},55:{name:"CueTrackPositions",type:"Container"},119:{name:"CueTrack",type:"Uint"},113:{name:"CueClusterPosition",type:"Uint"},112:{name:"CueRelativePosition",type:"Uint"},50:{name:"CueDuration",type:"Uint"},4984:{name:"CueBlockNumber",type:"Uint"},106:{name:"CueCodecState",type:"Uint"},91:{name:"CueReference",type:"Container"},22:{name:"CueRefTime",type:"Uint"},23:{name:"CueRefCluster",type:"Uint"},4959:{name:"CueRefNumber",type:"Uint"},107:{name:"CueRefCodecState",type:"Uint"},155296873:{name:"Attachments",type:"Container"},8615:{name:"AttachedFile",type:"Container"},1662:{name:"FileDescription",type:"String"},1646:{name:"FileName",type:"String"},1632:{name:"FileMimeType",type:"String"},1628:{name:"FileData",type:"Binary"},1710:{name:"FileUID",type:"Uint"},1653:{name:"FileReferral",type:"Binary"},1633:{name:"FileUsedStartTime",type:"Uint"},1634:{name:"FileUsedEndTime",type:"Uint"},4433776:{name:"Chapters",type:"Container"},1465:{name:"EditionEntry",type:"Container"},1468:{name:"EditionUID",type:"Uint"},1469:{name:"EditionFlagHidden",type:"Uint"},1499:{name:"EditionFlagDefault",type:"Uint"},1501:{name:"EditionFlagOrdered",type:"Uint"},54:{name:"ChapterAtom",type:"Container"},13252:{name:"ChapterUID",type:"Uint"},5716:{name:"ChapterStringUID",type:"String"},17:{name:"ChapterTimeStart",type:"Uint"},18:{name:"ChapterTimeEnd",type:"Uint"},24:{name:"ChapterFlagHidden",type:"Uint"},1432:{name:"ChapterFlagEnabled",type:"Uint"},11879:{name:"ChapterSegmentUID",type:"Binary"},11964:{name:"ChapterSegmentEditionUID",type:"Uint"},9155:{name:"ChapterPhysicalEquiv",type:"Uint"},15:{name:"ChapterTrack",type:"Container"},9:{name:"ChapterTrackNumber",type:"Uint"},0:{name:"ChapterDisplay",type:"Container"},5:{name:"ChapString",type:"String"},892:{name:"ChapLanguage",type:"String"},894:{name:"ChapCountry",type:"String"},10564:{name:"ChapProcess",type:"Container"},10581:{name:"ChapProcessCodecID",type:"Uint"},1293:{name:"ChapProcessPrivate",type:"Binary"},10513:{name:"ChapProcessCommand",type:"Container"},10530:{name:"ChapProcessTime",type:"Uint"},10547:{name:"ChapProcessData",type:"Binary"},39109479:{name:"Tags",type:"Container"},13171:{name:"Tag",type:"Container"},9152:{name:"Targets",type:"Container"},10442:{name:"TargetTypeValue",type:"Uint"},9162:{name:"TargetType",type:"String"},9157:{name:"TagTrackUID",type:"Uint"},9161:{name:"TagEditionUID",type:"Uint"},9156:{name:"TagChapterUID",type:"Uint"},9158:{name:"TagAttachmentUID",type:"Uint"},10184:{name:"SimpleTag",type:"Container"},1443:{name:"TagName",type:"String"},1146:{name:"TagLanguage",type:"String"},1156:{name:"TagDefault",type:"Uint"},1159:{name:"TagString",type:"String"},1157:{name:"TagBinary",type:"Binary"}};function n(c,f){c.prototype=Object.create(f.prototype),c.prototype.constructor=c}function r(c,f){this.name=c||"Unknown",this.type=f||"Unknown"}r.prototype.updateBySource=function(){},r.prototype.setSource=function(c){this.source=c,this.updateBySource()},r.prototype.updateByData=function(){},r.prototype.setData=function(c){this.data=c,this.updateByData()};function i(c,f){r.call(this,c,f||"Uint")}n(i,r);function s(c){return c.length%2===1?"0"+c:c}i.prototype.updateBySource=function(){this.data="";for(var c=0;c<this.source.length;c++){var f=this.source[c].toString(16);this.data+=s(f)}},i.prototype.updateByData=function(){var c=this.data.length/2;this.source=new Uint8Array(c);for(var f=0;f<c;f++){var h=this.data.substr(f*2,2);this.source[f]=parseInt(h,16)}},i.prototype.getValue=function(){return parseInt(this.data,16)},i.prototype.setValue=function(c){this.setData(s(c.toString(16)))};function u(c,f){r.call(this,c,f||"Float")}n(u,r),u.prototype.getFloatArrayType=function(){return this.source&&this.source.length===4?Float32Array:Float64Array},u.prototype.updateBySource=function(){var c=this.source.reverse(),f=this.getFloatArrayType(),h=new f(c.buffer);this.data=h[0]},u.prototype.updateByData=function(){var c=this.getFloatArrayType(),f=new c([this.data]),h=new Uint8Array(f.buffer);this.source=h.reverse()},u.prototype.getValue=function(){return this.data},u.prototype.setValue=function(c){this.setData(c)};function o(c,f){r.call(this,c,f||"Container")}n(o,r),o.prototype.readByte=function(){return this.source[this.offset++]},o.prototype.readUint=function(){for(var c=this.readByte(),f=8-c.toString(2).length,h=c-(1<<7-f),d=0;d<f;d++)h*=256,h+=this.readByte();return h},o.prototype.updateBySource=function(){for(this.data=[],this.offset=0;this.offset<this.source.length;this.offset=h){var c=this.readUint(),f=this.readUint(),h=Math.min(this.offset+f,this.source.length),d=this.source.slice(this.offset,h),g=e[c]||{name:"Unknown",type:"Unknown"},p=r;switch(g.type){case"Container":p=o;break;case"Uint":p=i;break;case"Float":p=u;break}var m=new p(g.name,g.type);m.setSource(d),this.data.push({id:c,idHex:c.toString(16),data:m})}},o.prototype.writeUint=function(c,f){for(var h=1,d=128;c>=d&&h<8;h++,d*=128);if(!f)for(var g=d+c,p=h-1;p>=0;p--){var m=g%256;this.source[this.offset+p]=m,g=(g-m)/256}this.offset+=h},o.prototype.writeSections=function(c){this.offset=0;for(var f=0;f<this.data.length;f++){var h=this.data[f],d=h.data.source,g=d.length;this.writeUint(h.id,c),this.writeUint(g,c),c||this.source.set(d,this.offset),this.offset+=g}return this.offset},o.prototype.updateByData=function(){var c=this.writeSections("draft");this.source=new Uint8Array(c),this.writeSections()},o.prototype.getSectionById=function(c){for(var f=0;f<this.data.length;f++){var h=this.data[f];if(h.id===c)return h.data}return null};function a(c){o.call(this,"File","File"),this.setSource(c)}n(a,o),a.prototype.fixDuration=function(c,f){var h=f&&f.logger;h===void 0?h=function(v){console.log(v)}:h||(h=function(){});var d=this.getSectionById(139690087);if(!d)return h("[fix-webm-duration] Segment section is missing"),!1;var g=d.getSectionById(88713574);if(!g)return h("[fix-webm-duration] Info section is missing"),!1;var p=g.getSectionById(710577);if(!p)return h("[fix-webm-duration] TimecodeScale section is missing"),!1;var m=g.getSectionById(1161);if(m)if(m.getValue()<=0)h(`[fix-webm-duration] Duration section is present, but the value is ${m.getValue()}`),m.setValue(c);else return h(`[fix-webm-duration] Duration section is present, and the value is ${m.getValue()}`),!1;else h("[fix-webm-duration] Duration section is missing"),m=new u("Duration","Float"),m.setValue(c),g.data.push({id:1161,data:m});return p.setValue(1e6),g.updateByData(),d.updateByData(),this.updateByData(),!0},a.prototype.toBlob=function(c){return new Blob([this.source.buffer],{type:c||"video/webm"})};function l(c,f,h,d){if(typeof h=="object"&&(d=h,h=void 0),!h)return new Promise(function(p){l(c,f,p,d)});try{var g=new FileReader;g.onloadend=function(){try{var p=new a(new Uint8Array(g.result));p.fixDuration(f,d)&&(c=p.toBlob(c.type))}catch{}h(c)},g.readAsArrayBuffer(c)}catch{h(c)}}return l.default=l,l})}(_r)),_r.exports}var mm=dm();const gm=af(mm),Dm="planetsinmotion.live";class ju{constructor(e,n,r,i,s){this.margin=i,this.width=n-this.margin.left-this.margin.right,this.height=r-this.margin.top-this.margin.bottom,this.units=1,this.fontsize=18,this.svgRoot=K0("#"+e).append("svg").attr("width",this.width+this.margin.left+this.margin.right).attr("height",this.height+this.margin.top+this.margin.bottom),this.svg=this.svgRoot.append("g").attr("transform",`translate(${this.margin.left}, ${this.margin.top})`),this.outputname=s}setDomains(e,n,r,i,s=!1){this.svg.selectAll(".axis").remove();const u=[e/this.units,n/this.units],o=[r/this.units,i/this.units];this.xScale=Gr().domain(u).range([0,this.width]);const a=s?[0,this.height]:[this.height,0];this.yScale=Gr().domain(o).range(a);const l=g=>{g.selectAll("path, line").attr("stroke","white").attr("stroke-width",2).attr("shape-rendering","crispEdges"),g.selectAll("text").attr("fill","white").attr("font-size",`${this.fontsize}px`).attr("font-family","DejaVu Sans")},c=this.svg.append("g").attr("transform",`translate(0,${this.height})`).call(dh(this.xScale).tickSize(14).ticks(6)).attr("class","axis");l(c);const f=this.svg.append("g").call(mh(this.yScale).tickSize(14).ticks(6)).attr("class","axis");l(f);const h=this.svg.append("g").attr("transform","translate(0,0)").call(hh(this.xScale).tickValues([])).attr("class","axis");l(h);const d=this.svg.append("g").attr("transform",`translate(${this.width},0)`).call(ph(this.yScale).tickValues([])).attr("class","axis");l(d)}setScales(e,n){}clear(){this.xScale=null,this.yScale=null,this.svg.selectAll(".axis").remove()}startRecording(e,n,r){this.canvas=document.createElement("canvas"),this.canvas.width=this.width*2,this.canvas.height=this.height*2,this.ctx=this.canvas.getContext("2d"),this.ctx.font="italic 32px DejaVu Sans",this.ctx.strokeStyle="white",this.ctx.lineWidth=2;var i=[];const s=this.canvas.captureStream(e);this.mediaRecorder=new MediaRecorder(s,{mimeType:n}),this.mediaRecorder.onstart=()=>{console.log(`Recording for ${this.outputname} started and will stop after ${r/1e3} seconds.`)},this.mediaRecorder.ondataavailable=u=>{u.data.size>0&&i.push(u.data)},this.mediaRecorder.onstop=async()=>{const u=new Blob(i,{type:n}),o=await gm(u,r);Du(o,this.outputname,"webm"),this.canvas=null,this.ctx=null},this.mediaRecorder.start()}updateRecording(){const e=new XMLSerializer().serializeToString(this.svgRoot.node()),n=new Image,r=new Blob([e],{type:"image/svg+xml;charset=utf-8"}),i=URL.createObjectURL(r);n.onload=()=>{this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this.ctx.drawImage(n,0,0,this.canvas.width,this.canvas.height),this.ctx.strokeText(Dm,this.canvas.width-500,this.canvas.height-100),URL.revokeObjectURL(i)},n.src=i}stopRecording(){this.mediaRecorder.state==="recording"&&this.mediaRecorder.stop()}}class vm extends ju{constructor(e,n,r,i){super(e,n,r,i,"lightcurve"),this.xvalues=null,this.yvalues=null}drawLightcurved3(e,n){const r=this.xvalues.slice(0,n+1),i=this.yvalues.slice(0,n+1),s=r.map((a,l)=>({x:a,y:i[l]})),u=pm().x(a=>this.xScale(a.x)).y(a=>this.yScale(a.y)),o=this.svg.select(".line");o.empty()?this.svg.append("path").datum(s).attr("class","line").attr("d",u).attr("stroke",e).attr("stroke-width",2):o.datum(s).attr("d",u)}setScales(e,n){super.setDomains(rs(e),ns(e),rs(n)*.999,ns(n)*1.01),this.xvalues=e,this.yvalues=n}clear(){super.clear(),this.svg.select(".line").remove(),this.xvalues=null,this.yvalues=null}}class ym extends Or{constructor(e){super(e);const n="bc1q4xr9agec3ldug0xezqxy252y3kvqmcz62xr6pm";this.donateBTCButton=new bs("BTC",n);const r="0xaFE3DB130E71404Ed038397D25C26777d4EC8e4F";this.donateETHButton=new bs("ETH",r)}}class bs{constructor(e,n){this.walletAddress=n,this.copyButton=document.getElementById("copy"+e+"WalletAddressBtn").addEventListener("click",()=>{navigator.clipboard.writeText(this.walletAddress);const r=document.getElementById("copy-feedback");r.classList.add("visible"),setTimeout(()=>{r.classList.remove("visible")},1e3)})}}class Bs extends ju{constructor(e,n,r=600,i=600,s={top:20,bottom:40,left:60,right:40}){super(e,r,i,s,n),this.units=ze}defineSunGradient(e){this.starColor=e,this.svg.selectAll(".star-gradient").remove(),this.svg.append("defs").attr("class","star-gradient").append("radialGradient").attr("id","sun-glow-gradient").attr("cx","50%").attr("cy","50%").attr("r","58%").selectAll("stop").data([{offset:"0%",color:e},{offset:"100%",color:"black"}]).enter().append("stop").attr("offset",n=>n.offset).attr("stop-color",n=>n.color)}clear(){super.clear(),this.svg.selectAll("circle").remove(),this.svg.selectAll(".planet-defs").remove(),this.svg.selectAll("path").remove()}drawBodies(e,n,r=!1){this.svg.selectAll("circle").remove(),this.svg.selectAll(".planet-defs").remove(),e.forEach(i=>{const s=Math.abs(this.xScale(i._R)-this.xScale(0))/this.units;let u;const o=i.ry[n]/this.units;var a=1/this.units,l=1/this.units;if(r?(a*=-i.rx[n],l*=i.rz[n]):(a*=i.rz[n],l*=i.rx[n]),i instanceof yu)u="url(#sun-glow-gradient)";else{const h=Math.atan2(r?-a:a,o),d=Math.cos(h),g=Math.sin(h),p=Math.sqrt(o**2+a**2+l**2),m=l/p,v=50*(1-d),w=50*(1+g),y=50*(1+d),F=50*(1-g),A=`planet-gradient-${i.planetName.replace(/\s+/g,"")}-${r?"faceon":"edegeon"}`,x=this.svg.append("defs").attr("class","planet-defs").append("linearGradient").attr("id",A).attr("x1",`${v}%`).attr("y1",`${w}%`).attr("x2",`${y}%`).attr("y2",`${F}%`);x.append("stop").attr("offset","0%").attr("stop-color",i.color),x.append("stop").attr("offset",`${(1-m)/2*100}%`).attr("stop-color",gu(i.color,85)),u=`url(#${A})`}const c=this.xScale(o),f=this.yScale(a);this.svg.append("circle").attr("pointer-events","none").attr("cx",c).attr("cy",f).attr("r",s).style("fill",u)})}}class wm{constructor(e,n){this._star=e,this.numSamples=n}set star(e){this._star=e,this.drawPoints(this.numSamples)}set numSamples(e){self.theta=Array.from({length:e},()=>Math.random()*2*Math.PI),this._numSamples=e,this.drawPoints(e)}get star(){return this._star}get numSamples(){return this._numSamples}drawPoints(e){console.log("Drawing points for Monte Carlo simulation with numSamples:",e);const n=Array.from({length:e},()=>Math.sqrt(Math.random())*this.star._R);this.ypoints=n.map((r,i)=>r*Math.cos(self.theta[i])),this.zpoints=n.map((r,i)=>r*Math.sin(self.theta[i]))}filterByEclipses(e){const n=new Set,r=new Set;for(let i=0;i<e[0].rx.length;i++)e.forEach(s=>{this.star.getProjectedDistance(s,i)-s._R<=this.star._R&&s.rx[i]>this.star.rx[i]&&(r.add(i),n.add(s))});return[n,r]}getEclipsedFraction(e){const[n,r]=this.filterByEclipses(e);let i=new Float64Array(this.star.rz.length).fill(1);return r.forEach(s=>{let u=0;for(let o=0;o<this.numSamples;o++)for(let a=0;a<n.size;a++){const l=e[a];if(l.rx[s]>this.star.rx[s]&&(this.ypoints[o]-l.ry[s])**2+(this.zpoints[o]-l.rz[s])**2<l._R**2){u+=1;break}}i[s]=1-u/this.numSamples}),i}getEclipsingAreasMonteCarloFast_unused(e,n=1e4){const r=this.rx.length;let i=new Float64Array(r).fill(1);const[s,u]=this.filterByEclipsesSet(e),o=Array.from({length:n},()=>Math.sqrt(Math.random())*this._R),a=Array.from({length:n},()=>Math.random()*2*Math.PI),l=o.map((f,h)=>f*Math.cos(a[h])),c=o.map((f,h)=>f*Math.sin(a[h]));return u.forEach(f=>{let h=Array.from({length:n},(g,p)=>p);s.forEach(g=>{h=h.filter(p=>(l[p]-g.ry[f])**2+(c[p]-g.rz[f])**2>=g._R**2)});const d=n-h.length;i[f]=1-d/n}),i}}let pt,Bt,lt,Et,Jr,Kr,Qr,ie={},Wt,sn,ae,Qt,jt,Ce,Tt=0,jr,Ms,ti=!1,dr;async function Em(t="en"){ie=await(await fetch(`/locales/${t}.json`)).json(),lt.setLanguage(ie),Et.setLanguage(ie),pt.setLanguage(ie),Kr.setLanguage(ie),Jr.setLanguage(ie),Qr.setLanguage(ie)}const Fm=()=>{const t=Bt.star,e=pt.planets,n=lt.datapoints,r=[t,...e],i=r.slice().sort((u,o)=>u.rz[Tt]-o.rz[Tt]);Qt.drawBodies(i,Tt,!0);const s=r.slice().sort((u,o)=>u.rx[Tt]-o.rx[Tt]);jt.drawBodies(s,Tt),ae.drawLightcurved3(t.color,Tt),ti&&([jt,Qt,ae].forEach(u=>{u.updateRecording()}),jr==n+1&&(console.log("Finishing recording"),ti=!1,setTimeout(()=>{[jt,Qt,ae].forEach(o=>{console.log("Stopping recording"),o.stopRecording()}),document.getElementById("recording-dialog").close(),document.body.style.cursor="default"},50),console.log("Recording complete."),console.log("All simulations saved.")),jr++),Tt=(Tt+1)%n};function Am(){pt.setStar(Bt.star),dr.star=Bt.star,eo()}function Cm(){jt.defineSunGradient(Bt.star.color),Qt.defineSunGradient(Bt.star.color),Xe(0)}function _m(){pt.planets.length!=0&&(wi(),Et.setDuration(lt.datapoints*Et.ms))}function wi(){pt.planets.length!=0&&(console.log("Updating times"),lt.calculateTimes(pt.maxP),eo())}function to(){if(pt.planets.length==1)sn=new vu(Bt.star,pt.planets[0]).visibleFraction,lt.mcPointsInput.disabled=!0;else{console.log("Showing modal");const t=document.getElementById("recording-dialog");t.showModal(),sn=dr.getEclipsedFraction(pt.planets),lt.mcPointsInput.disabled=!1,t.close()}console.log("Transit depth: ",Math.min(...sn).toFixed(3))}function xm(){dr.numSamples=lt.mcPoints,to(),Xe(0)}function eo(){console.log("Updating simulation"),Bt.setTimes(lt.times),pt.setTimes(lt.times),to();const t=Math.abs(pt.maxDistance*1.02);Qt.setDomains(-t,t,-t,t,!0),jt.setDomains(-t,t,-t,t,!1),Xe(0)}function bm(){pt.planets.length>0?(Ce.disabled=!1,Ce.style.cursor="pointer",Et.saveAnimationButton.disabled=!1,Et.saveAnimationButton.style.cursor="pointer",wi()):pt.planets.length==0&&(Ce.disabled=!0,Ce.style.cursor="auto",Et.saveAnimationButton.disabled=!0,Et.saveAnimationButton.style.cursor="auto",clearInterval(Wt),Wt=null,console.log("No planets to animate, clearing canvas"),ae.clear(),Qt.clear(),jt.clear())}function Bm(){if(!ae){const t={top:10,bottom:40,left:80,right:80};ae=new vm("d3-lightcurve-container",1320,500,t)}Qt||(Qt=new Bs("faceoncanvas","faceon")),jt||(jt=new Bs("edgeoncanvas","edgeon")),Bt||(Bt=new $f(Am,Cm)),jt.defineSunGradient(Bt.star.color),Qt.defineSunGradient(Bt.star.color),pt||(pt=new Xf(bm,ro,no,Bt.star)),lt||(lt=new Yf(pt.maxP,_m,wi,xm),lt.mcPointsInput.disabled=!0),Ce=document.getElementById("export-lightcurve"),Et||(Et=new Gf(t=>{Et.setDuration(lt.datapoints*t),Xe(Tt)})),Kr||(Kr=new Or("about")),Jr||(Jr=new Or("manual")),Qr||(Qr=new ym("donate")),Bt.setTimes(lt.times),pt.setTimes(lt.times),Et.setDuration(lt.datapoints*Et.ms),Ms=document.getElementById("main-canvas-container"),Ms.addEventListener("click",Ns),document.addEventListener("keydown",t=>{t.code==="Space"?(t.preventDefault(),Ns()):t.code=="NumpadAdd"&&!t.ctrlKey&&(console.log("Show planet form"),pt.showPlanetForm())}),Ce.addEventListener("click",()=>{lt.exportLightcurve(lt.timesDays,sn)}),Ce.disabled=!0,Et.saveAnimationButton.addEventListener("click",()=>{Mm()}),Em(),dr=new wm(Bt.star,lt.mcPoints)}function Mm(t="video/webm"){document.body.style.cursor="wait",document.getElementById("recording-dialog").showModal();const n=Et.animationDurationms;[jt,Qt,ae].forEach(r=>{r.startRecording(Et.ms,t,n)}),ti=!0,jr=0,Xe(0)}function Ss(t){const e=document.getElementById("toggle-animation-feedback");e.innerHTML=t,e.classList.add("visible"),setTimeout(()=>{e.classList.remove("visible")},1e3)}function Ns(){Wt?(Ss(ie["pause-animation"]),ro()):(Ss(ie["resume-animation"]),no())}function no(){console.log("Restarting animation"),Wt||Xe(Tt)}function ro(){console.log("Pausing animation"),Wt&&(clearInterval(Wt),Wt=null)}function Xe(t=0){Tt=t,console.log("Restarting simu"),Wt&&(clearInterval(Wt),Wt=null),Tt==0&&ae.clear(),pt.planets.length>0&&(ae.setScales(lt.timesDays,sn),Wt=window.setInterval(Fm,Et.ms))}Bm();
