(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();const kt=24*3600,Vs=63781e4,Ws=597216787e19,fn=6957e7,Rn=1989e30,Gt=18981245973360504e14,pe=71492e5,Je=149597871e5,Zs=6.67*10**-8;function Vn(){return Vn=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Vn.apply(null,arguments)}var Xs={relTol:1e-12,absTol:1e-15,matrix:"Matrix",number:"number",numberFallback:"number",precision:64,predictable:!1,randomSeed:null};function Qu(t,e){if(Wn(t,e))return t[e];throw typeof t[e]=="function"&&to(t,e)?new Error('Cannot access method "'+e+'" as a property'):new Error('No access to property "'+e+'"')}function ju(t,e,n){if(Wn(t,e))return t[e]=n,n;throw new Error('No access to property "'+e+'"')}function Wn(t,e){return!eo(t)&&!Array.isArray(t)?!1:gn(no,e)?!0:!(e in Object.prototype||e in Function.prototype)}function to(t,e){return t==null||typeof t[e]!="function"||gn(t,e)&&Object.getPrototypeOf&&e in Object.getPrototypeOf(t)?!1:gn(ro,e)?!0:!(e in Object.prototype||e in Function.prototype)}function eo(t){return typeof t=="object"&&t&&t.constructor===Object}var no={length:!0,name:!0},ro={toString:!0,valueOf:!0,toLocaleString:!0};class io{constructor(e){this.wrappedObject=e,this[Symbol.iterator]=this.entries}keys(){return Object.keys(this.wrappedObject).filter(e=>this.has(e)).values()}get(e){return Qu(this.wrappedObject,e)}set(e,n){return ju(this.wrappedObject,e,n),this}has(e){return Wn(this.wrappedObject,e)&&e in this.wrappedObject}entries(){return so(this.keys(),e=>[e,this.get(e)])}forEach(e){for(var n of this.keys())e(this.get(n),n,this)}delete(e){Wn(this.wrappedObject,e)&&delete this.wrappedObject[e]}clear(){for(var e of this.keys())this.delete(e)}get size(){return Object.keys(this.wrappedObject).length}}function so(t,e){return{next:()=>{var n=t.next();return n.done?n:{value:e(n.value),done:!1}}}}function it(t){return typeof t=="number"}function vt(t){return!t||typeof t!="object"||typeof t.constructor!="function"?!1:t.isBigNumber===!0&&typeof t.constructor.prototype=="object"&&t.constructor.prototype.isBigNumber===!0||typeof t.constructor.isDecimal=="function"&&t.constructor.isDecimal(t)===!0}function ao(t){return typeof t=="bigint"}function Ys(t){return t&&typeof t=="object"&&Object.getPrototypeOf(t).isComplex===!0||!1}function Gs(t){return t&&typeof t=="object"&&Object.getPrototypeOf(t).isFraction===!0||!1}function Js(t){return t&&t.constructor.prototype.isUnit===!0||!1}function Qt(t){return typeof t=="string"}var ht=Array.isArray;function Wt(t){return t&&t.constructor.prototype.isMatrix===!0||!1}function Zn(t){return Array.isArray(t)||Wt(t)}function uo(t){return t&&t.isDenseMatrix&&t.constructor.prototype.isMatrix===!0||!1}function oo(t){return t&&t.isSparseMatrix&&t.constructor.prototype.isMatrix===!0||!1}function co(t){return t&&t.constructor.prototype.isRange===!0||!1}function hi(t){return t&&t.constructor.prototype.isIndex===!0||!1}function lo(t){return typeof t=="boolean"}function fo(t){return t&&t.constructor.prototype.isResultSet===!0||!1}function ho(t){return t&&t.constructor.prototype.isHelp===!0||!1}function po(t){return typeof t=="function"}function mo(t){return t instanceof Date}function go(t){return t instanceof RegExp}function pi(t){return!!(t&&typeof t=="object"&&t.constructor===Object&&!Ys(t)&&!Gs(t))}function Do(t){return t?t instanceof Map||t instanceof io||typeof t.set=="function"&&typeof t.get=="function"&&typeof t.keys=="function"&&typeof t.has=="function":!1}function vo(t){return t===null}function yo(t){return t===void 0}function wo(t){return t&&t.isAccessorNode===!0&&t.constructor.prototype.isNode===!0||!1}function Fo(t){return t&&t.isArrayNode===!0&&t.constructor.prototype.isNode===!0||!1}function Eo(t){return t&&t.isAssignmentNode===!0&&t.constructor.prototype.isNode===!0||!1}function Ao(t){return t&&t.isBlockNode===!0&&t.constructor.prototype.isNode===!0||!1}function Co(t){return t&&t.isConditionalNode===!0&&t.constructor.prototype.isNode===!0||!1}function _o(t){return t&&t.isConstantNode===!0&&t.constructor.prototype.isNode===!0||!1}function xo(t){return t&&t.isFunctionAssignmentNode===!0&&t.constructor.prototype.isNode===!0||!1}function bo(t){return t&&t.isFunctionNode===!0&&t.constructor.prototype.isNode===!0||!1}function Bo(t){return t&&t.isIndexNode===!0&&t.constructor.prototype.isNode===!0||!1}function Mo(t){return t&&t.isNode===!0&&t.constructor.prototype.isNode===!0||!1}function So(t){return t&&t.isObjectNode===!0&&t.constructor.prototype.isNode===!0||!1}function No(t){return t&&t.isOperatorNode===!0&&t.constructor.prototype.isNode===!0||!1}function To(t){return t&&t.isParenthesisNode===!0&&t.constructor.prototype.isNode===!0||!1}function Io(t){return t&&t.isRangeNode===!0&&t.constructor.prototype.isNode===!0||!1}function Po(t){return t&&t.isRelationalNode===!0&&t.constructor.prototype.isNode===!0||!1}function Ro(t){return t&&t.isSymbolNode===!0&&t.constructor.prototype.isNode===!0||!1}function Lo(t){return t&&t.constructor.prototype.isChain===!0||!1}function Se(t){var e=typeof t;return e==="object"?t===null?"null":vt(t)?"BigNumber":t.constructor&&t.constructor.name?t.constructor.name:"Object":e}function gt(t){var e=typeof t;if(e==="number"||e==="bigint"||e==="string"||e==="boolean"||t===null||t===void 0)return t;if(typeof t.clone=="function")return t.clone();if(Array.isArray(t))return t.map(function(n){return gt(n)});if(t instanceof Date)return new Date(t.valueOf());if(vt(t))return t;if(pi(t))return Oo(t,gt);if(e==="function")return t;throw new TypeError("Cannot clone: unknown type of value (value: ".concat(t,")"))}function Oo(t,e){var n={};for(var r in t)gn(t,r)&&(n[r]=e(t[r]));return n}function ko(t,e){for(var n in e)gn(e,n)&&(t[n]=e[n]);return t}function Ae(t,e){var n,r,i;if(Array.isArray(t)){if(!Array.isArray(e)||t.length!==e.length)return!1;for(r=0,i=t.length;r<i;r++)if(!Ae(t[r],e[r]))return!1;return!0}else{if(typeof t=="function")return t===e;if(t instanceof Object){if(Array.isArray(e)||!(e instanceof Object))return!1;for(n in t)if(!(n in e)||!Ae(t[n],e[n]))return!1;for(n in e)if(!(n in t))return!1;return!0}else return t===e}}function gn(t,e){return t&&Object.hasOwnProperty.call(t,e)}function $o(t,e){for(var n={},r=0;r<e.length;r++){var i=e[r],s=t[i];s!==void 0&&(n[i]=s)}return n}var Uo=["Matrix","Array"],zo=["number","BigNumber","Fraction"],Re=function(e){if(e)throw new Error(`The global config is readonly. 
Please create a mathjs instance if you want to change the default configuration. 
Example:

  import { create, all } from 'mathjs';
  const mathjs = create(all);
  mathjs.config({ number: 'BigNumber' });
`);return Object.freeze(Xs)};Vn(Re,Xs,{MATRIX_OPTIONS:Uo,NUMBER_OPTIONS:zo});function qi(){return!0}function Rt(){return!1}function ze(){}const Hi="Argument is not a typed-function.";function Ks(){function t(D){return typeof D=="object"&&D!==null&&D.constructor===Object}const e=[{name:"number",test:function(D){return typeof D=="number"}},{name:"string",test:function(D){return typeof D=="string"}},{name:"boolean",test:function(D){return typeof D=="boolean"}},{name:"Function",test:function(D){return typeof D=="function"}},{name:"Array",test:Array.isArray},{name:"Date",test:function(D){return D instanceof Date}},{name:"RegExp",test:function(D){return D instanceof RegExp}},{name:"Object",test:t},{name:"null",test:function(D){return D===null}},{name:"undefined",test:function(D){return D===void 0}}],n={name:"any",test:qi,isAny:!0};let r,i,s=0,a={createCount:0};function u(D){const F=r.get(D);if(F)return F;let C='Unknown type "'+D+'"';const S=D.toLowerCase();let P;for(P of i)if(P.toLowerCase()===S){C+='. Did you mean "'+P+'" ?';break}throw new TypeError(C)}function o(D){let F=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"any";const C=F?u(F).index:i.length,S=[];for(let T=0;T<D.length;++T){if(!D[T]||typeof D[T].name!="string"||typeof D[T].test!="function")throw new TypeError("Object with properties {name: string, test: function} expected");const U=D[T].name;if(r.has(U))throw new TypeError('Duplicate type name "'+U+'"');S.push(U),r.set(U,{name:U,test:D[T].test,isAny:D[T].isAny,index:C+T,conversionsTo:[]})}const P=i.slice(C);i=i.slice(0,C).concat(S).concat(P);for(let T=C+S.length;T<i.length;++T)r.get(i[T]).index=T}function l(){r=new Map,i=[],s=0,o([n],!1)}l(),o(e);function c(){let D;for(D of i)r.get(D).conversionsTo=[];s=0}function f(D){const F=i.filter(C=>{const S=r.get(C);return!S.isAny&&S.test(D)});return F.length?F:["any"]}function h(D){return D&&typeof D=="function"&&"_typedFunctionData"in D}function d(D,F,C){if(!h(D))throw new TypeError(Hi);const S=C&&C.exact,P=Array.isArray(F)?F.join(","):F,T=E(P),U=g(T);if(!S||U in D.signatures){const et=D._typedFunctionData.signatureMap.get(U);if(et)return et}const O=T.length;let z;if(S){z=[];let et;for(et in D.signatures)z.push(D._typedFunctionData.signatureMap.get(et))}else z=D._typedFunctionData.signatures;for(let et=0;et<O;++et){const rt=T[et],ft=[];let Ct;for(Ct of z){const Et=_(Ct.params,et);if(!(!Et||rt.restParam&&!Et.restParam)){if(!Et.hasAny){const $t=y(Et);if(rt.types.some(Ut=>!$t.has(Ut.name)))continue}ft.push(Ct)}}if(z=ft,z.length===0)break}let R;for(R of z)if(R.params.length<=O)return R;throw new TypeError("Signature not found (signature: "+(D.name||"unnamed")+"("+g(T,", ")+"))")}function m(D,F,C){return d(D,F,C).implementation}function p(D,F){const C=u(F);if(C.test(D))return D;const S=C.conversionsTo;if(S.length===0)throw new Error("There are no conversions to "+F+" defined.");for(let P=0;P<S.length;P++)if(u(S[P].from).test(D))return S[P].convert(D);throw new Error("Cannot convert "+D+" to "+F)}function g(D){let F=arguments.length>1&&arguments[1]!==void 0?arguments[1]:",";return D.map(C=>C.name).join(F)}function v(D){const F=D.indexOf("...")===0,S=(F?D.length>3?D.slice(3):"any":D).split("|").map(O=>u(O.trim()));let P=!1,T=F?"...":"";return{types:S.map(function(O){return P=O.isAny||P,T+=O.name+"|",{name:O.name,typeIndex:O.index,test:O.test,isAny:O.isAny,conversion:null,conversionIndex:-1}}),name:T.slice(0,-1),hasAny:P,hasConversion:!1,restParam:F}}function w(D){const F=D.types.map(U=>U.name),C=st(F);let S=D.hasAny,P=D.name;const T=C.map(function(U){const O=u(U.from);return S=O.isAny||S,P+="|"+U.from,{name:U.from,typeIndex:O.index,test:O.test,isAny:O.isAny,conversion:U,conversionIndex:U.index}});return{types:D.types.concat(T),name:P,hasAny:S,hasConversion:T.length>0,restParam:D.restParam}}function y(D){return D.typeSet||(D.typeSet=new Set,D.types.forEach(F=>D.typeSet.add(F.name))),D.typeSet}function E(D){const F=[];if(typeof D!="string")throw new TypeError("Signatures must be strings");const C=D.trim();if(C==="")return F;const S=C.split(",");for(let P=0;P<S.length;++P){const T=v(S[P].trim());if(T.restParam&&P!==S.length-1)throw new SyntaxError('Unexpected rest parameter "'+S[P]+'": only allowed for the last parameter');if(T.types.length===0)return null;F.push(T)}return F}function A(D){const F=$e(D);return F?F.restParam:!1}function x(D){if(!D||D.types.length===0)return qi;if(D.types.length===1)return u(D.types[0].name).test;if(D.types.length===2){const F=u(D.types[0].name).test,C=u(D.types[1].name).test;return function(P){return F(P)||C(P)}}else{const F=D.types.map(function(C){return u(C.name).test});return function(S){for(let P=0;P<F.length;P++)if(F[P](S))return!0;return!1}}}function b(D){let F,C,S;if(A(D)){F=Ri(D).map(x);const P=F.length,T=x($e(D)),U=function(O){for(let z=P;z<O.length;z++)if(!T(O[z]))return!1;return!0};return function(z){for(let R=0;R<F.length;R++)if(!F[R](z[R]))return!1;return U(z)&&z.length>=P+1}}else return D.length===0?function(T){return T.length===0}:D.length===1?(C=x(D[0]),function(T){return C(T[0])&&T.length===1}):D.length===2?(C=x(D[0]),S=x(D[1]),function(T){return C(T[0])&&S(T[1])&&T.length===2}):(F=D.map(x),function(T){for(let U=0;U<F.length;U++)if(!F[U](T[U]))return!1;return T.length===F.length})}function _(D,F){return F<D.length?D[F]:A(D)?$e(D):null}function N(D,F){const C=_(D,F);return C?y(C):new Set}function L(D){return D.conversion===null||D.conversion===void 0}function M(D,F){const C=new Set;return D.forEach(S=>{const P=N(S.params,F);let T;for(T of P)C.add(T)}),C.has("any")?["any"]:Array.from(C)}function $(D,F,C){let S,P;const T=D||"unnamed";let U=C,O;for(O=0;O<F.length;O++){const rt=[];if(U.forEach(ft=>{const Ct=_(ft.params,O),Et=x(Ct);(O<ft.params.length||A(ft.params))&&Et(F[O])&&rt.push(ft)}),rt.length===0){if(P=M(U,O),P.length>0){const ft=f(F[O]);return S=new TypeError("Unexpected type of argument in function "+T+" (expected: "+P.join(" or ")+", actual: "+ft.join(" | ")+", index: "+O+")"),S.data={category:"wrongType",fn:T,index:O,actual:ft,expected:P},S}}else U=rt}const z=U.map(function(rt){return A(rt.params)?1/0:rt.params.length});if(F.length<Math.min.apply(null,z))return P=M(U,O),S=new TypeError("Too few arguments in function "+T+" (expected: "+P.join(" or ")+", index: "+F.length+")"),S.data={category:"tooFewArgs",fn:T,index:F.length,expected:P},S;const R=Math.max.apply(null,z);if(F.length>R)return S=new TypeError("Too many arguments in function "+T+" (expected: "+R+", actual: "+F.length+")"),S.data={category:"tooManyArgs",fn:T,index:F.length,expectedLength:R},S;const et=[];for(let rt=0;rt<F.length;++rt)et.push(f(F[rt]).join("|"));return S=new TypeError('Arguments of type "'+et.join(", ")+'" do not match any of the defined signatures of function '+T+"."),S.data={category:"mismatch",actual:et},S}function q(D){let F=i.length+1;for(let C=0;C<D.types.length;C++)L(D.types[C])&&(F=Math.min(F,D.types[C].typeIndex));return F}function H(D){let F=s+1;for(let C=0;C<D.types.length;C++)L(D.types[C])||(F=Math.min(F,D.types[C].conversionIndex));return F}function G(D,F){if(D.hasAny){if(!F.hasAny)return 1}else if(F.hasAny)return-1;if(D.restParam){if(!F.restParam)return 1}else if(F.restParam)return-1;if(D.hasConversion){if(!F.hasConversion)return 1}else if(F.hasConversion)return-1;const C=q(D)-q(F);if(C<0)return-1;if(C>0)return 1;const S=H(D)-H(F);return S<0?-1:S>0?1:0}function V(D,F){const C=D.params,S=F.params,P=$e(C),T=$e(S),U=A(C),O=A(S);if(U&&P.hasAny){if(!O||!T.hasAny)return 1}else if(O&&T.hasAny)return-1;let z=0,R=0,et;for(et of C)et.hasAny&&++z,et.hasConversion&&++R;let rt=0,ft=0;for(et of S)et.hasAny&&++rt,et.hasConversion&&++ft;if(z!==rt)return z-rt;if(U&&P.hasConversion){if(!O||!T.hasConversion)return 1}else if(O&&T.hasConversion)return-1;if(R!==ft)return R-ft;if(U){if(!O)return 1}else if(O)return-1;const Ct=(C.length-S.length)*(U?-1:1);if(Ct!==0)return Ct;const Et=[];let $t=0;for(let Ue=0;Ue<C.length;++Ue){const xn=G(C[Ue],S[Ue]);Et.push(xn),$t+=xn}if($t!==0)return $t;let Ut;for(Ut of Et)if(Ut!==0)return Ut;return 0}function st(D){if(D.length===0)return[];const F=D.map(u);D.length>1&&F.sort((P,T)=>P.index-T.index);let C=F[0].conversionsTo;if(D.length===1)return C;C=C.concat([]);const S=new Set(D);for(let P=1;P<F.length;++P){let T;for(T of F[P].conversionsTo)S.has(T.from)||(C.push(T),S.add(T.from))}return C}function ot(D,F){let C=F;if(D.some(P=>P.hasConversion)){const P=A(D),T=D.map(K);C=function(){const O=[],z=P?arguments.length-1:arguments.length;for(let R=0;R<z;R++)O[R]=T[R](arguments[R]);return P&&(O[z]=arguments[z].map(T[z])),F.apply(this,O)}}let S=C;if(A(D)){const P=D.length-1;S=function(){return C.apply(this,Br(arguments,0,P).concat([Br(arguments,P)]))}}return S}function K(D){let F,C,S,P;const T=[],U=[];switch(D.types.forEach(function(O){O.conversion&&(T.push(u(O.conversion.from).test),U.push(O.conversion.convert))}),U.length){case 0:return function(z){return z};case 1:return F=T[0],S=U[0],function(z){return F(z)?S(z):z};case 2:return F=T[0],C=T[1],S=U[0],P=U[1],function(z){return F(z)?S(z):C(z)?P(z):z};default:return function(z){for(let R=0;R<U.length;R++)if(T[R](z))return U[R](z);return z}}}function Nt(D){function F(C,S,P){if(S<C.length){const T=C[S];let U=[];if(T.restParam){const O=T.types.filter(L);O.length<T.types.length&&U.push({types:O,name:"..."+O.map(z=>z.name).join("|"),hasAny:O.some(z=>z.isAny),hasConversion:!1,restParam:!0}),U.push(T)}else U=T.types.map(function(O){return{types:[O],name:O.name,hasAny:O.isAny,hasConversion:O.conversion,restParam:!1}});return Du(U,function(O){return F(C,S+1,P.concat([O]))})}else return[P]}return F(D,0,[])}function _r(D,F){const C=Math.max(D.length,F.length);for(let O=0;O<C;O++){const z=N(D,O),R=N(F,O);let et=!1,rt;for(rt of R)if(z.has(rt)){et=!0;break}if(!et)return!1}const S=D.length,P=F.length,T=A(D),U=A(F);return T?U?S===P:P>=S:U?S>=P:S===P}function Ii(D){return D.map(F=>$i(F)?Oi(F.referToSelf.callback):ki(F)?Li(F.referTo.references,F.referTo.callback):F)}function xr(D,F,C){const S=[];let P;for(P of D){let T=C[P];if(typeof T!="number")throw new TypeError('No definition for referenced signature "'+P+'"');if(T=F[T],typeof T!="function")return!1;S.push(T)}return S}function Cn(D,F,C){const S=Ii(D),P=new Array(S.length).fill(!1);let T=!0;for(;T;){T=!1;let U=!0;for(let O=0;O<S.length;++O){if(P[O])continue;const z=S[O];if($i(z))S[O]=z.referToSelf.callback(C),S[O].referToSelf=z.referToSelf,P[O]=!0,U=!1;else if(ki(z)){const R=xr(z.referTo.references,S,F);R?(S[O]=z.referTo.callback.apply(this,R),S[O].referTo=z.referTo,P[O]=!0,U=!1):T=!0}}if(U&&T)throw new SyntaxError("Circular reference detected in resolving typed.referTo")}return S}function br(D){const F=/\bthis(\(|\.signatures\b)/;Object.keys(D).forEach(C=>{const S=D[C];if(F.test(S.toString()))throw new SyntaxError("Using `this` to self-reference a function is deprecated since typed-function@3. Use typed.referTo and typed.referToSelf instead.")})}function _n(D,F){if(a.createCount++,Object.keys(F).length===0)throw new SyntaxError("No signatures provided");a.warnAgainstDeprecatedThis&&br(F);const C=[],S=[],P={},T=[];let U;for(U in F){if(!Object.prototype.hasOwnProperty.call(F,U))continue;const j=E(U);if(!j)continue;C.forEach(function(sn){if(_r(sn,j))throw new TypeError('Conflicting signatures "'+g(sn)+'" and "'+g(j)+'".')}),C.push(j);const _t=S.length;S.push(F[U]);const Ju=j.map(w);let bn;for(bn of Nt(Ju)){const sn=g(bn);T.push({params:bn,name:sn,fn:_t}),bn.every(Ku=>!Ku.hasConversion)&&(P[sn]=_t)}}T.sort(V);const O=Cn(S,P,rn);let z;for(z in P)Object.prototype.hasOwnProperty.call(P,z)&&(P[z]=O[P[z]]);const R=[],et=new Map;for(z of T)et.has(z.name)||(z.fn=O[z.fn],R.push(z),et.set(z.name,z));const rt=R[0]&&R[0].params.length<=2&&!A(R[0].params),ft=R[1]&&R[1].params.length<=2&&!A(R[1].params),Ct=R[2]&&R[2].params.length<=2&&!A(R[2].params),Et=R[3]&&R[3].params.length<=2&&!A(R[3].params),$t=R[4]&&R[4].params.length<=2&&!A(R[4].params),Ut=R[5]&&R[5].params.length<=2&&!A(R[5].params),Ue=rt&&ft&&Ct&&Et&&$t&&Ut;for(let j=0;j<R.length;++j)R[j].test=b(R[j].params);const xn=rt?x(R[0].params[0]):Rt,Eu=ft?x(R[1].params[0]):Rt,Au=Ct?x(R[2].params[0]):Rt,Cu=Et?x(R[3].params[0]):Rt,_u=$t?x(R[4].params[0]):Rt,xu=Ut?x(R[5].params[0]):Rt,bu=rt?x(R[0].params[1]):Rt,Bu=ft?x(R[1].params[1]):Rt,Mu=Ct?x(R[2].params[1]):Rt,Su=Et?x(R[3].params[1]):Rt,Nu=$t?x(R[4].params[1]):Rt,Tu=Ut?x(R[5].params[1]):Rt;for(let j=0;j<R.length;++j)R[j].implementation=ot(R[j].params,R[j].fn);const Iu=rt?R[0].implementation:ze,Pu=ft?R[1].implementation:ze,Ru=Ct?R[2].implementation:ze,Lu=Et?R[3].implementation:ze,Ou=$t?R[4].implementation:ze,ku=Ut?R[5].implementation:ze,$u=rt?R[0].params.length:-1,Uu=ft?R[1].params.length:-1,zu=Ct?R[2].params.length:-1,qu=Et?R[3].params.length:-1,Hu=$t?R[4].params.length:-1,Vu=Ut?R[5].params.length:-1,Wu=Ue?6:0,Zu=R.length,Xu=R.map(j=>j.test),Yu=R.map(j=>j.implementation),Gu=function(){for(let _t=Wu;_t<Zu;_t++)if(Xu[_t](arguments))return Yu[_t].apply(this,arguments);return a.onMismatch(D,arguments,R)};function rn(j,_t){return arguments.length===$u&&xn(j)&&bu(_t)?Iu.apply(this,arguments):arguments.length===Uu&&Eu(j)&&Bu(_t)?Pu.apply(this,arguments):arguments.length===zu&&Au(j)&&Mu(_t)?Ru.apply(this,arguments):arguments.length===qu&&Cu(j)&&Su(_t)?Lu.apply(this,arguments):arguments.length===Hu&&_u(j)&&Nu(_t)?Ou.apply(this,arguments):arguments.length===Vu&&xu(j)&&Tu(_t)?ku.apply(this,arguments):Gu.apply(this,arguments)}try{Object.defineProperty(rn,"name",{value:D})}catch{}return rn.signatures=P,rn._typedFunctionData={signatures:R,signatureMap:et},rn}function Pi(D,F,C){throw $(D,F,C)}function Ri(D){return Br(D,0,D.length-1)}function $e(D){return D[D.length-1]}function Br(D,F,C){return Array.prototype.slice.call(D,F,C)}function gu(D,F){for(let C=0;C<D.length;C++)if(F(D[C]))return D[C]}function Du(D,F){return Array.prototype.concat.apply([],D.map(F))}function vu(){const D=Ri(arguments).map(C=>g(E(C))),F=$e(arguments);if(typeof F!="function")throw new TypeError("Callback function expected as last argument");return Li(D,F)}function Li(D,F){return{referTo:{references:D,callback:F}}}function Oi(D){if(typeof D!="function")throw new TypeError("Callback function expected as first argument");return{referToSelf:{callback:D}}}function ki(D){return D&&typeof D.referTo=="object"&&Array.isArray(D.referTo.references)&&typeof D.referTo.callback=="function"}function $i(D){return D&&typeof D.referToSelf=="object"&&typeof D.referToSelf.callback=="function"}function Ui(D,F){if(!D)return F;if(F&&F!==D){const C=new Error("Function names do not match (expected: "+D+", actual: "+F+")");throw C.data={actual:F,expected:D},C}return D}function yu(D){let F;for(const C in D)Object.prototype.hasOwnProperty.call(D,C)&&(h(D[C])||typeof D[C].signature=="string")&&(F=Ui(F,D[C].name));return F}function wu(D,F){let C;for(C in F)if(Object.prototype.hasOwnProperty.call(F,C)){if(C in D&&F[C]!==D[C]){const S=new Error('Signature "'+C+'" is defined twice');throw S.data={signature:C,sourceFunction:F[C],destFunction:D[C]},S}D[C]=F[C]}}const Fu=a;a=function(D){const F=typeof D=="string",C=F?1:0;let S=F?D:"";const P={};for(let T=C;T<arguments.length;++T){const U=arguments[T];let O={},z;if(typeof U=="function"?(z=U.name,typeof U.signature=="string"?O[U.signature]=U:h(U)&&(O=U.signatures)):t(U)&&(O=U,F||(z=yu(U))),Object.keys(O).length===0){const R=new TypeError("Argument to 'typed' at index "+T+" is not a (typed) function, nor an object with signatures as keys and functions as values.");throw R.data={index:T,argument:U},R}F||(S=Ui(S,z)),wu(P,O)}return _n(S||"",P)},a.create=Ks,a.createCount=Fu.createCount,a.onMismatch=Pi,a.throwMismatchError=Pi,a.createError=$,a.clear=l,a.clearConversions=c,a.addTypes=o,a._findType=u,a.referTo=vu,a.referToSelf=Oi,a.convert=p,a.findSignature=d,a.find=m,a.isTypedFunction=h,a.warnAgainstDeprecatedThis=!0,a.addType=function(D,F){let C="any";F!==!1&&r.has("Object")&&(C="Object"),a.addTypes([D],C)};function zi(D){if(!D||typeof D.from!="string"||typeof D.to!="string"||typeof D.convert!="function")throw new TypeError("Object with properties {from: string, to: string, convert: function} expected");if(D.to===D.from)throw new SyntaxError('Illegal to define conversion from "'+D.from+'" to itself.')}return a.addConversion=function(D){let F=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{override:!1};zi(D);const C=u(D.to),S=C.conversionsTo.find(P=>P.from===D.from);if(S)if(F&&F.override)a.removeConversion({from:S.from,to:D.to,convert:S.convert});else throw new Error('There is already a conversion from "'+D.from+'" to "'+C.name+'"');C.conversionsTo.push({from:D.from,convert:D.convert,index:s++})},a.addConversions=function(D,F){D.forEach(C=>a.addConversion(C,F))},a.removeConversion=function(D){zi(D);const F=u(D.to),C=gu(F.conversionsTo,P=>P.from===D.from);if(!C)throw new Error("Attempt to remove nonexistent conversion from "+D.from+" to "+D.to);if(C.convert!==D.convert)throw new Error("Conversion to remove does not match existing conversion");const S=F.conversionsTo.indexOf(C);F.conversionsTo.splice(S,1)},a.resolve=function(D,F){if(!h(D))throw new TypeError(Hi);const C=D._typedFunctionData.signatures;for(let S=0;S<C.length;++S)if(C[S].test(F))return C[S];return null},a}const Xn=Ks();function Q(t,e,n,r){function i(s){var a=$o(s,e.map(Vo));return qo(t,e,s),n(a)}return i.isFactory=!0,i.fn=t,i.dependencies=e.slice().sort(),r&&(i.meta=r),i}function qo(t,e,n){var r=e.filter(s=>!Ho(s)).every(s=>n[s]!==void 0);if(!r){var i=e.filter(s=>n[s]===void 0);throw new Error('Cannot create function "'.concat(t,'", ')+"some dependencies are missing: ".concat(i.map(s=>'"'.concat(s,'"')).join(", "),"."))}}function Ho(t){return t&&t[0]==="?"}function Vo(t){return t&&t[0]==="?"?t.slice(1):t}function Dt(t){return typeof t=="boolean"?!0:isFinite(t)?t===Math.round(t):!1}function Mr(t,e,n){var r={2:"0b",8:"0o",16:"0x"},i=r[e],s="";if(n){if(n<1)throw new Error("size must be in greater than 0");if(!Dt(n))throw new Error("size must be an integer");if(t>2**(n-1)-1||t<-(2**(n-1)))throw new Error("Value must be in range [-2^".concat(n-1,", 2^").concat(n-1,"-1]"));if(!Dt(t))throw new Error("Value must be an integer");t<0&&(t=t+2**n),s="i".concat(n)}var a="";return t<0&&(t=-t,a="-"),"".concat(a).concat(i).concat(t.toString(e)).concat(s)}function Or(t,e){if(typeof e=="function")return e(t);if(t===1/0)return"Infinity";if(t===-1/0)return"-Infinity";if(isNaN(t))return"NaN";var{notation:n,precision:r,wordSize:i}=Qs(e);switch(n){case"fixed":return Zo(t,r);case"exponential":return js(t,r);case"engineering":return Wo(t,r);case"bin":return Mr(t,2,i);case"oct":return Mr(t,8,i);case"hex":return Mr(t,16,i);case"auto":return Xo(t,r,e).replace(/((\.\d*?)(0+))($|e)/,function(){var s=arguments[2],a=arguments[4];return s!=="."?s+a:a});default:throw new Error('Unknown notation "'+n+'". Choose "auto", "exponential", "fixed", "bin", "oct", or "hex.')}}function Qs(t){var e="auto",n,r;if(t!==void 0)if(it(t))n=t;else if(vt(t))n=t.toNumber();else if(pi(t))t.precision!==void 0&&(n=Vi(t.precision,()=>{throw new Error('Option "precision" must be a number or BigNumber')})),t.wordSize!==void 0&&(r=Vi(t.wordSize,()=>{throw new Error('Option "wordSize" must be a number or BigNumber')})),t.notation&&(e=t.notation);else throw new Error("Unsupported type of options, number, BigNumber, or object expected");return{notation:e,precision:n,wordSize:r}}function fr(t){var e=String(t).toLowerCase().match(/^(-?)(\d+\.?\d*)(e([+-]?\d+))?$/);if(!e)throw new SyntaxError("Invalid number "+t);var n=e[1],r=e[2],i=parseFloat(e[4]||"0"),s=r.indexOf(".");i+=s!==-1?s-1:r.length-1;var a=r.replace(".","").replace(/^0*/,function(u){return i-=u.length,""}).replace(/0*$/,"").split("").map(function(u){return parseInt(u)});return a.length===0&&(a.push(0),i++),{sign:n,coefficients:a,exponent:i}}function Wo(t,e){if(isNaN(t)||!isFinite(t))return String(t);var n=fr(t),r=hr(n,e),i=r.exponent,s=r.coefficients,a=i%3===0?i:i<0?i-3-i%3:i-i%3;if(it(e))for(;e>s.length||i-a+1>s.length;)s.push(0);else for(var u=Math.abs(i-a)-(s.length-1),o=0;o<u;o++)s.push(0);for(var l=Math.abs(i-a),c=1;l>0;)c++,l--;var f=s.slice(c).join(""),h=it(e)&&f.length||f.match(/[1-9]/)?"."+f:"",d=s.slice(0,c).join("")+h+"e"+(i>=0?"+":"")+a.toString();return r.sign+d}function Zo(t,e){if(isNaN(t)||!isFinite(t))return String(t);var n=fr(t),r=typeof e=="number"?hr(n,n.exponent+1+e):n,i=r.coefficients,s=r.exponent+1,a=s+(e||0);return i.length<a&&(i=i.concat(Ye(a-i.length))),s<0&&(i=Ye(-s+1).concat(i),s=1),s<i.length&&i.splice(s,0,s===0?"0.":"."),r.sign+i.join("")}function js(t,e){if(isNaN(t)||!isFinite(t))return String(t);var n=fr(t),r=e?hr(n,e):n,i=r.coefficients,s=r.exponent;i.length<e&&(i=i.concat(Ye(e-i.length)));var a=i.shift();return r.sign+a+(i.length>0?"."+i.join(""):"")+"e"+(s>=0?"+":"")+s}function Xo(t,e,n){if(isNaN(t)||!isFinite(t))return String(t);var r=Wi(n==null?void 0:n.lowerExp,-3),i=Wi(n==null?void 0:n.upperExp,5),s=fr(t),a=e?hr(s,e):s;if(a.exponent<r||a.exponent>=i)return js(t,e);var u=a.coefficients,o=a.exponent;u.length<e&&(u=u.concat(Ye(e-u.length))),u=u.concat(Ye(o-u.length+1+(u.length<e?e-u.length:0))),u=Ye(-o).concat(u);var l=o>0?o:0;return l<u.length-1&&u.splice(l+1,0,"."),a.sign+u.join("")}function hr(t,e){for(var n={sign:t.sign,coefficients:t.coefficients,exponent:t.exponent},r=n.coefficients;e<=0;)r.unshift(0),n.exponent++,e++;if(r.length>e){var i=r.splice(e,r.length-e);if(i[0]>=5){var s=e-1;for(r[s]++;r[s]===10;)r.pop(),s===0&&(r.unshift(0),n.exponent++,s++),s--,r[s]++}}return n}function Ye(t){for(var e=[],n=0;n<t;n++)e.push(0);return e}function Yo(t){return t.toExponential().replace(/e.*$/,"").replace(/^0\.?0*|\./,"").length}function Yn(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1e-8,r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0;if(n<=0)throw new Error("Relative tolerance must be greater than 0");if(r<0)throw new Error("Absolute tolerance must be at least 0");return isNaN(t)||isNaN(e)?!1:!isFinite(t)||!isFinite(e)?t===e:t===e?!0:Math.abs(t-e)<=Math.max(n*Math.max(Math.abs(t),Math.abs(e)),r)}function Vi(t,e){if(it(t))return t;if(vt(t))return t.toNumber();e()}function Wi(t,e){return it(t)?t:vt(t)?t.toNumber():e}var ta=function(){return ta=Xn.create,Xn},Go=["?BigNumber","?Complex","?DenseMatrix","?Fraction"],Jo=Q("typed",Go,function(e){var{BigNumber:n,Complex:r,DenseMatrix:i,Fraction:s}=e,a=ta();return a.clear(),a.addTypes([{name:"number",test:it},{name:"Complex",test:Ys},{name:"BigNumber",test:vt},{name:"bigint",test:ao},{name:"Fraction",test:Gs},{name:"Unit",test:Js},{name:"identifier",test:u=>Qt&&/^(?:[A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C8A\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CD\uA7D0\uA7D1\uA7D3\uA7D5-\uA7DC\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF40\uDF42-\uDF49\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDDC0-\uDDF3\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDD4A-\uDD65\uDD6F-\uDD85\uDE80-\uDEA9\uDEB0\uDEB1\uDEC2-\uDEC4\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDF70-\uDF81\uDFB0-\uDFC4\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE3F\uDE40\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61\uDF80-\uDF89\uDF8B\uDF8E\uDF90-\uDFB5\uDFB7\uDFD1\uDFD3]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8\uDFC0-\uDFE0]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDEE0-\uDEF2\uDF02\uDF04-\uDF10\uDF12-\uDF33\uDFB0]|\uD808[\uDC00-\uDF99]|\uD809[\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD80E\uD80F\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883\uD885-\uD887][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2F\uDC41-\uDC46\uDC60-\uDFFF]|\uD810[\uDC00-\uDFFA]|\uD811[\uDC00-\uDE46]|\uD818[\uDD00-\uDD1D]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE70-\uDEBE\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDD40-\uDD6C\uDE40-\uDE7F\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDCFF-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD32\uDD50-\uDD52\uDD55\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD837[\uDF00-\uDF1E\uDF25-\uDF2A]|\uD838[\uDC30-\uDC6D\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB]|\uD839[\uDCD0-\uDCEB\uDDD0-\uDDED\uDDF0\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF39\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0\uDFF0-\uDFFF]|\uD87B[\uDC00-\uDE5D]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A\uDF50-\uDFFF]|\uD888[\uDC00-\uDFAF])(?:[0-9A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C8A\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CD\uA7D0\uA7D1\uA7D3\uA7D5-\uA7DC\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF40\uDF42-\uDF49\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDDC0-\uDDF3\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDD4A-\uDD65\uDD6F-\uDD85\uDE80-\uDEA9\uDEB0\uDEB1\uDEC2-\uDEC4\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDF70-\uDF81\uDFB0-\uDFC4\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE3F\uDE40\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61\uDF80-\uDF89\uDF8B\uDF8E\uDF90-\uDFB5\uDFB7\uDFD1\uDFD3]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8\uDFC0-\uDFE0]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDEE0-\uDEF2\uDF02\uDF04-\uDF10\uDF12-\uDF33\uDFB0]|\uD808[\uDC00-\uDF99]|\uD809[\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD80E\uD80F\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883\uD885-\uD887][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2F\uDC41-\uDC46\uDC60-\uDFFF]|\uD810[\uDC00-\uDFFA]|\uD811[\uDC00-\uDE46]|\uD818[\uDD00-\uDD1D]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE70-\uDEBE\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDD40-\uDD6C\uDE40-\uDE7F\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDCFF-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD32\uDD50-\uDD52\uDD55\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD837[\uDF00-\uDF1E\uDF25-\uDF2A]|\uD838[\uDC30-\uDC6D\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB]|\uD839[\uDCD0-\uDCEB\uDDD0-\uDDED\uDDF0\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF39\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0\uDFF0-\uDFFF]|\uD87B[\uDC00-\uDE5D]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A\uDF50-\uDFFF]|\uD888[\uDC00-\uDFAF])*$/.test(u)},{name:"string",test:Qt},{name:"Chain",test:Lo},{name:"Array",test:ht},{name:"Matrix",test:Wt},{name:"DenseMatrix",test:uo},{name:"SparseMatrix",test:oo},{name:"Range",test:co},{name:"Index",test:hi},{name:"boolean",test:lo},{name:"ResultSet",test:fo},{name:"Help",test:ho},{name:"function",test:po},{name:"Date",test:mo},{name:"RegExp",test:go},{name:"null",test:vo},{name:"undefined",test:yo},{name:"AccessorNode",test:wo},{name:"ArrayNode",test:Fo},{name:"AssignmentNode",test:Eo},{name:"BlockNode",test:Ao},{name:"ConditionalNode",test:Co},{name:"ConstantNode",test:_o},{name:"FunctionNode",test:bo},{name:"FunctionAssignmentNode",test:xo},{name:"IndexNode",test:Bo},{name:"Node",test:Mo},{name:"ObjectNode",test:So},{name:"OperatorNode",test:No},{name:"ParenthesisNode",test:To},{name:"RangeNode",test:Io},{name:"RelationalNode",test:Po},{name:"SymbolNode",test:Ro},{name:"Map",test:Do},{name:"Object",test:pi}]),a.addConversions([{from:"number",to:"BigNumber",convert:function(o){if(n||Bn(o),Yo(o)>15)throw new TypeError("Cannot implicitly convert a number with >15 significant digits to BigNumber (value: "+o+"). Use function bignumber(x) to convert to BigNumber.");return new n(o)}},{from:"number",to:"Complex",convert:function(o){return r||Mn(o),new r(o,0)}},{from:"BigNumber",to:"Complex",convert:function(o){return r||Mn(o),new r(o.toNumber(),0)}},{from:"bigint",to:"number",convert:function(o){if(o>Number.MAX_SAFE_INTEGER)throw new TypeError("Cannot implicitly convert bigint to number: value exceeds the max safe integer value (value: "+o+")");return Number(o)}},{from:"bigint",to:"BigNumber",convert:function(o){return n||Bn(o),new n(o.toString())}},{from:"bigint",to:"Fraction",convert:function(o){return s||Sn(o),new s(o)}},{from:"Fraction",to:"BigNumber",convert:function(o){throw new TypeError("Cannot implicitly convert a Fraction to BigNumber or vice versa. Use function bignumber(x) to convert to BigNumber or fraction(x) to convert to Fraction.")}},{from:"Fraction",to:"Complex",convert:function(o){return r||Mn(o),new r(o.valueOf(),0)}},{from:"number",to:"Fraction",convert:function(o){s||Sn(o);var l=new s(o);if(l.valueOf()!==o)throw new TypeError("Cannot implicitly convert a number to a Fraction when there will be a loss of precision (value: "+o+"). Use function fraction(x) to convert to Fraction.");return l}},{from:"string",to:"number",convert:function(o){var l=Number(o);if(isNaN(l))throw new Error('Cannot convert "'+o+'" to a number');return l}},{from:"string",to:"BigNumber",convert:function(o){n||Bn(o);try{return new n(o)}catch{throw new Error('Cannot convert "'+o+'" to BigNumber')}}},{from:"string",to:"bigint",convert:function(o){try{return BigInt(o)}catch{throw new Error('Cannot convert "'+o+'" to BigInt')}}},{from:"string",to:"Fraction",convert:function(o){s||Sn(o);try{return new s(o)}catch{throw new Error('Cannot convert "'+o+'" to Fraction')}}},{from:"string",to:"Complex",convert:function(o){r||Mn(o);try{return new r(o)}catch{throw new Error('Cannot convert "'+o+'" to Complex')}}},{from:"boolean",to:"number",convert:function(o){return+o}},{from:"boolean",to:"BigNumber",convert:function(o){return n||Bn(o),new n(+o)}},{from:"boolean",to:"bigint",convert:function(o){return BigInt(+o)}},{from:"boolean",to:"Fraction",convert:function(o){return s||Sn(o),new s(+o)}},{from:"boolean",to:"string",convert:function(o){return String(o)}},{from:"Array",to:"Matrix",convert:function(o){return i||Ko(),new i(o)}},{from:"Matrix",to:"Array",convert:function(o){return o.valueOf()}}]),a.onMismatch=(u,o,l)=>{var c=a.createError(u,o,l);if(["wrongType","mismatch"].includes(c.data.category)&&o.length===1&&Zn(o[0])&&l.some(h=>!h.params.includes(","))){var f=new TypeError("Function '".concat(u,"' doesn't apply to matrices. To call it ")+"elementwise on a matrix 'M', try 'map(M, ".concat(u,")'."));throw f.data=c.data,f}throw c},a.onMismatch=(u,o,l)=>{var c=a.createError(u,o,l);if(["wrongType","mismatch"].includes(c.data.category)&&o.length===1&&Zn(o[0])&&l.some(h=>!h.params.includes(","))){var f=new TypeError("Function '".concat(u,"' doesn't apply to matrices. To call it ")+"elementwise on a matrix 'M', try 'map(M, ".concat(u,")'."));throw f.data=c.data,f}throw c},a});function Bn(t){throw new Error("Cannot convert value ".concat(t," into a BigNumber: no class 'BigNumber' provided"))}function Mn(t){throw new Error("Cannot convert value ".concat(t," into a Complex number: no class 'Complex' provided"))}function Ko(){throw new Error("Cannot convert array into a Matrix: no class 'DenseMatrix' provided")}function Sn(t){throw new Error("Cannot convert value ".concat(t," into a Fraction, no class 'Fraction' provided."))}/*!
 *  decimal.js v10.5.0
 *  An arbitrary-precision Decimal type for JavaScript.
 *  https://github.com/MikeMcl/decimal.js
 *  Copyright (c) 2025 Michael Mclaughlin <M8ch88l@gmail.com>
 *  MIT Licence
 */var kr=9e15,_e=1e9,$r="0123456789abcdef",Gn="2.3025850929940456840179914546843642076011014886287729760333279009675726096773524802359972050895982983419677840422862486334095254650828067566662873690987816894829072083255546808437998948262331985283935053089653777326288461633662222876982198867465436674744042432743651550489343149393914796194044002221051017141748003688084012647080685567743216228355220114804663715659121373450747856947683463616792101806445070648000277502684916746550586856935673420670581136429224554405758925724208241314695689016758940256776311356919292033376587141660230105703089634572075440370847469940168269282808481184289314848524948644871927809676271275775397027668605952496716674183485704422507197965004714951050492214776567636938662976979522110718264549734772662425709429322582798502585509785265383207606726317164309505995087807523710333101197857547331541421808427543863591778117054309827482385045648019095610299291824318237525357709750539565187697510374970888692180205189339507238539205144634197265287286965110862571492198849978748873771345686209167058",Jn="3.1415926535897932384626433832795028841971693993751058209749445923078164062862089986280348253421170679821480865132823066470938446095505822317253594081284811174502841027019385211055596446229489549303819644288109756659334461284756482337867831652712019091456485669234603486104543266482133936072602491412737245870066063155881748815209209628292540917153643678925903600113305305488204665213841469519415116094330572703657595919530921861173819326117931051185480744623799627495673518857527248912279381830119491298336733624406566430860213949463952247371907021798609437027705392171762931767523846748184676694051320005681271452635608277857713427577896091736371787214684409012249534301465495853710507922796892589235420199561121290219608640344181598136297747713099605187072113499999983729780499510597317328160963185950244594553469083026425223082533446850352619311881710100031378387528865875332083814206171776691473035982534904287554687311595628638823537875937519577818577805321712268066130019278766111959092164201989380952572010654858632789",Ur={precision:20,rounding:4,modulo:1,toExpNeg:-7,toExpPos:21,minE:-9e15,maxE:kr,crypto:!1},ea,ce,Y=!0,pr="[DecimalError] ",Ce=pr+"Invalid argument: ",na=pr+"Precision limit exceeded",ra=pr+"crypto unavailable",ia="[object Decimal]",Ft=Math.floor,pt=Math.pow,Qo=/^0b([01]+(\.[01]*)?|\.[01]+)(p[+-]?\d+)?$/i,jo=/^0x([0-9a-f]+(\.[0-9a-f]*)?|\.[0-9a-f]+)(p[+-]?\d+)?$/i,tc=/^0o([0-7]+(\.[0-7]*)?|\.[0-7]+)(p[+-]?\d+)?$/i,sa=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,Xt=1e7,X=7,ec=9007199254740991,nc=Gn.length-1,zr=Jn.length-1,I={toStringTag:ia};I.absoluteValue=I.abs=function(){var t=new this.constructor(this);return t.s<0&&(t.s=1),Z(t)};I.ceil=function(){return Z(new this.constructor(this),this.e+1,2)};I.clampedTo=I.clamp=function(t,e){var n,r=this,i=r.constructor;if(t=new i(t),e=new i(e),!t.s||!e.s)return new i(NaN);if(t.gt(e))throw Error(Ce+e);return n=r.cmp(t),n<0?t:r.cmp(e)>0?e:new i(r)};I.comparedTo=I.cmp=function(t){var e,n,r,i,s=this,a=s.d,u=(t=new s.constructor(t)).d,o=s.s,l=t.s;if(!a||!u)return!o||!l?NaN:o!==l?o:a===u?0:!a^o<0?1:-1;if(!a[0]||!u[0])return a[0]?o:u[0]?-l:0;if(o!==l)return o;if(s.e!==t.e)return s.e>t.e^o<0?1:-1;for(r=a.length,i=u.length,e=0,n=r<i?r:i;e<n;++e)if(a[e]!==u[e])return a[e]>u[e]^o<0?1:-1;return r===i?0:r>i^o<0?1:-1};I.cosine=I.cos=function(){var t,e,n=this,r=n.constructor;return n.d?n.d[0]?(t=r.precision,e=r.rounding,r.precision=t+Math.max(n.e,n.sd())+X,r.rounding=1,n=rc(r,la(r,n)),r.precision=t,r.rounding=e,Z(ce==2||ce==3?n.neg():n,t,e,!0)):new r(1):new r(NaN)};I.cubeRoot=I.cbrt=function(){var t,e,n,r,i,s,a,u,o,l,c=this,f=c.constructor;if(!c.isFinite()||c.isZero())return new f(c);for(Y=!1,s=c.s*pt(c.s*c,1/3),!s||Math.abs(s)==1/0?(n=yt(c.d),t=c.e,(s=(t-n.length+1)%3)&&(n+=s==1||s==-2?"0":"00"),s=pt(n,1/3),t=Ft((t+1)/3)-(t%3==(t<0?-1:2)),s==1/0?n="5e"+t:(n=s.toExponential(),n=n.slice(0,n.indexOf("e")+1)+t),r=new f(n),r.s=c.s):r=new f(s.toString()),a=(t=f.precision)+3;;)if(u=r,o=u.times(u).times(u),l=o.plus(c),r=nt(l.plus(c).times(u),l.plus(o),a+2,1),yt(u.d).slice(0,a)===(n=yt(r.d)).slice(0,a))if(n=n.slice(a-3,a+1),n=="9999"||!i&&n=="4999"){if(!i&&(Z(u,t+1,0),u.times(u).times(u).eq(c))){r=u;break}a+=4,i=1}else{(!+n||!+n.slice(1)&&n.charAt(0)=="5")&&(Z(r,t+1,1),e=!r.times(r).times(r).eq(c));break}return Y=!0,Z(r,t,f.rounding,e)};I.decimalPlaces=I.dp=function(){var t,e=this.d,n=NaN;if(e){if(t=e.length-1,n=(t-Ft(this.e/X))*X,t=e[t],t)for(;t%10==0;t/=10)n--;n<0&&(n=0)}return n};I.dividedBy=I.div=function(t){return nt(this,new this.constructor(t))};I.dividedToIntegerBy=I.divToInt=function(t){var e=this,n=e.constructor;return Z(nt(e,new n(t),0,1,1),n.precision,n.rounding)};I.equals=I.eq=function(t){return this.cmp(t)===0};I.floor=function(){return Z(new this.constructor(this),this.e+1,3)};I.greaterThan=I.gt=function(t){return this.cmp(t)>0};I.greaterThanOrEqualTo=I.gte=function(t){var e=this.cmp(t);return e==1||e===0};I.hyperbolicCosine=I.cosh=function(){var t,e,n,r,i,s=this,a=s.constructor,u=new a(1);if(!s.isFinite())return new a(s.s?1/0:NaN);if(s.isZero())return u;n=a.precision,r=a.rounding,a.precision=n+Math.max(s.e,s.sd())+4,a.rounding=1,i=s.d.length,i<32?(t=Math.ceil(i/3),e=(1/mr(4,t)).toString()):(t=16,e="2.3283064365386962890625e-10"),s=Ke(a,1,s.times(e),new a(1),!0);for(var o,l=t,c=new a(8);l--;)o=s.times(s),s=u.minus(o.times(c.minus(o.times(c))));return Z(s,a.precision=n,a.rounding=r,!0)};I.hyperbolicSine=I.sinh=function(){var t,e,n,r,i=this,s=i.constructor;if(!i.isFinite()||i.isZero())return new s(i);if(e=s.precision,n=s.rounding,s.precision=e+Math.max(i.e,i.sd())+4,s.rounding=1,r=i.d.length,r<3)i=Ke(s,2,i,i,!0);else{t=1.4*Math.sqrt(r),t=t>16?16:t|0,i=i.times(1/mr(5,t)),i=Ke(s,2,i,i,!0);for(var a,u=new s(5),o=new s(16),l=new s(20);t--;)a=i.times(i),i=i.times(u.plus(a.times(o.times(a).plus(l))))}return s.precision=e,s.rounding=n,Z(i,e,n,!0)};I.hyperbolicTangent=I.tanh=function(){var t,e,n=this,r=n.constructor;return n.isFinite()?n.isZero()?new r(n):(t=r.precision,e=r.rounding,r.precision=t+7,r.rounding=1,nt(n.sinh(),n.cosh(),r.precision=t,r.rounding=e)):new r(n.s)};I.inverseCosine=I.acos=function(){var t=this,e=t.constructor,n=t.abs().cmp(1),r=e.precision,i=e.rounding;return n!==-1?n===0?t.isNeg()?te(e,r,i):new e(0):new e(NaN):t.isZero()?te(e,r+4,i).times(.5):(e.precision=r+6,e.rounding=1,t=new e(1).minus(t).div(t.plus(1)).sqrt().atan(),e.precision=r,e.rounding=i,t.times(2))};I.inverseHyperbolicCosine=I.acosh=function(){var t,e,n=this,r=n.constructor;return n.lte(1)?new r(n.eq(1)?0:NaN):n.isFinite()?(t=r.precision,e=r.rounding,r.precision=t+Math.max(Math.abs(n.e),n.sd())+4,r.rounding=1,Y=!1,n=n.times(n).minus(1).sqrt().plus(n),Y=!0,r.precision=t,r.rounding=e,n.ln()):new r(n)};I.inverseHyperbolicSine=I.asinh=function(){var t,e,n=this,r=n.constructor;return!n.isFinite()||n.isZero()?new r(n):(t=r.precision,e=r.rounding,r.precision=t+2*Math.max(Math.abs(n.e),n.sd())+6,r.rounding=1,Y=!1,n=n.times(n).plus(1).sqrt().plus(n),Y=!0,r.precision=t,r.rounding=e,n.ln())};I.inverseHyperbolicTangent=I.atanh=function(){var t,e,n,r,i=this,s=i.constructor;return i.isFinite()?i.e>=0?new s(i.abs().eq(1)?i.s/0:i.isZero()?i:NaN):(t=s.precision,e=s.rounding,r=i.sd(),Math.max(r,t)<2*-i.e-1?Z(new s(i),t,e,!0):(s.precision=n=r-i.e,i=nt(i.plus(1),new s(1).minus(i),n+t,1),s.precision=t+4,s.rounding=1,i=i.ln(),s.precision=t,s.rounding=e,i.times(.5))):new s(NaN)};I.inverseSine=I.asin=function(){var t,e,n,r,i=this,s=i.constructor;return i.isZero()?new s(i):(e=i.abs().cmp(1),n=s.precision,r=s.rounding,e!==-1?e===0?(t=te(s,n+4,r).times(.5),t.s=i.s,t):new s(NaN):(s.precision=n+6,s.rounding=1,i=i.div(new s(1).minus(i.times(i)).sqrt().plus(1)).atan(),s.precision=n,s.rounding=r,i.times(2)))};I.inverseTangent=I.atan=function(){var t,e,n,r,i,s,a,u,o,l=this,c=l.constructor,f=c.precision,h=c.rounding;if(l.isFinite()){if(l.isZero())return new c(l);if(l.abs().eq(1)&&f+4<=zr)return a=te(c,f+4,h).times(.25),a.s=l.s,a}else{if(!l.s)return new c(NaN);if(f+4<=zr)return a=te(c,f+4,h).times(.5),a.s=l.s,a}for(c.precision=u=f+10,c.rounding=1,n=Math.min(28,u/X+2|0),t=n;t;--t)l=l.div(l.times(l).plus(1).sqrt().plus(1));for(Y=!1,e=Math.ceil(u/X),r=1,o=l.times(l),a=new c(l),i=l;t!==-1;)if(i=i.times(o),s=a.minus(i.div(r+=2)),i=i.times(o),a=s.plus(i.div(r+=2)),a.d[e]!==void 0)for(t=e;a.d[t]===s.d[t]&&t--;);return n&&(a=a.times(2<<n-1)),Y=!0,Z(a,c.precision=f,c.rounding=h,!0)};I.isFinite=function(){return!!this.d};I.isInteger=I.isInt=function(){return!!this.d&&Ft(this.e/X)>this.d.length-2};I.isNaN=function(){return!this.s};I.isNegative=I.isNeg=function(){return this.s<0};I.isPositive=I.isPos=function(){return this.s>0};I.isZero=function(){return!!this.d&&this.d[0]===0};I.lessThan=I.lt=function(t){return this.cmp(t)<0};I.lessThanOrEqualTo=I.lte=function(t){return this.cmp(t)<1};I.logarithm=I.log=function(t){var e,n,r,i,s,a,u,o,l=this,c=l.constructor,f=c.precision,h=c.rounding,d=5;if(t==null)t=new c(10),e=!0;else{if(t=new c(t),n=t.d,t.s<0||!n||!n[0]||t.eq(1))return new c(NaN);e=t.eq(10)}if(n=l.d,l.s<0||!n||!n[0]||l.eq(1))return new c(n&&!n[0]?-1/0:l.s!=1?NaN:n?0:1/0);if(e)if(n.length>1)s=!0;else{for(i=n[0];i%10===0;)i/=10;s=i!==1}if(Y=!1,u=f+d,a=we(l,u),r=e?Kn(c,u+10):we(t,u),o=nt(a,r,u,1),Dn(o.d,i=f,h))do if(u+=10,a=we(l,u),r=e?Kn(c,u+10):we(t,u),o=nt(a,r,u,1),!s){+yt(o.d).slice(i+1,i+15)+1==1e14&&(o=Z(o,f+1,0));break}while(Dn(o.d,i+=10,h));return Y=!0,Z(o,f,h)};I.minus=I.sub=function(t){var e,n,r,i,s,a,u,o,l,c,f,h,d=this,m=d.constructor;if(t=new m(t),!d.d||!t.d)return!d.s||!t.s?t=new m(NaN):d.d?t.s=-t.s:t=new m(t.d||d.s!==t.s?d:NaN),t;if(d.s!=t.s)return t.s=-t.s,d.plus(t);if(l=d.d,h=t.d,u=m.precision,o=m.rounding,!l[0]||!h[0]){if(h[0])t.s=-t.s;else if(l[0])t=new m(d);else return new m(o===3?-0:0);return Y?Z(t,u,o):t}if(n=Ft(t.e/X),c=Ft(d.e/X),l=l.slice(),s=c-n,s){for(f=s<0,f?(e=l,s=-s,a=h.length):(e=h,n=c,a=l.length),r=Math.max(Math.ceil(u/X),a)+2,s>r&&(s=r,e.length=1),e.reverse(),r=s;r--;)e.push(0);e.reverse()}else{for(r=l.length,a=h.length,f=r<a,f&&(a=r),r=0;r<a;r++)if(l[r]!=h[r]){f=l[r]<h[r];break}s=0}for(f&&(e=l,l=h,h=e,t.s=-t.s),a=l.length,r=h.length-a;r>0;--r)l[a++]=0;for(r=h.length;r>s;){if(l[--r]<h[r]){for(i=r;i&&l[--i]===0;)l[i]=Xt-1;--l[i],l[r]+=Xt}l[r]-=h[r]}for(;l[--a]===0;)l.pop();for(;l[0]===0;l.shift())--n;return l[0]?(t.d=l,t.e=dr(l,n),Y?Z(t,u,o):t):new m(o===3?-0:0)};I.modulo=I.mod=function(t){var e,n=this,r=n.constructor;return t=new r(t),!n.d||!t.s||t.d&&!t.d[0]?new r(NaN):!t.d||n.d&&!n.d[0]?Z(new r(n),r.precision,r.rounding):(Y=!1,r.modulo==9?(e=nt(n,t.abs(),0,3,1),e.s*=t.s):e=nt(n,t,0,r.modulo,1),e=e.times(t),Y=!0,n.minus(e))};I.naturalExponential=I.exp=function(){return qr(this)};I.naturalLogarithm=I.ln=function(){return we(this)};I.negated=I.neg=function(){var t=new this.constructor(this);return t.s=-t.s,Z(t)};I.plus=I.add=function(t){var e,n,r,i,s,a,u,o,l,c,f=this,h=f.constructor;if(t=new h(t),!f.d||!t.d)return!f.s||!t.s?t=new h(NaN):f.d||(t=new h(t.d||f.s===t.s?f:NaN)),t;if(f.s!=t.s)return t.s=-t.s,f.minus(t);if(l=f.d,c=t.d,u=h.precision,o=h.rounding,!l[0]||!c[0])return c[0]||(t=new h(f)),Y?Z(t,u,o):t;if(s=Ft(f.e/X),r=Ft(t.e/X),l=l.slice(),i=s-r,i){for(i<0?(n=l,i=-i,a=c.length):(n=c,r=s,a=l.length),s=Math.ceil(u/X),a=s>a?s+1:a+1,i>a&&(i=a,n.length=1),n.reverse();i--;)n.push(0);n.reverse()}for(a=l.length,i=c.length,a-i<0&&(i=a,n=c,c=l,l=n),e=0;i;)e=(l[--i]=l[i]+c[i]+e)/Xt|0,l[i]%=Xt;for(e&&(l.unshift(e),++r),a=l.length;l[--a]==0;)l.pop();return t.d=l,t.e=dr(l,r),Y?Z(t,u,o):t};I.precision=I.sd=function(t){var e,n=this;if(t!==void 0&&t!==!!t&&t!==1&&t!==0)throw Error(Ce+t);return n.d?(e=aa(n.d),t&&n.e+1>e&&(e=n.e+1)):e=NaN,e};I.round=function(){var t=this,e=t.constructor;return Z(new e(t),t.e+1,e.rounding)};I.sine=I.sin=function(){var t,e,n=this,r=n.constructor;return n.isFinite()?n.isZero()?new r(n):(t=r.precision,e=r.rounding,r.precision=t+Math.max(n.e,n.sd())+X,r.rounding=1,n=sc(r,la(r,n)),r.precision=t,r.rounding=e,Z(ce>2?n.neg():n,t,e,!0)):new r(NaN)};I.squareRoot=I.sqrt=function(){var t,e,n,r,i,s,a=this,u=a.d,o=a.e,l=a.s,c=a.constructor;if(l!==1||!u||!u[0])return new c(!l||l<0&&(!u||u[0])?NaN:u?a:1/0);for(Y=!1,l=Math.sqrt(+a),l==0||l==1/0?(e=yt(u),(e.length+o)%2==0&&(e+="0"),l=Math.sqrt(e),o=Ft((o+1)/2)-(o<0||o%2),l==1/0?e="5e"+o:(e=l.toExponential(),e=e.slice(0,e.indexOf("e")+1)+o),r=new c(e)):r=new c(l.toString()),n=(o=c.precision)+3;;)if(s=r,r=s.plus(nt(a,s,n+2,1)).times(.5),yt(s.d).slice(0,n)===(e=yt(r.d)).slice(0,n))if(e=e.slice(n-3,n+1),e=="9999"||!i&&e=="4999"){if(!i&&(Z(s,o+1,0),s.times(s).eq(a))){r=s;break}n+=4,i=1}else{(!+e||!+e.slice(1)&&e.charAt(0)=="5")&&(Z(r,o+1,1),t=!r.times(r).eq(a));break}return Y=!0,Z(r,o,c.rounding,t)};I.tangent=I.tan=function(){var t,e,n=this,r=n.constructor;return n.isFinite()?n.isZero()?new r(n):(t=r.precision,e=r.rounding,r.precision=t+10,r.rounding=1,n=n.sin(),n.s=1,n=nt(n,new r(1).minus(n.times(n)).sqrt(),t+10,0),r.precision=t,r.rounding=e,Z(ce==2||ce==4?n.neg():n,t,e,!0)):new r(NaN)};I.times=I.mul=function(t){var e,n,r,i,s,a,u,o,l,c=this,f=c.constructor,h=c.d,d=(t=new f(t)).d;if(t.s*=c.s,!h||!h[0]||!d||!d[0])return new f(!t.s||h&&!h[0]&&!d||d&&!d[0]&&!h?NaN:!h||!d?t.s/0:t.s*0);for(n=Ft(c.e/X)+Ft(t.e/X),o=h.length,l=d.length,o<l&&(s=h,h=d,d=s,a=o,o=l,l=a),s=[],a=o+l,r=a;r--;)s.push(0);for(r=l;--r>=0;){for(e=0,i=o+r;i>r;)u=s[i]+d[r]*h[i-r-1]+e,s[i--]=u%Xt|0,e=u/Xt|0;s[i]=(s[i]+e)%Xt|0}for(;!s[--a];)s.pop();return e?++n:s.shift(),t.d=s,t.e=dr(s,n),Y?Z(t,f.precision,f.rounding):t};I.toBinary=function(t,e){return di(this,2,t,e)};I.toDecimalPlaces=I.toDP=function(t,e){var n=this,r=n.constructor;return n=new r(n),t===void 0?n:(St(t,0,_e),e===void 0?e=r.rounding:St(e,0,8),Z(n,t+n.e+1,e))};I.toExponential=function(t,e){var n,r=this,i=r.constructor;return t===void 0?n=ie(r,!0):(St(t,0,_e),e===void 0?e=i.rounding:St(e,0,8),r=Z(new i(r),t+1,e),n=ie(r,!0,t+1)),r.isNeg()&&!r.isZero()?"-"+n:n};I.toFixed=function(t,e){var n,r,i=this,s=i.constructor;return t===void 0?n=ie(i):(St(t,0,_e),e===void 0?e=s.rounding:St(e,0,8),r=Z(new s(i),t+i.e+1,e),n=ie(r,!1,t+r.e+1)),i.isNeg()&&!i.isZero()?"-"+n:n};I.toFraction=function(t){var e,n,r,i,s,a,u,o,l,c,f,h,d=this,m=d.d,p=d.constructor;if(!m)return new p(d);if(l=n=new p(1),r=o=new p(0),e=new p(r),s=e.e=aa(m)-d.e-1,a=s%X,e.d[0]=pt(10,a<0?X+a:a),t==null)t=s>0?e:l;else{if(u=new p(t),!u.isInt()||u.lt(l))throw Error(Ce+u);t=u.gt(e)?s>0?e:l:u}for(Y=!1,u=new p(yt(m)),c=p.precision,p.precision=s=m.length*X*2;f=nt(u,e,0,1,1),i=n.plus(f.times(r)),i.cmp(t)!=1;)n=r,r=i,i=l,l=o.plus(f.times(i)),o=i,i=e,e=u.minus(f.times(i)),u=i;return i=nt(t.minus(n),r,0,1,1),o=o.plus(i.times(l)),n=n.plus(i.times(r)),o.s=l.s=d.s,h=nt(l,r,s,1).minus(d).abs().cmp(nt(o,n,s,1).minus(d).abs())<1?[l,r]:[o,n],p.precision=c,Y=!0,h};I.toHexadecimal=I.toHex=function(t,e){return di(this,16,t,e)};I.toNearest=function(t,e){var n=this,r=n.constructor;if(n=new r(n),t==null){if(!n.d)return n;t=new r(1),e=r.rounding}else{if(t=new r(t),e===void 0?e=r.rounding:St(e,0,8),!n.d)return t.s?n:t;if(!t.d)return t.s&&(t.s=n.s),t}return t.d[0]?(Y=!1,n=nt(n,t,0,e,1).times(t),Y=!0,Z(n)):(t.s=n.s,n=t),n};I.toNumber=function(){return+this};I.toOctal=function(t,e){return di(this,8,t,e)};I.toPower=I.pow=function(t){var e,n,r,i,s,a,u=this,o=u.constructor,l=+(t=new o(t));if(!u.d||!t.d||!u.d[0]||!t.d[0])return new o(pt(+u,l));if(u=new o(u),u.eq(1))return u;if(r=o.precision,s=o.rounding,t.eq(1))return Z(u,r,s);if(e=Ft(t.e/X),e>=t.d.length-1&&(n=l<0?-l:l)<=ec)return i=ua(o,u,n,r),t.s<0?new o(1).div(i):Z(i,r,s);if(a=u.s,a<0){if(e<t.d.length-1)return new o(NaN);if((t.d[e]&1)==0&&(a=1),u.e==0&&u.d[0]==1&&u.d.length==1)return u.s=a,u}return n=pt(+u,l),e=n==0||!isFinite(n)?Ft(l*(Math.log("0."+yt(u.d))/Math.LN10+u.e+1)):new o(n+"").e,e>o.maxE+1||e<o.minE-1?new o(e>0?a/0:0):(Y=!1,o.rounding=u.s=1,n=Math.min(12,(e+"").length),i=qr(t.times(we(u,r+n)),r),i.d&&(i=Z(i,r+5,1),Dn(i.d,r,s)&&(e=r+10,i=Z(qr(t.times(we(u,e+n)),e),e+5,1),+yt(i.d).slice(r+1,r+15)+1==1e14&&(i=Z(i,r+1,0)))),i.s=a,Y=!0,o.rounding=s,Z(i,r,s))};I.toPrecision=function(t,e){var n,r=this,i=r.constructor;return t===void 0?n=ie(r,r.e<=i.toExpNeg||r.e>=i.toExpPos):(St(t,1,_e),e===void 0?e=i.rounding:St(e,0,8),r=Z(new i(r),t,e),n=ie(r,t<=r.e||r.e<=i.toExpNeg,t)),r.isNeg()&&!r.isZero()?"-"+n:n};I.toSignificantDigits=I.toSD=function(t,e){var n=this,r=n.constructor;return t===void 0?(t=r.precision,e=r.rounding):(St(t,1,_e),e===void 0?e=r.rounding:St(e,0,8)),Z(new r(n),t,e)};I.toString=function(){var t=this,e=t.constructor,n=ie(t,t.e<=e.toExpNeg||t.e>=e.toExpPos);return t.isNeg()&&!t.isZero()?"-"+n:n};I.truncated=I.trunc=function(){return Z(new this.constructor(this),this.e+1,1)};I.valueOf=I.toJSON=function(){var t=this,e=t.constructor,n=ie(t,t.e<=e.toExpNeg||t.e>=e.toExpPos);return t.isNeg()?"-"+n:n};function yt(t){var e,n,r,i=t.length-1,s="",a=t[0];if(i>0){for(s+=a,e=1;e<i;e++)r=t[e]+"",n=X-r.length,n&&(s+=ve(n)),s+=r;a=t[e],r=a+"",n=X-r.length,n&&(s+=ve(n))}else if(a===0)return"0";for(;a%10===0;)a/=10;return s+a}function St(t,e,n){if(t!==~~t||t<e||t>n)throw Error(Ce+t)}function Dn(t,e,n,r){var i,s,a,u;for(s=t[0];s>=10;s/=10)--e;return--e<0?(e+=X,i=0):(i=Math.ceil((e+1)/X),e%=X),s=pt(10,X-e),u=t[i]%s|0,r==null?e<3?(e==0?u=u/100|0:e==1&&(u=u/10|0),a=n<4&&u==99999||n>3&&u==49999||u==5e4||u==0):a=(n<4&&u+1==s||n>3&&u+1==s/2)&&(t[i+1]/s/100|0)==pt(10,e-2)-1||(u==s/2||u==0)&&(t[i+1]/s/100|0)==0:e<4?(e==0?u=u/1e3|0:e==1?u=u/100|0:e==2&&(u=u/10|0),a=(r||n<4)&&u==9999||!r&&n>3&&u==4999):a=((r||n<4)&&u+1==s||!r&&n>3&&u+1==s/2)&&(t[i+1]/s/1e3|0)==pt(10,e-3)-1,a}function Ln(t,e,n){for(var r,i=[0],s,a=0,u=t.length;a<u;){for(s=i.length;s--;)i[s]*=e;for(i[0]+=$r.indexOf(t.charAt(a++)),r=0;r<i.length;r++)i[r]>n-1&&(i[r+1]===void 0&&(i[r+1]=0),i[r+1]+=i[r]/n|0,i[r]%=n)}return i.reverse()}function rc(t,e){var n,r,i;if(e.isZero())return e;r=e.d.length,r<32?(n=Math.ceil(r/3),i=(1/mr(4,n)).toString()):(n=16,i="2.3283064365386962890625e-10"),t.precision+=n,e=Ke(t,1,e.times(i),new t(1));for(var s=n;s--;){var a=e.times(e);e=a.times(a).minus(a).times(8).plus(1)}return t.precision-=n,e}var nt=function(){function t(r,i,s){var a,u=0,o=r.length;for(r=r.slice();o--;)a=r[o]*i+u,r[o]=a%s|0,u=a/s|0;return u&&r.unshift(u),r}function e(r,i,s,a){var u,o;if(s!=a)o=s>a?1:-1;else for(u=o=0;u<s;u++)if(r[u]!=i[u]){o=r[u]>i[u]?1:-1;break}return o}function n(r,i,s,a){for(var u=0;s--;)r[s]-=u,u=r[s]<i[s]?1:0,r[s]=u*a+r[s]-i[s];for(;!r[0]&&r.length>1;)r.shift()}return function(r,i,s,a,u,o){var l,c,f,h,d,m,p,g,v,w,y,E,A,x,b,_,N,L,M,$,q=r.constructor,H=r.s==i.s?1:-1,G=r.d,V=i.d;if(!G||!G[0]||!V||!V[0])return new q(!r.s||!i.s||(G?V&&G[0]==V[0]:!V)?NaN:G&&G[0]==0||!V?H*0:H/0);for(o?(d=1,c=r.e-i.e):(o=Xt,d=X,c=Ft(r.e/d)-Ft(i.e/d)),M=V.length,N=G.length,v=new q(H),w=v.d=[],f=0;V[f]==(G[f]||0);f++);if(V[f]>(G[f]||0)&&c--,s==null?(x=s=q.precision,a=q.rounding):u?x=s+(r.e-i.e)+1:x=s,x<0)w.push(1),m=!0;else{if(x=x/d+2|0,f=0,M==1){for(h=0,V=V[0],x++;(f<N||h)&&x--;f++)b=h*o+(G[f]||0),w[f]=b/V|0,h=b%V|0;m=h||f<N}else{for(h=o/(V[0]+1)|0,h>1&&(V=t(V,h,o),G=t(G,h,o),M=V.length,N=G.length),_=M,y=G.slice(0,M),E=y.length;E<M;)y[E++]=0;$=V.slice(),$.unshift(0),L=V[0],V[1]>=o/2&&++L;do h=0,l=e(V,y,M,E),l<0?(A=y[0],M!=E&&(A=A*o+(y[1]||0)),h=A/L|0,h>1?(h>=o&&(h=o-1),p=t(V,h,o),g=p.length,E=y.length,l=e(p,y,g,E),l==1&&(h--,n(p,M<g?$:V,g,o))):(h==0&&(l=h=1),p=V.slice()),g=p.length,g<E&&p.unshift(0),n(y,p,E,o),l==-1&&(E=y.length,l=e(V,y,M,E),l<1&&(h++,n(y,M<E?$:V,E,o))),E=y.length):l===0&&(h++,y=[0]),w[f++]=h,l&&y[0]?y[E++]=G[_]||0:(y=[G[_]],E=1);while((_++<N||y[0]!==void 0)&&x--);m=y[0]!==void 0}w[0]||w.shift()}if(d==1)v.e=c,ea=m;else{for(f=1,h=w[0];h>=10;h/=10)f++;v.e=f+c*d-1,Z(v,u?s+v.e+1:s,a,m)}return v}}();function Z(t,e,n,r){var i,s,a,u,o,l,c,f,h,d=t.constructor;t:if(e!=null){if(f=t.d,!f)return t;for(i=1,u=f[0];u>=10;u/=10)i++;if(s=e-i,s<0)s+=X,a=e,c=f[h=0],o=c/pt(10,i-a-1)%10|0;else if(h=Math.ceil((s+1)/X),u=f.length,h>=u)if(r){for(;u++<=h;)f.push(0);c=o=0,i=1,s%=X,a=s-X+1}else break t;else{for(c=u=f[h],i=1;u>=10;u/=10)i++;s%=X,a=s-X+i,o=a<0?0:c/pt(10,i-a-1)%10|0}if(r=r||e<0||f[h+1]!==void 0||(a<0?c:c%pt(10,i-a-1)),l=n<4?(o||r)&&(n==0||n==(t.s<0?3:2)):o>5||o==5&&(n==4||r||n==6&&(s>0?a>0?c/pt(10,i-a):0:f[h-1])%10&1||n==(t.s<0?8:7)),e<1||!f[0])return f.length=0,l?(e-=t.e+1,f[0]=pt(10,(X-e%X)%X),t.e=-e||0):f[0]=t.e=0,t;if(s==0?(f.length=h,u=1,h--):(f.length=h+1,u=pt(10,X-s),f[h]=a>0?(c/pt(10,i-a)%pt(10,a)|0)*u:0),l)for(;;)if(h==0){for(s=1,a=f[0];a>=10;a/=10)s++;for(a=f[0]+=u,u=1;a>=10;a/=10)u++;s!=u&&(t.e++,f[0]==Xt&&(f[0]=1));break}else{if(f[h]+=u,f[h]!=Xt)break;f[h--]=0,u=1}for(s=f.length;f[--s]===0;)f.pop()}return Y&&(t.e>d.maxE?(t.d=null,t.e=NaN):t.e<d.minE&&(t.e=0,t.d=[0])),t}function ie(t,e,n){if(!t.isFinite())return ca(t);var r,i=t.e,s=yt(t.d),a=s.length;return e?(n&&(r=n-a)>0?s=s.charAt(0)+"."+s.slice(1)+ve(r):a>1&&(s=s.charAt(0)+"."+s.slice(1)),s=s+(t.e<0?"e":"e+")+t.e):i<0?(s="0."+ve(-i-1)+s,n&&(r=n-a)>0&&(s+=ve(r))):i>=a?(s+=ve(i+1-a),n&&(r=n-i-1)>0&&(s=s+"."+ve(r))):((r=i+1)<a&&(s=s.slice(0,r)+"."+s.slice(r)),n&&(r=n-a)>0&&(i+1===a&&(s+="."),s+=ve(r))),s}function dr(t,e){var n=t[0];for(e*=X;n>=10;n/=10)e++;return e}function Kn(t,e,n){if(e>nc)throw Y=!0,n&&(t.precision=n),Error(na);return Z(new t(Gn),e,1,!0)}function te(t,e,n){if(e>zr)throw Error(na);return Z(new t(Jn),e,n,!0)}function aa(t){var e=t.length-1,n=e*X+1;if(e=t[e],e){for(;e%10==0;e/=10)n--;for(e=t[0];e>=10;e/=10)n++}return n}function ve(t){for(var e="";t--;)e+="0";return e}function ua(t,e,n,r){var i,s=new t(1),a=Math.ceil(r/X+4);for(Y=!1;;){if(n%2&&(s=s.times(e),Xi(s.d,a)&&(i=!0)),n=Ft(n/2),n===0){n=s.d.length-1,i&&s.d[n]===0&&++s.d[n];break}e=e.times(e),Xi(e.d,a)}return Y=!0,s}function Zi(t){return t.d[t.d.length-1]&1}function oa(t,e,n){for(var r,i,s=new t(e[0]),a=0;++a<e.length;){if(i=new t(e[a]),!i.s){s=i;break}r=s.cmp(i),(r===n||r===0&&s.s===n)&&(s=i)}return s}function qr(t,e){var n,r,i,s,a,u,o,l=0,c=0,f=0,h=t.constructor,d=h.rounding,m=h.precision;if(!t.d||!t.d[0]||t.e>17)return new h(t.d?t.d[0]?t.s<0?0:1/0:1:t.s?t.s<0?0:t:NaN);for(e==null?(Y=!1,o=m):o=e,u=new h(.03125);t.e>-2;)t=t.times(u),f+=5;for(r=Math.log(pt(2,f))/Math.LN10*2+5|0,o+=r,n=s=a=new h(1),h.precision=o;;){if(s=Z(s.times(t),o,1),n=n.times(++c),u=a.plus(nt(s,n,o,1)),yt(u.d).slice(0,o)===yt(a.d).slice(0,o)){for(i=f;i--;)a=Z(a.times(a),o,1);if(e==null)if(l<3&&Dn(a.d,o-r,d,l))h.precision=o+=10,n=s=u=new h(1),c=0,l++;else return Z(a,h.precision=m,d,Y=!0);else return h.precision=m,a}a=u}}function we(t,e){var n,r,i,s,a,u,o,l,c,f,h,d=1,m=10,p=t,g=p.d,v=p.constructor,w=v.rounding,y=v.precision;if(p.s<0||!g||!g[0]||!p.e&&g[0]==1&&g.length==1)return new v(g&&!g[0]?-1/0:p.s!=1?NaN:g?0:p);if(e==null?(Y=!1,c=y):c=e,v.precision=c+=m,n=yt(g),r=n.charAt(0),Math.abs(s=p.e)<15e14){for(;r<7&&r!=1||r==1&&n.charAt(1)>3;)p=p.times(t),n=yt(p.d),r=n.charAt(0),d++;s=p.e,r>1?(p=new v("0."+n),s++):p=new v(r+"."+n.slice(1))}else return l=Kn(v,c+2,y).times(s+""),p=we(new v(r+"."+n.slice(1)),c-m).plus(l),v.precision=y,e==null?Z(p,y,w,Y=!0):p;for(f=p,o=a=p=nt(p.minus(1),p.plus(1),c,1),h=Z(p.times(p),c,1),i=3;;){if(a=Z(a.times(h),c,1),l=o.plus(nt(a,new v(i),c,1)),yt(l.d).slice(0,c)===yt(o.d).slice(0,c))if(o=o.times(2),s!==0&&(o=o.plus(Kn(v,c+2,y).times(s+""))),o=nt(o,new v(d),c,1),e==null)if(Dn(o.d,c-m,w,u))v.precision=c+=m,l=a=p=nt(f.minus(1),f.plus(1),c,1),h=Z(p.times(p),c,1),i=u=1;else return Z(o,v.precision=y,w,Y=!0);else return v.precision=y,o;o=l,i+=2}}function ca(t){return String(t.s*t.s/0)}function On(t,e){var n,r,i;for((n=e.indexOf("."))>-1&&(e=e.replace(".","")),(r=e.search(/e/i))>0?(n<0&&(n=r),n+=+e.slice(r+1),e=e.substring(0,r)):n<0&&(n=e.length),r=0;e.charCodeAt(r)===48;r++);for(i=e.length;e.charCodeAt(i-1)===48;--i);if(e=e.slice(r,i),e){if(i-=r,t.e=n=n-r-1,t.d=[],r=(n+1)%X,n<0&&(r+=X),r<i){for(r&&t.d.push(+e.slice(0,r)),i-=X;r<i;)t.d.push(+e.slice(r,r+=X));e=e.slice(r),r=X-e.length}else r-=i;for(;r--;)e+="0";t.d.push(+e),Y&&(t.e>t.constructor.maxE?(t.d=null,t.e=NaN):t.e<t.constructor.minE&&(t.e=0,t.d=[0]))}else t.e=0,t.d=[0];return t}function ic(t,e){var n,r,i,s,a,u,o,l,c;if(e.indexOf("_")>-1){if(e=e.replace(/(\d)_(?=\d)/g,"$1"),sa.test(e))return On(t,e)}else if(e==="Infinity"||e==="NaN")return+e||(t.s=NaN),t.e=NaN,t.d=null,t;if(jo.test(e))n=16,e=e.toLowerCase();else if(Qo.test(e))n=2;else if(tc.test(e))n=8;else throw Error(Ce+e);for(s=e.search(/p/i),s>0?(o=+e.slice(s+1),e=e.substring(2,s)):e=e.slice(2),s=e.indexOf("."),a=s>=0,r=t.constructor,a&&(e=e.replace(".",""),u=e.length,s=u-s,i=ua(r,new r(n),s,s*2)),l=Ln(e,n,Xt),c=l.length-1,s=c;l[s]===0;--s)l.pop();return s<0?new r(t.s*0):(t.e=dr(l,c),t.d=l,Y=!1,a&&(t=nt(t,i,u*4)),o&&(t=t.times(Math.abs(o)<54?pt(2,o):Qe.pow(2,o))),Y=!0,t)}function sc(t,e){var n,r=e.d.length;if(r<3)return e.isZero()?e:Ke(t,2,e,e);n=1.4*Math.sqrt(r),n=n>16?16:n|0,e=e.times(1/mr(5,n)),e=Ke(t,2,e,e);for(var i,s=new t(5),a=new t(16),u=new t(20);n--;)i=e.times(e),e=e.times(s.plus(i.times(a.times(i).minus(u))));return e}function Ke(t,e,n,r,i){var s,a,u,o,l=t.precision,c=Math.ceil(l/X);for(Y=!1,o=n.times(n),u=new t(r);;){if(a=nt(u.times(o),new t(e++*e++),l,1),u=i?r.plus(a):r.minus(a),r=nt(a.times(o),new t(e++*e++),l,1),a=u.plus(r),a.d[c]!==void 0){for(s=c;a.d[s]===u.d[s]&&s--;);if(s==-1)break}s=u,u=r,r=a,a=s}return Y=!0,a.d.length=c+1,a}function mr(t,e){for(var n=t;--e;)n*=t;return n}function la(t,e){var n,r=e.s<0,i=te(t,t.precision,1),s=i.times(.5);if(e=e.abs(),e.lte(s))return ce=r?4:1,e;if(n=e.divToInt(i),n.isZero())ce=r?3:2;else{if(e=e.minus(n.times(i)),e.lte(s))return ce=Zi(n)?r?2:3:r?4:1,e;ce=Zi(n)?r?1:4:r?3:2}return e.minus(i).abs()}function di(t,e,n,r){var i,s,a,u,o,l,c,f,h,d=t.constructor,m=n!==void 0;if(m?(St(n,1,_e),r===void 0?r=d.rounding:St(r,0,8)):(n=d.precision,r=d.rounding),!t.isFinite())c=ca(t);else{for(c=ie(t),a=c.indexOf("."),m?(i=2,e==16?n=n*4-3:e==8&&(n=n*3-2)):i=e,a>=0&&(c=c.replace(".",""),h=new d(1),h.e=c.length-a,h.d=Ln(ie(h),10,i),h.e=h.d.length),f=Ln(c,10,i),s=o=f.length;f[--o]==0;)f.pop();if(!f[0])c=m?"0p+0":"0";else{if(a<0?s--:(t=new d(t),t.d=f,t.e=s,t=nt(t,h,n,r,0,i),f=t.d,s=t.e,l=ea),a=f[n],u=i/2,l=l||f[n+1]!==void 0,l=r<4?(a!==void 0||l)&&(r===0||r===(t.s<0?3:2)):a>u||a===u&&(r===4||l||r===6&&f[n-1]&1||r===(t.s<0?8:7)),f.length=n,l)for(;++f[--n]>i-1;)f[n]=0,n||(++s,f.unshift(1));for(o=f.length;!f[o-1];--o);for(a=0,c="";a<o;a++)c+=$r.charAt(f[a]);if(m){if(o>1)if(e==16||e==8){for(a=e==16?4:3,--o;o%a;o++)c+="0";for(f=Ln(c,i,e),o=f.length;!f[o-1];--o);for(a=1,c="1.";a<o;a++)c+=$r.charAt(f[a])}else c=c.charAt(0)+"."+c.slice(1);c=c+(s<0?"p":"p+")+s}else if(s<0){for(;++s;)c="0"+c;c="0."+c}else if(++s>o)for(s-=o;s--;)c+="0";else s<o&&(c=c.slice(0,s)+"."+c.slice(s))}c=(e==16?"0x":e==2?"0b":e==8?"0o":"")+c}return t.s<0?"-"+c:c}function Xi(t,e){if(t.length>e)return t.length=e,!0}function ac(t){return new this(t).abs()}function uc(t){return new this(t).acos()}function oc(t){return new this(t).acosh()}function cc(t,e){return new this(t).plus(e)}function lc(t){return new this(t).asin()}function fc(t){return new this(t).asinh()}function hc(t){return new this(t).atan()}function pc(t){return new this(t).atanh()}function dc(t,e){t=new this(t),e=new this(e);var n,r=this.precision,i=this.rounding,s=r+4;return!t.s||!e.s?n=new this(NaN):!t.d&&!e.d?(n=te(this,s,1).times(e.s>0?.25:.75),n.s=t.s):!e.d||t.isZero()?(n=e.s<0?te(this,r,i):new this(0),n.s=t.s):!t.d||e.isZero()?(n=te(this,s,1).times(.5),n.s=t.s):e.s<0?(this.precision=s,this.rounding=1,n=this.atan(nt(t,e,s,1)),e=te(this,s,1),this.precision=r,this.rounding=i,n=t.s<0?n.minus(e):n.plus(e)):n=this.atan(nt(t,e,s,1)),n}function mc(t){return new this(t).cbrt()}function gc(t){return Z(t=new this(t),t.e+1,2)}function Dc(t,e,n){return new this(t).clamp(e,n)}function vc(t){if(!t||typeof t!="object")throw Error(pr+"Object expected");var e,n,r,i=t.defaults===!0,s=["precision",1,_e,"rounding",0,8,"toExpNeg",-9e15,0,"toExpPos",0,kr,"maxE",0,kr,"minE",-9e15,0,"modulo",0,9];for(e=0;e<s.length;e+=3)if(n=s[e],i&&(this[n]=Ur[n]),(r=t[n])!==void 0)if(Ft(r)===r&&r>=s[e+1]&&r<=s[e+2])this[n]=r;else throw Error(Ce+n+": "+r);if(n="crypto",i&&(this[n]=Ur[n]),(r=t[n])!==void 0)if(r===!0||r===!1||r===0||r===1)if(r)if(typeof crypto<"u"&&crypto&&(crypto.getRandomValues||crypto.randomBytes))this[n]=!0;else throw Error(ra);else this[n]=!1;else throw Error(Ce+n+": "+r);return this}function yc(t){return new this(t).cos()}function wc(t){return new this(t).cosh()}function fa(t){var e,n,r;function i(s){var a,u,o,l=this;if(!(l instanceof i))return new i(s);if(l.constructor=i,Yi(s)){l.s=s.s,Y?!s.d||s.e>i.maxE?(l.e=NaN,l.d=null):s.e<i.minE?(l.e=0,l.d=[0]):(l.e=s.e,l.d=s.d.slice()):(l.e=s.e,l.d=s.d?s.d.slice():s.d);return}if(o=typeof s,o==="number"){if(s===0){l.s=1/s<0?-1:1,l.e=0,l.d=[0];return}if(s<0?(s=-s,l.s=-1):l.s=1,s===~~s&&s<1e7){for(a=0,u=s;u>=10;u/=10)a++;Y?a>i.maxE?(l.e=NaN,l.d=null):a<i.minE?(l.e=0,l.d=[0]):(l.e=a,l.d=[s]):(l.e=a,l.d=[s]);return}if(s*0!==0){s||(l.s=NaN),l.e=NaN,l.d=null;return}return On(l,s.toString())}if(o==="string")return(u=s.charCodeAt(0))===45?(s=s.slice(1),l.s=-1):(u===43&&(s=s.slice(1)),l.s=1),sa.test(s)?On(l,s):ic(l,s);if(o==="bigint")return s<0?(s=-s,l.s=-1):l.s=1,On(l,s.toString());throw Error(Ce+s)}if(i.prototype=I,i.ROUND_UP=0,i.ROUND_DOWN=1,i.ROUND_CEIL=2,i.ROUND_FLOOR=3,i.ROUND_HALF_UP=4,i.ROUND_HALF_DOWN=5,i.ROUND_HALF_EVEN=6,i.ROUND_HALF_CEIL=7,i.ROUND_HALF_FLOOR=8,i.EUCLID=9,i.config=i.set=vc,i.clone=fa,i.isDecimal=Yi,i.abs=ac,i.acos=uc,i.acosh=oc,i.add=cc,i.asin=lc,i.asinh=fc,i.atan=hc,i.atanh=pc,i.atan2=dc,i.cbrt=mc,i.ceil=gc,i.clamp=Dc,i.cos=yc,i.cosh=wc,i.div=Fc,i.exp=Ec,i.floor=Ac,i.hypot=Cc,i.ln=_c,i.log=xc,i.log10=Bc,i.log2=bc,i.max=Mc,i.min=Sc,i.mod=Nc,i.mul=Tc,i.pow=Ic,i.random=Pc,i.round=Rc,i.sign=Lc,i.sin=Oc,i.sinh=kc,i.sqrt=$c,i.sub=Uc,i.sum=zc,i.tan=qc,i.tanh=Hc,i.trunc=Vc,t===void 0&&(t={}),t&&t.defaults!==!0)for(r=["precision","rounding","toExpNeg","toExpPos","maxE","minE","modulo","crypto"],e=0;e<r.length;)t.hasOwnProperty(n=r[e++])||(t[n]=this[n]);return i.config(t),i}function Fc(t,e){return new this(t).div(e)}function Ec(t){return new this(t).exp()}function Ac(t){return Z(t=new this(t),t.e+1,3)}function Cc(){var t,e,n=new this(0);for(Y=!1,t=0;t<arguments.length;)if(e=new this(arguments[t++]),e.d)n.d&&(n=n.plus(e.times(e)));else{if(e.s)return Y=!0,new this(1/0);n=e}return Y=!0,n.sqrt()}function Yi(t){return t instanceof Qe||t&&t.toStringTag===ia||!1}function _c(t){return new this(t).ln()}function xc(t,e){return new this(t).log(e)}function bc(t){return new this(t).log(2)}function Bc(t){return new this(t).log(10)}function Mc(){return oa(this,arguments,-1)}function Sc(){return oa(this,arguments,1)}function Nc(t,e){return new this(t).mod(e)}function Tc(t,e){return new this(t).mul(e)}function Ic(t,e){return new this(t).pow(e)}function Pc(t){var e,n,r,i,s=0,a=new this(1),u=[];if(t===void 0?t=this.precision:St(t,1,_e),r=Math.ceil(t/X),this.crypto)if(crypto.getRandomValues)for(e=crypto.getRandomValues(new Uint32Array(r));s<r;)i=e[s],i>=429e7?e[s]=crypto.getRandomValues(new Uint32Array(1))[0]:u[s++]=i%1e7;else if(crypto.randomBytes){for(e=crypto.randomBytes(r*=4);s<r;)i=e[s]+(e[s+1]<<8)+(e[s+2]<<16)+((e[s+3]&127)<<24),i>=214e7?crypto.randomBytes(4).copy(e,s):(u.push(i%1e7),s+=4);s=r/4}else throw Error(ra);else for(;s<r;)u[s++]=Math.random()*1e7|0;for(r=u[--s],t%=X,r&&t&&(i=pt(10,X-t),u[s]=(r/i|0)*i);u[s]===0;s--)u.pop();if(s<0)n=0,u=[0];else{for(n=-1;u[0]===0;n-=X)u.shift();for(r=1,i=u[0];i>=10;i/=10)r++;r<X&&(n-=X-r)}return a.e=n,a.d=u,a}function Rc(t){return Z(t=new this(t),t.e+1,this.rounding)}function Lc(t){return t=new this(t),t.d?t.d[0]?t.s:0*t.s:t.s||NaN}function Oc(t){return new this(t).sin()}function kc(t){return new this(t).sinh()}function $c(t){return new this(t).sqrt()}function Uc(t,e){return new this(t).sub(e)}function zc(){var t=0,e=arguments,n=new this(e[t]);for(Y=!1;n.s&&++t<e.length;)n=n.plus(e[t]);return Y=!0,Z(n,this.precision,this.rounding)}function qc(t){return new this(t).tan()}function Hc(t){return new this(t).tanh()}function Vc(t){return Z(t=new this(t),t.e+1,1)}I[Symbol.for("nodejs.util.inspect.custom")]=I.toString;I[Symbol.toStringTag]="Decimal";var Qe=I.constructor=fa(Ur);Gn=new Qe(Gn);Jn=new Qe(Jn);var Wc="BigNumber",Zc=["?on","config"],Xc=Q(Wc,Zc,t=>{var{on:e,config:n}=t,r=Qe.clone({precision:n.precision,modulo:Qe.EUCLID});return r.prototype=Object.create(r.prototype),r.prototype.type="BigNumber",r.prototype.isBigNumber=!0,r.prototype.toJSON=function(){return{mathjs:"BigNumber",value:this.toString()}},r.fromJSON=function(i){return new r(i.value)},e&&e("config",function(i,s){i.precision!==s.precision&&r.config({precision:i.precision})}),r},{isClass:!0});const wt=Math.cosh||function(t){return Math.abs(t)<1e-9?1-t:(Math.exp(t)+Math.exp(-t))*.5},Lt=Math.sinh||function(t){return Math.abs(t)<1e-9?t:(Math.exp(t)-Math.exp(-t))*.5},Yc=function(t){const e=Math.PI/4;if(-e>t||t>e)return Math.cos(t)-1;const n=t*t;return n*(n*(n*(n*(n*(n*(n*(n/20922789888e3-1/87178291200)+1/479001600)-1/3628800)+1/40320)-1/720)+1/24)-1/2)},Sr=function(t,e){return t=Math.abs(t),e=Math.abs(e),t<e&&([t,e]=[e,t]),t<1e8?Math.sqrt(t*t+e*e):(e/=t,t*Math.sqrt(1+e*e))},qe=function(){throw SyntaxError("Invalid Param")};function Nr(t,e){const n=Math.abs(t),r=Math.abs(e);return t===0?Math.log(r):e===0?Math.log(n):n<3e3&&r<3e3?Math.log(t*t+e*e)*.5:(t=t*.5,e=e*.5,.5*Math.log(t*t+e*e)+Math.LN2)}const Gc={re:0,im:0},xe=function(t,e){const n=Gc;if(t==null)n.re=n.im=0;else if(e!==void 0)n.re=t,n.im=e;else switch(typeof t){case"object":if("im"in t&&"re"in t)n.re=t.re,n.im=t.im;else if("abs"in t&&"arg"in t){if(!isFinite(t.abs)&&isFinite(t.arg))return B.INFINITY;n.re=t.abs*Math.cos(t.arg),n.im=t.abs*Math.sin(t.arg)}else if("r"in t&&"phi"in t){if(!isFinite(t.r)&&isFinite(t.phi))return B.INFINITY;n.re=t.r*Math.cos(t.phi),n.im=t.r*Math.sin(t.phi)}else t.length===2?(n.re=t[0],n.im=t[1]):qe();break;case"string":n.im=n.re=0;const r=t.replace(/_/g,"").match(/\d+\.?\d*e[+-]?\d+|\d+\.?\d*|\.\d+|./g);let i=1,s=0;r===null&&qe();for(let a=0;a<r.length;a++){const u=r[a];u===" "||u==="	"||u===`
`||(u==="+"?i++:u==="-"?s++:u==="i"||u==="I"?(i+s===0&&qe(),r[a+1]!==" "&&!isNaN(r[a+1])?(n.im+=parseFloat((s%2?"-":"")+r[a+1]),a++):n.im+=parseFloat((s%2?"-":"")+"1"),i=s=0):((i+s===0||isNaN(u))&&qe(),r[a+1]==="i"||r[a+1]==="I"?(n.im+=parseFloat((s%2?"-":"")+u),a++):n.re+=parseFloat((s%2?"-":"")+u),i=s=0))}i+s>0&&qe();break;case"number":n.im=0,n.re=t;break;default:qe()}return isNaN(n.re)||isNaN(n.im),n};function B(t,e){if(!(this instanceof B))return new B(t,e);const n=xe(t,e);this.re=n.re,this.im=n.im}B.prototype={re:0,im:0,sign:function(){const t=Sr(this.re,this.im);return new B(this.re/t,this.im/t)},add:function(t,e){const n=xe(t,e),r=this.isInfinite(),i=!(isFinite(n.re)&&isFinite(n.im));return r||i?r&&i?B.NAN:B.INFINITY:new B(this.re+n.re,this.im+n.im)},sub:function(t,e){const n=xe(t,e),r=this.isInfinite(),i=!(isFinite(n.re)&&isFinite(n.im));return r||i?r&&i?B.NAN:B.INFINITY:new B(this.re-n.re,this.im-n.im)},mul:function(t,e){const n=xe(t,e),r=this.isInfinite(),i=!(isFinite(n.re)&&isFinite(n.im)),s=this.re===0&&this.im===0,a=n.re===0&&n.im===0;return r&&a||i&&s?B.NAN:r||i?B.INFINITY:n.im===0&&this.im===0?new B(this.re*n.re,0):new B(this.re*n.re-this.im*n.im,this.re*n.im+this.im*n.re)},div:function(t,e){const n=xe(t,e),r=this.isInfinite(),i=!(isFinite(n.re)&&isFinite(n.im)),s=this.re===0&&this.im===0,a=n.re===0&&n.im===0;if(s&&a||r&&i)return B.NAN;if(a||r)return B.INFINITY;if(s||i)return B.ZERO;if(n.im===0)return new B(this.re/n.re,this.im/n.re);if(Math.abs(n.re)<Math.abs(n.im)){const u=n.re/n.im,o=n.re*u+n.im;return new B((this.re*u+this.im)/o,(this.im*u-this.re)/o)}else{const u=n.im/n.re,o=n.im*u+n.re;return new B((this.re+this.im*u)/o,(this.im-this.re*u)/o)}},pow:function(t,e){const n=xe(t,e),r=this.re===0&&this.im===0;if(n.re===0&&n.im===0)return B.ONE;if(n.im===0){if(this.im===0&&this.re>0)return new B(Math.pow(this.re,n.re),0);if(this.re===0)switch((n.re%4+4)%4){case 0:return new B(Math.pow(this.im,n.re),0);case 1:return new B(0,Math.pow(this.im,n.re));case 2:return new B(-Math.pow(this.im,n.re),0);case 3:return new B(0,-Math.pow(this.im,n.re))}}if(r&&n.re>0)return B.ZERO;const s=Math.atan2(this.im,this.re),a=Nr(this.re,this.im);let u=Math.exp(n.re*a-n.im*s),o=n.im*a+n.re*s;return new B(u*Math.cos(o),u*Math.sin(o))},sqrt:function(){const t=this.re,e=this.im;if(e===0)return t>=0?new B(Math.sqrt(t),0):new B(0,Math.sqrt(-t));const n=Sr(t,e);let r=Math.sqrt(.5*(n+Math.abs(t))),i=Math.abs(e)/(2*r);return t>=0?new B(r,e<0?-i:i):new B(i,e<0?-r:r)},exp:function(){const t=Math.exp(this.re);return this.im===0?new B(t,0):new B(t*Math.cos(this.im),t*Math.sin(this.im))},expm1:function(){const t=this.re,e=this.im;return new B(Math.expm1(t)*Math.cos(e)+Yc(e),Math.exp(t)*Math.sin(e))},log:function(){const t=this.re,e=this.im;return e===0&&t>0?new B(Math.log(t),0):new B(Nr(t,e),Math.atan2(e,t))},abs:function(){return Sr(this.re,this.im)},arg:function(){return Math.atan2(this.im,this.re)},sin:function(){const t=this.re,e=this.im;return new B(Math.sin(t)*wt(e),Math.cos(t)*Lt(e))},cos:function(){const t=this.re,e=this.im;return new B(Math.cos(t)*wt(e),-Math.sin(t)*Lt(e))},tan:function(){const t=2*this.re,e=2*this.im,n=Math.cos(t)+wt(e);return new B(Math.sin(t)/n,Lt(e)/n)},cot:function(){const t=2*this.re,e=2*this.im,n=Math.cos(t)-wt(e);return new B(-Math.sin(t)/n,Lt(e)/n)},sec:function(){const t=this.re,e=this.im,n=.5*wt(2*e)+.5*Math.cos(2*t);return new B(Math.cos(t)*wt(e)/n,Math.sin(t)*Lt(e)/n)},csc:function(){const t=this.re,e=this.im,n=.5*wt(2*e)-.5*Math.cos(2*t);return new B(Math.sin(t)*wt(e)/n,-Math.cos(t)*Lt(e)/n)},asin:function(){const t=this.re,e=this.im,n=new B(e*e-t*t+1,-2*t*e).sqrt(),r=new B(n.re-e,n.im+t).log();return new B(r.im,-r.re)},acos:function(){const t=this.re,e=this.im,n=new B(e*e-t*t+1,-2*t*e).sqrt(),r=new B(n.re-e,n.im+t).log();return new B(Math.PI/2-r.im,r.re)},atan:function(){const t=this.re,e=this.im;if(t===0){if(e===1)return new B(0,1/0);if(e===-1)return new B(0,-1/0)}const n=t*t+(1-e)*(1-e),r=new B((1-e*e-t*t)/n,-2*t/n).log();return new B(-.5*r.im,.5*r.re)},acot:function(){const t=this.re,e=this.im;if(e===0)return new B(Math.atan2(1,t),0);const n=t*t+e*e;return n!==0?new B(t/n,-e/n).atan():new B(t!==0?t/0:0,e!==0?-e/0:0).atan()},asec:function(){const t=this.re,e=this.im;if(t===0&&e===0)return new B(0,1/0);const n=t*t+e*e;return n!==0?new B(t/n,-e/n).acos():new B(t!==0?t/0:0,e!==0?-e/0:0).acos()},acsc:function(){const t=this.re,e=this.im;if(t===0&&e===0)return new B(Math.PI/2,1/0);const n=t*t+e*e;return n!==0?new B(t/n,-e/n).asin():new B(t!==0?t/0:0,e!==0?-e/0:0).asin()},sinh:function(){const t=this.re,e=this.im;return new B(Lt(t)*Math.cos(e),wt(t)*Math.sin(e))},cosh:function(){const t=this.re,e=this.im;return new B(wt(t)*Math.cos(e),Lt(t)*Math.sin(e))},tanh:function(){const t=2*this.re,e=2*this.im,n=wt(t)+Math.cos(e);return new B(Lt(t)/n,Math.sin(e)/n)},coth:function(){const t=2*this.re,e=2*this.im,n=wt(t)-Math.cos(e);return new B(Lt(t)/n,-Math.sin(e)/n)},csch:function(){const t=this.re,e=this.im,n=Math.cos(2*e)-wt(2*t);return new B(-2*Lt(t)*Math.cos(e)/n,2*wt(t)*Math.sin(e)/n)},sech:function(){const t=this.re,e=this.im,n=Math.cos(2*e)+wt(2*t);return new B(2*wt(t)*Math.cos(e)/n,-2*Lt(t)*Math.sin(e)/n)},asinh:function(){let t=this.im;this.im=-this.re,this.re=t;const e=this.asin();return this.re=-this.im,this.im=t,t=e.re,e.re=-e.im,e.im=t,e},acosh:function(){const t=this.acos();if(t.im<=0){const e=t.re;t.re=-t.im,t.im=e}else{const e=t.im;t.im=-t.re,t.re=e}return t},atanh:function(){const t=this.re,e=this.im,n=t>1&&e===0,r=1-t,i=1+t,s=r*r+e*e,a=s!==0?new B((i*r-e*e)/s,(e*r+i*e)/s):new B(t!==-1?t/0:0,e!==0?e/0:0),u=a.re;return a.re=Nr(a.re,a.im)/2,a.im=Math.atan2(a.im,u)/2,n&&(a.im=-a.im),a},acoth:function(){const t=this.re,e=this.im;if(t===0&&e===0)return new B(0,Math.PI/2);const n=t*t+e*e;return n!==0?new B(t/n,-e/n).atanh():new B(t!==0?t/0:0,e!==0?-e/0:0).atanh()},acsch:function(){const t=this.re,e=this.im;if(e===0)return new B(t!==0?Math.log(t+Math.sqrt(t*t+1)):1/0,0);const n=t*t+e*e;return n!==0?new B(t/n,-e/n).asinh():new B(t!==0?t/0:0,e!==0?-e/0:0).asinh()},asech:function(){const t=this.re,e=this.im;if(this.isZero())return B.INFINITY;const n=t*t+e*e;return n!==0?new B(t/n,-e/n).acosh():new B(t!==0?t/0:0,e!==0?-e/0:0).acosh()},inverse:function(){if(this.isZero())return B.INFINITY;if(this.isInfinite())return B.ZERO;const t=this.re,e=this.im,n=t*t+e*e;return new B(t/n,-e/n)},conjugate:function(){return new B(this.re,-this.im)},neg:function(){return new B(-this.re,-this.im)},ceil:function(t){return t=Math.pow(10,t||0),new B(Math.ceil(this.re*t)/t,Math.ceil(this.im*t)/t)},floor:function(t){return t=Math.pow(10,t||0),new B(Math.floor(this.re*t)/t,Math.floor(this.im*t)/t)},round:function(t){return t=Math.pow(10,t||0),new B(Math.round(this.re*t)/t,Math.round(this.im*t)/t)},equals:function(t,e){const n=xe(t,e);return Math.abs(n.re-this.re)<=B.EPSILON&&Math.abs(n.im-this.im)<=B.EPSILON},clone:function(){return new B(this.re,this.im)},toString:function(){let t=this.re,e=this.im,n="";return this.isNaN()?"NaN":this.isInfinite()?"Infinity":(Math.abs(t)<B.EPSILON&&(t=0),Math.abs(e)<B.EPSILON&&(e=0),e===0?n+t:(t!==0?(n+=t,n+=" ",e<0?(e=-e,n+="-"):n+="+",n+=" "):e<0&&(e=-e,n+="-"),e!==1&&(n+=e),n+"i"))},toVector:function(){return[this.re,this.im]},valueOf:function(){return this.im===0?this.re:null},isNaN:function(){return isNaN(this.re)||isNaN(this.im)},isZero:function(){return this.im===0&&this.re===0},isFinite:function(){return isFinite(this.re)&&isFinite(this.im)},isInfinite:function(){return!this.isFinite()}};B.ZERO=new B(0,0);B.ONE=new B(1,0);B.I=new B(0,1);B.PI=new B(Math.PI,0);B.E=new B(Math.E,0);B.INFINITY=new B(1/0,1/0);B.NAN=new B(NaN,NaN);B.EPSILON=1e-15;var Jc="Complex",Kc=[],Qc=Q(Jc,Kc,()=>(Object.defineProperty(B,"name",{value:"Complex"}),B.prototype.constructor=B,B.prototype.type="Complex",B.prototype.isComplex=!0,B.prototype.toJSON=function(){return{mathjs:"Complex",re:this.re,im:this.im}},B.prototype.toPolar=function(){return{r:this.abs(),phi:this.arg()}},B.prototype.format=function(t){var e="",n=this.im,r=this.re,i=Or(this.re,t),s=Or(this.im,t),a=it(t)?t:t?t.precision:null;if(a!==null){var u=Math.pow(10,-a);Math.abs(r/n)<u&&(r=0),Math.abs(n/r)<u&&(n=0)}return n===0?e=i:r===0?n===1?e="i":n===-1?e="-i":e=s+"i":n<0?n===-1?e=i+" - i":e=i+" - "+s.substring(1)+"i":n===1?e=i+" + i":e=i+" + "+s+"i",e},B.fromPolar=function(t){switch(arguments.length){case 1:{var e=arguments[0];if(typeof e=="object")return B(e);throw new TypeError("Input has to be an object with r and phi keys.")}case 2:{var n=arguments[0],r=arguments[1];if(it(n)){if(Js(r)&&r.hasBase("ANGLE")&&(r=r.toNumber("rad")),it(r))return new B({r:n,phi:r});throw new TypeError("Phi is not a number nor an angle unit.")}else throw new TypeError("Radius r is not a number.")}default:throw new SyntaxError("Wrong number of arguments in function fromPolar")}},B.prototype.valueOf=B.prototype.toString,B.fromJSON=function(t){return new B(t)},B.compare=function(t,e){return t.re>e.re?1:t.re<e.re?-1:t.im>e.im?1:t.im<e.im?-1:0},B),{isClass:!0});typeof BigInt>"u"&&(BigInt=function(t){if(isNaN(t))throw new Error("");return t});const W=BigInt(0),J=BigInt(1),vn=BigInt(2),Hr=BigInt(5),bt=BigInt(10),jc=2e3,k={s:J,n:W,d:J};function ue(t,e){try{t=BigInt(t)}catch{throw ge()}return t*e}function zt(t){return typeof t=="bigint"?t:Math.floor(t)}function at(t,e){if(e===W)throw mi();const n=Object.create(Ot.prototype);n.s=t<W?-J:J,t=t<W?-t:t;const r=Be(t,e);return n.n=t/r,n.d=e/r,n}function He(t){const e={};let n=t,r=vn,i=Hr-J;for(;i<=n;){for(;n%r===W;)n/=r,e[r]=(e[r]||W)+J;i+=J+vn*r++}return n!==t?n>1&&(e[n]=(e[n]||W)+J):e[t]=(e[t]||W)+J,e}const mt=function(t,e){let n=W,r=J,i=J;if(t!=null)if(e!==void 0){if(typeof t=="bigint")n=t;else{if(isNaN(t))throw ge();if(t%1!==0)throw Gi();n=BigInt(t)}if(typeof e=="bigint")r=e;else{if(isNaN(e))throw ge();if(e%1!==0)throw Gi();r=BigInt(e)}i=n*r}else if(typeof t=="object"){if("d"in t&&"n"in t)n=BigInt(t.n),r=BigInt(t.d),"s"in t&&(n*=BigInt(t.s));else if(0 in t)n=BigInt(t[0]),1 in t&&(r=BigInt(t[1]));else if(typeof t=="bigint")n=t;else throw ge();i=n*r}else if(typeof t=="number"){if(isNaN(t))throw ge();if(t<0&&(i=-J,t=-t),t%1===0)n=BigInt(t);else{let s=1,a=0,u=1,o=1,l=1,c=1e7;for(t>=1&&(s=10**Math.floor(1+Math.log10(t)),t/=s);u<=c&&l<=c;){let f=(a+o)/(u+l);if(t===f){u+l<=c?(n=a+o,r=u+l):l>u?(n=o,r=l):(n=a,r=u);break}else t>f?(a+=o,u+=l):(o+=a,l+=u),u>c?(n=o,r=l):(n=a,r=u)}n=BigInt(n)*BigInt(s),r=BigInt(r)}}else if(typeof t=="string"){let s=0,a=W,u=W,o=W,l=J,c=J,f=t.replace(/_/g,"").match(/\d+|./g);if(f===null)throw ge();if(f[s]==="-"?(i=-J,s++):f[s]==="+"&&s++,f.length===s+1?u=ue(f[s++],i):f[s+1]==="."||f[s]==="."?(f[s]!=="."&&(a=ue(f[s++],i)),s++,(s+1===f.length||f[s+1]==="("&&f[s+3]===")"||f[s+1]==="'"&&f[s+3]==="'")&&(u=ue(f[s],i),l=bt**BigInt(f[s].length),s++),(f[s]==="("&&f[s+2]===")"||f[s]==="'"&&f[s+2]==="'")&&(o=ue(f[s+1],i),c=bt**BigInt(f[s+1].length)-J,s+=3)):f[s+1]==="/"||f[s+1]===":"?(u=ue(f[s],i),l=ue(f[s+2],J),s+=3):f[s+3]==="/"&&f[s+1]===" "&&(a=ue(f[s],i),u=ue(f[s+2],i),l=ue(f[s+4],J),s+=5),f.length<=s)r=l*c,i=n=o+r*a+c*u;else throw ge()}else if(typeof t=="bigint")n=t,i=t,r=J;else throw ge();if(r===W)throw mi();k.s=i<W?-J:J,k.n=n<W?-n:n,k.d=r<W?-r:r};function tl(t,e,n){let r=J;for(;e>W;t=t*t%n,e>>=J)e&J&&(r=r*t%n);return r}function el(t,e){for(;e%vn===W;e/=vn);for(;e%Hr===W;e/=Hr);if(e===J)return W;let n=bt%e,r=1;for(;n!==J;r++)if(n=n*bt%e,r>jc)return W;return BigInt(r)}function nl(t,e,n){let r=J,i=tl(bt,n,e);for(let s=0;s<300;s++){if(r===i)return BigInt(s);r=r*bt%e,i=i*bt%e}return 0}function Be(t,e){if(!t)return e;if(!e)return t;for(;;){if(t%=e,!t)return e;if(e%=t,!e)return t}}function Ot(t,e){if(mt(t,e),this instanceof Ot)t=Be(k.d,k.n),this.s=k.s,this.n=k.n/t,this.d=k.d/t;else return at(k.s*k.n,k.d)}var mi=function(){return new Error("Division by Zero")},ge=function(){return new Error("Invalid argument")},Gi=function(){return new Error("Parameters must be integer")};Ot.prototype={s:J,n:W,d:J,abs:function(){return at(this.n,this.d)},neg:function(){return at(-this.s*this.n,this.d)},add:function(t,e){return mt(t,e),at(this.s*this.n*k.d+k.s*this.d*k.n,this.d*k.d)},sub:function(t,e){return mt(t,e),at(this.s*this.n*k.d-k.s*this.d*k.n,this.d*k.d)},mul:function(t,e){return mt(t,e),at(this.s*k.s*this.n*k.n,this.d*k.d)},div:function(t,e){return mt(t,e),at(this.s*k.s*this.n*k.d,this.d*k.n)},clone:function(){return at(this.s*this.n,this.d)},mod:function(t,e){if(t===void 0)return at(this.s*this.n%this.d,J);if(mt(t,e),W===k.n*this.d)throw mi();return at(this.s*(k.d*this.n)%(k.n*this.d),k.d*this.d)},gcd:function(t,e){return mt(t,e),at(Be(k.n,this.n)*Be(k.d,this.d),k.d*this.d)},lcm:function(t,e){return mt(t,e),k.n===W&&this.n===W?at(W,J):at(k.n*this.n,Be(k.n,this.n)*Be(k.d,this.d))},inverse:function(){return at(this.s*this.d,this.n)},pow:function(t,e){if(mt(t,e),k.d===J)return k.s<W?at((this.s*this.d)**k.n,this.n**k.n):at((this.s*this.n)**k.n,this.d**k.n);if(this.s<W)return null;let n=He(this.n),r=He(this.d),i=J,s=J;for(let a in n)if(a!=="1"){if(a==="0"){i=W;break}if(n[a]*=k.n,n[a]%k.d===W)n[a]/=k.d;else return null;i*=BigInt(a)**n[a]}for(let a in r)if(a!=="1"){if(r[a]*=k.n,r[a]%k.d===W)r[a]/=k.d;else return null;s*=BigInt(a)**r[a]}return k.s<W?at(s,i):at(i,s)},log:function(t,e){if(mt(t,e),this.s<=W||k.s<=W)return null;const n={},r=He(k.n),i=He(k.d),s=He(this.n),a=He(this.d);for(const l in i)r[l]=(r[l]||W)-i[l];for(const l in a)s[l]=(s[l]||W)-a[l];for(const l in r)l!=="1"&&(n[l]=!0);for(const l in s)l!=="1"&&(n[l]=!0);let u=null,o=null;for(const l in n){const c=r[l]||W,f=s[l]||W;if(c===W){if(f!==W)return null;continue}let h=f,d=c;const m=Be(h,d);if(h/=m,d/=m,u===null&&o===null)u=h,o=d;else if(h*o!==u*d)return null}return u!==null&&o!==null?at(u,o):null},equals:function(t,e){return mt(t,e),this.s*this.n*k.d===k.s*k.n*this.d},lt:function(t,e){return mt(t,e),this.s*this.n*k.d<k.s*k.n*this.d},lte:function(t,e){return mt(t,e),this.s*this.n*k.d<=k.s*k.n*this.d},gt:function(t,e){return mt(t,e),this.s*this.n*k.d>k.s*k.n*this.d},gte:function(t,e){return mt(t,e),this.s*this.n*k.d>=k.s*k.n*this.d},compare:function(t,e){mt(t,e);let n=this.s*this.n*k.d-k.s*k.n*this.d;return(W<n)-(n<W)},ceil:function(t){return t=bt**BigInt(t||0),at(zt(this.s*t*this.n/this.d)+(t*this.n%this.d>W&&this.s>=W?J:W),t)},floor:function(t){return t=bt**BigInt(t||0),at(zt(this.s*t*this.n/this.d)-(t*this.n%this.d>W&&this.s<W?J:W),t)},round:function(t){return t=bt**BigInt(t||0),at(zt(this.s*t*this.n/this.d)+this.s*((this.s>=W?J:W)+vn*(t*this.n%this.d)>this.d?J:W),t)},roundTo:function(t,e){mt(t,e);const n=this.n*k.d,r=this.d*k.n,i=n%r;let s=zt(n/r);return i+i>=r&&s++,at(this.s*s*k.n,k.d)},divisible:function(t,e){return mt(t,e),!(!(k.n*this.d)||this.n*k.d%(k.n*this.d))},valueOf:function(){return Number(this.s*this.n)/Number(this.d)},toString:function(t){let e=this.n,n=this.d;t=t||15;let r=el(e,n),i=nl(e,n,r),s=this.s<W?"-":"";if(s+=zt(e/n),e%=n,e*=bt,e&&(s+="."),r){for(let a=i;a--;)s+=zt(e/n),e%=n,e*=bt;s+="(";for(let a=r;a--;)s+=zt(e/n),e%=n,e*=bt;s+=")"}else for(let a=t;e&&a--;)s+=zt(e/n),e%=n,e*=bt;return s},toFraction:function(t){let e=this.n,n=this.d,r=this.s<W?"-":"";if(n===J)r+=e;else{let i=zt(e/n);t&&i>W&&(r+=i,r+=" ",e%=n),r+=e,r+="/",r+=n}return r},toLatex:function(t){let e=this.n,n=this.d,r=this.s<W?"-":"";if(n===J)r+=e;else{let i=zt(e/n);t&&i>W&&(r+=i,e%=n),r+="\\frac{",r+=e,r+="}{",r+=n,r+="}"}return r},toContinued:function(){let t=this.n,e=this.d,n=[];do{n.push(zt(t/e));let r=t%e;t=e,e=r}while(t!==J);return n},simplify:function(t){const e=BigInt(1/(t||.001)|0),n=this.abs(),r=n.toContinued();for(let i=1;i<r.length;i++){let s=at(r[i-1],J);for(let u=i-2;u>=0;u--)s=s.inverse().add(r[u]);let a=s.sub(n);if(a.n*e<a.d)return s.mul(this.s)}return this}};var rl="Fraction",il=[],sl=Q(rl,il,()=>(Object.defineProperty(Ot,"name",{value:"Fraction"}),Ot.prototype.constructor=Ot,Ot.prototype.type="Fraction",Ot.prototype.isFraction=!0,Ot.prototype.toJSON=function(){return{mathjs:"Fraction",n:String(this.s*this.n),d:String(this.d)}},Ot.fromJSON=function(t){return new Ot(t)},Ot),{isClass:!0}),al="Matrix",ul=[],ol=Q(al,ul,()=>{function t(){if(!(this instanceof t))throw new SyntaxError("Constructor must be called with the new operator")}return t.prototype.type="Matrix",t.prototype.isMatrix=!0,t.prototype.storage=function(){throw new Error("Cannot invoke storage on a Matrix interface")},t.prototype.datatype=function(){throw new Error("Cannot invoke datatype on a Matrix interface")},t.prototype.create=function(e,n){throw new Error("Cannot invoke create on a Matrix interface")},t.prototype.subset=function(e,n,r){throw new Error("Cannot invoke subset on a Matrix interface")},t.prototype.get=function(e){throw new Error("Cannot invoke get on a Matrix interface")},t.prototype.set=function(e,n,r){throw new Error("Cannot invoke set on a Matrix interface")},t.prototype.resize=function(e,n){throw new Error("Cannot invoke resize on a Matrix interface")},t.prototype.reshape=function(e,n){throw new Error("Cannot invoke reshape on a Matrix interface")},t.prototype.clone=function(){throw new Error("Cannot invoke clone on a Matrix interface")},t.prototype.size=function(){throw new Error("Cannot invoke size on a Matrix interface")},t.prototype.map=function(e,n){throw new Error("Cannot invoke map on a Matrix interface")},t.prototype.forEach=function(e){throw new Error("Cannot invoke forEach on a Matrix interface")},t.prototype[Symbol.iterator]=function(){throw new Error("Cannot iterate a Matrix interface")},t.prototype.toArray=function(){throw new Error("Cannot invoke toArray on a Matrix interface")},t.prototype.valueOf=function(){throw new Error("Cannot invoke valueOf on a Matrix interface")},t.prototype.format=function(e){throw new Error("Cannot invoke format on a Matrix interface")},t.prototype.toString=function(){throw new Error("Cannot invoke toString on a Matrix interface")},t},{isClass:!0});function Tr(t,e,n){var r=t.constructor,i=new r(2),s="";if(n){if(n<1)throw new Error("size must be in greater than 0");if(!Dt(n))throw new Error("size must be an integer");if(t.greaterThan(i.pow(n-1).sub(1))||t.lessThan(i.pow(n-1).mul(-1)))throw new Error("Value must be in range [-2^".concat(n-1,", 2^").concat(n-1,"-1]"));if(!t.isInteger())throw new Error("Value must be an integer");t.lessThan(0)&&(t=t.add(i.pow(n))),s="i".concat(n)}switch(e){case 2:return"".concat(t.toBinary()).concat(s);case 8:return"".concat(t.toOctal()).concat(s);case 16:return"".concat(t.toHexadecimal()).concat(s);default:throw new Error("Base ".concat(e," not supported "))}}function cl(t,e){if(typeof e=="function")return e(t);if(!t.isFinite())return t.isNaN()?"NaN":t.gt(0)?"Infinity":"-Infinity";var{notation:n,precision:r,wordSize:i}=Qs(e);switch(n){case"fixed":return fl(t,r);case"exponential":return Ji(t,r);case"engineering":return ll(t,r);case"bin":return Tr(t,2,i);case"oct":return Tr(t,8,i);case"hex":return Tr(t,16,i);case"auto":{var s=Ki(e==null?void 0:e.lowerExp,-3),a=Ki(e==null?void 0:e.upperExp,5);if(t.isZero())return"0";var u,o=t.toSignificantDigits(r),l=o.e;return l>=s&&l<a?u=o.toFixed():u=Ji(t,r),u.replace(/((\.\d*?)(0+))($|e)/,function(){var c=arguments[2],f=arguments[4];return c!=="."?c+f:f})}default:throw new Error('Unknown notation "'+n+'". Choose "auto", "exponential", "fixed", "bin", "oct", or "hex.')}}function ll(t,e){var n=t.e,r=n%3===0?n:n<0?n-3-n%3:n-n%3,i=t.mul(Math.pow(10,-r)),s=i.toPrecision(e);if(s.includes("e")){var a=t.constructor;s=new a(s).toFixed()}return s+"e"+(n>=0?"+":"")+r.toString()}function Ji(t,e){return e!==void 0?t.toExponential(e-1):t.toExponential()}function fl(t,e){return t.toFixed(e)}function Ki(t,e){return it(t)?t:vt(t)?t.toNumber():e}function xt(t,e){var n=hl(t,e);return e&&typeof e=="object"&&"truncate"in e&&n.length>e.truncate?n.substring(0,e.truncate-3)+"...":n}function hl(t,e){if(typeof t=="number")return Or(t,e);if(vt(t))return cl(t,e);if(pl(t))return!e||e.fraction!=="decimal"?"".concat(t.s*t.n,"/").concat(t.d):t.toString();if(Array.isArray(t))return ha(t,e);if(Qt(t))return Qi(t);if(typeof t=="function")return t.syntax?String(t.syntax):"function";if(t&&typeof t=="object"){if(typeof t.format=="function")return t.format(e);if(t&&t.toString(e)!=={}.toString())return t.toString(e);var n=Object.keys(t).map(r=>Qi(r)+": "+xt(t[r],e));return"{"+n.join(", ")+"}"}return String(t)}function Qi(t){for(var e=String(t),n="",r=0;r<e.length;){var i=e.charAt(r);n+=i in ji?ji[i]:i,r++}return'"'+n+'"'}var ji={'"':'\\"',"\\":"\\\\","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","	":"\\t"};function ha(t,e){if(Array.isArray(t)){for(var n="[",r=t.length,i=0;i<r;i++)i!==0&&(n+=", "),n+=ha(t[i],e);return n+="]",n}else return xt(t,e)}function pl(t){return t&&typeof t=="object"&&typeof t.s=="bigint"&&typeof t.n=="bigint"&&typeof t.d=="bigint"||!1}function tt(t,e,n){if(!(this instanceof tt))throw new SyntaxError("Constructor must be called with the new operator");this.actual=t,this.expected=e,this.relation=n,this.message="Dimension mismatch ("+(Array.isArray(t)?"["+t.join(", ")+"]":t)+" "+(this.relation||"!=")+" "+(Array.isArray(e)?"["+e.join(", ")+"]":e)+")",this.stack=new Error().stack}tt.prototype=new RangeError;tt.prototype.constructor=RangeError;tt.prototype.name="DimensionError";tt.prototype.isDimensionError=!0;function Le(t,e,n){if(!(this instanceof Le))throw new SyntaxError("Constructor must be called with the new operator");this.index=t,arguments.length<3?(this.min=0,this.max=e):(this.min=e,this.max=n),this.min!==void 0&&this.index<this.min?this.message="Index out of range ("+this.index+" < "+this.min+")":this.max!==void 0&&this.index>=this.max?this.message="Index out of range ("+this.index+" > "+(this.max-1)+")":this.message="Index out of range ("+this.index+")",this.stack=new Error().stack}Le.prototype=new RangeError;Le.prototype.constructor=RangeError;Le.prototype.name="IndexError";Le.prototype.isIndexError=!0;function Yt(t){for(var e=[];Array.isArray(t);)e.push(t.length),t=t[0];return e}function pa(t,e,n){var r,i=t.length;if(i!==e[n])throw new tt(i,e[n]);if(n<e.length-1){var s=n+1;for(r=0;r<i;r++){var a=t[r];if(!Array.isArray(a))throw new tt(e.length-1,e.length,"<");pa(t[r],e,s)}}else for(r=0;r<i;r++)if(Array.isArray(t[r]))throw new tt(e.length+1,e.length,">")}function ts(t,e){var n=e.length===0;if(n){if(Array.isArray(t))throw new tt(t.length,0)}else pa(t,e,0)}function ct(t,e){if(t!==void 0){if(!it(t)||!Dt(t))throw new TypeError("Index must be an integer (value: "+t+")");if(t<0||typeof e=="number"&&t>=e)throw new Le(t,e)}}function es(t,e,n){if(!Array.isArray(e))throw new TypeError("Array expected");if(e.length===0)throw new Error("Resizing to scalar is not supported");e.forEach(function(i){if(!it(i)||!Dt(i)||i<0)throw new TypeError("Invalid size, must contain positive integers (size: "+xt(e)+")")}),(it(t)||vt(t))&&(t=[t]);var r=n!==void 0?n:0;return Vr(t,e,0,r),t}function Vr(t,e,n,r){var i,s,a=t.length,u=e[n],o=Math.min(a,u);if(t.length=u,n<e.length-1){var l=n+1;for(i=0;i<o;i++)s=t[i],Array.isArray(s)||(s=[s],t[i]=s),Vr(s,e,l,r);for(i=o;i<u;i++)s=[],t[i]=s,Vr(s,e,l,r)}else{for(i=0;i<o;i++)for(;Array.isArray(t[i]);)t[i]=t[i][0];for(i=o;i<u;i++)t[i]=r}}function da(t,e){var n=ml(t,!0),r=n.length;if(!Array.isArray(t)||!Array.isArray(e))throw new TypeError("Array expected");if(e.length===0)throw new tt(0,r,"!=");e=gi(e,r);var i=ma(e);if(r!==i)throw new tt(i,r,"!=");try{return dl(n,e)}catch(s){throw s instanceof tt?new tt(i,r,"!="):s}}function gi(t,e){var n=ma(t),r=t.slice(),i=-1,s=t.indexOf(i),a=t.indexOf(i,s+1)>=0;if(a)throw new Error("More than one wildcard in sizes");var u=s>=0,o=e%n===0;if(u)if(o)r[s]=-e/n;else throw new Error("Could not replace wildcard, since "+e+" is no multiple of "+-n);return r}function ma(t){return t.reduce((e,n)=>e*n,1)}function dl(t,e){for(var n=t,r,i=e.length-1;i>0;i--){var s=e[i];r=[];for(var a=n.length/s,u=0;u<a;u++)r.push(n.slice(u*s,(u+1)*s));n=r}return n}function ga(t,e,n,r){var i=r||Yt(t);if(n)for(var s=0;s<n;s++)t=[t],i.unshift(1);for(t=Da(t,e,0);i.length<e;)i.push(1);return t}function Da(t,e,n){var r,i;if(Array.isArray(t)){var s=n+1;for(r=0,i=t.length;r<i;r++)t[r]=Da(t[r],e,s)}else for(var a=n;a<e;a++)t=[t];return t}function ml(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(!Array.isArray(t))return t;if(typeof e!="boolean")throw new TypeError("Boolean expected for second argument of flatten");var n=[];return e?i(t):r(t),n;function r(s){for(var a=0;a<s.length;a++){var u=s[a];Array.isArray(u)?r(u):n.push(u)}}function i(s){if(Array.isArray(s[0]))for(var a=0;a<s.length;a++)i(s[a]);else for(var u=0;u<s.length;u++)n.push(s[u])}}function Di(t,e){for(var n,r=0,i=0;i<t.length;i++){var s=t[i],a=Array.isArray(s);if(i===0&&a&&(r=s.length),a&&s.length!==r)return;var u=a?Di(s,e):e(s);if(n===void 0)n=u;else if(n!==u)return"mixed"}return n}function va(t,e,n,r){if(r<n){if(t.length!==e.length)throw new tt(t.length,e.length);for(var i=[],s=0;s<t.length;s++)i[s]=va(t[s],e[s],n,r+1);return i}else return t.concat(e)}function ya(){var t=Array.prototype.slice.call(arguments,0,-1),e=Array.prototype.slice.call(arguments,-1);if(t.length===1)return t[0];if(t.length>1)return t.slice(1).reduce(function(n,r){return va(n,r,e,0)},t[0]);throw new Error("Wrong number of arguments in function concat")}function wa(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];for(var r=e.map(h=>h.length),i=Math.max(...r),s=new Array(i).fill(null),a=0;a<e.length;a++)for(var u=e[a],o=r[a],l=0;l<o;l++){var c=i-o+l;u[l]>s[c]&&(s[c]=u[l])}for(var f=0;f<e.length;f++)Fa(e[f],s);return s}function Fa(t,e){for(var n=e.length,r=t.length,i=0;i<r;i++){var s=n-r+i;if(t[i]<e[s]&&t[i]>1||t[i]>e[s])throw new Error("shape mismatch: mismatch is found in arg with shape (".concat(t,") not possible to broadcast dimension ").concat(r," with size ").concat(t[i]," to size ").concat(e[s]))}}function Wr(t,e){var n=Yt(t);if(Ae(n,e))return t;Fa(n,e);var r=wa(n,e),i=r.length,s=[...Array(i-n.length).fill(1),...n],a=vl(t);n.length<i&&(a=da(a,s),n=Yt(a));for(var u=0;u<i;u++)n[u]<r[u]&&(a=gl(a,r[u],u),n=Yt(a));return a}function gl(t,e,n){return ya(...Array(e).fill(t),n)}function Ea(t,e){if(!Array.isArray(t))throw new Error("Array expected");var n=Yt(t);if(e.length!==n.length)throw new tt(e.length,n.length);for(var r=0;r<e.length;r++)ct(e[r],n[r]);return e.reduce((i,s)=>i[s],t)}function Dl(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(t.length===0)return[];if(n)return s(t);var r=[];return i(t,0);function i(a,u){if(Array.isArray(a)){for(var o=a.length,l=Array(o),c=0;c<o;c++)r[u]=c,l[c]=i(a[c],u+1);return l}else return e(a,r.slice(0,u),t)}function s(a){if(Array.isArray(a)){for(var u=a.length,o=Array(u),l=0;l<u;l++)o[l]=s(a[l]);return o}else return e(a)}}function vl(t){return Vn([],t)}function Qn(t,e,n){var r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(Xn.isTypedFunction(t)){var i;if(r)i=1;else{var s=(e.isMatrix?e.size():Yt(e)).map(()=>0),a=e.isMatrix?e.get(s):Ea(e,s);i=Fl(t,a,s,e)}var u;if(e.isMatrix&&e.dataType!=="mixed"&&e.dataType!==void 0){var o=yl(t,i);u=o!==void 0?o:t}else u=t;return i>=1&&i<=3?{isUnary:i===1,fn:function(){for(var c=arguments.length,f=new Array(c),h=0;h<c;h++)f[h]=arguments[h];return ns(u,f.slice(0,i),n,t.name)}}:{isUnary:!1,fn:function(){for(var c=arguments.length,f=new Array(c),h=0;h<c;h++)f[h]=arguments[h];return ns(u,f,n,t.name)}}}return r===void 0?{isUnary:wl(t),fn:t}:{isUnary:r,fn:t}}function yl(t,e){var n=[];if(Object.entries(t.signatures).forEach(r=>{var[i,s]=r;i.split(",").length===e&&n.push(s)}),n.length===1)return n[0]}function wl(t){if(t.length!==1)return!1;var e=t.toString();if(/arguments/.test(e))return!1;var n=e.match(/\(.*?\)/);return!/\.\.\./.test(n)}function Fl(t,e,n,r){for(var i=[e,n,r],s=3;s>0;s--){var a=i.slice(0,s);if(Xn.resolve(t,a)!==null)return s}}function ns(t,e,n,r){try{return t(...e)}catch(i){El(i,e,n,r)}}function El(t,e,n,r){var i;if(t instanceof TypeError&&((i=t.data)===null||i===void 0?void 0:i.category)==="wrongType"){var s=[];throw s.push("value: ".concat(Se(e[0]))),e.length>=2&&s.push("index: ".concat(Se(e[1]))),e.length>=3&&s.push("array: ".concat(Se(e[2]))),new TypeError("Function ".concat(n," cannot apply callback arguments ")+"".concat(r,"(").concat(s.join(", "),") at index ").concat(JSON.stringify(e[1])))}else throw new TypeError("Function ".concat(n," cannot apply callback arguments ")+"to function ".concat(r,": ").concat(t.message))}var Al="DenseMatrix",Cl=["Matrix"],_l=Q(Al,Cl,t=>{var{Matrix:e}=t;function n(c,f){if(!(this instanceof n))throw new SyntaxError("Constructor must be called with the new operator");if(f&&!Qt(f))throw new Error("Invalid datatype: "+f);if(Wt(c))c.type==="DenseMatrix"?(this._data=gt(c._data),this._size=gt(c._size),this._datatype=f||c._datatype):(this._data=c.toArray(),this._size=c.size(),this._datatype=f||c._datatype);else if(c&&ht(c.data)&&ht(c.size))this._data=c.data,this._size=c.size,ts(this._data,this._size),this._datatype=f||c.datatype;else if(ht(c))this._data=l(c),this._size=Yt(this._data),ts(this._data,this._size),this._datatype=f;else{if(c)throw new TypeError("Unsupported type of data ("+Se(c)+")");this._data=[],this._size=[0],this._datatype=f}}n.prototype=new e,n.prototype.createDenseMatrix=function(c,f){return new n(c,f)},Object.defineProperty(n,"name",{value:"DenseMatrix"}),n.prototype.constructor=n,n.prototype.type="DenseMatrix",n.prototype.isDenseMatrix=!0,n.prototype.getDataType=function(){return Di(this._data,Se)},n.prototype.storage=function(){return"dense"},n.prototype.datatype=function(){return this._datatype},n.prototype.create=function(c,f){return new n(c,f)},n.prototype.subset=function(c,f,h){switch(arguments.length){case 1:return r(this,c);case 2:case 3:return s(this,c,f,h);default:throw new SyntaxError("Wrong number of arguments")}},n.prototype.get=function(c){return Ea(this._data,c)},n.prototype.set=function(c,f,h){if(!ht(c))throw new TypeError("Array expected");if(c.length<this._size.length)throw new tt(c.length,this._size.length,"<");var d,m,p,g=c.map(function(w){return w+1});o(this,g,h);var v=this._data;for(d=0,m=c.length-1;d<m;d++)p=c[d],ct(p,v.length),v=v[p];return p=c[c.length-1],ct(p,v.length),v[p]=f,this};function r(c,f){if(!hi(f))throw new TypeError("Invalid index");var h=f.isScalar();if(h)return c.get(f.min());var d=f.size();if(d.length!==c._size.length)throw new tt(d.length,c._size.length);for(var m=f.min(),p=f.max(),g=0,v=c._size.length;g<v;g++)ct(m[g],c._size[g]),ct(p[g],c._size[g]);var w=new n([]),y=i(c._data,f);return w._size=y.size,w._datatype=c._datatype,w._data=y.data,w}function i(c,f){var h=f.size().length-1,d=Array(h);return{data:m(c),size:d};function m(p){var g=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,v=f.dimension(g);return d[g]=v.size()[0],g<h?v.map(w=>(ct(w,p.length),m(p[w],g+1))).valueOf():v.map(w=>(ct(w,p.length),p[w])).valueOf()}}function s(c,f,h,d){if(!f||f.isIndex!==!0)throw new TypeError("Invalid index");var m=f.size(),p=f.isScalar(),g;if(Wt(h)?(g=h.size(),h=h.valueOf()):g=Yt(h),p){if(g.length!==0)throw new TypeError("Scalar expected");c.set(f.min(),h,d)}else{if(!Ae(g,m))try{g.length===0?h=Wr([h],m):h=Wr(h,m),g=Yt(h)}catch{}if(m.length<c._size.length)throw new tt(m.length,c._size.length,"<");if(g.length<m.length){for(var v=0,w=0;m[v]===1&&g[v]===1;)v++;for(;m[v]===1;)w++,v++;h=ga(h,m.length,w,g)}if(!Ae(m,g))throw new tt(m,g,">");var y=f.max().map(function(E){return E+1});o(c,y,d),a(c._data,f,h)}return c}function a(c,f,h){var d=f.size().length-1;m(c,h);function m(p,g){var v=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,w=f.dimension(v);v<d?w.forEach((y,E)=>{ct(y,p.length),m(p[y],g[E[0]],v+1)}):w.forEach((y,E)=>{ct(y,p.length),p[y]=g[E[0]]})}}n.prototype.resize=function(c,f,h){if(!Zn(c))throw new TypeError("Array or Matrix expected");var d=c.valueOf().map(p=>Array.isArray(p)&&p.length===1?p[0]:p),m=h?this.clone():this;return u(m,d,f)};function u(c,f,h){if(f.length===0){for(var d=c._data;ht(d);)d=d[0];return d}return c._size=f.slice(0),c._data=es(c._data,c._size,h),c}n.prototype.reshape=function(c,f){var h=f?this.clone():this;h._data=da(h._data,c);var d=h._size.reduce((m,p)=>m*p);return h._size=gi(c,d),h};function o(c,f,h){for(var d=c._size.slice(0),m=!1;d.length<f.length;)d.push(0),m=!0;for(var p=0,g=f.length;p<g;p++)f[p]>d[p]&&(d[p]=f[p],m=!0);m&&u(c,d,h)}n.prototype.clone=function(){var c=new n({data:gt(this._data),size:gt(this._size),datatype:this._datatype});return c},n.prototype.size=function(){return this._size.slice(0)},n.prototype.map=function(c){var f=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,h=this,d=h._size.length-1;if(d<0)return h.clone();var m=Qn(c,h,"map",f),p=m.fn,g=h.create(void 0,h._datatype);if(g._size=h._size,f||m.isUnary)return g._data=x(h._data),g;if(d===0){for(var v=h.valueOf(),w=Array(v.length),y=0;y<v.length;y++)w[y]=p(v[y],[y],h);return g._data=w,g}var E=[];return g._data=A(h._data),g;function A(b){var _=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,N=Array(b.length);if(_<d)for(var L=0;L<b.length;L++)E[_]=L,N[L]=A(b[L],_+1);else for(var M=0;M<b.length;M++)E[_]=M,N[M]=p(b[M],E.slice(),h);return N}function x(b){var _=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,N=Array(b.length);if(_<d)for(var L=0;L<b.length;L++)N[L]=x(b[L],_+1);else for(var M=0;M<b.length;M++)N[M]=p(b[M]);return N}},n.prototype.forEach=function(c){var f=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,h=this,d=h._size.length-1;if(d<0)return;var m=Qn(c,h,"map",f),p=m.fn;if(f||m.isUnary){y(h._data);return}if(d===0){for(var g=0;g<h._data.length;g++)p(h._data[g],[g],h);return}var v=[];w(h._data);function w(E){var A=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;if(A<d)for(var x=0;x<E.length;x++)v[A]=x,w(E[x],A+1);else for(var b=0;b<E.length;b++)v[A]=b,p(E[b],v.slice(),h)}function y(E){var A=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;if(A<d)for(var x=0;x<E.length;x++)y(E[x],A+1);else for(var b=0;b<E.length;b++)p(E[b])}},n.prototype[Symbol.iterator]=function*(){var c=this._size.length-1;if(!(c<0)){if(c===0){for(var f=0;f<this._data.length;f++)yield{value:this._data[f],index:[f]};return}var h=[],d=function*(p,g){if(g<c)for(var v=0;v<p.length;v++)h[g]=v,yield*d(p[v],g+1);else for(var w=0;w<p.length;w++)h[g]=w,yield{value:p[w],index:h.slice()}};yield*d(this._data,0)}},n.prototype.rows=function(){var c=[],f=this.size();if(f.length!==2)throw new TypeError("Rows can only be returned for a 2D matrix.");var h=this._data;for(var d of h)c.push(new n([d],this._datatype));return c},n.prototype.columns=function(){var c=this,f=[],h=this.size();if(h.length!==2)throw new TypeError("Rows can only be returned for a 2D matrix.");for(var d=this._data,m=function(v){var w=d.map(y=>[y[v]]);f.push(new n(w,c._datatype))},p=0;p<h[1];p++)m(p);return f},n.prototype.toArray=function(){return gt(this._data)},n.prototype.valueOf=function(){return this._data},n.prototype.format=function(c){return xt(this._data,c)},n.prototype.toString=function(){return xt(this._data)},n.prototype.toJSON=function(){return{mathjs:"DenseMatrix",data:this._data,size:this._size,datatype:this._datatype}},n.prototype.diagonal=function(c){if(c){if(vt(c)&&(c=c.toNumber()),!it(c)||!Dt(c))throw new TypeError("The parameter k must be an integer number")}else c=0;for(var f=c>0?c:0,h=c<0?-c:0,d=this._size[0],m=this._size[1],p=Math.min(d-h,m-f),g=[],v=0;v<p;v++)g[v]=this._data[v+h][v+f];return new n({data:g,size:[p],datatype:this._datatype})},n.diagonal=function(c,f,h,d){if(!ht(c))throw new TypeError("Array expected, size parameter");if(c.length!==2)throw new Error("Only two dimensions matrix are supported");if(c=c.map(function(b){if(vt(b)&&(b=b.toNumber()),!it(b)||!Dt(b)||b<1)throw new Error("Size values must be positive integers");return b}),h){if(vt(h)&&(h=h.toNumber()),!it(h)||!Dt(h))throw new TypeError("The parameter k must be an integer number")}else h=0;var m=h>0?h:0,p=h<0?-h:0,g=c[0],v=c[1],w=Math.min(g-p,v-m),y;if(ht(f)){if(f.length!==w)throw new Error("Invalid value array length");y=function(_){return f[_]}}else if(Wt(f)){var E=f.size();if(E.length!==1||E[0]!==w)throw new Error("Invalid matrix length");y=function(_){return f.get([_])}}else y=function(){return f};d||(d=vt(y(0))?y(0).mul(0):0);var A=[];if(c.length>0){A=es(A,c,d);for(var x=0;x<w;x++)A[x+p][x+m]=y(x)}return new n({data:A,size:[g,v]})},n.fromJSON=function(c){return new n(c)},n.prototype.swapRows=function(c,f){if(!it(c)||!Dt(c)||!it(f)||!Dt(f))throw new Error("Row index must be positive integers");if(this._size.length!==2)throw new Error("Only two dimensional matrix is supported");return ct(c,this._size[0]),ct(f,this._size[0]),n._swapRows(c,f,this._data),this},n._swapRows=function(c,f,h){var d=h[c];h[c]=h[f],h[f]=d};function l(c){return Wt(c)?l(c.valueOf()):ht(c)?c.map(l):c}return n},{isClass:!0});function xl(t,e,n){return Wt(t)?t.map(r=>e(r),!1,!0):Dl(t,e,!0)}var rs="isInteger",bl=["typed"],Bl=Q(rs,bl,t=>{var{typed:e}=t;return e(rs,{number:Dt,BigNumber:function(r){return r.isInt()},bigint:function(r){return!0},Fraction:function(r){return r.d===1n},"Array | Matrix":e.referToSelf(n=>r=>xl(r,n))})}),Ml=Math.PI;function Sl(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1e-9,r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0;if(n<=0)throw new Error("Relative tolerance must be greater than 0");if(r<0)throw new Error("Absolute tolerance must be at least 0");return t.isNaN()||e.isNaN()?!1:!t.isFinite()||!e.isFinite()?t.eq(e):t.eq(e)?!0:t.minus(e).abs().lte(t.constructor.max(t.constructor.max(t.abs(),e.abs()).mul(n),r))}function Nl(t,e,n,r){return Yn(t.re,e.re,n,r)&&Yn(t.im,e.im,n,r)}var Tl=Q("compareUnits",["typed"],t=>{var{typed:e}=t;return{"Unit, Unit":e.referToSelf(n=>(r,i)=>{if(!r.equalBase(i))throw new Error("Cannot compare units with different base");return e.find(n,[r.valueType(),i.valueType()])(r.value,i.value)})}}),jn="equalScalar",Il=["typed","config"],Pl=Q(jn,Il,t=>{var{typed:e,config:n}=t,r=Tl({typed:e});return e(jn,{"boolean, boolean":function(s,a){return s===a},"number, number":function(s,a){return Yn(s,a,n.relTol,n.absTol)},"BigNumber, BigNumber":function(s,a){return s.eq(a)||Sl(s,a,n.relTol,n.absTol)},"bigint, bigint":function(s,a){return s===a},"Fraction, Fraction":function(s,a){return s.equals(a)},"Complex, Complex":function(s,a){return Nl(s,a,n.relTol,n.absTol)}},r)});Q(jn,["typed","config"],t=>{var{typed:e,config:n}=t;return e(jn,{"number, number":function(i,s){return Yn(i,s,n.relTol,n.absTol)}})});var Rl="SparseMatrix",Ll=["typed","equalScalar","Matrix"],Ol=Q(Rl,Ll,t=>{var{typed:e,equalScalar:n,Matrix:r}=t;function i(p,g){if(!(this instanceof i))throw new SyntaxError("Constructor must be called with the new operator");if(g&&!Qt(g))throw new Error("Invalid datatype: "+g);if(Wt(p))s(this,p,g);else if(p&&ht(p.index)&&ht(p.ptr)&&ht(p.size))this._values=p.values,this._index=p.index,this._ptr=p.ptr,this._size=p.size,this._datatype=g||p.datatype;else if(ht(p))a(this,p,g);else{if(p)throw new TypeError("Unsupported type of data ("+Se(p)+")");this._values=[],this._index=[],this._ptr=[0],this._size=[0,0],this._datatype=g}}function s(p,g,v){g.type==="SparseMatrix"?(p._values=g._values?gt(g._values):void 0,p._index=gt(g._index),p._ptr=gt(g._ptr),p._size=gt(g._size),p._datatype=v||g._datatype):a(p,g.valueOf(),v||g._datatype)}function a(p,g,v){p._values=[],p._index=[],p._ptr=[],p._datatype=v;var w=g.length,y=0,E=n,A=0;if(Qt(v)&&(E=e.find(n,[v,v])||n,A=e.convert(0,v)),w>0){var x=0;do{p._ptr.push(p._index.length);for(var b=0;b<w;b++){var _=g[b];if(ht(_)){if(x===0&&y<_.length&&(y=_.length),x<_.length){var N=_[x];E(N,A)||(p._values.push(N),p._index.push(b))}}else x===0&&y<1&&(y=1),E(_,A)||(p._values.push(_),p._index.push(b))}x++}while(x<y)}p._ptr.push(p._index.length),p._size=[w,y]}i.prototype=new r,i.prototype.createSparseMatrix=function(p,g){return new i(p,g)},Object.defineProperty(i,"name",{value:"SparseMatrix"}),i.prototype.constructor=i,i.prototype.type="SparseMatrix",i.prototype.isSparseMatrix=!0,i.prototype.getDataType=function(){return Di(this._values,Se)},i.prototype.storage=function(){return"sparse"},i.prototype.datatype=function(){return this._datatype},i.prototype.create=function(p,g){return new i(p,g)},i.prototype.density=function(){var p=this._size[0],g=this._size[1];return p!==0&&g!==0?this._index.length/(p*g):0},i.prototype.subset=function(p,g,v){if(!this._values)throw new Error("Cannot invoke subset on a Pattern only matrix");switch(arguments.length){case 1:return u(this,p);case 2:case 3:return o(this,p,g,v);default:throw new SyntaxError("Wrong number of arguments")}};function u(p,g){if(!hi(g))throw new TypeError("Invalid index");var v=g.isScalar();if(v)return p.get(g.min());var w=g.size();if(w.length!==p._size.length)throw new tt(w.length,p._size.length);var y,E,A,x,b=g.min(),_=g.max();for(y=0,E=p._size.length;y<E;y++)ct(b[y],p._size[y]),ct(_[y],p._size[y]);var N=p._values,L=p._index,M=p._ptr,$=g.dimension(0),q=g.dimension(1),H=[],G=[];$.forEach(function(K,Nt){G[K]=Nt[0],H[K]=!0});var V=N?[]:void 0,st=[],ot=[];return q.forEach(function(K){for(ot.push(st.length),A=M[K],x=M[K+1];A<x;A++)y=L[A],H[y]===!0&&(st.push(G[y]),V&&V.push(N[A]))}),ot.push(st.length),new i({values:V,index:st,ptr:ot,size:w,datatype:p._datatype})}function o(p,g,v,w){if(!g||g.isIndex!==!0)throw new TypeError("Invalid index");var y=g.size(),E=g.isScalar(),A;if(Wt(v)?(A=v.size(),v=v.toArray()):A=Yt(v),E){if(A.length!==0)throw new TypeError("Scalar expected");p.set(g.min(),v,w)}else{if(y.length!==1&&y.length!==2)throw new tt(y.length,p._size.length,"<");if(A.length<y.length){for(var x=0,b=0;y[x]===1&&A[x]===1;)x++;for(;y[x]===1;)b++,x++;v=ga(v,y.length,b,A)}if(!Ae(y,A))throw new tt(y,A,">");if(y.length===1){var _=g.dimension(0);_.forEach(function(M,$){ct(M),p.set([M,0],v[$[0]],w)})}else{var N=g.dimension(0),L=g.dimension(1);N.forEach(function(M,$){ct(M),L.forEach(function(q,H){ct(q),p.set([M,q],v[$[0]][H[0]],w)})})}}return p}i.prototype.get=function(p){if(!ht(p))throw new TypeError("Array expected");if(p.length!==this._size.length)throw new tt(p.length,this._size.length);if(!this._values)throw new Error("Cannot invoke get on a Pattern only matrix");var g=p[0],v=p[1];ct(g,this._size[0]),ct(v,this._size[1]);var w=l(g,this._ptr[v],this._ptr[v+1],this._index);return w<this._ptr[v+1]&&this._index[w]===g?this._values[w]:0},i.prototype.set=function(p,g,v){if(!ht(p))throw new TypeError("Array expected");if(p.length!==this._size.length)throw new tt(p.length,this._size.length);if(!this._values)throw new Error("Cannot invoke set on a Pattern only matrix");var w=p[0],y=p[1],E=this._size[0],A=this._size[1],x=n,b=0;Qt(this._datatype)&&(x=e.find(n,[this._datatype,this._datatype])||n,b=e.convert(0,this._datatype)),(w>E-1||y>A-1)&&(h(this,Math.max(w+1,E),Math.max(y+1,A),v),E=this._size[0],A=this._size[1]),ct(w,E),ct(y,A);var _=l(w,this._ptr[y],this._ptr[y+1],this._index);return _<this._ptr[y+1]&&this._index[_]===w?x(g,b)?c(_,y,this._values,this._index,this._ptr):this._values[_]=g:x(g,b)||f(_,w,y,g,this._values,this._index,this._ptr),this};function l(p,g,v,w){if(v-g===0)return v;for(var y=g;y<v;y++)if(w[y]===p)return y;return g}function c(p,g,v,w,y){v.splice(p,1),w.splice(p,1);for(var E=g+1;E<y.length;E++)y[E]--}function f(p,g,v,w,y,E,A){y.splice(p,0,w),E.splice(p,0,g);for(var x=v+1;x<A.length;x++)A[x]++}i.prototype.resize=function(p,g,v){if(!Zn(p))throw new TypeError("Array or Matrix expected");var w=p.valueOf().map(E=>Array.isArray(E)&&E.length===1?E[0]:E);if(w.length!==2)throw new Error("Only two dimensions matrix are supported");w.forEach(function(E){if(!it(E)||!Dt(E)||E<0)throw new TypeError("Invalid size, must contain positive integers (size: "+xt(w)+")")});var y=v?this.clone():this;return h(y,w[0],w[1],g)};function h(p,g,v,w){var y=w||0,E=n,A=0;Qt(p._datatype)&&(E=e.find(n,[p._datatype,p._datatype])||n,A=e.convert(0,p._datatype),y=e.convert(y,p._datatype));var x=!E(y,A),b=p._size[0],_=p._size[1],N,L,M;if(v>_){for(L=_;L<v;L++)if(p._ptr[L]=p._values.length,x)for(N=0;N<b;N++)p._values.push(y),p._index.push(N);p._ptr[v]=p._values.length}else v<_&&(p._ptr.splice(v+1,_-v),p._values.splice(p._ptr[v],p._values.length),p._index.splice(p._ptr[v],p._index.length));if(_=v,g>b){if(x){var $=0;for(L=0;L<_;L++){p._ptr[L]=p._ptr[L]+$,M=p._ptr[L+1]+$;var q=0;for(N=b;N<g;N++,q++)p._values.splice(M+q,0,y),p._index.splice(M+q,0,N),$++}p._ptr[_]=p._values.length}}else if(g<b){var H=0;for(L=0;L<_;L++){p._ptr[L]=p._ptr[L]-H;var G=p._ptr[L],V=p._ptr[L+1]-H;for(M=G;M<V;M++)N=p._index[M],N>g-1&&(p._values.splice(M,1),p._index.splice(M,1),H++)}p._ptr[L]=p._values.length}return p._size[0]=g,p._size[1]=v,p}i.prototype.reshape=function(p,g){if(!ht(p))throw new TypeError("Array expected");if(p.length!==2)throw new Error("Sparse matrices can only be reshaped in two dimensions");p.forEach(function(K){if(!it(K)||!Dt(K)||K<=-2||K===0)throw new TypeError("Invalid size, must contain positive integers or -1 (size: "+xt(p)+")")});var v=this._size[0]*this._size[1];p=gi(p,v);var w=p[0]*p[1];if(v!==w)throw new Error("Reshaping sparse matrix will result in the wrong number of elements");var y=g?this.clone():this;if(this._size[0]===p[0]&&this._size[1]===p[1])return y;for(var E=[],A=0;A<y._ptr.length;A++)for(var x=0;x<y._ptr[A+1]-y._ptr[A];x++)E.push(A);for(var b=y._values.slice(),_=y._index.slice(),N=0;N<y._index.length;N++){var L=_[N],M=E[N],$=L*y._size[1]+M;E[N]=$%p[1],_[N]=Math.floor($/p[1])}y._values.length=0,y._index.length=0,y._ptr.length=p[1]+1,y._size=p.slice();for(var q=0;q<y._ptr.length;q++)y._ptr[q]=0;for(var H=0;H<b.length;H++){var G=_[H],V=E[H],st=b[H],ot=l(G,y._ptr[V],y._ptr[V+1],y._index);f(ot,G,V,st,y._values,y._index,y._ptr)}return y},i.prototype.clone=function(){var p=new i({values:this._values?gt(this._values):void 0,index:gt(this._index),ptr:gt(this._ptr),size:gt(this._size),datatype:this._datatype});return p},i.prototype.size=function(){return this._size.slice(0)},i.prototype.map=function(p,g){if(!this._values)throw new Error("Cannot invoke map on a Pattern only matrix");var v=this,w=this._size[0],y=this._size[1],E=Qn(p,v,"map"),A=function(b,_,N){return E.fn(b,[_,N],v)};return d(this,0,w-1,0,y-1,A,g)};function d(p,g,v,w,y,E,A){var x=[],b=[],_=[],N=n,L=0;Qt(p._datatype)&&(N=e.find(n,[p._datatype,p._datatype])||n,L=e.convert(0,p._datatype));for(var M=function(xr,Cn,br){var _n=E(xr,Cn,br);N(_n,L)||(x.push(_n),b.push(Cn))},$=w;$<=y;$++){_.push(x.length);var q=p._ptr[$],H=p._ptr[$+1];if(A)for(var G=q;G<H;G++){var V=p._index[G];V>=g&&V<=v&&M(p._values[G],V-g,$-w)}else{for(var st={},ot=q;ot<H;ot++){var K=p._index[ot];st[K]=p._values[ot]}for(var Nt=g;Nt<=v;Nt++){var _r=Nt in st?st[Nt]:0;M(_r,Nt-g,$-w)}}}return _.push(x.length),new i({values:x,index:b,ptr:_,size:[v-g+1,y-w+1]})}i.prototype.forEach=function(p,g){if(!this._values)throw new Error("Cannot invoke forEach on a Pattern only matrix");for(var v=this,w=this._size[0],y=this._size[1],E=Qn(p,v,"forEach"),A=0;A<y;A++){var x=this._ptr[A],b=this._ptr[A+1];if(g)for(var _=x;_<b;_++){var N=this._index[_];E.fn(this._values[_],[N,A],v)}else{for(var L={},M=x;M<b;M++){var $=this._index[M];L[$]=this._values[M]}for(var q=0;q<w;q++){var H=q in L?L[q]:0;E.fn(H,[q,A],v)}}}},i.prototype[Symbol.iterator]=function*(){if(!this._values)throw new Error("Cannot iterate a Pattern only matrix");for(var p=this._size[1],g=0;g<p;g++)for(var v=this._ptr[g],w=this._ptr[g+1],y=v;y<w;y++){var E=this._index[y];yield{value:this._values[y],index:[E,g]}}},i.prototype.toArray=function(){return m(this._values,this._index,this._ptr,this._size,!0)},i.prototype.valueOf=function(){return m(this._values,this._index,this._ptr,this._size,!1)};function m(p,g,v,w,y){var E=w[0],A=w[1],x=[],b,_;for(b=0;b<E;b++)for(x[b]=[],_=0;_<A;_++)x[b][_]=0;for(_=0;_<A;_++)for(var N=v[_],L=v[_+1],M=N;M<L;M++)b=g[M],x[b][_]=p?y?gt(p[M]):p[M]:1;return x}return i.prototype.format=function(p){for(var g=this._size[0],v=this._size[1],w=this.density(),y="Sparse Matrix ["+xt(g,p)+" x "+xt(v,p)+"] density: "+xt(w,p)+`
`,E=0;E<v;E++)for(var A=this._ptr[E],x=this._ptr[E+1],b=A;b<x;b++){var _=this._index[b];y+=`
    (`+xt(_,p)+", "+xt(E,p)+") ==> "+(this._values?xt(this._values[b],p):"X")}return y},i.prototype.toString=function(){return xt(this.toArray())},i.prototype.toJSON=function(){return{mathjs:"SparseMatrix",values:this._values,index:this._index,ptr:this._ptr,size:this._size,datatype:this._datatype}},i.prototype.diagonal=function(p){if(p){if(vt(p)&&(p=p.toNumber()),!it(p)||!Dt(p))throw new TypeError("The parameter k must be an integer number")}else p=0;var g=p>0?p:0,v=p<0?-p:0,w=this._size[0],y=this._size[1],E=Math.min(w-v,y-g),A=[],x=[],b=[];b[0]=0;for(var _=g;_<y&&A.length<E;_++)for(var N=this._ptr[_],L=this._ptr[_+1],M=N;M<L;M++){var $=this._index[M];if($===_-g+v){A.push(this._values[M]),x[A.length-1]=$-v;break}}return b.push(A.length),new i({values:A,index:x,ptr:b,size:[E,1]})},i.fromJSON=function(p){return new i(p)},i.diagonal=function(p,g,v,w,y){if(!ht(p))throw new TypeError("Array expected, size parameter");if(p.length!==2)throw new Error("Only two dimensions matrix are supported");if(p=p.map(function(K){if(vt(K)&&(K=K.toNumber()),!it(K)||!Dt(K)||K<1)throw new Error("Size values must be positive integers");return K}),v){if(vt(v)&&(v=v.toNumber()),!it(v)||!Dt(v))throw new TypeError("The parameter k must be an integer number")}else v=0;var E=n,A=0;Qt(y)&&(E=e.find(n,[y,y])||n,A=e.convert(0,y));var x=v>0?v:0,b=v<0?-v:0,_=p[0],N=p[1],L=Math.min(_-b,N-x),M;if(ht(g)){if(g.length!==L)throw new Error("Invalid value array length");M=function(Nt){return g[Nt]}}else if(Wt(g)){var $=g.size();if($.length!==1||$[0]!==L)throw new Error("Invalid matrix length");M=function(Nt){return g.get([Nt])}}else M=function(){return g};for(var q=[],H=[],G=[],V=0;V<N;V++){G.push(q.length);var st=V-x;if(st>=0&&st<L){var ot=M(st);E(ot,A)||(H.push(st+b),q.push(ot))}}return G.push(q.length),new i({values:q,index:H,ptr:G,size:[_,N]})},i.prototype.swapRows=function(p,g){if(!it(p)||!Dt(p)||!it(g)||!Dt(g))throw new Error("Row index must be positive integers");if(this._size.length!==2)throw new Error("Only two dimensional matrix is supported");return ct(p,this._size[0]),ct(g,this._size[0]),i._swapRows(p,g,this._size[1],this._values,this._index,this._ptr),this},i._forEachRow=function(p,g,v,w,y){for(var E=w[p],A=w[p+1],x=E;x<A;x++)y(v[x],g[x])},i._swapRows=function(p,g,v,w,y,E){for(var A=0;A<v;A++){var x=E[A],b=E[A+1],_=l(p,x,b,y),N=l(g,x,b,y);if(_<b&&N<b&&y[_]===p&&y[N]===g){if(w){var L=w[_];w[_]=w[N],w[N]=L}continue}if(_<b&&y[_]===p&&(N>=b||y[N]!==g)){var M=w?w[_]:void 0;y.splice(N,0,g),w&&w.splice(N,0,M),y.splice(N<=_?_+1:_,1),w&&w.splice(N<=_?_+1:_,1);continue}if(N<b&&y[N]===g&&(_>=b||y[_]!==p)){var $=w?w[N]:void 0;y.splice(_,0,p),w&&w.splice(_,0,$),y.splice(_<=N?N+1:N,1),w&&w.splice(_<=N?N+1:N,1)}}},i},{isClass:!0}),is="matrix",kl=["typed","Matrix","DenseMatrix","SparseMatrix"],$l=Q(is,kl,t=>{var{typed:e,Matrix:n,DenseMatrix:r,SparseMatrix:i}=t;return e(is,{"":function(){return s([])},string:function(u){return s([],u)},"string, string":function(u,o){return s([],u,o)},Array:function(u){return s(u)},Matrix:function(u){return s(u,u.storage())},"Array | Matrix, string":s,"Array | Matrix, string, string":s});function s(a,u,o){if(u==="dense"||u==="default"||u===void 0)return new r(a,o);if(u==="sparse")return new i(a,o);throw new TypeError("Unknown matrix type "+JSON.stringify(u)+".")}}),Ul="matAlgo11xS0s",zl=["typed","equalScalar"],ql=Q(Ul,zl,t=>{var{typed:e,equalScalar:n}=t;return function(i,s,a,u){var o=i._values,l=i._index,c=i._ptr,f=i._size,h=i._datatype;if(!o)throw new Error("Cannot perform operation on Pattern Sparse Matrix and Scalar value");var d=f[0],m=f[1],p,g=n,v=0,w=a;typeof h=="string"&&(p=h,g=e.find(n,[p,p]),v=e.convert(0,p),s=e.convert(s,p),w=e.find(a,[p,p]));for(var y=[],E=[],A=[],x=0;x<m;x++){A[x]=E.length;for(var b=c[x],_=c[x+1],N=b;N<_;N++){var L=l[N],M=u?w(s,o[N]):w(o[N],s);g(M,v)||(E.push(L),y.push(M))}}return A[m]=E.length,i.createSparseMatrix({values:y,index:E,ptr:A,size:[d,m],datatype:p})}}),Hl="matAlgo12xSfs",Vl=["typed","DenseMatrix"],Wl=Q(Hl,Vl,t=>{var{typed:e,DenseMatrix:n}=t;return function(i,s,a,u){var o=i._values,l=i._index,c=i._ptr,f=i._size,h=i._datatype;if(!o)throw new Error("Cannot perform operation on Pattern Sparse Matrix and Scalar value");var d=f[0],m=f[1],p,g=a;typeof h=="string"&&(p=h,s=e.convert(s,p),g=e.find(a,[p,p]));for(var v=[],w=[],y=[],E=0;E<m;E++){for(var A=E+1,x=c[E],b=c[E+1],_=x;_<b;_++){var N=l[_];w[N]=o[_],y[N]=A}for(var L=0;L<d;L++)E===0&&(v[L]=[]),y[L]===A?v[L][E]=u?g(s,w[L]):g(w[L],s):v[L][E]=u?g(s,0):g(0,s)}return new n({data:v,size:[d,m],datatype:p})}}),Zl="matAlgo14xDs",Xl=["typed"],Yl=Q(Zl,Xl,t=>{var{typed:e}=t;return function(i,s,a,u){var o=i._data,l=i._size,c=i._datatype,f,h=a;typeof c=="string"&&(f=c,s=e.convert(s,f),h=e.find(a,[f,f]));var d=l.length>0?n(h,0,l,l[0],o,s,u):[];return i.createDenseMatrix({data:d,size:gt(l),datatype:f})};function n(r,i,s,a,u,o,l){var c=[];if(i===s.length-1)for(var f=0;f<a;f++)c[f]=l?r(o,u[f]):r(u[f],o);else for(var h=0;h<a;h++)c[h]=n(r,i+1,s,s[i+1],u[h],o,l);return c}}),Gl="matAlgo02xDS0",Jl=["typed","equalScalar"],Kl=Q(Gl,Jl,t=>{var{typed:e,equalScalar:n}=t;return function(i,s,a,u){var o=i._data,l=i._size,c=i._datatype||i.getDataType(),f=s._values,h=s._index,d=s._ptr,m=s._size,p=s._datatype||s._data===void 0?s._datatype:s.getDataType();if(l.length!==m.length)throw new tt(l.length,m.length);if(l[0]!==m[0]||l[1]!==m[1])throw new RangeError("Dimension mismatch. Matrix A ("+l+") must match Matrix B ("+m+")");if(!f)throw new Error("Cannot perform operation on Dense Matrix and Pattern Sparse Matrix");var g=l[0],v=l[1],w,y=n,E=0,A=a;typeof c=="string"&&c===p&&c!=="mixed"&&(w=c,y=e.find(n,[w,w]),E=e.convert(0,w),A=e.find(a,[w,w]));for(var x=[],b=[],_=[],N=0;N<v;N++){_[N]=b.length;for(var L=d[N],M=d[N+1],$=L;$<M;$++){var q=h[$],H=u?A(f[$],o[q][N]):A(o[q][N],f[$]);y(H,E)||(b.push(q),x.push(H))}}return _[v]=b.length,s.createSparseMatrix({values:x,index:b,ptr:_,size:[g,v],datatype:c===i._datatype&&p===s._datatype?w:void 0})}}),Ql="matAlgo03xDSf",jl=["typed"],tf=Q(Ql,jl,t=>{var{typed:e}=t;return function(r,i,s,a){var u=r._data,o=r._size,l=r._datatype||r.getDataType(),c=i._values,f=i._index,h=i._ptr,d=i._size,m=i._datatype||i._data===void 0?i._datatype:i.getDataType();if(o.length!==d.length)throw new tt(o.length,d.length);if(o[0]!==d[0]||o[1]!==d[1])throw new RangeError("Dimension mismatch. Matrix A ("+o+") must match Matrix B ("+d+")");if(!c)throw new Error("Cannot perform operation on Dense Matrix and Pattern Sparse Matrix");var p=o[0],g=o[1],v,w=0,y=s;typeof l=="string"&&l===m&&l!=="mixed"&&(v=l,w=e.convert(0,v),y=e.find(s,[v,v]));for(var E=[],A=0;A<p;A++)E[A]=[];for(var x=[],b=[],_=0;_<g;_++){for(var N=_+1,L=h[_],M=h[_+1],$=L;$<M;$++){var q=f[$];x[q]=a?y(c[$],u[q][_]):y(u[q][_],c[$]),b[q]=N}for(var H=0;H<p;H++)b[H]===N?E[H][_]=x[H]:E[H][_]=a?y(w,u[H][_]):y(u[H][_],w)}return r.createDenseMatrix({data:E,size:[p,g],datatype:l===r._datatype&&m===i._datatype?v:void 0})}}),ef="matAlgo13xDD",nf=["typed"],rf=Q(ef,nf,t=>{var{typed:e}=t;return function(i,s,a){var u=i._data,o=i._size,l=i._datatype,c=s._data,f=s._size,h=s._datatype,d=[];if(o.length!==f.length)throw new tt(o.length,f.length);for(var m=0;m<o.length;m++){if(o[m]!==f[m])throw new RangeError("Dimension mismatch. Matrix A ("+o+") must match Matrix B ("+f+")");d[m]=o[m]}var p,g=a;typeof l=="string"&&l===h&&(p=l,g=e.find(a,[p,p]));var v=d.length>0?n(g,0,d,d[0],u,c):[];return i.createDenseMatrix({data:v,size:d,datatype:p})};function n(r,i,s,a,u,o){var l=[];if(i===s.length-1)for(var c=0;c<a;c++)l[c]=r(u[c],o[c]);else for(var f=0;f<a;f++)l[f]=n(r,i+1,s,s[i+1],u[f],o[f]);return l}});function dt(t,e){if(Ae(t.size(),e.size()))return[t,e];var n=wa(t.size(),e.size());return[t,e].map(r=>sf(r,n))}function sf(t,e){return Ae(t.size(),e)?t:t.create(Wr(t.valueOf(),e),t.datatype())}var af="matrixAlgorithmSuite",uf=["typed","matrix"],of=Q(af,uf,t=>{var{typed:e,matrix:n}=t,r=rf({typed:e}),i=Yl({typed:e});return function(a){var u=a.elop,o=a.SD||a.DS,l;u?(l={"DenseMatrix, DenseMatrix":(d,m)=>r(...dt(d,m),u),"Array, Array":(d,m)=>r(...dt(n(d),n(m)),u).valueOf(),"Array, DenseMatrix":(d,m)=>r(...dt(n(d),m),u),"DenseMatrix, Array":(d,m)=>r(...dt(d,n(m)),u)},a.SS&&(l["SparseMatrix, SparseMatrix"]=(d,m)=>a.SS(...dt(d,m),u,!1)),a.DS&&(l["DenseMatrix, SparseMatrix"]=(d,m)=>a.DS(...dt(d,m),u,!1),l["Array, SparseMatrix"]=(d,m)=>a.DS(...dt(n(d),m),u,!1)),o&&(l["SparseMatrix, DenseMatrix"]=(d,m)=>o(...dt(m,d),u,!0),l["SparseMatrix, Array"]=(d,m)=>o(...dt(n(m),d),u,!0))):(l={"DenseMatrix, DenseMatrix":e.referToSelf(d=>(m,p)=>r(...dt(m,p),d)),"Array, Array":e.referToSelf(d=>(m,p)=>r(...dt(n(m),n(p)),d).valueOf()),"Array, DenseMatrix":e.referToSelf(d=>(m,p)=>r(...dt(n(m),p),d)),"DenseMatrix, Array":e.referToSelf(d=>(m,p)=>r(...dt(m,n(p)),d))},a.SS&&(l["SparseMatrix, SparseMatrix"]=e.referToSelf(d=>(m,p)=>a.SS(...dt(m,p),d,!1))),a.DS&&(l["DenseMatrix, SparseMatrix"]=e.referToSelf(d=>(m,p)=>a.DS(...dt(m,p),d,!1)),l["Array, SparseMatrix"]=e.referToSelf(d=>(m,p)=>a.DS(...dt(n(m),p),d,!1))),o&&(l["SparseMatrix, DenseMatrix"]=e.referToSelf(d=>(m,p)=>o(...dt(p,m),d,!0)),l["SparseMatrix, Array"]=e.referToSelf(d=>(m,p)=>o(...dt(n(p),m),d,!0))));var c=a.scalar||"any",f=a.Ds||a.Ss;f&&(u?(l["DenseMatrix,"+c]=(d,m)=>i(d,m,u,!1),l[c+", DenseMatrix"]=(d,m)=>i(m,d,u,!0),l["Array,"+c]=(d,m)=>i(n(d),m,u,!1).valueOf(),l[c+", Array"]=(d,m)=>i(n(m),d,u,!0).valueOf()):(l["DenseMatrix,"+c]=e.referToSelf(d=>(m,p)=>i(m,p,d,!1)),l[c+", DenseMatrix"]=e.referToSelf(d=>(m,p)=>i(p,m,d,!0)),l["Array,"+c]=e.referToSelf(d=>(m,p)=>i(n(m),p,d,!1).valueOf()),l[c+", Array"]=e.referToSelf(d=>(m,p)=>i(n(p),m,d,!0).valueOf())));var h=a.sS!==void 0?a.sS:a.Ss;return u?(a.Ss&&(l["SparseMatrix,"+c]=(d,m)=>a.Ss(d,m,u,!1)),h&&(l[c+", SparseMatrix"]=(d,m)=>h(m,d,u,!0))):(a.Ss&&(l["SparseMatrix,"+c]=e.referToSelf(d=>(m,p)=>a.Ss(m,p,d,!1))),h&&(l[c+", SparseMatrix"]=e.referToSelf(d=>(m,p)=>h(p,m,d,!0)))),u&&u.signatures&&ko(l,u.signatures),l}}),cf="sqrt",lf=["config","typed","Complex"],ff=Q(cf,lf,t=>{var{config:e,typed:n,Complex:r}=t;return n("sqrt",{number:i,Complex:function(a){return a.sqrt()},BigNumber:function(a){return!a.isNegative()||e.predictable?a.sqrt():i(a.toNumber())},Unit:function(a){return a.pow(.5)}});function i(s){return isNaN(s)?NaN:s>=0||e.predictable?Math.sqrt(s):new r(s,0).sqrt()}}),hf="matAlgo09xS0Sf",pf=["typed","equalScalar"],df=Q(hf,pf,t=>{var{typed:e,equalScalar:n}=t;return function(i,s,a){var u=i._values,o=i._index,l=i._ptr,c=i._size,f=i._datatype||i._data===void 0?i._datatype:i.getDataType(),h=s._values,d=s._index,m=s._ptr,p=s._size,g=s._datatype||s._data===void 0?s._datatype:s.getDataType();if(c.length!==p.length)throw new tt(c.length,p.length);if(c[0]!==p[0]||c[1]!==p[1])throw new RangeError("Dimension mismatch. Matrix A ("+c+") must match Matrix B ("+p+")");var v=c[0],w=c[1],y,E=n,A=0,x=a;typeof f=="string"&&f===g&&f!=="mixed"&&(y=f,E=e.find(n,[y,y]),A=e.convert(0,y),x=e.find(a,[y,y]));var b=u&&h?[]:void 0,_=[],N=[],L=b?[]:void 0,M=[],$,q,H,G,V;for(q=0;q<w;q++){N[q]=_.length;var st=q+1;if(L)for(G=m[q],V=m[q+1],H=G;H<V;H++)$=d[H],M[$]=st,L[$]=h[H];for(G=l[q],V=l[q+1],H=G;H<V;H++)if($=o[H],L){var ot=M[$]===st?L[$]:A,K=x(u[H],ot);E(K,A)||(_.push($),b.push(K))}else _.push($)}return N[w]=_.length,i.createSparseMatrix({values:b,index:_,ptr:N,size:[v,w],datatype:f===i._datatype&&g===s._datatype?y:void 0})}}),ss="concat",mf=["typed","matrix","isInteger"],gf=Q(ss,mf,t=>{var{typed:e,matrix:n,isInteger:r}=t;return e(ss,{"...Array | Matrix | number | BigNumber":function(s){var a,u=s.length,o=-1,l,c=!1,f=[];for(a=0;a<u;a++){var h=s[a];if(Wt(h)&&(c=!0),it(h)||vt(h)){if(a!==u-1)throw new Error("Dimension must be specified as last argument");if(l=o,o=h.valueOf(),!r(o))throw new TypeError("Integer number expected for dimension");if(o<0||a>0&&o>l)throw new Le(o,l+1)}else{var d=gt(h).valueOf(),m=Yt(d);if(f[a]=d,l=o,o=m.length-1,a>0&&o!==l)throw new tt(l+1,o+1)}}if(f.length===0)throw new SyntaxError("At least one matrix expected");for(var p=f.shift();f.length;)p=ya(p,f.shift(),o);return c?n(p):p},"...string":function(s){return s.join("")}})});function Df(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function vf(t){var e=0,n=1,r=Object.create(null),i=Object.create(null),s=0,a=function(o){var l=i[o];if(l&&(delete r[l],delete i[o],--e,n===l)){if(!e){s=0,n=1;return}for(;!Object.prototype.hasOwnProperty.call(r,++n););}};return t=Math.abs(t),{hit:function(o){var l=i[o],c=++s;if(r[c]=o,i[o]=c,!l)return++e,e<=t?void 0:(o=r[n],a(o),o);if(delete r[l],n===l)for(;!Object.prototype.hasOwnProperty.call(r,++n););},delete:a,clear:function(){e=s=0,n=1,r=Object.create(null),i=Object.create(null)}}}function gr(t){var{hasher:e,limit:n}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return n=n??Number.POSITIVE_INFINITY,e=e??JSON.stringify,function r(){typeof r.cache!="object"&&(r.cache={values:new Map,lru:vf(n||Number.POSITIVE_INFINITY)});for(var i=[],s=0;s<arguments.length;s++)i[s]=arguments[s];var a=e(i);if(r.cache.values.has(a))return r.cache.lru.hit(a),r.cache.values.get(a);var u=t.apply(t,i);return r.cache.values.set(a,u),r.cache.values.delete(r.cache.lru.hit(a)),u}}gr(function(t){return new t(1).exp()},{hasher:Dr});gr(function(t){return new t(1).plus(new t(5).sqrt()).div(2)},{hasher:Dr});var Aa=gr(function(t){return t.acos(-1)},{hasher:Dr});gr(function(t){return Aa(t).times(2)},{hasher:Dr});function Dr(t){return t[0].precision}var as="acos",yf=["typed","config","Complex"],wf=Q(as,yf,t=>{var{typed:e,config:n,Complex:r}=t;return e(as,{number:function(s){return s>=-1&&s<=1||n.predictable?Math.acos(s):new r(s,0).acos()},Complex:function(s){return s.acos()},BigNumber:function(s){return s.acos()}})}),us="asin",Ff=["typed","config","Complex"],Ef=Q(us,Ff,t=>{var{typed:e,config:n,Complex:r}=t;return e(us,{number:function(s){return s>=-1&&s<=1||n.predictable?Math.asin(s):new r(s,0).asin()},Complex:function(s){return s.asin()},BigNumber:function(s){return s.asin()}})}),Af="atan",Cf=["typed"],_f=Q(Af,Cf,t=>{var{typed:e}=t;return e("atan",{number:function(r){return Math.atan(r)},Complex:function(r){return r.atan()},BigNumber:function(r){return r.atan()}})}),os="atan2",xf=["typed","matrix","equalScalar","BigNumber","DenseMatrix","concat"],bf=Q(os,xf,t=>{var{typed:e,matrix:n,equalScalar:r,BigNumber:i,DenseMatrix:s,concat:a}=t,u=Kl({typed:e,equalScalar:r}),o=tf({typed:e}),l=df({typed:e,equalScalar:r}),c=ql({typed:e,equalScalar:r}),f=Wl({typed:e,DenseMatrix:s}),h=of({typed:e,matrix:n,concat:a});return e(os,{"number, number":Math.atan2,"BigNumber, BigNumber":(d,m)=>i.atan2(d,m)},h({scalar:"number | BigNumber",SS:l,DS:o,SD:u,Ss:c,sS:f}))}),vi=Q("trigUnit",["typed"],t=>{var{typed:e}=t;return{Unit:e.referToSelf(n=>r=>{if(!r.hasBase(r.constructor.BASE_UNITS.ANGLE))throw new TypeError("Unit in function cot is no angle");return e.find(n,r.valueType())(r.value)})}}),cs="cos",Bf=["typed"],Mf=Q(cs,Bf,t=>{var{typed:e}=t,n=vi({typed:e});return e(cs,{number:Math.cos,"Complex | BigNumber":r=>r.cos()},n)}),ls="sin",Sf=["typed"],Nf=Q(ls,Sf,t=>{var{typed:e}=t,n=vi({typed:e});return e(ls,{number:Math.sin,"Complex | BigNumber":r=>r.sin()},n)}),fs="tan",Tf=["typed"],If=Q(fs,Tf,t=>{var{typed:e}=t,n=vi({typed:e});return e(fs,{number:Math.tan,"Complex | BigNumber":r=>r.tan()},n)}),Pf=Rf("pi",["config","?BigNumber"],t=>{var{config:e,BigNumber:n}=t;return e.number==="BigNumber"?Aa(n):Ml});function Rf(t,e,n){return Q(t,e,n,{recreateOnConfigChange:!0})}var yi=Xc({config:Re}),vr=Qc({}),Lf=sl({}),wi=ol({}),Fi=_l({Matrix:wi}),Te=Pf({BigNumber:yi,config:Re}),Pt=Jo({BigNumber:yi,Complex:vr,DenseMatrix:Fi,Fraction:Lf}),Ca=wf({Complex:vr,config:Re,typed:Pt}),_a=_f({typed:Pt}),Ee=Mf({typed:Pt}),xa=Pl({config:Re,typed:Pt}),Of=Bl({typed:Pt}),le=Nf({typed:Pt}),kf=Ol({Matrix:wi,equalScalar:xa,typed:Pt}),$f=If({typed:Pt}),ba=$l({DenseMatrix:Fi,Matrix:wi,SparseMatrix:kf,typed:Pt}),jt=ff({Complex:vr,config:Re,typed:Pt}),Uf=Ef({Complex:vr,config:Re,typed:Pt}),zf=gf({isInteger:Of,matrix:ba,typed:Pt}),qf=bf({BigNumber:yi,DenseMatrix:Fi,concat:zf,equalScalar:xa,matrix:ba,typed:Pt});function Ba(t,e,n){return Uf(e*le(Math.PI-n)/t)}function Ma(t,e,n,r,i=0,s=0){const a=Math.abs(n-i),u=r-s;return Math.PI-Hf(a,u,t,e)}function hn(t,e,n,r){const i=Ba(n,r,t),a=(n*Ee(i)-e)/r;return t-Ca(a)}function Hf(t,e,n,r,i=.001,s=100){let a=0,u=Math.PI;const o=_a(e/t),l=t>.001?t/Ee(o):e/le(o);let c=(a+u)/2,f=hn(c,l,n,r);isNaN(f)&&(a=Vf(c,l,n,r));let h=(u-a)/2,d=hn(a,l,n,r);for(let m=0;m<s;m++)if(c=(a+u)/2,f=hn(c,l,n,r),f*d<0?u=c:(a=c,d=f),h=(u-a)/2,h<i||f===0)return c;return null}function Vf(t,e,n,r){let i=t,s=hn(i,e,n,r);for(;isNaN(s);)i+=.05,s=hn(i,e,n,r);return i}function We(t,e,n){const r=Ma(t._R,e._R,e.ry[n],e.rz[n],t.ry[n],t.rz[n]),i=Ba(t._R,e._R,r);return Wf(t._R,e._R,r,i)}function Fe(t,e=[0,0]){return jt((t[0]-e[0])**2+(t[1]-e[1])**2)}function Wf(t,e,n,r){const i=pn(e,n),s=pn(t,r);return i+s}function pn(t,e){return t**2*(e-Ee(e)*le(e))}function Zf(t,e,n,r,i,s){const a=Fe(r,i),u=Fe(i,s),o=Fe(s,r),l=Ir(e,e,a),c=Ir(n,n,o),f=Ir(t,t,u),h=pn(e,l/2),d=pn(n,c/2),m=pn(t,f/2),p=Xf(a,u,o);return h+d+m+p}function Xf(t,e,n){const r=(t+e+n)/2;return jt(r*(r-t)*(r-e)*(r-n))}function Ir(t,e,n){return Ca((t**2+e**2-n**2)/(2*t*e))}const tr=(t,e,n)=>{const r=(e-t)/(n-1);return Array.from({length:n},(i,s)=>t+s*r)};function Sa(t,e){t=t.replace(/^#/,"");let n=parseInt(t.substring(0,2),16),r=parseInt(t.substring(2,4),16),i=parseInt(t.substring(4,6),16);return n=Math.max(0,Math.min(255,Math.floor(n*(1-e/100)))),r=Math.max(0,Math.min(255,Math.floor(r*(1-e/100)))),i=Math.max(0,Math.min(255,Math.floor(i*(1-e/100)))),`#${n.toString(16).padStart(2,"0")}${r.toString(16).padStart(2,"0")}${i.toString(16).padStart(2,"0")}`}function Na(t,e,n){const r=URL.createObjectURL(t),i=document.createElement("a");document.body.appendChild(i),i.style="display: none",i.href=r,i.download=e+"."+n,i.click(),setTimeout(()=>{URL.revokeObjectURL(r),document.body.removeChild(i)},100)}class yr{constructor(e,n,r="yellow"){this._M=e,this._R=n,this.rx=[],this.ry=[],this.rz=[],this.color=r}get Area(){return Math.PI*this._R**2}get M(){return this._M}get R(){return this._R}setOrbitingTimes(e){this.rx=new Array(e.length).fill(0),this.ry=new Array(e.length).fill(0),this.rz=new Array(e.length).fill(0)}getFullTransits(e){const n=this.rx.length;var r=new Array(n).fill(!1);for(let i=0;i<n;i++)return this.rx[i]>e.rx[i]&&this.getProjectedDistance(e,i)+this._R<=e._R&&(r[i]=!0),r}getPartialTransits(e){const n=this.rx.length;var r=new Array(n).fill(!1);for(let i=0;i<n;i++)if(this.rx[i]>e.rx[i]){const s=this.getProjectedDistance(e,i);r[i]=s-this._R<e._R&&s+this._R>e._R}return r}getProjectedDistance(e,n){return Fe([e.ry[n],e.rz[n]],[this.ry[n],this.rz[n]])}copy(){const e=new yr;return Object.assign(e,this),e}draw(e,n,r,i,s=!0){e.save(),e.fillStyle=this.color,e.beginPath();const a=this.ry[i]*r;var u=r;s?u*=this.rx[i]:u*=this.rz[i];const o=n[0]+a,l=n[1]+u;e.arc(o,l,this._R*r,0,2*Math.PI),e.fill(),e.closePath();const c=e.createRadialGradient(o,l,0,o,l,this._R*r);c.addColorStop(0,"rgba(0, 0, 0, 0.01)"),c.addColorStop(1,"rgba(0, 0, 0, 0.5)"),e.fillStyle=c,e.globalCompositeOperation="multiply",e.beginPath(),e.arc(o,l,this._R*r,0,2*Math.PI),e.fill(),e.closePath(),e.restore()}getEclipsingAreas(e){const n=this.rx.length;var r=new Array(e.length),i=new Array(n).fill(0);e.slice().sort((u,o)=>o.R-u.R).forEach((u,o)=>{const[l,c]=u.getTransits(this);c.forEach((f,h)=>{f?i[h]+=We(this,u,h):l[h]&&(i[h]+=u.Area)}),r.forEach(f=>{console.log("Iterating previous planets",f.planetName);const[h,d]=u.getTransits(f,!1),[m,p]=f.getTransits(this);m.forEach((g,v)=>{if(g){if(l[v])h[v]?(console.log(v,"Full - Full - Full"),i[v]-=u.Area):d[v]&&(console.log(v,"Full - Full - Partial"),i[v]-=We(f,u,v));else if(c[v]){if(h[v])throw new Error("Full - Partial - Full cannot exist as the previous planet is always larger");d[v]&&(console.log(v,"Full - Partial - Partial"),i[v]-=We(f,u,v))}}else p[v]&&(l[v]?h[v]?(console.log(v,"Partial - Full - Full"),i[v]-=u.Area):d[v]&&(console.log(v,"Partial - Full - Partial"),i[v]-=We(f,u,v)):c[v]&&(h[v]?(console.log(v,"Partial - Partial - Full"),i[v]-=We(star,u,v)):d[v]&&(console.log(v,"Partial - Partial - Partial"),planet_planet_contact_points=f.getContactPoints(u,v),console.log("Partial - Partial - Partial not implemented yet!"))))})}),r[o]=u});const a=i.map(u=>1-u/this.Area);return console.log("fraction",a),a}maxCoordinate(){const e=Math.max(...this.rx.map(Math.abs)),n=Math.max(...this.ry.map(Math.abs)),r=Math.max(...this.rz.map(Math.abs));return Math.max(e,n,r)}maxFaceOn(){const e=Math.max(...this.rx.map(Math.abs)),n=Math.max(...this.ry.map(Math.abs));return Math.max(n,e)}getEclipsingAreasNumerical(e,n=500,r=250){const i=tr(0,this._R,n),s=tr(0,2*Math.PI,r),a=this.rx.length;let u=new Array(a).fill(0);const o=i[1]-i[0],l=s[1]-s[0];for(let c=0;c<a;c++){let f=i.slice(),h=s.slice();e.forEach(d=>{if(console.log("Iterating planets",d.planetName),d.rx[c]>this.rx[c]&&jt((this.ry[c]-d.ry[c])**2+(this.rz[c]-d.rz[c]**2))-d._R<this._R){console.log("Planet covers the star at time",c);let p=[],g=[];f.forEach(v=>{const w=o*l*v;let y=!1;h.forEach(E=>{const A=v*Math.cos(E),x=v*Math.sin(E);jt((A-d.ry[c])**2+(x-d.rz[c])**2)<d._R?u[c]+=w:(y=!0,g.push(E))}),y&&p.push(v)}),f=p,h=g}}),u[c]=1-u[c]/this.Area}return console.log("fraction",u),u}}class Ei extends yr{constructor(e=1,n=1,r="yellow"){super(e*Rn,n*fn,r)}set M(e){this._M=e*Rn}set R(e){this._R=e*fn}get R(){return super.R}get M(){return super.M}toString(){return`Star: ${(this.R/fn).toFixed(1)} $R_odot$ 
 ${(this.M/Rn).toFixed(1)} g`}equals(e){return this.R===e.R&&this.M===e.M}}class Yf{constructor(e,n){this.onStarUpdate=e,this.onColorChange=n,this.initStar()}initStar(){const e=document.getElementById("star-mass"),n=document.getElementById("star-radius"),r=document.getElementById("star-color"),i=document.getElementById("star-icon");i.addEventListener("click",()=>{r.click()}),e.addEventListener("input",s=>{const a=parseFloat(s.target.min),u=parseFloat(s.target.max);var o=parseFloat(s.target.value);o<a?(o=a,s.target.value=o):o>u&&(o=u,s.target.value=o);const l=parseFloat(s.target.value);this.star.M=l,this.onStarUpdate()}),n.addEventListener("input",s=>{const a=parseFloat(s.target.min),u=parseFloat(s.target.max);var o=parseFloat(s.target.value);o<a?(o=a,s.target.value=o):o>u&&(o=u,s.target.value=o);const l=parseFloat(s.target.value);this.star.R=l,this.onStarUpdate()}),r.addEventListener("change",s=>{this.star.color=s.target.value,i.style.backgroundColor=s.target.value,this.onColorChange()}),this.star=new Ei(e.value,n.value,r.value),i.style.backgroundColor=this.star.color}setTimes(e){this.star.setOrbitingTimes(e)}}function Gf(t,e){return e.map(n=>2*_a(jt((1+t)/(1-t))*$f(n/2))%(2*Te))}function Jf(t,e,n){return t.map(r=>e*(r-n)%(2*Te))}function hs(t,e,n){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)throw new Error("E and M arrays must have the same length");return t.map((r,i)=>r-(e[i]+n*le(r)))}else{if(!Array.isArray(t)&&!Array.isArray(e))return t-(e+n*le(t));throw new Error("E and M must be both arrays or both single values")}}function Kf(t,e,n=.001,r=100){let i=0,s=2*Te,a=(s-i)/2,u=hs(i,t,e);for(let o=0;o<r;o++){const l=(i+s)/2,c=hs(l,t,e);if(c*u<0?s=l:(i=l,u=c),a=(s-i)/2,a<n||c===0)return l}return null}function Ze(t,e,n){return(n**2*Zs*(t+e)/(4*Te**2))**.3333333333333333}function ps(t,e,n){return 2*Te*(n**3/(Zs*(t+e)))**.5}function Qf(t,e,n){return n.map(r=>t*(1-e**2)/(1+e*Ee(r)))}class Ta{constructor(e="jupyter"){if(e.indexOf(e)===-1)throw new Error(`Invalid units: ${e}. Valid units are: ${e.join(", ")}`);e==="solar"?(this.R=fn,this.M=Rn,this.symbol="<sub>☉</sub>"):e==="earth"?(this.R=Vs,this.M=Ws,this.symbol="<sub>⊕</sub>"):e==="jupyter"&&(this.R=pe,this.M=Gt,this.symbol="<sub>J</sub>")}}class se extends yr{constructor(e,n,r,i,s=0,a=0,u=0,o=0,l=0,c="blue",f="Planet 1",h=new Ta("jupyter")){super(e*h.M,n*h.R,c),this.units=h,this.Runits=this.units.R,this.Munits=this.units.M,this.checkInputParams(e,n,r,s,a,u,o,i),this._e=a,this._Ms=i.M,this._Rs=i.R,this.i=s,this._P=r*kt,this.omega0=u,this.Omega0=o,this.phase0=l,this.color=c,this.planetName=f,this._a=Ze(i.M,this._M,this._P),this._b=this._a*jt(1-this._e**2),this._rmax=this.a*(1+this.e),this.rmin=this.a*(1-this._e),console.log(`Planet max distance: ${(this.rmax/Je).toFixed(3)} AU`)}get rmax(){return this._rmax}set planetName(e){this._planetName=e}get planetName(){return this._planetName}set R(e){const n=e*this.Runits;if(this.rmin-n<this._Rs)throw new De(this.rmin,this._Rs);this._R=n}set phase0(e){return this._phase0=e}get phase0(){return this._phase0}get omega0(){return this._omega0}set omega0(e){this._omega0=e}get Omega0(){return this._Omega0/(2*Math.PI)}set Omega0(e){this._Omega0=e*2*Math.PI}set Ms(e){const n=Ze(e,this._M,this._P),r=n*(1-this._e);if(r-this._R<this._Rs)throw new De(r,this._Rs);this._Ms=e,this._a=n,this._b=this._a*jt(1-this._e**2),this._rmin=r,this._rmax=this._a*(1+this._e)}set Rs(e){if(this.rmin-this._R<e)throw new De(this.rmin,e);this._Rs=e}set e(e){const n=this._a*(1-e);if(n-this._R<this._Rs)throw new De(n,this._Rs);this._e=e,this.rmin=n,this._rmax=this._a*(1+this._e),this._b=this._a*jt(1-this._e**2)}set M(e){const n=e*this.Munits,r=Ze(this._Ms,n,this._P),i=r*(1-this._e);if(i-this._R<this._Rs)throw new De(i,this._Rs);this._M=n,this._a=r,this._b=this._a*jt(1-this._e**2),this.rmin=i,this._rmax=r*(1+this._e)}set P(e){const n=e*kt,r=Ze(this._Ms,this._M,n),i=r*(1-this._e);if(i-this._R<this._Rs)throw new De(i,this._Rs);this._P=n,this._a=r,this._b=this._a*jt(1-this._e**2),this.rmin=i,this._rmax=r*(1+this._e)}get R(){return super.R/this.Runits}get M(){return super.M/this.Munits}get e(){return this._e}get a(){return this._a}get b(){return this._b}set i(e){this._i=e/180*Math.PI}get i(){return this._i/Math.PI*180}get P(){return this._P/kt}toString(){return`Planet: ${this.R.toFixed(1)} $R_Earth$ 
 ${this.M.toFixed(1)} g 
 i: ${this.i.toFixed(0)} deg`}equals(e){return this.R===e.R&&this.M===e.M&&this.i===e.i&&this.e===e.e&&this.P===e.P}checkInputParams(e,n,r,i,s,a,u,o){if(e*this.Munits>o.M)throw new Zr("Planet cannot be heavier than host star!");if(n*this.Runits>o.R)throw new Zr("Planet cannot be larger than host star!");if(!(-90<=i&&i<=90))throw new Error(`Inclination ${i.toFixed(1)} must be between -90 and 90!`);if(!(0<=a&&a<=Te))throw new Error(`Argument of periastron ${a.toFixed(1)} must be between 0 and pi!`);if(!(0<=u&&u<=1))throw new Error(`Longitude of the ascending ${u} has to be between 0 and 1!`);if(!(0<=s&&s<=1))throw new Error(`Eccentricity ${s} needs to be between 0 and 1!`);const c=Ze(o.M,e*this.Munits,r*kt)*(1-s);if(c-n*this.Runits<o.R)throw new De(c,o.R)}setStar(e){this.Ms=e.M,this.Rs=e.R}setOrbitingTimes(e){const n=1-this.phase0*this._P,i=Jf(e,2*Te/this._P,n).map(d=>Kf(d,this._e)),s=Gf(this._e,i),a=Qf(this._a,this._e,s),u=s.map(d=>le(d+this.omega0)),o=s.map(d=>Ee(d+this.omega0)),l=Ee(this._Omega0),c=le(this._Omega0),f=Ee(this._i),h=le(this._i);this.rx=a.map((d,m)=>d*(l*o[m]*f-c*u[m])),this.ry=a.map((d,m)=>d*(c*o[m]*f+l*u[m])),this.rz=a.map((d,m)=>-d*o[m]*h)}draw(e,n,r,i,s=!0){e.save(),e.globalAlpha=1;const a=this.ry[i]*r;var u=r,o=r;s?(u*=this.rx[i],o*=this.rz[i]):(u*=this.rz[i],o*=-this.rx[i]);const l=n[0]+a,c=n[1]+u,f=Math.atan2(u,a),h=Math.sqrt(a**2+u**2+o**2),d=Math.acos(Math.sqrt(a**2+u**2)/h),m=f+3*Math.PI/2+Math.sign(o)*d,p=f+Math.PI/2-Math.sign(o)*d;e.fillStyle=Sa(this.color,50),e.beginPath(),e.arc(l,c,this._R*r,p,m,!0),e.fill(),e.closePath(),e.restore(),e.fillStyle=this.color,e.beginPath(),e.arc(l,c,this._R*r,p,m,!1),e.fill(),e.closePath(),e.restore()}}class De extends Error{constructor(e,n){const r=`Star-planet distance ${(e/Je).toFixed(3)} AU is below stellar radius ${(n/Je).toFixed(2)} AU!`;super(r),this.name="StarPlanetDistanceError",this.rmin=e,this._Rs=n}}class Zr extends Error{constructor(e){super(e)}}class qt{constructor(e){this.name=e,this.toolTipElement=document.getElementById("tooltip-"+e),this.toolTipElement==null&&console.warn("ToolTip tooltip-"+e+" not found")}setLanguage(e){const n=e[this.name+"_tooltip"].replace("{index}","{0}");this.toolTipElement.innerHTML=n}}class dn{constructor(e,n,r=!0){this.eclipsedBody=e,this.eclipsingBody=n,this.checkFront=r,this.datapoints=n.rx.length,[this.fullTransitIndexes,this.partialTransitIndexes]=this.getTransits(this.eclipsingBody,this.eclipsedBody,this.checkFront),this.workoutTransits()}workoutTransits(){console.log("Number of full transits: ",this.fullTransitIndexes.length),console.log("Number of partial transits: ",this.partialTransitIndexes.length),this.eclipsedArea=this.getEclipsedArea(this.fullTransitIndexes,this.partialTransitIndexes),this.visibleFraction=this.eclipsedArea.map(e=>1-e/this.eclipsedBody.Area),this.transitDuration=this.partialTransitIndexes.length+this.fullTransitIndexes.length,this.transitDepth=Math.max(...this.eclipsedArea)/this.eclipsedBody.Area}getEclipsedArea(e,n){var r=new Array(this.datapoints).fill(1);return n.forEach(i=>{r[i]=We(this.eclipsedBody,this.eclipsingBody,i)}),e.forEach(i=>{r[i]=this.eclipsingBody.Area}),r}getTransits(e,n,r=!0){const s=Array.from({length:this.datapoints},(o,l)=>l).filter(o=>e.rx[o]>n.rx[o]||!r),a=s.filter(o=>n.getProjectedDistance(e,o)+e._R<=n._R),u=s.filter(o=>n.getProjectedDistance(e,o)-e._R<n._R&&n.getProjectedDistance(e,o)+e._R>n._R);return[a,u]}getContactPoints(e){const n=Ma(this.eclipsedBody._R,this.eclipsingBody._R,this.eclipsingBody.ry[e],this.eclipsingBody.rz[e],this.eclipsedBody.ry[e],this.eclipsedBody.rz[e]),r=this.eclipsingBody.ry[e],i=this.eclipsingBody.rz[e],s=qf(i-this.eclipsedBody.rz[e],r-this.eclipsedBody.ry[e]),a=[r,i],u=[this.pointy(a[0],1,n,s),this.pointz(a[1],1,n,s)],o=[this.pointy(a[0],-1,n,s),this.pointz(a[1],-1,n,s)];return[u,o]}pointy(e,n,r,i){return e-this.eclipsingBody._R*Ee(r+n*i)}pointz(e,n,r,i){return e-n*this.eclipsingBody._R*le(r+n*i)}}const Oe=1e24*1e3,ke=1e5,de=.5,me=new Ei,jf=new se(Oe/Gt,2440.5*ke/pe,87.969,me,7.004,.2056,0,0,de,"#b2b2b2","Mercury"),th=new se(4.8673*Oe/Gt,6051.8*ke/pe,224.701,me,3.395,.0068,0,0,de,"#e6d8ad","Venus"),eh=new se(Ws/Gt,Vs/pe,365.256,me,0,.0167,0,0,de,"#3399ff","Earth"),nh=new se(.64169*Oe/Gt,3396.2*ke/pe,686.98,me,1.85,.0935,0,0,de,"#c1440e","Mars"),rh=new se(1,1,4332.589,me,1.304,.0487,0,0,de,"#e2b07a","Jupiter"),ih=new se(568.32*Oe/Gt,60268*ke/pe,10755.699,me,2.486,.052,0,0,de,"#f7e7b4","Saturn"),sh=new se(86.811*Oe/Gt,25559*ke/pe,30685.4,me,.77,.0469,0,0,de,"#b5e3e3","Uranus"),ah=new se(102.409*Oe/Gt,24764*ke/pe,60189,me,1.77,.0097,0,0,de,"#4976d1","Neptune"),uh=new se(.01303*Oe/Gt,1188.3*ke/pe,90560,me,17.16,.244,0,0,de,"#b97a56","Pluto"),oh={Mercury:jf,Venus:th,Earth:eh,Mars:nh,Jupiter:rh,Saturn:ih,Uranus:sh,Neptune:ah,Pluto:uh},ch=15;class lh{constructor(e,n,r,i){this.onUpdate=e,this.onMenuOpened=n,this.onMenuClosed=r,this.planets=[],this.star=i.copy(),this.units=new Ta("jupyter"),this.setLabelUnits(),this.planetNameCounter=0,this.defaultColor=document.getElementById("planet-period").style.color,this.supressedListener=!0,this.initPlanetMenu(),this.createPlanet(),this.defaultPlanet=this.planet,this.supressedListener=!1}setLanguage(e){this.labels.forEach(n=>{n.setLanguage(e)})}initCanvas(){const e=document.getElementById("planet-canvas");this.translatePos={x:e.width/2,y:e.height/2},this.scale=1,this.scaleMultiplier=.8,this.startDragOffset={},document.getElementById("plus").addEventListener("click",()=>{this.scale/=this.scaleMultiplier,this.updateCanvas()},!1),document.getElementById("minus").addEventListener("click",()=>{this.scale*=this.scaleMultiplier,this.updateCanvas()},!1)}setLabelUnits(){const e=document.getElementById("planet-radius-label");console.log("Setting units: "+this.units.symbol),e.innerHTML=`Radius (R${this.units.symbol})`;const n=document.getElementById("planet-mass-label");n.innerHTML=`Mass (M${this.units.symbol})`}initPlanetMenu(){this.addPlanetBtn=document.getElementById("add-planet-btn"),this.addPlanetBtn.addEventListener("click",()=>this.showPlanetForm()),this.planetForm=document.getElementById("planet-form"),this.cancelPlanetBtn=document.getElementById("cancel-planet-btn"),this.cancelPlanetBtn.addEventListener("click",()=>{this.closePlanetForm(),this.onMenuClosed()}),this.closePlanetBtn=document.getElementById("close-planet-btn"),this.closePlanetBtn.addEventListener("click",()=>this.cancelPlanetBtn.click()),this.planetList=document.getElementById("planet-list"),this.errorLabel=document.getElementById("planet-error"),this.transitWarningLabel=document.getElementById("transit-error"),this.planetNameInput=document.getElementById("planet-name"),this.periodInput=document.getElementById("planet-period"),this.iInput=document.getElementById("inclination-input"),this.phaseInput=document.getElementById("phase-input"),this.Omega0Input=document.getElementById("longitude-ascending-node-input"),this.eInput=document.getElementById("eccentricity-input"),this.massInput=document.getElementById("planet-mass-input"),this.radiusInput=document.getElementById("planet-radius-input"),this.colorInput=document.getElementById("planet-color"),this.presetSelect=document.getElementById("planet-presets");const e=[this.periodInput,this.iInput,this.eInput,this.massInput,this.radiusInput,this.phaseInput,this.Omega0Input];e.forEach(o=>{o.addEventListener("input",l=>{const c=parseFloat(l.target.min),f=parseFloat(l.target.max);var h=parseFloat(l.target.value);h<c?(h=c,l.target.value=h):h>f&&(h=f,l.target.value=h),e.forEach(d=>{d.style.color=this.defaultColor}),this.errorLabel.classList.add("hidden"),!this.supressedListener&&(this.createPlanet(),this.updateCanvas())})}),this.colorInput.addEventListener("input",()=>{this.supressedListener||(console.log("Input Triggered"),this.createPlanet(),this.updateCanvas())}),this.planetNameInput.addEventListener("input",o=>{o.target.style.color=this.defaultColor,this.errorLabel.classList.add("hidden")}),this.randomizeBtn=document.getElementById("randomize-planet-btn"),this.randomizeBtn.addEventListener("click",()=>{this.supressedListener=!0,this.randomizeInputs(),this.errorLabel.classList.remove("hidden"),this.presetSelect.selectedIndex=0,this.createPlanet(),this.updateCanvas(),this.supressedListener=!1}),this.beautifulBtn=document.getElementById("beautiful-planet-btn"),this.beautifulBtn.addEventListener("click",()=>{this.supressedListener=!0,this.beautifulInputs(),this.errorLabel.classList.remove("hidden"),this.presetSelect.selectedIndex=0,this.createPlanet(),this.updateCanvas(),this.supressedListener=!1});const n=new qt("longitude-ascending-node"),r=new qt("phase"),i=new qt("eccentricity"),s=new qt("inclination"),a=new qt("planet-mass"),u=new qt("planet-radius");this.labels=[n,r,i,s,a,u],this.planetCounter=document.getElementById("planet-title-number"),this.presetSelect.addEventListener("change",o=>{const l=this.presetSelect.value,c=oh[l];console.log("Selected planet preset: "+l),c&&(this.planetNameInput.value=c.planetName,this.massInput.value=c.M.toFixed(7),this.radiusInput.value=c.R.toFixed(3),this.periodInput.value=c.P.toFixed(2),this.iInput.value=c.i.toFixed(3),this.eInput.value=c.e.toFixed(3),this.phaseInput.value=c.phase0.toFixed(2),this.Omega0Input.value=c.Omega0.toFixed(2),this.colorInput.value=c.color,this.planetNameInput.value=c.planetName,this.createPlanet(),this.updateCanvas())})}createPlanet(){const e=parseFloat(this.massInput.value),n=parseFloat(this.radiusInput.value),r=parseFloat(this.periodInput.value),i=parseFloat(this.iInput.value),s=parseFloat(this.eInput.value),a=parseFloat(this.phaseInput.value),u=parseFloat(this.Omega0Input.value),o=this.colorInput.value,l=this.planetNameInput.value;try{this.planet=new se(e,n,r,this.star,i,s,0,u,a,o,l,this.units),this.errorLabel.classList.add("hidden")}catch(c){c instanceof De?(console.error(`Star-Planet Distance Error: ${c.message}`),this.errorLabel.classList.remove("hidden"),this.errorLabel.textContent="Orbit is whithin the star radius!",this.planet=null):c instanceof Zr?(this.errorLabel.classList.remove("hidden"),this.errorLabel.textContent=c.message,this.planet=null):(console.error(`Unknown error: ${c.message}`),this.planet=null)}}updateCanvas(e=5e3){if(this.planet!=null){const n=Math.min(Math.floor(this.planet.e+.01*(this.planet.P*e)),5e5);console.log("Updating canvas for "+this.planet.planetName+" with "+n+" datapoints");const r=tr(0,this.planet._P,n);this.planet.setOrbitingTimes(r),this.star.setOrbitingTimes(r),this.drawOrbit();const i=new dn(this.star,this.planet),s=r.map(o=>o/kt),a=i.visibleFraction;this.drawLightcurve(a,s),document.getElementById("perihelion").innerText=(this.planet.rmin/Je).toFixed(3)+" AU",document.getElementById("aphelion").innerText=(this.planet.rmax/Je).toFixed(3)+" AU",document.getElementById("transit-depth").innerText=i.transitDepth.toFixed(4),console.log("Transit duration",i.transitDuration);const u=s[1]-s[0];i.transitDuration==0?this.transitWarningLabel.classList.remove("hidden"):this.transitWarningLabel.classList.add("hidden"),document.getElementById("transit-duration").innerText=(i.transitDuration*u).toFixed(3)+" days"}}drawLightcurve(e,n){const r=document.getElementById("lightcurve-canvas-planet-form"),i=r.getContext("2d"),s=Math.min(...n),a=Math.max(...n),u=Math.min(...e)*.95,o=Math.max(...e)*1.05,l=d=>(d-s)/(a-s)*r.width,c=d=>r.height-(d-u)/(o-u)*r.height;i.clearRect(0,0,r.width,r.height),i.save(),i.beginPath(),i.lineWidth=1.5,i.strokeStyle=this.star.color;const f=l(n[0]),h=c(e[0]);i.moveTo(f,h);for(let d=1;d<n.length;d++){const m=l(n[d]),p=c(e[d]);i.lineTo(m,p)}i.stroke(),i.restore()}drawOrbit(){const e=document.getElementById("planet-canvas"),n=e.getContext("2d"),r=e.width/2/(this.planet.maxFaceOn()*1.05+this.planet._R);n.clearRect(0,0,e.width,e.height),n.save(),this.star.rx[0]<this.planet.rx[0]?(this.star.draw(n,[e.width/2,e.height/2],r,0,!0),this.planet.draw(n,[e.width/2,e.height/2],r,0,!0)):(this.planet.draw(n,[e.width/2,e.height/2],r,0,!0),this.star.draw(n,[e.width/2,e.height/2],r,0,!0)),n.beginPath(),n.lineWidth=1.5,n.setLineDash([5,10]),n.moveTo(this.planet.ry[0]*r+e.width/2,this.planet.rx[0]*r+e.height/2);for(let i=0;i<this.planet.rx.length;i++)n.lineTo(this.planet.ry[i]*r+e.width/2,this.planet.rx[i]*r+e.height/2);n.closePath(),n.strokeStyle=this.planet.color,n.stroke(),n.restore()}showPlanetForm(e=null){this.onMenuOpened(),this.savePlanetBtn=document.getElementById("save-planet-btn"),this.savePlanetListener=()=>this.addPlanet(e),this.savePlanetBtn.addEventListener("click",this.savePlanetListener),this.planetForm.classList.remove("hidden"),this.planetForm.focus(),e!=null?(console.log("Editing planet "+e),this.savePlanetBtn.textContent="Accept",this.supressedListener=!0,this.planetNameInput.value=this.planets[e].planetName,this.periodInput.value=this.planets[e].P,this.eInput.value=this.planets[e].e,this.iInput.value=parseFloat(this.planets[e].i).toFixed(2),this.Omega0Input.value=parseFloat(this.planets[e].Omega0).toFixed(2),this.massInput.value=parseFloat(this.planets[e].M).toFixed(2),this.phaseInput.value=this.planets[e].phase0,this.radiusInput.value=this.planets[e].R,this.colorInput.value=this.planets[e].color):(this.savePlanetBtn.textContent="Add",this.presetSelect.selectedIndex=0,this.periodInput.value=this.defaultPlanet.P,this.eInput.value=this.defaultPlanet.e,this.iInput.value=this.defaultPlanet.i.toFixed(2),this.Omega0Input.value=this.defaultPlanet.Omega0.toFixed(2),this.massInput.value=this.defaultPlanet.M.toFixed(2),this.radiusInput.value=this.defaultPlanet.R,this.phaseInput.value=this.defaultPlanet.phase0,this.colorInput.value=`#${Math.floor(Math.random()*16777215).toString(16).padStart(6,"0")}`,this.planetNameInput.value="Planet "+(this.planetNameCounter+1)),this.createPlanet(),this.updateCanvas(),this.supressedListener=!1,this.keydownListener=n=>{if(n.key==="Escape")this.closePlanetBtn.click();else if(n.key=="Enter"){const r=document.activeElement;r&&(r.tagName==="INPUT"||r.tagName==="TEXTAREA")&&r.type==="color"&&(n.preventDefault(),n.stopPropagation()),this.savePlanetBtn.click()}else n.key=="R"||n.key=="r"?document.activeElement!=this.planetNameInput&&this.randomizeBtn.click():n.key=="B"||n.key=="b"?document.activeElement!=this.planetNameInput&&this.beautifulBtn.click():(n.key=="c"||n.key=="C")&&document.activeElement!=this.planetNameInput&&this.cancelPlanetBtn.click()},this.closeOnOutsideClickListener=n=>{this.planetForm&&!this.planetForm.querySelector(".planet-form-content").contains(n.target)&&(console.log("Cancel"),this.cancelPlanetBtn.click())},document.addEventListener("keydown",this.keydownListener),setTimeout(()=>{document.addEventListener("click",this.closeOnOutsideClickListener)},0)}beautifulInputs(){const e=Math.random(),n=(e+1)*20*Gt;this.massInput.value=parseFloat((n/this.units.M).toFixed(1));const r=.2*(e+1)*this.star._R;this.radiusInput.value=parseFloat((r/this.units.R).toFixed(2));const i=Math.random()*.8;this.eInput.value=parseFloat(i.toFixed(2));const s=this.star._R+this.radiusInput.value*this.units.R,a=s/(1-this.eInput.value),u=ps(this.star._M,n,a)+kt;console.log("Min period: "+(u/kt).toFixed(2)+" days"),this.periodInput.value=parseFloat((Math.random()*25+u)/kt).toFixed(1);const l=Ze(this.star._M,n,this.periodInput.value*kt)*(1-this.eInput.value),c=Math.asin(s/l)/Math.PI*180*.8;console.log("Maxi: "+c.toFixed(2)),this.iInput.value=parseFloat((Math.random()*c*2-c).toFixed(2));let f,h,d;e<.5?(f=e*2*.3,h=Math.max(.3-f,0),d=Math.min(.7-f,1)):(f=.7+(e-.5)*.3,h=Math.max(1.3-f,0),d=Math.min(1.7-f,1));const m=h+Math.random()*(d-h);this.phaseInput.value=parseFloat(m).toFixed(2),this.Omega0Input.value=f.toFixed(2)}randomizeInputs(){const e=Math.random();this.massInput.value=parseFloat((e+1)*20*Gt/this.units.M).toFixed(2),this.radiusInput.value=parseFloat(e*this.star._R/this.units.R/5+fn/this.units.R).toFixed(2);const n=Math.random();this.eInput.value=parseFloat(n.toFixed(2));const i=(this.star._R+this.radiusInput.value*this.units.R)/(1-this.eInput.value),s=ps(this.star._M,this.massInput.value*this.units.M,i);console.log("Min period: "+(s/kt).toFixed(2)+" days"),this.periodInput.value=Math.floor(e*500+s/kt),this.iInput.value=parseFloat((2*e-1)*89.9).toFixed(2);const a=Math.random();this.phaseInput.value=a.toFixed(2);const u=Math.random();this.Omega0Input.value=u.toFixed(2)}closePlanetForm(){console.log("Closing Menu"),document.activeElement&&document.activeElement.blur(),this.planetForm.classList.add("hidden"),this.keydownListener&&(document.removeEventListener("keydown",this.keydownListener),this.keydownListener=null),this.savePlanetBtn.removeEventListener("click",this.savePlanetListener),this.closeOnOutsideClickListener&&(document.removeEventListener("click",this.closeOnOutsideClickListener),this.closeOnOutsideClickListener=null),this.savePlanetListener&&(this.savePlanetListener=null)}addPlanet(e=null){const n=this.planetNameInput.value,i=this.planets.map(s=>s.planetName).indexOf(n);if(i!=-1&&i!=e){this.errorLabel.classList.remove("hidden"),this.errorLabel.textContent="Planet name already exists!",this.planetNameInput.style.color="red",this.planetNameInput.focus(),this.planet=null;return}this.planet!=null&&(e==null?(this.planets.push(this.planet),this.planetNameCounter++):this.planets[e]=this.planet,this.closePlanetForm(),this.updateParameters())}createPlanetButton(e,n,r){const i=document.createElement("button");i.className="planet-btns";const s=document.createElement("img");return s.setAttribute("src",e),s.setAttribute("alt",r),s.setAttribute("title",r),i.addEventListener("click",n),i.appendChild(s),i}onRemoveListener(e){console.log("Removing planet"+e),this.planets.splice(e,1),this.updateParameters()}onEditListener(e){console.log("Editing planet "+e),this.showPlanetForm(e)}updateParameters(){this.maxRadius=Math.max(...this.planets.map(e=>e.R)),this.maxP=Math.max(...this.planets.map(e=>e._P)),this.updatePlanetList()}updatePlanetList(){this.planetList.innerHTML="",this.planets.forEach((e,n)=>{const r=this.createPlanetItem(e,n);this.planetList.appendChild(r)}),this.planetCounter.textContent="Planets ("+this.planets.length+")",this.onUpdate()}createPlanetItem(e,n){const r=document.createElement("div");r.className="planet-item",r.dataset.name=e.planetName;const i=document.createElement("div");i.className="dot-planet-container";const s=document.createElement("span");s.className="dot-planet",s.style.backgroundColor=e.color;const a=document.createElement("input");a.type="color",a.value=e.color,a.style.display="none",s.addEventListener("click",()=>{a.click()}),a.addEventListener("input",f=>{this.planets[n].color=f.target.value,s.style.backgroundColor=f.target.value});const u=e.R*ch/this.maxRadius;s.style.width=u.toString()+"px",s.style.height=u.toString()+"px",i.appendChild(s),s.appendChild(a);const o=document.createElement("span");o.className="planet-name-label",o.title=e.planetName,o.textContent=e.planetName;const l=this.createPlanetButton("/icons/edit.png",()=>this.onEditListener(n),"Edit"),c=this.createPlanetButton("/icons/delete-button.svg",()=>this.onRemoveListener(n),"Delete");return r.appendChild(i),r.appendChild(o),r.appendChild(l),r.appendChild(c),r}setTimes(e){this.planets.forEach(n=>{n.setOrbitingTimes(e)}),this.maxDistance=Math.max(...this.planets.map(n=>n.maxCoordinate()+n._R))}setStar(e){this.star=e.copy(),this.planets.forEach(n=>{n.setStar(e)})}}class fh{constructor(e,n,r,i){this.onDatapointsUpdate=n,this.onOrbitsUpdate=r,this.onMcPointsUpdate=i,this.initLightcurveMenu(),this.calculateTimes(e)}setLanguage(e){this.datapointsLabel.setLanguage(e),this.orbitsLabel.setLanguage(e),this.mcPointsLabel.setLanguage(e)}initLightcurveMenu(){const e=document.getElementById("input-datapoints");this.datapoints=parseInt(e.value),this.datapointsLabel=new qt("datapoints");const n=document.getElementById("orbits");this.orbits=parseInt(n.value),this.orbitsLabel=new qt("orbits"),this.mcPointsInput=document.getElementById("input-mc-points"),this.mcPoints=parseInt(this.mcPointsInput.value*1e3),this.mcPointsLabel=new qt("mc-points"),this.mcPointsInput.addEventListener("input",r=>{const i=parseFloat(r.target.min);r.target.value<i&&(r.target.value=i),this.mcPoints=parseInt(r.target.value*1e3),this.onMcPointsUpdate()}),e.addEventListener("input",r=>{const i=parseFloat(r.target.min);r.target.value<i&&(r.target.value=i),this.datapoints=parseInt(r.target.value),this.onDatapointsUpdate()}),n.addEventListener("input",r=>{const i=parseFloat(r.target.min);r.target.value<i&&(r.target.value=i),this.orbits=parseInt(r.target.value),this.onOrbitsUpdate()})}calculateTimes(e){this.times=tr(0,this.orbits*e,this.datapoints),this.timesDays=this.times.map(n=>n/kt)}exportLightcurve(e,n){const r="Time (days),RelativeFlux",i=e.map((u,o)=>`${u.toFixed(4)},${n[o].toFixed(5)}`).join(`
`),s=`${r}
${i}`,a=new Blob([s],{type:"text/csv"});Na(a,"lightcurve","csv")}}class hh{constructor(e){this.onUpdate=e,this.initFrame()}initFrame(){this.msInput=document.getElementById("ms"),this.msLabel=new qt("frame-rate"),this.ms=parseFloat(this.msInput.value),this.msInput.addEventListener("input",e=>{this.ms=parseFloat(e.target.value),this.onUpdate(this.ms)}),this.saveAnimationButton=document.getElementById("save-animation-btn"),this.saveAnimationButton.disabled=!0,this.durationLabel=document.getElementById("animation-duration-value"),this.durationToolTip=new qt("animation-duration")}setDuration(e){this.durationLabel.innerHTML=(e/1e3).toFixed(3),this.animationDurationms=e}setLanguage(e){this.msLabel.setLanguage(e),this.durationToolTip.setLanguage(e)}disable(e){this.msInput.disabled=e,this.saveAnimationButton.disabled=e}}class Xr{constructor(e){this.activateButton=document.getElementById(e+"-button");const n=document.getElementById(e+"-content");this.activateButton.addEventListener("click",()=>{this.showContent(n,e)}),this.closeButton=document.getElementById("close-"+e+"-btn"),this.closeWindowListener=()=>{this.closeWindow(n)},this.closeButton.addEventListener("click",this.closeWindowListener),this.contentName=e}setLanguage(e){const n=document.getElementById(this.contentName+"-text");console.log("Setting language for "+this.contentName),n.innerHTML=e[this.contentName+"-text"]}showContent(e,n){console.log("Showing "+n),e.classList.remove("hidden"),e.focus(),this.keydownListener=r=>{r.key==="Escape"&&this.closeWindow(e)},this.closeOnOutsideClickListener=r=>{e&&!e.querySelector(".information-container").contains(r.target)&&this.closeWindow(e)},document.addEventListener("keydown",this.keydownListener),setTimeout(()=>{document.addEventListener("click",this.closeOnOutsideClickListener)},0)}closeWindow(e){e.classList.add("hidden"),e.blur(),this.keydownListener&&(document.removeEventListener("keydown",this.keydownListener),this.keydownListener=null),this.closeOnOutsideClickListener&&(document.removeEventListener("click",this.closeOnOutsideClickListener),this.closeOnOutsideClickListener=null)}}function kn(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function ph(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function Ia(t){let e,n,r;t.length!==2?(e=kn,n=(u,o)=>kn(t(u),o),r=(u,o)=>t(u)-o):(e=t===kn||t===ph?t:dh,n=t,r=t);function i(u,o,l=0,c=u.length){if(l<c){if(e(o,o)!==0)return c;do{const f=l+c>>>1;n(u[f],o)<0?l=f+1:c=f}while(l<c)}return l}function s(u,o,l=0,c=u.length){if(l<c){if(e(o,o)!==0)return c;do{const f=l+c>>>1;n(u[f],o)<=0?l=f+1:c=f}while(l<c)}return l}function a(u,o,l=0,c=u.length){const f=i(u,o,l,c-1);return f>l&&r(u[f-1],o)>-r(u[f],o)?f-1:f}return{left:i,center:a,right:s}}function dh(){return 0}function mh(t){return t===null?NaN:+t}const gh=Ia(kn),Dh=gh.right;Ia(mh).center;const vh=Math.sqrt(50),yh=Math.sqrt(10),wh=Math.sqrt(2);function er(t,e,n){const r=(e-t)/Math.max(0,n),i=Math.floor(Math.log10(r)),s=r/Math.pow(10,i),a=s>=vh?10:s>=yh?5:s>=wh?2:1;let u,o,l;return i<0?(l=Math.pow(10,-i)/a,u=Math.round(t*l),o=Math.round(e*l),u/l<t&&++u,o/l>e&&--o,l=-l):(l=Math.pow(10,i)*a,u=Math.round(t/l),o=Math.round(e/l),u*l<t&&++u,o*l>e&&--o),o<u&&.5<=n&&n<2?er(t,e,n*2):[u,o,l]}function Fh(t,e,n){if(e=+e,t=+t,n=+n,!(n>0))return[];if(t===e)return[t];const r=e<t,[i,s,a]=r?er(e,t,n):er(t,e,n);if(!(s>=i))return[];const u=s-i+1,o=new Array(u);if(r)if(a<0)for(let l=0;l<u;++l)o[l]=(s-l)/-a;else for(let l=0;l<u;++l)o[l]=(s-l)*a;else if(a<0)for(let l=0;l<u;++l)o[l]=(i+l)/-a;else for(let l=0;l<u;++l)o[l]=(i+l)*a;return o}function Yr(t,e,n){return e=+e,t=+t,n=+n,er(t,e,n)[2]}function Eh(t,e,n){e=+e,t=+t,n=+n;const r=e<t,i=r?Yr(e,t,n):Yr(t,e,n);return(r?-1:1)*(i<0?1/-i:i)}function ds(t,e){let n;for(const r of t)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);return n}function ms(t,e){let n;for(const r of t)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);return n}function Ah(t){return t}var $n=1,Un=2,Gr=3,un=4,gs=1e-6;function Ch(t){return"translate("+t+",0)"}function _h(t){return"translate(0,"+t+")"}function xh(t){return e=>+t(e)}function bh(t,e){return e=Math.max(0,t.bandwidth()-e*2)/2,t.round()&&(e=Math.round(e)),n=>+t(n)+e}function Bh(){return!this.__axis}function wr(t,e){var n=[],r=null,i=null,s=6,a=6,u=3,o=typeof window<"u"&&window.devicePixelRatio>1?0:.5,l=t===$n||t===un?-1:1,c=t===un||t===Un?"x":"y",f=t===$n||t===Gr?Ch:_h;function h(d){var m=r??(e.ticks?e.ticks.apply(e,n):e.domain()),p=i??(e.tickFormat?e.tickFormat.apply(e,n):Ah),g=Math.max(s,0)+u,v=e.range(),w=+v[0]+o,y=+v[v.length-1]+o,E=(e.bandwidth?bh:xh)(e.copy(),o),A=d.selection?d.selection():d,x=A.selectAll(".domain").data([null]),b=A.selectAll(".tick").data(m,e).order(),_=b.exit(),N=b.enter().append("g").attr("class","tick"),L=b.select("line"),M=b.select("text");x=x.merge(x.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),b=b.merge(N),L=L.merge(N.append("line").attr("stroke","currentColor").attr(c+"2",l*s)),M=M.merge(N.append("text").attr("fill","currentColor").attr(c,l*g).attr("dy",t===$n?"0em":t===Gr?"0.71em":"0.32em")),d!==A&&(x=x.transition(d),b=b.transition(d),L=L.transition(d),M=M.transition(d),_=_.transition(d).attr("opacity",gs).attr("transform",function($){return isFinite($=E($))?f($+o):this.getAttribute("transform")}),N.attr("opacity",gs).attr("transform",function($){var q=this.parentNode.__axis;return f((q&&isFinite(q=q($))?q:E($))+o)})),_.remove(),x.attr("d",t===un||t===Un?a?"M"+l*a+","+w+"H"+o+"V"+y+"H"+l*a:"M"+o+","+w+"V"+y:a?"M"+w+","+l*a+"V"+o+"H"+y+"V"+l*a:"M"+w+","+o+"H"+y),b.attr("opacity",1).attr("transform",function($){return f(E($)+o)}),L.attr(c+"2",l*s),M.attr(c,l*g).text(p),A.filter(Bh).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",t===Un?"start":t===un?"end":"middle"),A.each(function(){this.__axis=E})}return h.scale=function(d){return arguments.length?(e=d,h):e},h.ticks=function(){return n=Array.from(arguments),h},h.tickArguments=function(d){return arguments.length?(n=d==null?[]:Array.from(d),h):n.slice()},h.tickValues=function(d){return arguments.length?(r=d==null?null:Array.from(d),h):r&&r.slice()},h.tickFormat=function(d){return arguments.length?(i=d,h):i},h.tickSize=function(d){return arguments.length?(s=a=+d,h):s},h.tickSizeInner=function(d){return arguments.length?(s=+d,h):s},h.tickSizeOuter=function(d){return arguments.length?(a=+d,h):a},h.tickPadding=function(d){return arguments.length?(u=+d,h):u},h.offset=function(d){return arguments.length?(o=+d,h):o},h}function Mh(t){return wr($n,t)}function Sh(t){return wr(Un,t)}function Nh(t){return wr(Gr,t)}function Th(t){return wr(un,t)}var Ih={value:()=>{}};function Pa(){for(var t=0,e=arguments.length,n={},r;t<e;++t){if(!(r=arguments[t]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new zn(n)}function zn(t){this._=t}function Ph(t,e){return t.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!e.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}zn.prototype=Pa.prototype={constructor:zn,on:function(t,e){var n=this._,r=Ph(t+"",n),i,s=-1,a=r.length;if(arguments.length<2){for(;++s<a;)if((i=(t=r[s]).type)&&(i=Rh(n[i],t.name)))return i;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++s<a;)if(i=(t=r[s]).type)n[i]=Ds(n[i],t.name,e);else if(e==null)for(i in n)n[i]=Ds(n[i],t.name,null);return this},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new zn(t)},call:function(t,e){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,s;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(s=this._[t],r=0,i=s.length;r<i;++r)s[r].value.apply(e,n)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],i=0,s=r.length;i<s;++i)r[i].value.apply(e,n)}};function Rh(t,e){for(var n=0,r=t.length,i;n<r;++n)if((i=t[n]).name===e)return i.value}function Ds(t,e,n){for(var r=0,i=t.length;r<i;++r)if(t[r].name===e){t[r]=Ih,t=t.slice(0,r).concat(t.slice(r+1));break}return n!=null&&t.push({name:e,value:n}),t}var Jr="http://www.w3.org/1999/xhtml";const vs={svg:"http://www.w3.org/2000/svg",xhtml:Jr,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Fr(t){var e=t+="",n=e.indexOf(":");return n>=0&&(e=t.slice(0,n))!=="xmlns"&&(t=t.slice(n+1)),vs.hasOwnProperty(e)?{space:vs[e],local:t}:t}function Lh(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===Jr&&e.documentElement.namespaceURI===Jr?e.createElement(t):e.createElementNS(n,t)}}function Oh(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function Ra(t){var e=Fr(t);return(e.local?Oh:Lh)(e)}function kh(){}function Ai(t){return t==null?kh:function(){return this.querySelector(t)}}function $h(t){typeof t!="function"&&(t=Ai(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var s=e[i],a=s.length,u=r[i]=new Array(a),o,l,c=0;c<a;++c)(o=s[c])&&(l=t.call(o,o.__data__,c,s))&&("__data__"in o&&(l.__data__=o.__data__),u[c]=l);return new It(r,this._parents)}function Uh(t){return t==null?[]:Array.isArray(t)?t:Array.from(t)}function zh(){return[]}function La(t){return t==null?zh:function(){return this.querySelectorAll(t)}}function qh(t){return function(){return Uh(t.apply(this,arguments))}}function Hh(t){typeof t=="function"?t=qh(t):t=La(t);for(var e=this._groups,n=e.length,r=[],i=[],s=0;s<n;++s)for(var a=e[s],u=a.length,o,l=0;l<u;++l)(o=a[l])&&(r.push(t.call(o,o.__data__,l,a)),i.push(o));return new It(r,i)}function Oa(t){return function(){return this.matches(t)}}function ka(t){return function(e){return e.matches(t)}}var Vh=Array.prototype.find;function Wh(t){return function(){return Vh.call(this.children,t)}}function Zh(){return this.firstElementChild}function Xh(t){return this.select(t==null?Zh:Wh(typeof t=="function"?t:ka(t)))}var Yh=Array.prototype.filter;function Gh(){return Array.from(this.children)}function Jh(t){return function(){return Yh.call(this.children,t)}}function Kh(t){return this.selectAll(t==null?Gh:Jh(typeof t=="function"?t:ka(t)))}function Qh(t){typeof t!="function"&&(t=Oa(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var s=e[i],a=s.length,u=r[i]=[],o,l=0;l<a;++l)(o=s[l])&&t.call(o,o.__data__,l,s)&&u.push(o);return new It(r,this._parents)}function $a(t){return new Array(t.length)}function jh(){return new It(this._enter||this._groups.map($a),this._parents)}function nr(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}nr.prototype={constructor:nr,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function t0(t){return function(){return t}}function e0(t,e,n,r,i,s){for(var a=0,u,o=e.length,l=s.length;a<l;++a)(u=e[a])?(u.__data__=s[a],r[a]=u):n[a]=new nr(t,s[a]);for(;a<o;++a)(u=e[a])&&(i[a]=u)}function n0(t,e,n,r,i,s,a){var u,o,l=new Map,c=e.length,f=s.length,h=new Array(c),d;for(u=0;u<c;++u)(o=e[u])&&(h[u]=d=a.call(o,o.__data__,u,e)+"",l.has(d)?i[u]=o:l.set(d,o));for(u=0;u<f;++u)d=a.call(t,s[u],u,s)+"",(o=l.get(d))?(r[u]=o,o.__data__=s[u],l.delete(d)):n[u]=new nr(t,s[u]);for(u=0;u<c;++u)(o=e[u])&&l.get(h[u])===o&&(i[u]=o)}function r0(t){return t.__data__}function i0(t,e){if(!arguments.length)return Array.from(this,r0);var n=e?n0:e0,r=this._parents,i=this._groups;typeof t!="function"&&(t=t0(t));for(var s=i.length,a=new Array(s),u=new Array(s),o=new Array(s),l=0;l<s;++l){var c=r[l],f=i[l],h=f.length,d=s0(t.call(c,c&&c.__data__,l,r)),m=d.length,p=u[l]=new Array(m),g=a[l]=new Array(m),v=o[l]=new Array(h);n(c,f,p,g,v,d,e);for(var w=0,y=0,E,A;w<m;++w)if(E=p[w]){for(w>=y&&(y=w+1);!(A=g[y])&&++y<m;);E._next=A||null}}return a=new It(a,r),a._enter=u,a._exit=o,a}function s0(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function a0(){return new It(this._exit||this._groups.map($a),this._parents)}function u0(t,e,n){var r=this.enter(),i=this,s=this.exit();return typeof t=="function"?(r=t(r),r&&(r=r.selection())):r=r.append(t+""),e!=null&&(i=e(i),i&&(i=i.selection())),n==null?s.remove():n(s),r&&i?r.merge(i).order():i}function o0(t){for(var e=t.selection?t.selection():t,n=this._groups,r=e._groups,i=n.length,s=r.length,a=Math.min(i,s),u=new Array(i),o=0;o<a;++o)for(var l=n[o],c=r[o],f=l.length,h=u[o]=new Array(f),d,m=0;m<f;++m)(d=l[m]||c[m])&&(h[m]=d);for(;o<i;++o)u[o]=n[o];return new It(u,this._parents)}function c0(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var r=t[e],i=r.length-1,s=r[i],a;--i>=0;)(a=r[i])&&(s&&a.compareDocumentPosition(s)^4&&s.parentNode.insertBefore(a,s),s=a);return this}function l0(t){t||(t=f0);function e(f,h){return f&&h?t(f.__data__,h.__data__):!f-!h}for(var n=this._groups,r=n.length,i=new Array(r),s=0;s<r;++s){for(var a=n[s],u=a.length,o=i[s]=new Array(u),l,c=0;c<u;++c)(l=a[c])&&(o[c]=l);o.sort(e)}return new It(i,this._parents).order()}function f0(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function h0(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}function p0(){return Array.from(this)}function d0(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,s=r.length;i<s;++i){var a=r[i];if(a)return a}return null}function m0(){let t=0;for(const e of this)++t;return t}function g0(){return!this.node()}function D0(t){for(var e=this._groups,n=0,r=e.length;n<r;++n)for(var i=e[n],s=0,a=i.length,u;s<a;++s)(u=i[s])&&t.call(u,u.__data__,s,i);return this}function v0(t){return function(){this.removeAttribute(t)}}function y0(t){return function(){this.removeAttributeNS(t.space,t.local)}}function w0(t,e){return function(){this.setAttribute(t,e)}}function F0(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function E0(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttribute(t):this.setAttribute(t,n)}}function A0(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function C0(t,e){var n=Fr(t);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((e==null?n.local?y0:v0:typeof e=="function"?n.local?A0:E0:n.local?F0:w0)(n,e))}function Ua(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function _0(t){return function(){this.style.removeProperty(t)}}function x0(t,e,n){return function(){this.style.setProperty(t,e,n)}}function b0(t,e,n){return function(){var r=e.apply(this,arguments);r==null?this.style.removeProperty(t):this.style.setProperty(t,r,n)}}function B0(t,e,n){return arguments.length>1?this.each((e==null?_0:typeof e=="function"?b0:x0)(t,e,n??"")):je(this.node(),t)}function je(t,e){return t.style.getPropertyValue(e)||Ua(t).getComputedStyle(t,null).getPropertyValue(e)}function M0(t){return function(){delete this[t]}}function S0(t,e){return function(){this[t]=e}}function N0(t,e){return function(){var n=e.apply(this,arguments);n==null?delete this[t]:this[t]=n}}function T0(t,e){return arguments.length>1?this.each((e==null?M0:typeof e=="function"?N0:S0)(t,e)):this.node()[t]}function za(t){return t.trim().split(/^|\s+/)}function Ci(t){return t.classList||new qa(t)}function qa(t){this._node=t,this._names=za(t.getAttribute("class")||"")}qa.prototype={add:function(t){var e=this._names.indexOf(t);e<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function Ha(t,e){for(var n=Ci(t),r=-1,i=e.length;++r<i;)n.add(e[r])}function Va(t,e){for(var n=Ci(t),r=-1,i=e.length;++r<i;)n.remove(e[r])}function I0(t){return function(){Ha(this,t)}}function P0(t){return function(){Va(this,t)}}function R0(t,e){return function(){(e.apply(this,arguments)?Ha:Va)(this,t)}}function L0(t,e){var n=za(t+"");if(arguments.length<2){for(var r=Ci(this.node()),i=-1,s=n.length;++i<s;)if(!r.contains(n[i]))return!1;return!0}return this.each((typeof e=="function"?R0:e?I0:P0)(n,e))}function O0(){this.textContent=""}function k0(t){return function(){this.textContent=t}}function $0(t){return function(){var e=t.apply(this,arguments);this.textContent=e??""}}function U0(t){return arguments.length?this.each(t==null?O0:(typeof t=="function"?$0:k0)(t)):this.node().textContent}function z0(){this.innerHTML=""}function q0(t){return function(){this.innerHTML=t}}function H0(t){return function(){var e=t.apply(this,arguments);this.innerHTML=e??""}}function V0(t){return arguments.length?this.each(t==null?z0:(typeof t=="function"?H0:q0)(t)):this.node().innerHTML}function W0(){this.nextSibling&&this.parentNode.appendChild(this)}function Z0(){return this.each(W0)}function X0(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Y0(){return this.each(X0)}function G0(t){var e=typeof t=="function"?t:Ra(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}function J0(){return null}function K0(t,e){var n=typeof t=="function"?t:Ra(t),r=e==null?J0:typeof e=="function"?e:Ai(e);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function Q0(){var t=this.parentNode;t&&t.removeChild(this)}function j0(){return this.each(Q0)}function tp(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function ep(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function np(t){return this.select(t?ep:tp)}function rp(t){return arguments.length?this.property("__data__",t):this.node().__data__}function ip(t){return function(e){t.call(this,e,this.__data__)}}function sp(t){return t.trim().split(/^|\s+/).map(function(e){var n="",r=e.indexOf(".");return r>=0&&(n=e.slice(r+1),e=e.slice(0,r)),{type:e,name:n}})}function ap(t){return function(){var e=this.__on;if(e){for(var n=0,r=-1,i=e.length,s;n<i;++n)s=e[n],(!t.type||s.type===t.type)&&s.name===t.name?this.removeEventListener(s.type,s.listener,s.options):e[++r]=s;++r?e.length=r:delete this.__on}}}function up(t,e,n){return function(){var r=this.__on,i,s=ip(e);if(r){for(var a=0,u=r.length;a<u;++a)if((i=r[a]).type===t.type&&i.name===t.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=s,i.options=n),i.value=e;return}}this.addEventListener(t.type,s,n),i={type:t.type,name:t.name,value:e,listener:s,options:n},r?r.push(i):this.__on=[i]}}function op(t,e,n){var r=sp(t+""),i,s=r.length,a;if(arguments.length<2){var u=this.node().__on;if(u){for(var o=0,l=u.length,c;o<l;++o)for(i=0,c=u[o];i<s;++i)if((a=r[i]).type===c.type&&a.name===c.name)return c.value}return}for(u=e?up:ap,i=0;i<s;++i)this.each(u(r[i],e,n));return this}function Wa(t,e,n){var r=Ua(t),i=r.CustomEvent;typeof i=="function"?i=new i(e,n):(i=r.document.createEvent("Event"),n?(i.initEvent(e,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(e,!1,!1)),t.dispatchEvent(i)}function cp(t,e){return function(){return Wa(this,t,e)}}function lp(t,e){return function(){return Wa(this,t,e.apply(this,arguments))}}function fp(t,e){return this.each((typeof e=="function"?lp:cp)(t,e))}function*hp(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,s=r.length,a;i<s;++i)(a=r[i])&&(yield a)}var Za=[null];function It(t,e){this._groups=t,this._parents=e}function En(){return new It([[document.documentElement]],Za)}function pp(){return this}It.prototype=En.prototype={constructor:It,select:$h,selectAll:Hh,selectChild:Xh,selectChildren:Kh,filter:Qh,data:i0,enter:jh,exit:a0,join:u0,merge:o0,selection:pp,order:c0,sort:l0,call:h0,nodes:p0,node:d0,size:m0,empty:g0,each:D0,attr:C0,style:B0,property:T0,classed:L0,text:U0,html:V0,raise:Z0,lower:Y0,append:G0,insert:K0,remove:j0,clone:np,datum:rp,on:op,dispatch:fp,[Symbol.iterator]:hp};function dp(t){return typeof t=="string"?new It([[document.querySelector(t)]],[document.documentElement]):new It([[t]],Za)}function _i(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function Xa(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function An(){}var yn=.7,rr=1/yn,Ge="\\s*([+-]?\\d+)\\s*",wn="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",ee="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",mp=/^#([0-9a-f]{3,8})$/,gp=new RegExp(`^rgb\\(${Ge},${Ge},${Ge}\\)$`),Dp=new RegExp(`^rgb\\(${ee},${ee},${ee}\\)$`),vp=new RegExp(`^rgba\\(${Ge},${Ge},${Ge},${wn}\\)$`),yp=new RegExp(`^rgba\\(${ee},${ee},${ee},${wn}\\)$`),wp=new RegExp(`^hsl\\(${wn},${ee},${ee}\\)$`),Fp=new RegExp(`^hsla\\(${wn},${ee},${ee},${wn}\\)$`),ys={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};_i(An,Ie,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:ws,formatHex:ws,formatHex8:Ep,formatHsl:Ap,formatRgb:Fs,toString:Fs});function ws(){return this.rgb().formatHex()}function Ep(){return this.rgb().formatHex8()}function Ap(){return Ya(this).formatHsl()}function Fs(){return this.rgb().formatRgb()}function Ie(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=mp.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?Es(e):n===3?new Mt(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?Nn(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?Nn(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=gp.exec(t))?new Mt(e[1],e[2],e[3],1):(e=Dp.exec(t))?new Mt(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=vp.exec(t))?Nn(e[1],e[2],e[3],e[4]):(e=yp.exec(t))?Nn(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=wp.exec(t))?_s(e[1],e[2]/100,e[3]/100,1):(e=Fp.exec(t))?_s(e[1],e[2]/100,e[3]/100,e[4]):ys.hasOwnProperty(t)?Es(ys[t]):t==="transparent"?new Mt(NaN,NaN,NaN,0):null}function Es(t){return new Mt(t>>16&255,t>>8&255,t&255,1)}function Nn(t,e,n,r){return r<=0&&(t=e=n=NaN),new Mt(t,e,n,r)}function Cp(t){return t instanceof An||(t=Ie(t)),t?(t=t.rgb(),new Mt(t.r,t.g,t.b,t.opacity)):new Mt}function Kr(t,e,n,r){return arguments.length===1?Cp(t):new Mt(t,e,n,r??1)}function Mt(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}_i(Mt,Kr,Xa(An,{brighter(t){return t=t==null?rr:Math.pow(rr,t),new Mt(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?yn:Math.pow(yn,t),new Mt(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new Mt(Ne(this.r),Ne(this.g),Ne(this.b),ir(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:As,formatHex:As,formatHex8:_p,formatRgb:Cs,toString:Cs}));function As(){return`#${Me(this.r)}${Me(this.g)}${Me(this.b)}`}function _p(){return`#${Me(this.r)}${Me(this.g)}${Me(this.b)}${Me((isNaN(this.opacity)?1:this.opacity)*255)}`}function Cs(){const t=ir(this.opacity);return`${t===1?"rgb(":"rgba("}${Ne(this.r)}, ${Ne(this.g)}, ${Ne(this.b)}${t===1?")":`, ${t})`}`}function ir(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function Ne(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function Me(t){return t=Ne(t),(t<16?"0":"")+t.toString(16)}function _s(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new Vt(t,e,n,r)}function Ya(t){if(t instanceof Vt)return new Vt(t.h,t.s,t.l,t.opacity);if(t instanceof An||(t=Ie(t)),!t)return new Vt;if(t instanceof Vt)return t;t=t.rgb();var e=t.r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),s=Math.max(e,n,r),a=NaN,u=s-i,o=(s+i)/2;return u?(e===s?a=(n-r)/u+(n<r)*6:n===s?a=(r-e)/u+2:a=(e-n)/u+4,u/=o<.5?s+i:2-s-i,a*=60):u=o>0&&o<1?0:a,new Vt(a,u,o,t.opacity)}function xp(t,e,n,r){return arguments.length===1?Ya(t):new Vt(t,e,n,r??1)}function Vt(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}_i(Vt,xp,Xa(An,{brighter(t){return t=t==null?rr:Math.pow(rr,t),new Vt(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?yn:Math.pow(yn,t),new Vt(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new Mt(Pr(t>=240?t-240:t+120,i,r),Pr(t,i,r),Pr(t<120?t+240:t-120,i,r),this.opacity)},clamp(){return new Vt(xs(this.h),Tn(this.s),Tn(this.l),ir(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=ir(this.opacity);return`${t===1?"hsl(":"hsla("}${xs(this.h)}, ${Tn(this.s)*100}%, ${Tn(this.l)*100}%${t===1?")":`, ${t})`}`}}));function xs(t){return t=(t||0)%360,t<0?t+360:t}function Tn(t){return Math.max(0,Math.min(1,t||0))}function Pr(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}const xi=t=>()=>t;function bp(t,e){return function(n){return t+n*e}}function Bp(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}function Mp(t){return(t=+t)==1?Ga:function(e,n){return n-e?Bp(e,n,t):xi(isNaN(e)?n:e)}}function Ga(t,e){var n=e-t;return n?bp(t,n):xi(isNaN(t)?e:t)}const sr=function t(e){var n=Mp(e);function r(i,s){var a=n((i=Kr(i)).r,(s=Kr(s)).r),u=n(i.g,s.g),o=n(i.b,s.b),l=Ga(i.opacity,s.opacity);return function(c){return i.r=a(c),i.g=u(c),i.b=o(c),i.opacity=l(c),i+""}}return r.gamma=t,r}(1);function Sp(t,e){e||(e=[]);var n=t?Math.min(e.length,t.length):0,r=e.slice(),i;return function(s){for(i=0;i<n;++i)r[i]=t[i]*(1-s)+e[i]*s;return r}}function Np(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function Tp(t,e){var n=e?e.length:0,r=t?Math.min(n,t.length):0,i=new Array(r),s=new Array(n),a;for(a=0;a<r;++a)i[a]=bi(t[a],e[a]);for(;a<n;++a)s[a]=e[a];return function(u){for(a=0;a<r;++a)s[a]=i[a](u);return s}}function Ip(t,e){var n=new Date;return t=+t,e=+e,function(r){return n.setTime(t*(1-r)+e*r),n}}function Ht(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function Pp(t,e){var n={},r={},i;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(i in e)i in t?n[i]=bi(t[i],e[i]):r[i]=e[i];return function(s){for(i in n)r[i]=n[i](s);return r}}var Qr=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Rr=new RegExp(Qr.source,"g");function Rp(t){return function(){return t}}function Lp(t){return function(e){return t(e)+""}}function Ja(t,e){var n=Qr.lastIndex=Rr.lastIndex=0,r,i,s,a=-1,u=[],o=[];for(t=t+"",e=e+"";(r=Qr.exec(t))&&(i=Rr.exec(e));)(s=i.index)>n&&(s=e.slice(n,s),u[a]?u[a]+=s:u[++a]=s),(r=r[0])===(i=i[0])?u[a]?u[a]+=i:u[++a]=i:(u[++a]=null,o.push({i:a,x:Ht(r,i)})),n=Rr.lastIndex;return n<e.length&&(s=e.slice(n),u[a]?u[a]+=s:u[++a]=s),u.length<2?o[0]?Lp(o[0].x):Rp(e):(e=o.length,function(l){for(var c=0,f;c<e;++c)u[(f=o[c]).i]=f.x(l);return u.join("")})}function bi(t,e){var n=typeof e,r;return e==null||n==="boolean"?xi(e):(n==="number"?Ht:n==="string"?(r=Ie(e))?(e=r,sr):Ja:e instanceof Ie?sr:e instanceof Date?Ip:Np(e)?Sp:Array.isArray(e)?Tp:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?Pp:Ht)(t,e)}function Op(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}var bs=180/Math.PI,jr={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Ka(t,e,n,r,i,s){var a,u,o;return(a=Math.sqrt(t*t+e*e))&&(t/=a,e/=a),(o=t*n+e*r)&&(n-=t*o,r-=e*o),(u=Math.sqrt(n*n+r*r))&&(n/=u,r/=u,o/=u),t*r<e*n&&(t=-t,e=-e,o=-o,a=-a),{translateX:i,translateY:s,rotate:Math.atan2(e,t)*bs,skewX:Math.atan(o)*bs,scaleX:a,scaleY:u}}var In;function kp(t){const e=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(t+"");return e.isIdentity?jr:Ka(e.a,e.b,e.c,e.d,e.e,e.f)}function $p(t){return t==null||(In||(In=document.createElementNS("http://www.w3.org/2000/svg","g")),In.setAttribute("transform",t),!(t=In.transform.baseVal.consolidate()))?jr:(t=t.matrix,Ka(t.a,t.b,t.c,t.d,t.e,t.f))}function Qa(t,e,n,r){function i(l){return l.length?l.pop()+" ":""}function s(l,c,f,h,d,m){if(l!==f||c!==h){var p=d.push("translate(",null,e,null,n);m.push({i:p-4,x:Ht(l,f)},{i:p-2,x:Ht(c,h)})}else(f||h)&&d.push("translate("+f+e+h+n)}function a(l,c,f,h){l!==c?(l-c>180?c+=360:c-l>180&&(l+=360),h.push({i:f.push(i(f)+"rotate(",null,r)-2,x:Ht(l,c)})):c&&f.push(i(f)+"rotate("+c+r)}function u(l,c,f,h){l!==c?h.push({i:f.push(i(f)+"skewX(",null,r)-2,x:Ht(l,c)}):c&&f.push(i(f)+"skewX("+c+r)}function o(l,c,f,h,d,m){if(l!==f||c!==h){var p=d.push(i(d)+"scale(",null,",",null,")");m.push({i:p-4,x:Ht(l,f)},{i:p-2,x:Ht(c,h)})}else(f!==1||h!==1)&&d.push(i(d)+"scale("+f+","+h+")")}return function(l,c){var f=[],h=[];return l=t(l),c=t(c),s(l.translateX,l.translateY,c.translateX,c.translateY,f,h),a(l.rotate,c.rotate,f,h),u(l.skewX,c.skewX,f,h),o(l.scaleX,l.scaleY,c.scaleX,c.scaleY,f,h),l=c=null,function(d){for(var m=-1,p=h.length,g;++m<p;)f[(g=h[m]).i]=g.x(d);return f.join("")}}}var Up=Qa(kp,"px, ","px)","deg)"),zp=Qa($p,", ",")",")"),tn=0,on=0,an=0,ja=1e3,ar,cn,ur=0,Pe=0,Er=0,Fn=typeof performance=="object"&&performance.now?performance:Date,tu=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function Bi(){return Pe||(tu(qp),Pe=Fn.now()+Er)}function qp(){Pe=0}function or(){this._call=this._time=this._next=null}or.prototype=eu.prototype={constructor:or,restart:function(t,e,n){if(typeof t!="function")throw new TypeError("callback is not a function");n=(n==null?Bi():+n)+(e==null?0:+e),!this._next&&cn!==this&&(cn?cn._next=this:ar=this,cn=this),this._call=t,this._time=n,ti()},stop:function(){this._call&&(this._call=null,this._time=1/0,ti())}};function eu(t,e,n){var r=new or;return r.restart(t,e,n),r}function Hp(){Bi(),++tn;for(var t=ar,e;t;)(e=Pe-t._time)>=0&&t._call.call(void 0,e),t=t._next;--tn}function Bs(){Pe=(ur=Fn.now())+Er,tn=on=0;try{Hp()}finally{tn=0,Wp(),Pe=0}}function Vp(){var t=Fn.now(),e=t-ur;e>ja&&(Er-=e,ur=t)}function Wp(){for(var t,e=ar,n,r=1/0;e;)e._call?(r>e._time&&(r=e._time),t=e,e=e._next):(n=e._next,e._next=null,e=t?t._next=n:ar=n);cn=t,ti(r)}function ti(t){if(!tn){on&&(on=clearTimeout(on));var e=t-Pe;e>24?(t<1/0&&(on=setTimeout(Bs,t-Fn.now()-Er)),an&&(an=clearInterval(an))):(an||(ur=Fn.now(),an=setInterval(Vp,ja)),tn=1,tu(Bs))}}function Ms(t,e,n){var r=new or;return e=e==null?0:+e,r.restart(i=>{r.stop(),t(i+e)},e,n),r}var Zp=Pa("start","end","cancel","interrupt"),Xp=[],nu=0,Ss=1,ei=2,qn=3,Ns=4,ni=5,Hn=6;function Ar(t,e,n,r,i,s){var a=t.__transition;if(!a)t.__transition={};else if(n in a)return;Yp(t,n,{name:e,index:r,group:i,on:Zp,tween:Xp,time:s.time,delay:s.delay,duration:s.duration,ease:s.ease,timer:null,state:nu})}function Mi(t,e){var n=Jt(t,e);if(n.state>nu)throw new Error("too late; already scheduled");return n}function ae(t,e){var n=Jt(t,e);if(n.state>qn)throw new Error("too late; already running");return n}function Jt(t,e){var n=t.__transition;if(!n||!(n=n[e]))throw new Error("transition not found");return n}function Yp(t,e,n){var r=t.__transition,i;r[e]=n,n.timer=eu(s,0,n.time);function s(l){n.state=Ss,n.timer.restart(a,n.delay,n.time),n.delay<=l&&a(l-n.delay)}function a(l){var c,f,h,d;if(n.state!==Ss)return o();for(c in r)if(d=r[c],d.name===n.name){if(d.state===qn)return Ms(a);d.state===Ns?(d.state=Hn,d.timer.stop(),d.on.call("interrupt",t,t.__data__,d.index,d.group),delete r[c]):+c<e&&(d.state=Hn,d.timer.stop(),d.on.call("cancel",t,t.__data__,d.index,d.group),delete r[c])}if(Ms(function(){n.state===qn&&(n.state=Ns,n.timer.restart(u,n.delay,n.time),u(l))}),n.state=ei,n.on.call("start",t,t.__data__,n.index,n.group),n.state===ei){for(n.state=qn,i=new Array(h=n.tween.length),c=0,f=-1;c<h;++c)(d=n.tween[c].value.call(t,t.__data__,n.index,n.group))&&(i[++f]=d);i.length=f+1}}function u(l){for(var c=l<n.duration?n.ease.call(null,l/n.duration):(n.timer.restart(o),n.state=ni,1),f=-1,h=i.length;++f<h;)i[f].call(t,c);n.state===ni&&(n.on.call("end",t,t.__data__,n.index,n.group),o())}function o(){n.state=Hn,n.timer.stop(),delete r[e];for(var l in r)return;delete t.__transition}}function Gp(t,e){var n=t.__transition,r,i,s=!0,a;if(n){e=e==null?null:e+"";for(a in n){if((r=n[a]).name!==e){s=!1;continue}i=r.state>ei&&r.state<ni,r.state=Hn,r.timer.stop(),r.on.call(i?"interrupt":"cancel",t,t.__data__,r.index,r.group),delete n[a]}s&&delete t.__transition}}function Jp(t){return this.each(function(){Gp(this,t)})}function Kp(t,e){var n,r;return function(){var i=ae(this,t),s=i.tween;if(s!==n){r=n=s;for(var a=0,u=r.length;a<u;++a)if(r[a].name===e){r=r.slice(),r.splice(a,1);break}}i.tween=r}}function Qp(t,e,n){var r,i;if(typeof n!="function")throw new Error;return function(){var s=ae(this,t),a=s.tween;if(a!==r){i=(r=a).slice();for(var u={name:e,value:n},o=0,l=i.length;o<l;++o)if(i[o].name===e){i[o]=u;break}o===l&&i.push(u)}s.tween=i}}function jp(t,e){var n=this._id;if(t+="",arguments.length<2){for(var r=Jt(this.node(),n).tween,i=0,s=r.length,a;i<s;++i)if((a=r[i]).name===t)return a.value;return null}return this.each((e==null?Kp:Qp)(n,t,e))}function Si(t,e,n){var r=t._id;return t.each(function(){var i=ae(this,r);(i.value||(i.value={}))[e]=n.apply(this,arguments)}),function(i){return Jt(i,r).value[e]}}function ru(t,e){var n;return(typeof e=="number"?Ht:e instanceof Ie?sr:(n=Ie(e))?(e=n,sr):Ja)(t,e)}function td(t){return function(){this.removeAttribute(t)}}function ed(t){return function(){this.removeAttributeNS(t.space,t.local)}}function nd(t,e,n){var r,i=n+"",s;return function(){var a=this.getAttribute(t);return a===i?null:a===r?s:s=e(r=a,n)}}function rd(t,e,n){var r,i=n+"",s;return function(){var a=this.getAttributeNS(t.space,t.local);return a===i?null:a===r?s:s=e(r=a,n)}}function id(t,e,n){var r,i,s;return function(){var a,u=n(this),o;return u==null?void this.removeAttribute(t):(a=this.getAttribute(t),o=u+"",a===o?null:a===r&&o===i?s:(i=o,s=e(r=a,u)))}}function sd(t,e,n){var r,i,s;return function(){var a,u=n(this),o;return u==null?void this.removeAttributeNS(t.space,t.local):(a=this.getAttributeNS(t.space,t.local),o=u+"",a===o?null:a===r&&o===i?s:(i=o,s=e(r=a,u)))}}function ad(t,e){var n=Fr(t),r=n==="transform"?zp:ru;return this.attrTween(t,typeof e=="function"?(n.local?sd:id)(n,r,Si(this,"attr."+t,e)):e==null?(n.local?ed:td)(n):(n.local?rd:nd)(n,r,e))}function ud(t,e){return function(n){this.setAttribute(t,e.call(this,n))}}function od(t,e){return function(n){this.setAttributeNS(t.space,t.local,e.call(this,n))}}function cd(t,e){var n,r;function i(){var s=e.apply(this,arguments);return s!==r&&(n=(r=s)&&od(t,s)),n}return i._value=e,i}function ld(t,e){var n,r;function i(){var s=e.apply(this,arguments);return s!==r&&(n=(r=s)&&ud(t,s)),n}return i._value=e,i}function fd(t,e){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(e==null)return this.tween(n,null);if(typeof e!="function")throw new Error;var r=Fr(t);return this.tween(n,(r.local?cd:ld)(r,e))}function hd(t,e){return function(){Mi(this,t).delay=+e.apply(this,arguments)}}function pd(t,e){return e=+e,function(){Mi(this,t).delay=e}}function dd(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?hd:pd)(e,t)):Jt(this.node(),e).delay}function md(t,e){return function(){ae(this,t).duration=+e.apply(this,arguments)}}function gd(t,e){return e=+e,function(){ae(this,t).duration=e}}function Dd(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?md:gd)(e,t)):Jt(this.node(),e).duration}function vd(t,e){if(typeof e!="function")throw new Error;return function(){ae(this,t).ease=e}}function yd(t){var e=this._id;return arguments.length?this.each(vd(e,t)):Jt(this.node(),e).ease}function wd(t,e){return function(){var n=e.apply(this,arguments);if(typeof n!="function")throw new Error;ae(this,t).ease=n}}function Fd(t){if(typeof t!="function")throw new Error;return this.each(wd(this._id,t))}function Ed(t){typeof t!="function"&&(t=Oa(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var s=e[i],a=s.length,u=r[i]=[],o,l=0;l<a;++l)(o=s[l])&&t.call(o,o.__data__,l,s)&&u.push(o);return new he(r,this._parents,this._name,this._id)}function Ad(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,r=e.length,i=n.length,s=Math.min(r,i),a=new Array(r),u=0;u<s;++u)for(var o=e[u],l=n[u],c=o.length,f=a[u]=new Array(c),h,d=0;d<c;++d)(h=o[d]||l[d])&&(f[d]=h);for(;u<r;++u)a[u]=e[u];return new he(a,this._parents,this._name,this._id)}function Cd(t){return(t+"").trim().split(/^|\s+/).every(function(e){var n=e.indexOf(".");return n>=0&&(e=e.slice(0,n)),!e||e==="start"})}function _d(t,e,n){var r,i,s=Cd(e)?Mi:ae;return function(){var a=s(this,t),u=a.on;u!==r&&(i=(r=u).copy()).on(e,n),a.on=i}}function xd(t,e){var n=this._id;return arguments.length<2?Jt(this.node(),n).on.on(t):this.each(_d(n,t,e))}function bd(t){return function(){var e=this.parentNode;for(var n in this.__transition)if(+n!==t)return;e&&e.removeChild(this)}}function Bd(){return this.on("end.remove",bd(this._id))}function Md(t){var e=this._name,n=this._id;typeof t!="function"&&(t=Ai(t));for(var r=this._groups,i=r.length,s=new Array(i),a=0;a<i;++a)for(var u=r[a],o=u.length,l=s[a]=new Array(o),c,f,h=0;h<o;++h)(c=u[h])&&(f=t.call(c,c.__data__,h,u))&&("__data__"in c&&(f.__data__=c.__data__),l[h]=f,Ar(l[h],e,n,h,l,Jt(c,n)));return new he(s,this._parents,e,n)}function Sd(t){var e=this._name,n=this._id;typeof t!="function"&&(t=La(t));for(var r=this._groups,i=r.length,s=[],a=[],u=0;u<i;++u)for(var o=r[u],l=o.length,c,f=0;f<l;++f)if(c=o[f]){for(var h=t.call(c,c.__data__,f,o),d,m=Jt(c,n),p=0,g=h.length;p<g;++p)(d=h[p])&&Ar(d,e,n,p,h,m);s.push(h),a.push(c)}return new he(s,a,e,n)}var Nd=En.prototype.constructor;function Td(){return new Nd(this._groups,this._parents)}function Id(t,e){var n,r,i;return function(){var s=je(this,t),a=(this.style.removeProperty(t),je(this,t));return s===a?null:s===n&&a===r?i:i=e(n=s,r=a)}}function iu(t){return function(){this.style.removeProperty(t)}}function Pd(t,e,n){var r,i=n+"",s;return function(){var a=je(this,t);return a===i?null:a===r?s:s=e(r=a,n)}}function Rd(t,e,n){var r,i,s;return function(){var a=je(this,t),u=n(this),o=u+"";return u==null&&(o=u=(this.style.removeProperty(t),je(this,t))),a===o?null:a===r&&o===i?s:(i=o,s=e(r=a,u))}}function Ld(t,e){var n,r,i,s="style."+e,a="end."+s,u;return function(){var o=ae(this,t),l=o.on,c=o.value[s]==null?u||(u=iu(e)):void 0;(l!==n||i!==c)&&(r=(n=l).copy()).on(a,i=c),o.on=r}}function Od(t,e,n){var r=(t+="")=="transform"?Up:ru;return e==null?this.styleTween(t,Id(t,r)).on("end.style."+t,iu(t)):typeof e=="function"?this.styleTween(t,Rd(t,r,Si(this,"style."+t,e))).each(Ld(this._id,t)):this.styleTween(t,Pd(t,r,e),n).on("end.style."+t,null)}function kd(t,e,n){return function(r){this.style.setProperty(t,e.call(this,r),n)}}function $d(t,e,n){var r,i;function s(){var a=e.apply(this,arguments);return a!==i&&(r=(i=a)&&kd(t,a,n)),r}return s._value=e,s}function Ud(t,e,n){var r="style."+(t+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(e==null)return this.tween(r,null);if(typeof e!="function")throw new Error;return this.tween(r,$d(t,e,n??""))}function zd(t){return function(){this.textContent=t}}function qd(t){return function(){var e=t(this);this.textContent=e??""}}function Hd(t){return this.tween("text",typeof t=="function"?qd(Si(this,"text",t)):zd(t==null?"":t+""))}function Vd(t){return function(e){this.textContent=t.call(this,e)}}function Wd(t){var e,n;function r(){var i=t.apply(this,arguments);return i!==n&&(e=(n=i)&&Vd(i)),e}return r._value=t,r}function Zd(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(t==null)return this.tween(e,null);if(typeof t!="function")throw new Error;return this.tween(e,Wd(t))}function Xd(){for(var t=this._name,e=this._id,n=su(),r=this._groups,i=r.length,s=0;s<i;++s)for(var a=r[s],u=a.length,o,l=0;l<u;++l)if(o=a[l]){var c=Jt(o,e);Ar(o,t,n,l,a,{time:c.time+c.delay+c.duration,delay:0,duration:c.duration,ease:c.ease})}return new he(r,this._parents,t,n)}function Yd(){var t,e,n=this,r=n._id,i=n.size();return new Promise(function(s,a){var u={value:a},o={value:function(){--i===0&&s()}};n.each(function(){var l=ae(this,r),c=l.on;c!==t&&(e=(t=c).copy(),e._.cancel.push(u),e._.interrupt.push(u),e._.end.push(o)),l.on=e}),i===0&&s()})}var Gd=0;function he(t,e,n,r){this._groups=t,this._parents=e,this._name=n,this._id=r}function su(){return++Gd}var oe=En.prototype;he.prototype={constructor:he,select:Md,selectAll:Sd,selectChild:oe.selectChild,selectChildren:oe.selectChildren,filter:Ed,merge:Ad,selection:Td,transition:Xd,call:oe.call,nodes:oe.nodes,node:oe.node,size:oe.size,empty:oe.empty,each:oe.each,on:xd,attr:ad,attrTween:fd,style:Od,styleTween:Ud,text:Hd,textTween:Zd,remove:Bd,tween:jp,delay:dd,duration:Dd,ease:yd,easeVarying:Fd,end:Yd,[Symbol.iterator]:oe[Symbol.iterator]};function Jd(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}var Kd={time:null,delay:0,duration:250,ease:Jd};function Qd(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))throw new Error(`transition ${e} not found`);return n}function jd(t){var e,n;t instanceof he?(e=t._id,t=t._name):(e=su(),(n=Kd).time=Bi(),t=t==null?null:t+"");for(var r=this._groups,i=r.length,s=0;s<i;++s)for(var a=r[s],u=a.length,o,l=0;l<u;++l)(o=a[l])&&Ar(o,t,e,l,a,n||Qd(o,e));return new he(r,this._parents,t,e)}En.prototype.interrupt=Jp;En.prototype.transition=jd;const ri=Math.PI,ii=2*ri,be=1e-6,tm=ii-be;function au(t){this._+=t[0];for(let e=1,n=t.length;e<n;++e)this._+=arguments[e]+t[e]}function em(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return au;const n=10**e;return function(r){this._+=r[0];for(let i=1,s=r.length;i<s;++i)this._+=Math.round(arguments[i]*n)/n+r[i]}}class nm{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?au:em(e)}moveTo(e,n){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,n){this._append`L${this._x1=+e},${this._y1=+n}`}quadraticCurveTo(e,n,r,i){this._append`Q${+e},${+n},${this._x1=+r},${this._y1=+i}`}bezierCurveTo(e,n,r,i,s,a){this._append`C${+e},${+n},${+r},${+i},${this._x1=+s},${this._y1=+a}`}arcTo(e,n,r,i,s){if(e=+e,n=+n,r=+r,i=+i,s=+s,s<0)throw new Error(`negative radius: ${s}`);let a=this._x1,u=this._y1,o=r-e,l=i-n,c=a-e,f=u-n,h=c*c+f*f;if(this._x1===null)this._append`M${this._x1=e},${this._y1=n}`;else if(h>be)if(!(Math.abs(f*o-l*c)>be)||!s)this._append`L${this._x1=e},${this._y1=n}`;else{let d=r-a,m=i-u,p=o*o+l*l,g=d*d+m*m,v=Math.sqrt(p),w=Math.sqrt(h),y=s*Math.tan((ri-Math.acos((p+h-g)/(2*v*w)))/2),E=y/w,A=y/v;Math.abs(E-1)>be&&this._append`L${e+E*c},${n+E*f}`,this._append`A${s},${s},0,0,${+(f*d>c*m)},${this._x1=e+A*o},${this._y1=n+A*l}`}}arc(e,n,r,i,s,a){if(e=+e,n=+n,r=+r,a=!!a,r<0)throw new Error(`negative radius: ${r}`);let u=r*Math.cos(i),o=r*Math.sin(i),l=e+u,c=n+o,f=1^a,h=a?i-s:s-i;this._x1===null?this._append`M${l},${c}`:(Math.abs(this._x1-l)>be||Math.abs(this._y1-c)>be)&&this._append`L${l},${c}`,r&&(h<0&&(h=h%ii+ii),h>tm?this._append`A${r},${r},0,1,${f},${e-u},${n-o}A${r},${r},0,1,${f},${this._x1=l},${this._y1=c}`:h>be&&this._append`A${r},${r},0,${+(h>=ri)},${f},${this._x1=e+r*Math.cos(s)},${this._y1=n+r*Math.sin(s)}`)}rect(e,n,r,i){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}h${r=+r}v${+i}h${-r}Z`}toString(){return this._}}function rm(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function cr(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,r=t.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+t.slice(n+1)]}function en(t){return t=cr(Math.abs(t)),t?t[1]:NaN}function im(t,e){return function(n,r){for(var i=n.length,s=[],a=0,u=t[0],o=0;i>0&&u>0&&(o+u+1>r&&(u=Math.max(1,r-o)),s.push(n.substring(i-=u,i+u)),!((o+=u+1)>r));)u=t[a=(a+1)%t.length];return s.reverse().join(e)}}function sm(t){return function(e){return e.replace(/[0-9]/g,function(n){return t[+n]})}}var am=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function lr(t){if(!(e=am.exec(t)))throw new Error("invalid format: "+t);var e;return new Ni({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}lr.prototype=Ni.prototype;function Ni(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}Ni.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function um(t){t:for(var e=t.length,n=1,r=-1,i;n<e;++n)switch(t[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+t[n])break t;r>0&&(r=0);break}return r>0?t.slice(0,r)+t.slice(i+1):t}var uu;function om(t,e){var n=cr(t,e);if(!n)return t+"";var r=n[0],i=n[1],s=i-(uu=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,a=r.length;return s===a?r:s>a?r+new Array(s-a+1).join("0"):s>0?r.slice(0,s)+"."+r.slice(s):"0."+new Array(1-s).join("0")+cr(t,Math.max(0,e+s-1))[0]}function Ts(t,e){var n=cr(t,e);if(!n)return t+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const Is={"%":(t,e)=>(t*100).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:rm,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>Ts(t*100,e),r:Ts,s:om,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function Ps(t){return t}var Rs=Array.prototype.map,Ls=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function cm(t){var e=t.grouping===void 0||t.thousands===void 0?Ps:im(Rs.call(t.grouping,Number),t.thousands+""),n=t.currency===void 0?"":t.currency[0]+"",r=t.currency===void 0?"":t.currency[1]+"",i=t.decimal===void 0?".":t.decimal+"",s=t.numerals===void 0?Ps:sm(Rs.call(t.numerals,String)),a=t.percent===void 0?"%":t.percent+"",u=t.minus===void 0?"−":t.minus+"",o=t.nan===void 0?"NaN":t.nan+"";function l(f){f=lr(f);var h=f.fill,d=f.align,m=f.sign,p=f.symbol,g=f.zero,v=f.width,w=f.comma,y=f.precision,E=f.trim,A=f.type;A==="n"?(w=!0,A="g"):Is[A]||(y===void 0&&(y=12),E=!0,A="g"),(g||h==="0"&&d==="=")&&(g=!0,h="0",d="=");var x=p==="$"?n:p==="#"&&/[boxX]/.test(A)?"0"+A.toLowerCase():"",b=p==="$"?r:/[%p]/.test(A)?a:"",_=Is[A],N=/[defgprs%]/.test(A);y=y===void 0?6:/[gprs]/.test(A)?Math.max(1,Math.min(21,y)):Math.max(0,Math.min(20,y));function L(M){var $=x,q=b,H,G,V;if(A==="c")q=_(M)+q,M="";else{M=+M;var st=M<0||1/M<0;if(M=isNaN(M)?o:_(Math.abs(M),y),E&&(M=um(M)),st&&+M==0&&m!=="+"&&(st=!1),$=(st?m==="("?m:u:m==="-"||m==="("?"":m)+$,q=(A==="s"?Ls[8+uu/3]:"")+q+(st&&m==="("?")":""),N){for(H=-1,G=M.length;++H<G;)if(V=M.charCodeAt(H),48>V||V>57){q=(V===46?i+M.slice(H+1):M.slice(H))+q,M=M.slice(0,H);break}}}w&&!g&&(M=e(M,1/0));var ot=$.length+M.length+q.length,K=ot<v?new Array(v-ot+1).join(h):"";switch(w&&g&&(M=e(K+M,K.length?v-q.length:1/0),K=""),d){case"<":M=$+M+q+K;break;case"=":M=$+K+M+q;break;case"^":M=K.slice(0,ot=K.length>>1)+$+M+q+K.slice(ot);break;default:M=K+$+M+q;break}return s(M)}return L.toString=function(){return f+""},L}function c(f,h){var d=l((f=lr(f),f.type="f",f)),m=Math.max(-8,Math.min(8,Math.floor(en(h)/3)))*3,p=Math.pow(10,-m),g=Ls[8+m/3];return function(v){return d(p*v)+g}}return{format:l,formatPrefix:c}}var Pn,ou,cu;lm({thousands:",",grouping:[3],currency:["$",""]});function lm(t){return Pn=cm(t),ou=Pn.format,cu=Pn.formatPrefix,Pn}function fm(t){return Math.max(0,-en(Math.abs(t)))}function hm(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(en(e)/3)))*3-en(Math.abs(t)))}function pm(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,en(e)-en(t))+1}function dm(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}function mm(t){return function(){return t}}function gm(t){return+t}var Os=[0,1];function Xe(t){return t}function si(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:mm(isNaN(e)?NaN:.5)}function Dm(t,e){var n;return t>e&&(n=t,t=e,e=n),function(r){return Math.max(t,Math.min(e,r))}}function vm(t,e,n){var r=t[0],i=t[1],s=e[0],a=e[1];return i<r?(r=si(i,r),s=n(a,s)):(r=si(r,i),s=n(s,a)),function(u){return s(r(u))}}function ym(t,e,n){var r=Math.min(t.length,e.length)-1,i=new Array(r),s=new Array(r),a=-1;for(t[r]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++a<r;)i[a]=si(t[a],t[a+1]),s[a]=n(e[a],e[a+1]);return function(u){var o=Dh(t,u,1,r)-1;return s[o](i[o](u))}}function wm(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function Fm(){var t=Os,e=Os,n=bi,r,i,s,a=Xe,u,o,l;function c(){var h=Math.min(t.length,e.length);return a!==Xe&&(a=Dm(t[0],t[h-1])),u=h>2?ym:vm,o=l=null,f}function f(h){return h==null||isNaN(h=+h)?s:(o||(o=u(t.map(r),e,n)))(r(a(h)))}return f.invert=function(h){return a(i((l||(l=u(e,t.map(r),Ht)))(h)))},f.domain=function(h){return arguments.length?(t=Array.from(h,gm),c()):t.slice()},f.range=function(h){return arguments.length?(e=Array.from(h),c()):e.slice()},f.rangeRound=function(h){return e=Array.from(h),n=Op,c()},f.clamp=function(h){return arguments.length?(a=h?!0:Xe,c()):a!==Xe},f.interpolate=function(h){return arguments.length?(n=h,c()):n},f.unknown=function(h){return arguments.length?(s=h,f):s},function(h,d){return r=h,i=d,c()}}function Em(){return Fm()(Xe,Xe)}function Am(t,e,n,r){var i=Eh(t,e,n),s;switch(r=lr(r??",f"),r.type){case"s":{var a=Math.max(Math.abs(t),Math.abs(e));return r.precision==null&&!isNaN(s=hm(i,a))&&(r.precision=s),cu(r,a)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(s=pm(i,Math.max(Math.abs(t),Math.abs(e))))&&(r.precision=s-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(s=fm(i))&&(r.precision=s-(r.type==="%")*2);break}}return ou(r)}function Cm(t){var e=t.domain;return t.ticks=function(n){var r=e();return Fh(r[0],r[r.length-1],n??10)},t.tickFormat=function(n,r){var i=e();return Am(i[0],i[i.length-1],n??10,r)},t.nice=function(n){n==null&&(n=10);var r=e(),i=0,s=r.length-1,a=r[i],u=r[s],o,l,c=10;for(u<a&&(l=a,a=u,u=l,l=i,i=s,s=l);c-- >0;){if(l=Yr(a,u,n),l===o)return r[i]=a,r[s]=u,e(r);if(l>0)a=Math.floor(a/l)*l,u=Math.ceil(u/l)*l;else if(l<0)a=Math.ceil(a*l)/l,u=Math.floor(u*l)/l;else break;o=l}return t},t}function ai(){var t=Em();return t.copy=function(){return wm(t,ai())},dm.apply(t,arguments),Cm(t)}function Ve(t){return function(){return t}}function _m(t){let e=3;return t.digits=function(n){if(!arguments.length)return e;if(n==null)e=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);e=r}return t},()=>new nm(e)}function xm(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function lu(t){this._context=t}lu.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e);break}}};function bm(t){return new lu(t)}function Bm(t){return t[0]}function Mm(t){return t[1]}function Sm(t,e){var n=Ve(!0),r=null,i=bm,s=null,a=_m(u);t=typeof t=="function"?t:t===void 0?Bm:Ve(t),e=typeof e=="function"?e:e===void 0?Mm:Ve(e);function u(o){var l,c=(o=xm(o)).length,f,h=!1,d;for(r==null&&(s=i(d=a())),l=0;l<=c;++l)!(l<c&&n(f=o[l],l,o))===h&&((h=!h)?s.lineStart():s.lineEnd()),h&&s.point(+t(f,l,o),+e(f,l,o));if(d)return s=null,d+""||null}return u.x=function(o){return arguments.length?(t=typeof o=="function"?o:Ve(+o),u):t},u.y=function(o){return arguments.length?(e=typeof o=="function"?o:Ve(+o),u):e},u.defined=function(o){return arguments.length?(n=typeof o=="function"?o:Ve(!!o),u):n},u.curve=function(o){return arguments.length?(i=o,r!=null&&(s=i(r)),u):i},u.context=function(o){return arguments.length?(o==null?r=s=null:s=i(r=o),u):r},u}function ln(t,e,n){this.k=t,this.x=e,this.y=n}ln.prototype={constructor:ln,scale:function(t){return t===1?this:new ln(this.k*t,this.x,this.y)},translate:function(t,e){return t===0&e===0?this:new ln(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};ln.prototype;var Lr={exports:{}},ks;function Nm(){return ks||(ks=1,function(t){(function(e,n){t.exports?t.exports=n():window.ysFixWebmDuration=n()})("fix-webm-duration",function(){var e={172351395:{name:"EBML",type:"Container"},646:{name:"EBMLVersion",type:"Uint"},759:{name:"EBMLReadVersion",type:"Uint"},754:{name:"EBMLMaxIDLength",type:"Uint"},755:{name:"EBMLMaxSizeLength",type:"Uint"},642:{name:"DocType",type:"String"},647:{name:"DocTypeVersion",type:"Uint"},645:{name:"DocTypeReadVersion",type:"Uint"},108:{name:"Void",type:"Binary"},63:{name:"CRC-32",type:"Binary"},190023271:{name:"SignatureSlot",type:"Container"},16010:{name:"SignatureAlgo",type:"Uint"},16026:{name:"SignatureHash",type:"Uint"},16037:{name:"SignaturePublicKey",type:"Binary"},16053:{name:"Signature",type:"Binary"},15963:{name:"SignatureElements",type:"Container"},15995:{name:"SignatureElementList",type:"Container"},9522:{name:"SignedElement",type:"Binary"},139690087:{name:"Segment",type:"Container"},21863284:{name:"SeekHead",type:"Container"},3515:{name:"Seek",type:"Container"},5035:{name:"SeekID",type:"Binary"},5036:{name:"SeekPosition",type:"Uint"},88713574:{name:"Info",type:"Container"},13220:{name:"SegmentUID",type:"Binary"},13188:{name:"SegmentFilename",type:"String"},1882403:{name:"PrevUID",type:"Binary"},1868715:{name:"PrevFilename",type:"String"},2013475:{name:"NextUID",type:"Binary"},1999803:{name:"NextFilename",type:"String"},1092:{name:"SegmentFamily",type:"Binary"},10532:{name:"ChapterTranslate",type:"Container"},10748:{name:"ChapterTranslateEditionUID",type:"Uint"},10687:{name:"ChapterTranslateCodec",type:"Uint"},10661:{name:"ChapterTranslateID",type:"Binary"},710577:{name:"TimecodeScale",type:"Uint"},1161:{name:"Duration",type:"Float"},1121:{name:"DateUTC",type:"Date"},15273:{name:"Title",type:"String"},3456:{name:"MuxingApp",type:"String"},5953:{name:"WritingApp",type:"String"},103:{name:"Timecode",type:"Uint"},6228:{name:"SilentTracks",type:"Container"},6359:{name:"SilentTrackNumber",type:"Uint"},39:{name:"Position",type:"Uint"},43:{name:"PrevSize",type:"Uint"},35:{name:"SimpleBlock",type:"Binary"},32:{name:"BlockGroup",type:"Container"},33:{name:"Block",type:"Binary"},34:{name:"BlockVirtual",type:"Binary"},13729:{name:"BlockAdditions",type:"Container"},38:{name:"BlockMore",type:"Container"},110:{name:"BlockAddID",type:"Uint"},37:{name:"BlockAdditional",type:"Binary"},27:{name:"BlockDuration",type:"Uint"},122:{name:"ReferencePriority",type:"Uint"},123:{name:"ReferenceBlock",type:"Int"},125:{name:"ReferenceVirtual",type:"Int"},36:{name:"CodecState",type:"Binary"},13730:{name:"DiscardPadding",type:"Int"},14:{name:"Slices",type:"Container"},104:{name:"TimeSlice",type:"Container"},76:{name:"LaceNumber",type:"Uint"},77:{name:"FrameNumber",type:"Uint"},75:{name:"BlockAdditionID",type:"Uint"},78:{name:"Delay",type:"Uint"},79:{name:"SliceDuration",type:"Uint"},72:{name:"ReferenceFrame",type:"Container"},73:{name:"ReferenceOffset",type:"Uint"},74:{name:"ReferenceTimeCode",type:"Uint"},47:{name:"EncryptedBlock",type:"Binary"},106212971:{name:"Tracks",type:"Container"},46:{name:"TrackEntry",type:"Container"},87:{name:"TrackNumber",type:"Uint"},13253:{name:"TrackUID",type:"Uint"},3:{name:"TrackType",type:"Uint"},57:{name:"FlagEnabled",type:"Uint"},8:{name:"FlagDefault",type:"Uint"},5546:{name:"FlagForced",type:"Uint"},28:{name:"FlagLacing",type:"Uint"},11751:{name:"MinCache",type:"Uint"},11768:{name:"MaxCache",type:"Uint"},254851:{name:"DefaultDuration",type:"Uint"},216698:{name:"DefaultDecodedFieldDuration",type:"Uint"},209231:{name:"TrackTimecodeScale",type:"Float"},4991:{name:"TrackOffset",type:"Int"},5614:{name:"MaxBlockAdditionID",type:"Uint"},4974:{name:"Name",type:"String"},177564:{name:"Language",type:"String"},6:{name:"CodecID",type:"String"},9122:{name:"CodecPrivate",type:"Binary"},362120:{name:"CodecName",type:"String"},13382:{name:"AttachmentLink",type:"Uint"},1742487:{name:"CodecSettings",type:"String"},1785920:{name:"CodecInfoURL",type:"String"},438848:{name:"CodecDownloadURL",type:"String"},42:{name:"CodecDecodeAll",type:"Uint"},12203:{name:"TrackOverlay",type:"Uint"},5802:{name:"CodecDelay",type:"Uint"},5819:{name:"SeekPreRoll",type:"Uint"},9764:{name:"TrackTranslate",type:"Container"},9980:{name:"TrackTranslateEditionUID",type:"Uint"},9919:{name:"TrackTranslateCodec",type:"Uint"},9893:{name:"TrackTranslateTrackID",type:"Binary"},96:{name:"Video",type:"Container"},26:{name:"FlagInterlaced",type:"Uint"},5048:{name:"StereoMode",type:"Uint"},5056:{name:"AlphaMode",type:"Uint"},5049:{name:"OldStereoMode",type:"Uint"},48:{name:"PixelWidth",type:"Uint"},58:{name:"PixelHeight",type:"Uint"},5290:{name:"PixelCropBottom",type:"Uint"},5307:{name:"PixelCropTop",type:"Uint"},5324:{name:"PixelCropLeft",type:"Uint"},5341:{name:"PixelCropRight",type:"Uint"},5296:{name:"DisplayWidth",type:"Uint"},5306:{name:"DisplayHeight",type:"Uint"},5298:{name:"DisplayUnit",type:"Uint"},5299:{name:"AspectRatioType",type:"Uint"},963876:{name:"ColourSpace",type:"Binary"},1029411:{name:"GammaValue",type:"Float"},230371:{name:"FrameRate",type:"Float"},97:{name:"Audio",type:"Container"},53:{name:"SamplingFrequency",type:"Float"},14517:{name:"OutputSamplingFrequency",type:"Float"},31:{name:"Channels",type:"Uint"},15739:{name:"ChannelPositions",type:"Binary"},8804:{name:"BitDepth",type:"Uint"},98:{name:"TrackOperation",type:"Container"},99:{name:"TrackCombinePlanes",type:"Container"},100:{name:"TrackPlane",type:"Container"},101:{name:"TrackPlaneUID",type:"Uint"},102:{name:"TrackPlaneType",type:"Uint"},105:{name:"TrackJoinBlocks",type:"Container"},109:{name:"TrackJoinUID",type:"Uint"},64:{name:"TrickTrackUID",type:"Uint"},65:{name:"TrickTrackSegmentUID",type:"Binary"},70:{name:"TrickTrackFlag",type:"Uint"},71:{name:"TrickMasterTrackUID",type:"Uint"},68:{name:"TrickMasterTrackSegmentUID",type:"Binary"},11648:{name:"ContentEncodings",type:"Container"},8768:{name:"ContentEncoding",type:"Container"},4145:{name:"ContentEncodingOrder",type:"Uint"},4146:{name:"ContentEncodingScope",type:"Uint"},4147:{name:"ContentEncodingType",type:"Uint"},4148:{name:"ContentCompression",type:"Container"},596:{name:"ContentCompAlgo",type:"Uint"},597:{name:"ContentCompSettings",type:"Binary"},4149:{name:"ContentEncryption",type:"Container"},2017:{name:"ContentEncAlgo",type:"Uint"},2018:{name:"ContentEncKeyID",type:"Binary"},2019:{name:"ContentSignature",type:"Binary"},2020:{name:"ContentSigKeyID",type:"Binary"},2021:{name:"ContentSigAlgo",type:"Uint"},2022:{name:"ContentSigHashAlgo",type:"Uint"},206814059:{name:"Cues",type:"Container"},59:{name:"CuePoint",type:"Container"},51:{name:"CueTime",type:"Uint"},55:{name:"CueTrackPositions",type:"Container"},119:{name:"CueTrack",type:"Uint"},113:{name:"CueClusterPosition",type:"Uint"},112:{name:"CueRelativePosition",type:"Uint"},50:{name:"CueDuration",type:"Uint"},4984:{name:"CueBlockNumber",type:"Uint"},106:{name:"CueCodecState",type:"Uint"},91:{name:"CueReference",type:"Container"},22:{name:"CueRefTime",type:"Uint"},23:{name:"CueRefCluster",type:"Uint"},4959:{name:"CueRefNumber",type:"Uint"},107:{name:"CueRefCodecState",type:"Uint"},155296873:{name:"Attachments",type:"Container"},8615:{name:"AttachedFile",type:"Container"},1662:{name:"FileDescription",type:"String"},1646:{name:"FileName",type:"String"},1632:{name:"FileMimeType",type:"String"},1628:{name:"FileData",type:"Binary"},1710:{name:"FileUID",type:"Uint"},1653:{name:"FileReferral",type:"Binary"},1633:{name:"FileUsedStartTime",type:"Uint"},1634:{name:"FileUsedEndTime",type:"Uint"},4433776:{name:"Chapters",type:"Container"},1465:{name:"EditionEntry",type:"Container"},1468:{name:"EditionUID",type:"Uint"},1469:{name:"EditionFlagHidden",type:"Uint"},1499:{name:"EditionFlagDefault",type:"Uint"},1501:{name:"EditionFlagOrdered",type:"Uint"},54:{name:"ChapterAtom",type:"Container"},13252:{name:"ChapterUID",type:"Uint"},5716:{name:"ChapterStringUID",type:"String"},17:{name:"ChapterTimeStart",type:"Uint"},18:{name:"ChapterTimeEnd",type:"Uint"},24:{name:"ChapterFlagHidden",type:"Uint"},1432:{name:"ChapterFlagEnabled",type:"Uint"},11879:{name:"ChapterSegmentUID",type:"Binary"},11964:{name:"ChapterSegmentEditionUID",type:"Uint"},9155:{name:"ChapterPhysicalEquiv",type:"Uint"},15:{name:"ChapterTrack",type:"Container"},9:{name:"ChapterTrackNumber",type:"Uint"},0:{name:"ChapterDisplay",type:"Container"},5:{name:"ChapString",type:"String"},892:{name:"ChapLanguage",type:"String"},894:{name:"ChapCountry",type:"String"},10564:{name:"ChapProcess",type:"Container"},10581:{name:"ChapProcessCodecID",type:"Uint"},1293:{name:"ChapProcessPrivate",type:"Binary"},10513:{name:"ChapProcessCommand",type:"Container"},10530:{name:"ChapProcessTime",type:"Uint"},10547:{name:"ChapProcessData",type:"Binary"},39109479:{name:"Tags",type:"Container"},13171:{name:"Tag",type:"Container"},9152:{name:"Targets",type:"Container"},10442:{name:"TargetTypeValue",type:"Uint"},9162:{name:"TargetType",type:"String"},9157:{name:"TagTrackUID",type:"Uint"},9161:{name:"TagEditionUID",type:"Uint"},9156:{name:"TagChapterUID",type:"Uint"},9158:{name:"TagAttachmentUID",type:"Uint"},10184:{name:"SimpleTag",type:"Container"},1443:{name:"TagName",type:"String"},1146:{name:"TagLanguage",type:"String"},1156:{name:"TagDefault",type:"Uint"},1159:{name:"TagString",type:"String"},1157:{name:"TagBinary",type:"Binary"}};function n(c,f){c.prototype=Object.create(f.prototype),c.prototype.constructor=c}function r(c,f){this.name=c||"Unknown",this.type=f||"Unknown"}r.prototype.updateBySource=function(){},r.prototype.setSource=function(c){this.source=c,this.updateBySource()},r.prototype.updateByData=function(){},r.prototype.setData=function(c){this.data=c,this.updateByData()};function i(c,f){r.call(this,c,f||"Uint")}n(i,r);function s(c){return c.length%2===1?"0"+c:c}i.prototype.updateBySource=function(){this.data="";for(var c=0;c<this.source.length;c++){var f=this.source[c].toString(16);this.data+=s(f)}},i.prototype.updateByData=function(){var c=this.data.length/2;this.source=new Uint8Array(c);for(var f=0;f<c;f++){var h=this.data.substr(f*2,2);this.source[f]=parseInt(h,16)}},i.prototype.getValue=function(){return parseInt(this.data,16)},i.prototype.setValue=function(c){this.setData(s(c.toString(16)))};function a(c,f){r.call(this,c,f||"Float")}n(a,r),a.prototype.getFloatArrayType=function(){return this.source&&this.source.length===4?Float32Array:Float64Array},a.prototype.updateBySource=function(){var c=this.source.reverse(),f=this.getFloatArrayType(),h=new f(c.buffer);this.data=h[0]},a.prototype.updateByData=function(){var c=this.getFloatArrayType(),f=new c([this.data]),h=new Uint8Array(f.buffer);this.source=h.reverse()},a.prototype.getValue=function(){return this.data},a.prototype.setValue=function(c){this.setData(c)};function u(c,f){r.call(this,c,f||"Container")}n(u,r),u.prototype.readByte=function(){return this.source[this.offset++]},u.prototype.readUint=function(){for(var c=this.readByte(),f=8-c.toString(2).length,h=c-(1<<7-f),d=0;d<f;d++)h*=256,h+=this.readByte();return h},u.prototype.updateBySource=function(){for(this.data=[],this.offset=0;this.offset<this.source.length;this.offset=h){var c=this.readUint(),f=this.readUint(),h=Math.min(this.offset+f,this.source.length),d=this.source.slice(this.offset,h),m=e[c]||{name:"Unknown",type:"Unknown"},p=r;switch(m.type){case"Container":p=u;break;case"Uint":p=i;break;case"Float":p=a;break}var g=new p(m.name,m.type);g.setSource(d),this.data.push({id:c,idHex:c.toString(16),data:g})}},u.prototype.writeUint=function(c,f){for(var h=1,d=128;c>=d&&h<8;h++,d*=128);if(!f)for(var m=d+c,p=h-1;p>=0;p--){var g=m%256;this.source[this.offset+p]=g,m=(m-g)/256}this.offset+=h},u.prototype.writeSections=function(c){this.offset=0;for(var f=0;f<this.data.length;f++){var h=this.data[f],d=h.data.source,m=d.length;this.writeUint(h.id,c),this.writeUint(m,c),c||this.source.set(d,this.offset),this.offset+=m}return this.offset},u.prototype.updateByData=function(){var c=this.writeSections("draft");this.source=new Uint8Array(c),this.writeSections()},u.prototype.getSectionById=function(c){for(var f=0;f<this.data.length;f++){var h=this.data[f];if(h.id===c)return h.data}return null};function o(c){u.call(this,"File","File"),this.setSource(c)}n(o,u),o.prototype.fixDuration=function(c,f){var h=f&&f.logger;h===void 0?h=function(v){console.log(v)}:h||(h=function(){});var d=this.getSectionById(139690087);if(!d)return h("[fix-webm-duration] Segment section is missing"),!1;var m=d.getSectionById(88713574);if(!m)return h("[fix-webm-duration] Info section is missing"),!1;var p=m.getSectionById(710577);if(!p)return h("[fix-webm-duration] TimecodeScale section is missing"),!1;var g=m.getSectionById(1161);if(g)if(g.getValue()<=0)h(`[fix-webm-duration] Duration section is present, but the value is ${g.getValue()}`),g.setValue(c);else return h(`[fix-webm-duration] Duration section is present, and the value is ${g.getValue()}`),!1;else h("[fix-webm-duration] Duration section is missing"),g=new a("Duration","Float"),g.setValue(c),m.data.push({id:1161,data:g});return p.setValue(1e6),m.updateByData(),d.updateByData(),this.updateByData(),!0},o.prototype.toBlob=function(c){return new Blob([this.source.buffer],{type:c||"video/webm"})};function l(c,f,h,d){if(typeof h=="object"&&(d=h,h=void 0),!h)return new Promise(function(p){l(c,f,p,d)});try{var m=new FileReader;m.onloadend=function(){try{var p=new o(new Uint8Array(m.result));p.fixDuration(f,d)&&(c=p.toBlob(c.type))}catch{}h(c)},m.readAsArrayBuffer(c)}catch{h(c)}}return l.default=l,l})}(Lr)),Lr.exports}var Tm=Nm();const Im=Df(Tm),Pm="planetsinmotion.live";class fu{constructor(e,n,r){this.margin=n,this.units=1,this.fontsize=18,this.outputname=r,this.id=e,this.updateDimensions(),this.svgRoot=dp("#"+e).append("svg").attr("width",this.width+this.margin.left+this.margin.right).attr("height",this.height+this.margin.top+this.margin.bottom),this.svg=this.svgRoot.append("g").attr("transform",`translate(${this.margin.left}, ${this.margin.top})`)}updateDimensions(){const e=document.getElementById(this.id);this.width=e.offsetWidth-this.margin.left-this.margin.right,this.height=e.offsetHeight-this.margin.top-this.margin.bottom}setDomains(e,n,r,i,s=!1){this.svg.selectAll(".axis").remove();const a=[e/this.units,n/this.units],u=[r/this.units,i/this.units];this.xScale=ai().domain(a).range([0,this.width]);const o=s?[0,this.height]:[this.height,0];this.yScale=ai().domain(u).range(o);const l=m=>{m.selectAll("path, line").attr("stroke","white").attr("stroke-width",2).attr("shape-rendering","crispEdges"),m.selectAll("text").attr("fill","white").attr("font-size",`${this.fontsize}px`).attr("font-family","DejaVu")},c=this.svg.append("g").attr("transform",`translate(0,${this.height})`).call(Nh(this.xScale).tickSize(14).ticks(6)).attr("class","axis");l(c);const f=this.svg.append("g").call(Th(this.yScale).tickSize(14).ticks(6)).attr("class","axis");l(f);const h=this.svg.append("g").attr("transform","translate(0,0)").call(Mh(this.xScale).tickValues([])).attr("class","axis");l(h);const d=this.svg.append("g").attr("transform",`translate(${this.width},0)`).call(Sh(this.yScale).tickValues([])).attr("class","axis");l(d)}setScales(e,n){}clear(){this.xScale=null,this.yScale=null,this.svg.selectAll(".axis").remove()}startRecording(e,n,r){this.canvas=document.createElement("canvas"),this.canvas.width=this.width*2,this.canvas.height=this.height*2,this.ctx=this.canvas.getContext("2d"),this.ctx.font="italic 32px DejaVu",this.ctx.strokeStyle="white",this.ctx.lineWidth=2;var i=[];const s=this.canvas.captureStream(e);this.mediaRecorder=new MediaRecorder(s,{mimeType:n}),this.mediaRecorder.onstart=()=>{console.log(`Recording for ${this.outputname} started and will stop after ${r/1e3} seconds.`)},this.mediaRecorder.ondataavailable=a=>{a.data.size>0&&i.push(a.data)},this.mediaRecorder.onstop=async()=>{const a=new Blob(i,{type:n}),u=await Im(a,r);Na(u,this.outputname,"webm"),this.canvas=null,this.ctx=null},this.mediaRecorder.start()}updateRecording(){const e=new XMLSerializer().serializeToString(this.svgRoot.node()),n=new Image,r=new Blob([e],{type:"image/svg+xml;charset=utf-8"}),i=URL.createObjectURL(r);n.onload=()=>{this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this.ctx.drawImage(n,0,0,this.canvas.width,this.canvas.height),this.ctx.strokeText(Pm,this.canvas.width-500,this.canvas.height-100),URL.revokeObjectURL(i)},n.src=i}stopRecording(){this.mediaRecorder.state==="recording"&&this.mediaRecorder.stop()}}class Rm extends fu{constructor(e,n){super(e,n,"lightcurve"),this.xvalues=null,this.yvalues=null}drawLightcurved3(e,n){const r=this.xvalues.slice(0,n+1),i=this.yvalues.slice(0,n+1),s=r.map((o,l)=>({x:o,y:i[l]})),a=Sm().x(o=>this.xScale(o.x)).y(o=>this.yScale(o.y)),u=this.svg.select(".line");u.empty()?this.svg.append("path").datum(s).attr("class","line").attr("d",a).attr("stroke",e).attr("stroke-width",2):u.datum(s).attr("d",a)}setScales(e,n){super.setDomains(ms(e),ds(e),ms(n)*.999,ds(n)*1.01),this.xvalues=e,this.yvalues=n}clear(){super.clear(),this.svg.select(".line").remove(),this.xvalues=null,this.yvalues=null}}class Lm extends Xr{constructor(e){super(e);const n="bc1q4xr9agec3ldug0xezqxy252y3kvqmcz62xr6pm";this.donateBTCButton=new $s("BTC",n);const r="0xaFE3DB130E71404Ed038397D25C26777d4EC8e4F";this.donateETHButton=new $s("ETH",r)}setLanguage(e){super.setLanguage(e);const n=document.getElementById("contribute-text");n.innerHTML=e["contribute-text"]}}class $s{constructor(e,n){this.walletAddress=n,this.copyButton=document.getElementById("copy"+e+"WalletAddressBtn").addEventListener("click",()=>{navigator.clipboard.writeText(this.walletAddress);const r=document.getElementById("copy-feedback");r.classList.add("visible"),setTimeout(()=>{r.classList.remove("visible")},1e3)})}}class Om{constructor(e,n,r){if(n._R<r._R&&([n,r]=[r,n]),this.eclipsingBody1=n,this.eclipsingBody2=r,this.eclipsedBody=e,this.eclipsingBody1=n,this.eclipsingBody2=r,this.datapoints=n.rx.length,this.datapoints!=r.rx.length)throw new Error("Eclipsing bodies must have the same number of data points");this.planet1StarTransit=new dn(e,n),this.planet2StarTransit=new dn(e,r),this.planetPlanetTransit=new dn(n,r,!1),this.workoutTransits()}workoutTransits(){this.eclipsedArea=this.planet1StarTransit.eclipsedArea.map((s,a)=>s+this.planet2StarTransit.eclipsedArea[a]),this.planet1StarTransit.fullTransitIndexes.filter(s=>this.planet2StarTransit.fullTransitIndexes.includes(s)).forEach(s=>{this.planetPlanetTransit.fullTransitIndexes.includes(s)?(console.log("Full - Full - Full",s),this.eclipsedArea[s]-=this.eclipsingBody2.Area):this.planetPlanetTransit.partialTransitIndexes.includes(s)&&(console.log("Full - Full - Partial",s),this.eclipsedArea[s]-=this.planetPlanetTransit.eclipsedArea[s])}),this.planet1StarTransit.partialTransitIndexes.filter(s=>this.planet2StarTransit.fullTransitIndexes.includes(s)).forEach(s=>{this.planetPlanetTransit.fullTransitIndexes.includes(s)?(console.log("Partial - Full - Full",s),this.eclipsedArea[s]-=this.eclipsingBody2.Area):this.planetPlanetTransit.partialTransitIndexes.includes(s)&&(console.log("Partial - Full - Partial",s),this.eclipsedArea[s]-=this.planetPlanetTransit.eclipsedArea[s])}),this.planet1StarTransit.fullTransitIndexes.filter(s=>this.planet2StarTransit.partialTransitIndexes.includes(s)).forEach(s=>{if(this.planetPlanetTransit.fullTransitIndexes.includes(s))throw console.log("Full - Partial - Full",s),new Error("Full Partial Full transit should not exist!");this.planetPlanetTransit.partialTransitIndexes.includes(s)&&(console.log("Full - Partial - Partial",s),this.eclipsedArea[s]-=this.planetPlanetTransit.eclipsedArea[s])}),this.planet1StarTransit.partialTransitIndexes.filter(s=>this.planet2StarTransit.partialTransitIndexes.includes(s)).forEach(s=>{if(this.planetPlanetTransit.fullTransitIndexes.includes(s))console.log("Partial - Partial - Full",s),this.eclipsedArea[s]-=this.planet2StarTransit.eclipsedArea[s];else if(this.planetPlanetTransit.partialTransitIndexes.includes(s)){const[a,u]=this.planetPlanetTransit.getContactPoints(s),o=Fe(a,[this.eclipsedBody.ry[s],this.eclipsedBody.rz[s]]),l=Fe(u,[this.eclipsedBody.ry[s],this.eclipsedBody.rz[s]]);if(l<this.eclipsedBody._R&&o<this.eclipsedBody._R)this.eclipsedArea[s]-=this.planetPlanetTransit.eclipsedArea[s],console.log("Partial - Partial - Partial (case 2)",s);else if(Math.min(l,o)<this.eclipsedBody._R){const c=o<l?a:u,f=this.selectContactPoint(this.planet1StarTransit,this.eclipsingBody2,s),h=this.selectContactPoint(this.planet2StarTransit,this.eclipsingBody1,s),d=Zf(this.eclipsedBody._R,this.eclipsingBody2._R,this.eclipsingBody1._R,c,f,h);console.log("Partial - Partial - Partial (case 1): sharedArea",(d/this.eclipsedBody.Area).toFixed(2),"index",s),this.eclipsedArea[s]-=d}else console.log("Partial - Partial - Partial (case 3)",s)}}),this.visibleFraction=this.eclipsedArea.map(s=>1-s/this.eclipsedBody.Area),this.transitDepth=Math.max(...this.eclipsedArea)/this.eclipsedBody.Area}selectContactPoint(e,n,r){const[i,s]=e.getContactPoints(r),a=Fe(i,[n.ry[r],n.rz[r]]),u=Fe(s,[n.ry[r],n.rz[r]]);return a<u?i:s}}class Us extends fu{constructor(e,n,r={top:10,bottom:40,left:80,right:10}){super(e,r,n),this.units=Je}defineSunGradient(e){this.starColor=e,this.svg.selectAll(".star-gradient").remove(),this.svg.append("defs").attr("class","star-gradient").append("radialGradient").attr("id","sun-glow-gradient").attr("cx","50%").attr("cy","50%").attr("r","68%").selectAll("stop").data([{offset:"0%",color:e},{offset:"100%",color:"black"}]).enter().append("stop").attr("offset",n=>n.offset).attr("stop-color",n=>n.color)}clear(){super.clear(),this.svg.selectAll("circle").remove(),this.svg.selectAll(".planet-defs").remove(),this.svg.selectAll("path").remove()}drawBodies(e,n,r=!1){this.svg.selectAll("circle").remove(),this.svg.selectAll(".planet-defs").remove(),e.forEach(i=>{const s=Math.abs(this.xScale(i._R)-this.xScale(0))/this.units;let a;const u=i.ry[n]/this.units;var o=1/this.units,l=1/this.units;if(r?(o*=i.rx[n],l*=i.rz[n]):(o*=i.rz[n],l*=i.rx[n]),i instanceof Ei)a="url(#sun-glow-gradient)";else{const h=Math.atan2(r?-o:o,u),d=Math.cos(h),m=Math.sin(h),p=Math.sqrt(u**2+o**2+l**2),g=l/p,v=50*(1-d),w=50*(1+m),y=50*(1+d),E=50*(1-m),A=`planet-gradient-${i.planetName.replace(/\s+/g,"")}-${r?"faceon":"edegeon"}`,x=this.svg.append("defs").attr("class","planet-defs").append("linearGradient").attr("id",A).attr("x1",`${v}%`).attr("y1",`${w}%`).attr("x2",`${y}%`).attr("y2",`${E}%`);x.append("stop").attr("offset","0%").attr("stop-color",i.color),x.append("stop").attr("offset",`${(1-g)/2*100}%`).attr("stop-color",Sa(i.color,65)),a=`url(#${A})`}const c=this.xScale(u),f=this.yScale(o);this.svg.append("circle").attr("pointer-events","none").attr("cx",c).attr("cy",f).attr("r",s).style("fill",a)})}}class km{constructor(e,n){this._star=e,this.numSamples=n}set star(e){this._star=e,this.drawPoints(this.numSamples)}set numSamples(e){self.theta=Array.from({length:e},()=>Math.random()*2*Math.PI),this._numSamples=e,this.drawPoints(e)}get star(){return this._star}get numSamples(){return this._numSamples}drawPoints(e){console.log("Drawing points for Monte Carlo simulation with numSamples:",e);const n=Array.from({length:e},()=>Math.sqrt(Math.random())*this.star._R);this.ypoints=n.map((r,i)=>r*Math.cos(self.theta[i])),this.zpoints=n.map((r,i)=>r*Math.sin(self.theta[i]))}filterByEclipses(e){const n=new Set,r=new Set;for(let i=0;i<e[0].rx.length;i++)e.forEach(s=>{this.star.getProjectedDistance(s,i)-s._R<=this.star._R&&s.rx[i]>this.star.rx[i]&&(r.add(i),n.add(s))});return[n,r]}getEclipsedFraction(e){const[n,r]=this.filterByEclipses(e);let i=new Float64Array(this.star.rz.length).fill(1);return r.forEach(s=>{let a=0;for(let u=0;u<this.numSamples;u++)for(let o=0;o<n.size;o++){const l=e[o];if(l.rx[s]>this.star.rx[s]&&(this.ypoints[u]-l.ry[s])**2+(this.zpoints[u]-l.rz[s])**2<l._R**2){a+=1;break}}i[s]=1-a/this.numSamples}),i}getEclipsingAreasMonteCarloFast_unused(e,n=1e4){const r=this.rx.length;let i=new Float64Array(r).fill(1);const[s,a]=this.filterByEclipsesSet(e),u=Array.from({length:n},()=>Math.sqrt(Math.random())*this._R),o=Array.from({length:n},()=>Math.random()*2*Math.PI),l=u.map((f,h)=>f*Math.cos(o[h])),c=u.map((f,h)=>f*Math.sin(o[h]));return a.forEach(f=>{let h=Array.from({length:n},(m,p)=>p);s.forEach(m=>{h=h.filter(p=>(l[p]-m.ry[f])**2+(c[p]-m.rz[f])**2>=m._R**2)});const d=n-h.length;i[f]=1-d/n}),i}}let ut,At,lt,Bt,ui,oi,ci,Kt={},Zt,ye,fe,ne,re,mn,Tt=0,li,zs,fi=!1,Cr;async function $m(t="en"){Kt=await(await fetch(`/locales/${t}.json`)).json(),lt.setLanguage(Kt),Bt.setLanguage(Kt),ut.setLanguage(Kt),oi.setLanguage(Kt),ui.setLanguage(Kt),ci.setLanguage(Kt)}const Um=()=>{const t=At.star,e=ut.planets,n=lt.datapoints,r=[t,...e],i=r.slice().sort((a,u)=>a.rz[Tt]-u.rz[Tt]);ne.drawBodies(i,Tt,!0);const s=r.slice().sort((a,u)=>a.rx[Tt]-u.rx[Tt]);re.drawBodies(s,Tt),fe.drawLightcurved3(t.color,Tt),fi&&([re,ne,fe].forEach(a=>{a.updateRecording()}),li==n+1&&(console.log("Finishing recording"),fi=!1,setTimeout(()=>{[re,ne,fe].forEach(u=>{console.log("Stopping recording"),u.stopRecording()}),document.getElementById("recording-dialog").close()},50),console.log("Recording complete."),console.log("All simulations saved.")),li++),Tt=(Tt+1)%n};function zm(){ut.setStar(At.star),Cr.star=At.star,ut.planets.length!=0&&pu()}function qm(){re.defineSunGradient(At.star.color),ne.defineSunGradient(At.star.color),nn(0)}function Hm(){ut.planets.length!=0&&(Ti(),Bt.setDuration(lt.datapoints*Bt.ms))}function Ti(){ut.planets.length!=0&&(console.log("Updating times"),lt.calculateTimes(ut.maxP),pu())}function hu(){if(ut.planets.length==1)ye=new dn(At.star,ut.planets[0]).visibleFraction,lt.mcPointsInput.disabled=!0;else if(ut.planets.length==2)ye=new Om(At.star,ut.planets[0],ut.planets[1]).visibleFraction,lt.mcPointsInput.disabled=!0;else{console.log("Showing modal...");const n=document.getElementById("mc-overlay"),r=document.getElementById("mc-message");r.innerHTML=Kt["mc-overlay"],n.classList.remove("hidden"),setTimeout(()=>{console.log("Starting Monte Carlo calculation..."),ye=Cr.getEclipsedFraction(ut.planets),n.classList.add("hidden"),console.log("Monte Carlo calculation complete.")},0),lt.mcPointsInput.disabled=!1}const t=ye.indexOf(Math.min(...ye)),e=lt.timesDays[t];console.log("Transit depth: ",Math.min(...ye).toFixed(3)+" at "+e.toFixed(2)+" days")}function Vm(){Cr.numSamples=lt.mcPoints,hu(),nn(0)}function pu(){console.log("Updating simulation"),At.setTimes(lt.times),ut.setTimes(lt.times),hu();const t=Math.abs(ut.maxDistance*1.02);ne.setDomains(-t,t,-t,t,!0),re.setDomains(-t,t,-t,t,!1),nn(0)}function Wm(){ut.planets.length>0?(mn.disabled=!1,Bt.saveAnimationButton.disabled=!1,Ti()):ut.planets.length==0&&(mn.disabled=!0,Bt.saveAnimationButton.disabled=!0,clearInterval(Zt),Zt=null,console.log("No planets to animate, clearing canvas"),fe.clear(),ne.clear(),re.clear())}function Zm(){if(!fe){const t={top:10,bottom:40,left:80,right:10};fe=new Rm("d3-lightcurve-container",t)}ne||(ne=new Us("faceoncanvas","faceon")),re||(re=new Us("edgeoncanvas","edgeon")),At||(At=new Yf(zm,qm)),re.defineSunGradient(At.star.color),ne.defineSunGradient(At.star.color),ut||(ut=new lh(Wm,mu,du,At.star)),lt||(lt=new fh(ut.maxP,Hm,Ti,Vm),lt.mcPointsInput.disabled=!0),mn=document.getElementById("export-lightcurve"),Bt||(Bt=new hh(t=>{Bt.setDuration(lt.datapoints*t),nn(Tt)})),oi||(oi=new Xr("about")),ui||(ui=new Xr("manual")),ci||(ci=new Lm("donate")),At.setTimes(lt.times),ut.setTimes(lt.times),Bt.setDuration(lt.datapoints*Bt.ms),zs=document.getElementById("main-canvas-container"),zs.addEventListener("click",Hs),document.addEventListener("keydown",t=>{t.code==="Space"?(t.preventDefault(),Hs()):t.code=="NumpadAdd"&&!t.ctrlKey&&(console.log("Show planet form"),ut.showPlanetForm())}),mn.addEventListener("click",()=>{lt.exportLightcurve(lt.timesDays,ye)}),mn.disabled=!0,Bt.saveAnimationButton.addEventListener("click",()=>{Xm()}),$m(),Cr=new km(At.star,lt.mcPoints)}function Xm(t="video/webm"){document.getElementById("recording-dialog").showModal();const n=Bt.animationDurationms;[re,ne,fe].forEach(r=>{r.startRecording(Bt.ms,t,n)}),fi=!0,li=0,nn(0)}function qs(t){const e=document.getElementById("toggle-animation-feedback");e.innerHTML=t,e.classList.add("visible"),setTimeout(()=>{e.classList.remove("visible")},1e3)}function Hs(){Zt?(qs(Kt["pause-animation"]),mu()):(qs(Kt["resume-animation"]),du())}function du(){console.log("Restarting animation"),Zt||nn(Tt)}function mu(){console.log("Pausing animation"),Zt&&(clearInterval(Zt),Zt=null)}function nn(t=0){Tt=t,console.log("Restarting simu"),Zt&&(clearInterval(Zt),Zt=null),Tt==0&&fe.clear(),ut.planets.length>0&&(fe.setScales(lt.timesDays,ye),Zt=window.setInterval(Um,Bt.ms))}Zm();
