/*! For license information please see bundle.js.LICENSE.txt */
(()=>{var t={31:function(t,e,n){var r;!function(t,i){function o(t){var e=this,n="";e.next=function(){var t=e.x^e.x>>>2;return e.x=e.y,e.y=e.z,e.z=e.w,e.w=e.v,(e.d=e.d+362437|0)+(e.v=e.v^e.v<<4^t^t<<1)|0},e.x=0,e.y=0,e.z=0,e.w=0,e.v=0,t===(0|t)?e.x=t:n+=t;for(var r=0;r<n.length+64;r++)e.x^=0|n.charCodeAt(r),r==n.length&&(e.d=e.x<<10^e.x>>>4),e.next()}function u(t,e){return e.x=t.x,e.y=t.y,e.z=t.z,e.w=t.w,e.v=t.v,e.d=t.d,e}function a(t,e){var n=new o(t),r=e&&e.state,i=function(){return(n.next()>>>0)/4294967296};return i.double=function(){do{var t=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===t);return t},i.int32=n.next,i.quick=i,r&&("object"==typeof r&&u(r,n),i.state=function(){return u(n,{})}),i}i&&i.exports?i.exports=a:n.amdD&&n.amdO?void 0===(r=function(){return a}.call(e,n,e,i))||(i.exports=r):this.xorwow=a}(0,t=n.nmd(t),n.amdD)},67:function(t,e,n){var r;!function(t,i){function o(t){var e=this;e.next=function(){var t,n,r=e.x,i=e.i;return t=r[i],n=(t^=t>>>7)^t<<24,n^=(t=r[i+1&7])^t>>>10,n^=(t=r[i+3&7])^t>>>3,n^=(t=r[i+4&7])^t<<7,t=r[i+7&7],n^=(t^=t<<13)^t<<9,r[i]=n,e.i=i+1&7,n},function(t,e){var n,r=[];if(e===(0|e))r[0]=e;else for(e=""+e,n=0;n<e.length;++n)r[7&n]=r[7&n]<<15^e.charCodeAt(n)+r[n+1&7]<<13;for(;r.length<8;)r.push(0);for(n=0;n<8&&0===r[n];++n);for(8==n?r[7]=-1:r[n],t.x=r,t.i=0,n=256;n>0;--n)t.next()}(e,t)}function u(t,e){return e.x=t.x.slice(),e.i=t.i,e}function a(t,e){null==t&&(t=+new Date);var n=new o(t),r=e&&e.state,i=function(){return(n.next()>>>0)/4294967296};return i.double=function(){do{var t=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===t);return t},i.int32=n.next,i.quick=i,r&&(r.x&&u(r,n),i.state=function(){return u(n,{})}),i}i&&i.exports?i.exports=a:n.amdD&&n.amdO?void 0===(r=function(){return a}.call(e,n,e,i))||(i.exports=r):this.xorshift7=a}(0,t=n.nmd(t),n.amdD)},180:function(t,e,n){var r;!function(t,i){function o(t){var e,n=this,r=(e=4022871197,function(t){t=String(t);for(var n=0;n<t.length;n++){var r=.02519603282416938*(e+=t.charCodeAt(n));r-=e=r>>>0,e=(r*=e)>>>0,e+=4294967296*(r-=e)}return 2.3283064365386963e-10*(e>>>0)});n.next=function(){var t=2091639*n.s0+2.3283064365386963e-10*n.c;return n.s0=n.s1,n.s1=n.s2,n.s2=t-(n.c=0|t)},n.c=1,n.s0=r(" "),n.s1=r(" "),n.s2=r(" "),n.s0-=r(t),n.s0<0&&(n.s0+=1),n.s1-=r(t),n.s1<0&&(n.s1+=1),n.s2-=r(t),n.s2<0&&(n.s2+=1),r=null}function u(t,e){return e.c=t.c,e.s0=t.s0,e.s1=t.s1,e.s2=t.s2,e}function a(t,e){var n=new o(t),r=e&&e.state,i=n.next;return i.int32=function(){return 4294967296*n.next()|0},i.double=function(){return i()+11102230246251565e-32*(2097152*i()|0)},i.quick=i,r&&("object"==typeof r&&u(r,n),i.state=function(){return u(n,{})}),i}i&&i.exports?i.exports=a:n.amdD&&n.amdO?void 0===(r=function(){return a}.call(e,n,e,i))||(i.exports=r):this.alea=a}(0,t=n.nmd(t),n.amdD)},181:function(t,e,n){var r;!function(t,i){function o(t){var e=this,n="";e.x=0,e.y=0,e.z=0,e.w=0,e.next=function(){var t=e.x^e.x<<11;return e.x=e.y,e.y=e.z,e.z=e.w,e.w^=e.w>>>19^t^t>>>8},t===(0|t)?e.x=t:n+=t;for(var r=0;r<n.length+64;r++)e.x^=0|n.charCodeAt(r),e.next()}function u(t,e){return e.x=t.x,e.y=t.y,e.z=t.z,e.w=t.w,e}function a(t,e){var n=new o(t),r=e&&e.state,i=function(){return(n.next()>>>0)/4294967296};return i.double=function(){do{var t=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===t);return t},i.int32=n.next,i.quick=i,r&&("object"==typeof r&&u(r,n),i.state=function(){return u(n,{})}),i}i&&i.exports?i.exports=a:n.amdD&&n.amdO?void 0===(r=function(){return a}.call(e,n,e,i))||(i.exports=r):this.xor128=a}(0,t=n.nmd(t),n.amdD)},234:()=>{},369:function(t){t.exports=function(){"use strict";function t(){return!0}function e(){return!1}function n(){}const r="Argument is not a typed-function.";return function i(){function o(t){return"object"==typeof t&&null!==t&&t.constructor===Object}const u=[{name:"number",test:function(t){return"number"==typeof t}},{name:"string",test:function(t){return"string"==typeof t}},{name:"boolean",test:function(t){return"boolean"==typeof t}},{name:"Function",test:function(t){return"function"==typeof t}},{name:"Array",test:Array.isArray},{name:"Date",test:function(t){return t instanceof Date}},{name:"RegExp",test:function(t){return t instanceof RegExp}},{name:"Object",test:o},{name:"null",test:function(t){return null===t}},{name:"undefined",test:function(t){return void 0===t}}],a={name:"any",test:t,isAny:!0};let s,c,l=0,h={createCount:0};function f(t){const e=s.get(t);if(e)return e;let n='Unknown type "'+t+'"';const r=t.toLowerCase();let i;for(i of c)if(i.toLowerCase()===r){n+='. Did you mean "'+i+'" ?';break}throw new TypeError(n)}function p(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"any";const n=e?f(e).index:c.length,r=[];for(let e=0;e<t.length;++e){if(!t[e]||"string"!=typeof t[e].name||"function"!=typeof t[e].test)throw new TypeError("Object with properties {name: string, test: function} expected");const i=t[e].name;if(s.has(i))throw new TypeError('Duplicate type name "'+i+'"');r.push(i),s.set(i,{name:i,test:t[e].test,isAny:t[e].isAny,index:n+e,conversionsTo:[]})}const i=c.slice(n);c=c.slice(0,n).concat(r).concat(i);for(let t=n+r.length;t<c.length;++t)s.get(c[t]).index=t}function d(){s=new Map,c=[],l=0,p([a],!1)}function m(t){const e=c.filter((e=>{const n=s.get(e);return!n.isAny&&n.test(t)}));return e.length?e:["any"]}function D(t){return t&&"function"==typeof t&&"_typedFunctionData"in t}function g(t,e,n){if(!D(t))throw new TypeError(r);const i=n&&n.exact,o=F(Array.isArray(e)?e.join(","):e),u=y(o);if(!i||u in t.signatures){const e=t._typedFunctionData.signatureMap.get(u);if(e)return e}const a=o.length;let s,c;if(i){let e;for(e in s=[],t.signatures)s.push(t._typedFunctionData.signatureMap.get(e))}else s=t._typedFunctionData.signatures;for(let t=0;t<a;++t){const e=o[t],n=[];let r;for(r of s){const i=_(r.params,t);if(i&&(!e.restParam||i.restParam)){if(!i.hasAny){const t=E(i);if(e.types.some((e=>!t.has(e.name))))continue}n.push(r)}}if(s=n,0===s.length)break}for(c of s)if(c.params.length<=a)return c;throw new TypeError("Signature not found (signature: "+(t.name||"unnamed")+"("+y(o,", ")+"))")}function y(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:",";return t.map((t=>t.name)).join(e)}function v(t){const e=0===t.indexOf("..."),n=(e?t.length>3?t.slice(3):"any":t).split("|").map((t=>f(t.trim())));let r=!1,i=e?"...":"";return{types:n.map((function(t){return r=t.isAny||r,i+=t.name+"|",{name:t.name,typeIndex:t.index,test:t.test,isAny:t.isAny,conversion:null,conversionIndex:-1}})),name:i.slice(0,-1),hasAny:r,hasConversion:!1,restParam:e}}function w(t){const e=function(t){if(0===t.length)return[];const e=t.map(f);t.length>1&&e.sort(((t,e)=>t.index-e.index));let n=e[0].conversionsTo;if(1===t.length)return n;n=n.concat([]);const r=new Set(t);for(let t=1;t<e.length;++t){let i;for(i of e[t].conversionsTo)r.has(i.from)||(n.push(i),r.add(i.from))}return n}(t.types.map((t=>t.name)));let n=t.hasAny,r=t.name;const i=e.map((function(t){const e=f(t.from);return n=e.isAny||n,r+="|"+t.from,{name:t.from,typeIndex:e.index,test:e.test,isAny:e.isAny,conversion:t,conversionIndex:t.index}}));return{types:t.types.concat(i),name:r,hasAny:n,hasConversion:i.length>0,restParam:t.restParam}}function E(t){return t.typeSet||(t.typeSet=new Set,t.types.forEach((e=>t.typeSet.add(e.name)))),t.typeSet}function F(t){const e=[];if("string"!=typeof t)throw new TypeError("Signatures must be strings");const n=t.trim();if(""===n)return e;const r=n.split(",");for(let t=0;t<r.length;++t){const n=v(r[t].trim());if(n.restParam&&t!==r.length-1)throw new SyntaxError('Unexpected rest parameter "'+r[t]+'": only allowed for the last parameter');if(0===n.types.length)return null;e.push(n)}return e}function A(t){const e=V(t);return!!e&&e.restParam}function C(e){if(e&&0!==e.types.length){if(1===e.types.length)return f(e.types[0].name).test;if(2===e.types.length){const t=f(e.types[0].name).test,n=f(e.types[1].name).test;return function(e){return t(e)||n(e)}}{const t=e.types.map((function(t){return f(t.name).test}));return function(e){for(let n=0;n<t.length;n++)if(t[n](e))return!0;return!1}}}return t}function x(t){let e,n,r;if(A(t)){e=q(t).map(C);const n=e.length,r=C(V(t)),i=function(t){for(let e=n;e<t.length;e++)if(!r(t[e]))return!1;return!0};return function(t){for(let n=0;n<e.length;n++)if(!e[n](t[n]))return!1;return i(t)&&t.length>=n+1}}return 0===t.length?function(t){return 0===t.length}:1===t.length?(n=C(t[0]),function(t){return n(t[0])&&1===t.length}):2===t.length?(n=C(t[0]),r=C(t[1]),function(t){return n(t[0])&&r(t[1])&&2===t.length}):(e=t.map(C),function(t){for(let n=0;n<e.length;n++)if(!e[n](t[n]))return!1;return t.length===e.length})}function _(t,e){return e<t.length?t[e]:A(t)?V(t):null}function b(t,e){const n=_(t,e);return n?E(n):new Set}function B(t){return null===t.conversion||void 0===t.conversion}function M(t,e){const n=new Set;return t.forEach((t=>{const r=b(t.params,e);let i;for(i of r)n.add(i)})),n.has("any")?["any"]:Array.from(n)}function N(t,e,n){let r,i;const o=t||"unnamed";let u,a=n;for(u=0;u<e.length;u++){const t=[];if(a.forEach((n=>{const r=C(_(n.params,u));(u<n.params.length||A(n.params))&&r(e[u])&&t.push(n)})),0===t.length){if(i=M(a,u),i.length>0){const t=m(e[u]);return r=new TypeError("Unexpected type of argument in function "+o+" (expected: "+i.join(" or ")+", actual: "+t.join(" | ")+", index: "+u+")"),r.data={category:"wrongType",fn:o,index:u,actual:t,expected:i},r}}else a=t}const s=a.map((function(t){return A(t.params)?1/0:t.params.length}));if(e.length<Math.min.apply(null,s))return i=M(a,u),r=new TypeError("Too few arguments in function "+o+" (expected: "+i.join(" or ")+", index: "+e.length+")"),r.data={category:"tooFewArgs",fn:o,index:e.length,expected:i},r;const c=Math.max.apply(null,s);if(e.length>c)return r=new TypeError("Too many arguments in function "+o+" (expected: "+c+", actual: "+e.length+")"),r.data={category:"tooManyArgs",fn:o,index:e.length,expectedLength:c},r;const l=[];for(let t=0;t<e.length;++t)l.push(m(e[t]).join("|"));return r=new TypeError('Arguments of type "'+l.join(", ")+'" do not match any of the defined signatures of function '+o+"."),r.data={category:"mismatch",actual:l},r}function S(t){let e=c.length+1;for(let n=0;n<t.types.length;n++)B(t.types[n])&&(e=Math.min(e,t.types[n].typeIndex));return e}function I(t){let e=l+1;for(let n=0;n<t.types.length;n++)B(t.types[n])||(e=Math.min(e,t.types[n].conversionIndex));return e}function T(t,e){if(t.hasAny){if(!e.hasAny)return 1}else if(e.hasAny)return-1;if(t.restParam){if(!e.restParam)return 1}else if(e.restParam)return-1;if(t.hasConversion){if(!e.hasConversion)return 1}else if(e.hasConversion)return-1;const n=S(t)-S(e);if(n<0)return-1;if(n>0)return 1;const r=I(t)-I(e);return r<0?-1:r>0?1:0}function k(t,e){const n=t.params,r=e.params,i=V(n),o=V(r),u=A(n),a=A(r);if(u&&i.hasAny){if(!a||!o.hasAny)return 1}else if(a&&o.hasAny)return-1;let s,c=0,l=0;for(s of n)s.hasAny&&++c,s.hasConversion&&++l;let h=0,f=0;for(s of r)s.hasAny&&++h,s.hasConversion&&++f;if(c!==h)return c-h;if(u&&i.hasConversion){if(!a||!o.hasConversion)return 1}else if(a&&o.hasConversion)return-1;if(l!==f)return l-f;if(u){if(!a)return 1}else if(a)return-1;const p=(n.length-r.length)*(u?-1:1);if(0!==p)return p;const d=[];let m,D=0;for(let t=0;t<n.length;++t){const e=T(n[t],r[t]);d.push(e),D+=e}if(0!==D)return D;for(m of d)if(0!==m)return m;return 0}function P(t,e){let n=e;if(t.some((t=>t.hasConversion))){const r=A(t),i=t.map(R);n=function(){const t=[],n=r?arguments.length-1:arguments.length;for(let e=0;e<n;e++)t[e]=i[e](arguments[e]);return r&&(t[n]=arguments[n].map(i[n])),e.apply(this,t)}}let r=n;if(A(t)){const e=t.length-1;r=function(){return n.apply(this,H(arguments,0,e).concat([H(arguments,e)]))}}return r}function R(t){let e,n,r,i;const o=[],u=[];switch(t.types.forEach((function(t){t.conversion&&(o.push(f(t.conversion.from).test),u.push(t.conversion.convert))})),u.length){case 0:return function(t){return t};case 1:return e=o[0],r=u[0],function(t){return e(t)?r(t):t};case 2:return e=o[0],n=o[1],r=u[0],i=u[1],function(t){return e(t)?r(t):n(t)?i(t):t};default:return function(t){for(let e=0;e<u.length;e++)if(o[e](t))return u[e](t);return t}}}function z(t){return function t(e,n,r){if(n<e.length){const u=e[n];let a=[];if(u.restParam){const t=u.types.filter(B);t.length<u.types.length&&a.push({types:t,name:"..."+t.map((t=>t.name)).join("|"),hasAny:t.some((t=>t.isAny)),hasConversion:!1,restParam:!0}),a.push(u)}else a=u.types.map((function(t){return{types:[t],name:t.name,hasAny:t.isAny,hasConversion:t.conversion,restParam:!1}}));return i=a,o=function(i){return t(e,n+1,r.concat([i]))},Array.prototype.concat.apply([],i.map(o))}var i,o;return[r]}(t,0,[])}function O(t,e){const n=Math.max(t.length,e.length);for(let r=0;r<n;r++){const n=b(t,r),i=b(e,r);let o,u=!1;for(o of i)if(n.has(o)){u=!0;break}if(!u)return!1}const r=t.length,i=e.length,o=A(t),u=A(e);return o?u?r===i:i>=r:u?r>=i:r===i}function U(t,e,n){const r=[];let i;for(i of t){let t=n[i];if("number"!=typeof t)throw new TypeError('No definition for referenced signature "'+i+'"');if(t=e[t],"function"!=typeof t)return!1;r.push(t)}return r}function L(t,e,n){const r=function(t){return t.map((t=>W(t)?X(t.referToSelf.callback):Y(t)?Z(t.referTo.references,t.referTo.callback):t))}(t),i=new Array(r.length).fill(!1);let o=!0;for(;o;){o=!1;let t=!0;for(let u=0;u<r.length;++u){if(i[u])continue;const a=r[u];if(W(a))r[u]=a.referToSelf.callback(n),r[u].referToSelf=a.referToSelf,i[u]=!0,t=!1;else if(Y(a)){const n=U(a.referTo.references,r,e);n?(r[u]=a.referTo.callback.apply(this,n),r[u].referTo=a.referTo,i[u]=!0,t=!1):o=!0}}if(t&&o)throw new SyntaxError("Circular reference detected in resolving typed.referTo")}return r}function $(t,r){if(h.createCount++,0===Object.keys(r).length)throw new SyntaxError("No signatures provided");h.warnAgainstDeprecatedThis&&function(t){const e=/\bthis(\(|\.signatures\b)/;Object.keys(t).forEach((n=>{const r=t[n];if(e.test(r.toString()))throw new SyntaxError("Using `this` to self-reference a function is deprecated since typed-function@3. Use typed.referTo and typed.referToSelf instead.")}))}(r);const i=[],o=[],u={},a=[];let s;for(s in r){if(!Object.prototype.hasOwnProperty.call(r,s))continue;const t=F(s);if(!t)continue;i.forEach((function(e){if(O(e,t))throw new TypeError('Conflicting signatures "'+y(e)+'" and "'+y(t)+'".')})),i.push(t);const e=o.length;o.push(r[s]);const n=t.map(w);let c;for(c of z(n)){const t=y(c);a.push({params:c,name:t,fn:e}),c.every((t=>!t.hasConversion))&&(u[t]=e)}}a.sort(k);const c=L(o,u,at);let l;for(l in u)Object.prototype.hasOwnProperty.call(u,l)&&(u[l]=c[u[l]]);const f=[],p=new Map;for(l of a)p.has(l.name)||(l.fn=c[l.fn],f.push(l),p.set(l.name,l));const d=f[0]&&f[0].params.length<=2&&!A(f[0].params),m=f[1]&&f[1].params.length<=2&&!A(f[1].params),D=f[2]&&f[2].params.length<=2&&!A(f[2].params),g=f[3]&&f[3].params.length<=2&&!A(f[3].params),v=f[4]&&f[4].params.length<=2&&!A(f[4].params),E=f[5]&&f[5].params.length<=2&&!A(f[5].params),_=d&&m&&D&&g&&v&&E;for(let t=0;t<f.length;++t)f[t].test=x(f[t].params);const b=d?C(f[0].params[0]):e,B=m?C(f[1].params[0]):e,M=D?C(f[2].params[0]):e,N=g?C(f[3].params[0]):e,S=v?C(f[4].params[0]):e,I=E?C(f[5].params[0]):e,T=d?C(f[0].params[1]):e,R=m?C(f[1].params[1]):e,U=D?C(f[2].params[1]):e,$=g?C(f[3].params[1]):e,j=v?C(f[4].params[1]):e,q=E?C(f[5].params[1]):e;for(let t=0;t<f.length;++t)f[t].implementation=P(f[t].params,f[t].fn);const V=d?f[0].implementation:n,H=m?f[1].implementation:n,Z=D?f[2].implementation:n,X=g?f[3].implementation:n,Y=v?f[4].implementation:n,W=E?f[5].implementation:n,J=d?f[0].params.length:-1,G=m?f[1].params.length:-1,K=D?f[2].params.length:-1,Q=g?f[3].params.length:-1,tt=v?f[4].params.length:-1,et=E?f[5].params.length:-1,nt=_?6:0,rt=f.length,it=f.map((t=>t.test)),ot=f.map((t=>t.implementation)),ut=function(){for(let t=nt;t<rt;t++)if(it[t](arguments))return ot[t].apply(this,arguments);return h.onMismatch(t,arguments,f)};function at(t,e){return arguments.length===J&&b(t)&&T(e)?V.apply(this,arguments):arguments.length===G&&B(t)&&R(e)?H.apply(this,arguments):arguments.length===K&&M(t)&&U(e)?Z.apply(this,arguments):arguments.length===Q&&N(t)&&$(e)?X.apply(this,arguments):arguments.length===tt&&S(t)&&j(e)?Y.apply(this,arguments):arguments.length===et&&I(t)&&q(e)?W.apply(this,arguments):ut.apply(this,arguments)}try{Object.defineProperty(at,"name",{value:t})}catch(t){}return at.signatures=u,at._typedFunctionData={signatures:f,signatureMap:p},at}function j(t,e,n){throw N(t,e,n)}function q(t){return H(t,0,t.length-1)}function V(t){return t[t.length-1]}function H(t,e,n){return Array.prototype.slice.call(t,e,n)}function Z(t,e){return{referTo:{references:t,callback:e}}}function X(t){if("function"!=typeof t)throw new TypeError("Callback function expected as first argument");return{referToSelf:{callback:t}}}function Y(t){return t&&"object"==typeof t.referTo&&Array.isArray(t.referTo.references)&&"function"==typeof t.referTo.callback}function W(t){return t&&"object"==typeof t.referToSelf&&"function"==typeof t.referToSelf.callback}function J(t,e){if(!t)return e;if(e&&e!==t){const n=new Error("Function names do not match (expected: "+t+", actual: "+e+")");throw n.data={actual:e,expected:t},n}return t}function G(t){let e;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&(D(t[n])||"string"==typeof t[n].signature)&&(e=J(e,t[n].name));return e}function K(t,e){let n;for(n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(n in t&&e[n]!==t[n]){const r=new Error('Signature "'+n+'" is defined twice');throw r.data={signature:n,sourceFunction:e[n],destFunction:t[n]},r}t[n]=e[n]}}d(),p(u);const Q=h;function tt(t){if(!t||"string"!=typeof t.from||"string"!=typeof t.to||"function"!=typeof t.convert)throw new TypeError("Object with properties {from: string, to: string, convert: function} expected");if(t.to===t.from)throw new SyntaxError('Illegal to define conversion from "'+t.from+'" to itself.')}return h=function(t){const e="string"==typeof t;let n=e?t:"";const r={};for(let t=e?1:0;t<arguments.length;++t){const i=arguments[t];let u,a={};if("function"==typeof i?(u=i.name,"string"==typeof i.signature?a[i.signature]=i:D(i)&&(a=i.signatures)):o(i)&&(a=i,e||(u=G(i))),0===Object.keys(a).length){const e=new TypeError("Argument to 'typed' at index "+t+" is not a (typed) function, nor an object with signatures as keys and functions as values.");throw e.data={index:t,argument:i},e}e||(n=J(n,u)),K(r,a)}return $(n||"",r)},h.create=i,h.createCount=Q.createCount,h.onMismatch=j,h.throwMismatchError=j,h.createError=N,h.clear=d,h.clearConversions=function(){let t;for(t of c)s.get(t).conversionsTo=[];l=0},h.addTypes=p,h._findType=f,h.referTo=function(){const t=q(arguments).map((t=>y(F(t)))),e=V(arguments);if("function"!=typeof e)throw new TypeError("Callback function expected as last argument");return Z(t,e)},h.referToSelf=X,h.convert=function(t,e){const n=f(e);if(n.test(t))return t;const r=n.conversionsTo;if(0===r.length)throw new Error("There are no conversions to "+e+" defined.");for(let e=0;e<r.length;e++)if(f(r[e].from).test(t))return r[e].convert(t);throw new Error("Cannot convert "+t+" to "+e)},h.findSignature=g,h.find=function(t,e,n){return g(t,e,n).implementation},h.isTypedFunction=D,h.warnAgainstDeprecatedThis=!0,h.addType=function(t,e){let n="any";!1!==e&&s.has("Object")&&(n="Object"),h.addTypes([t],n)},h.addConversion=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{override:!1};tt(t);const n=f(t.to),r=n.conversionsTo.find((e=>e.from===t.from));if(r){if(!e||!e.override)throw new Error('There is already a conversion from "'+t.from+'" to "'+n.name+'"');h.removeConversion({from:r.from,to:t.to,convert:r.convert})}n.conversionsTo.push({from:t.from,convert:t.convert,index:l++})},h.addConversions=function(t,e){t.forEach((t=>h.addConversion(t,e)))},h.removeConversion=function(t){tt(t);const e=f(t.to),n=function(t,e){for(let n=0;n<t.length;n++)if(e(t[n]))return t[n]}(e.conversionsTo,(e=>e.from===t.from));if(!n)throw new Error("Attempt to remove nonexistent conversion from "+t.from+" to "+t.to);if(n.convert!==t.convert)throw new Error("Conversion to remove does not match existing conversion");const r=e.conversionsTo.indexOf(n);e.conversionsTo.splice(r,1)},h.resolve=function(t,e){if(!D(t))throw new TypeError(r);const n=t._typedFunctionData.signatures;for(let t=0;t<n.length;++t)if(n[t].test(e))return n[t];return null},h}()}()},391:(t,e,n)=>{var r=n(180),i=n(181),o=n(31),u=n(67),a=n(833),s=n(717),c=n(801);c.alea=r,c.xor128=i,c.xorwow=o,c.xorshift7=u,c.xor4096=a,c.tychei=s,t.exports=c},707:(t,e,n)=>{var r,i;void 0===(i="function"==typeof(r=function(){var t={172351395:{name:"EBML",type:"Container"},646:{name:"EBMLVersion",type:"Uint"},759:{name:"EBMLReadVersion",type:"Uint"},754:{name:"EBMLMaxIDLength",type:"Uint"},755:{name:"EBMLMaxSizeLength",type:"Uint"},642:{name:"DocType",type:"String"},647:{name:"DocTypeVersion",type:"Uint"},645:{name:"DocTypeReadVersion",type:"Uint"},108:{name:"Void",type:"Binary"},63:{name:"CRC-32",type:"Binary"},190023271:{name:"SignatureSlot",type:"Container"},16010:{name:"SignatureAlgo",type:"Uint"},16026:{name:"SignatureHash",type:"Uint"},16037:{name:"SignaturePublicKey",type:"Binary"},16053:{name:"Signature",type:"Binary"},15963:{name:"SignatureElements",type:"Container"},15995:{name:"SignatureElementList",type:"Container"},9522:{name:"SignedElement",type:"Binary"},139690087:{name:"Segment",type:"Container"},21863284:{name:"SeekHead",type:"Container"},3515:{name:"Seek",type:"Container"},5035:{name:"SeekID",type:"Binary"},5036:{name:"SeekPosition",type:"Uint"},88713574:{name:"Info",type:"Container"},13220:{name:"SegmentUID",type:"Binary"},13188:{name:"SegmentFilename",type:"String"},1882403:{name:"PrevUID",type:"Binary"},1868715:{name:"PrevFilename",type:"String"},2013475:{name:"NextUID",type:"Binary"},1999803:{name:"NextFilename",type:"String"},1092:{name:"SegmentFamily",type:"Binary"},10532:{name:"ChapterTranslate",type:"Container"},10748:{name:"ChapterTranslateEditionUID",type:"Uint"},10687:{name:"ChapterTranslateCodec",type:"Uint"},10661:{name:"ChapterTranslateID",type:"Binary"},710577:{name:"TimecodeScale",type:"Uint"},1161:{name:"Duration",type:"Float"},1121:{name:"DateUTC",type:"Date"},15273:{name:"Title",type:"String"},3456:{name:"MuxingApp",type:"String"},5953:{name:"WritingApp",type:"String"},103:{name:"Timecode",type:"Uint"},6228:{name:"SilentTracks",type:"Container"},6359:{name:"SilentTrackNumber",type:"Uint"},39:{name:"Position",type:"Uint"},43:{name:"PrevSize",type:"Uint"},35:{name:"SimpleBlock",type:"Binary"},32:{name:"BlockGroup",type:"Container"},33:{name:"Block",type:"Binary"},34:{name:"BlockVirtual",type:"Binary"},13729:{name:"BlockAdditions",type:"Container"},38:{name:"BlockMore",type:"Container"},110:{name:"BlockAddID",type:"Uint"},37:{name:"BlockAdditional",type:"Binary"},27:{name:"BlockDuration",type:"Uint"},122:{name:"ReferencePriority",type:"Uint"},123:{name:"ReferenceBlock",type:"Int"},125:{name:"ReferenceVirtual",type:"Int"},36:{name:"CodecState",type:"Binary"},13730:{name:"DiscardPadding",type:"Int"},14:{name:"Slices",type:"Container"},104:{name:"TimeSlice",type:"Container"},76:{name:"LaceNumber",type:"Uint"},77:{name:"FrameNumber",type:"Uint"},75:{name:"BlockAdditionID",type:"Uint"},78:{name:"Delay",type:"Uint"},79:{name:"SliceDuration",type:"Uint"},72:{name:"ReferenceFrame",type:"Container"},73:{name:"ReferenceOffset",type:"Uint"},74:{name:"ReferenceTimeCode",type:"Uint"},47:{name:"EncryptedBlock",type:"Binary"},106212971:{name:"Tracks",type:"Container"},46:{name:"TrackEntry",type:"Container"},87:{name:"TrackNumber",type:"Uint"},13253:{name:"TrackUID",type:"Uint"},3:{name:"TrackType",type:"Uint"},57:{name:"FlagEnabled",type:"Uint"},8:{name:"FlagDefault",type:"Uint"},5546:{name:"FlagForced",type:"Uint"},28:{name:"FlagLacing",type:"Uint"},11751:{name:"MinCache",type:"Uint"},11768:{name:"MaxCache",type:"Uint"},254851:{name:"DefaultDuration",type:"Uint"},216698:{name:"DefaultDecodedFieldDuration",type:"Uint"},209231:{name:"TrackTimecodeScale",type:"Float"},4991:{name:"TrackOffset",type:"Int"},5614:{name:"MaxBlockAdditionID",type:"Uint"},4974:{name:"Name",type:"String"},177564:{name:"Language",type:"String"},6:{name:"CodecID",type:"String"},9122:{name:"CodecPrivate",type:"Binary"},362120:{name:"CodecName",type:"String"},13382:{name:"AttachmentLink",type:"Uint"},1742487:{name:"CodecSettings",type:"String"},1785920:{name:"CodecInfoURL",type:"String"},438848:{name:"CodecDownloadURL",type:"String"},42:{name:"CodecDecodeAll",type:"Uint"},12203:{name:"TrackOverlay",type:"Uint"},5802:{name:"CodecDelay",type:"Uint"},5819:{name:"SeekPreRoll",type:"Uint"},9764:{name:"TrackTranslate",type:"Container"},9980:{name:"TrackTranslateEditionUID",type:"Uint"},9919:{name:"TrackTranslateCodec",type:"Uint"},9893:{name:"TrackTranslateTrackID",type:"Binary"},96:{name:"Video",type:"Container"},26:{name:"FlagInterlaced",type:"Uint"},5048:{name:"StereoMode",type:"Uint"},5056:{name:"AlphaMode",type:"Uint"},5049:{name:"OldStereoMode",type:"Uint"},48:{name:"PixelWidth",type:"Uint"},58:{name:"PixelHeight",type:"Uint"},5290:{name:"PixelCropBottom",type:"Uint"},5307:{name:"PixelCropTop",type:"Uint"},5324:{name:"PixelCropLeft",type:"Uint"},5341:{name:"PixelCropRight",type:"Uint"},5296:{name:"DisplayWidth",type:"Uint"},5306:{name:"DisplayHeight",type:"Uint"},5298:{name:"DisplayUnit",type:"Uint"},5299:{name:"AspectRatioType",type:"Uint"},963876:{name:"ColourSpace",type:"Binary"},1029411:{name:"GammaValue",type:"Float"},230371:{name:"FrameRate",type:"Float"},97:{name:"Audio",type:"Container"},53:{name:"SamplingFrequency",type:"Float"},14517:{name:"OutputSamplingFrequency",type:"Float"},31:{name:"Channels",type:"Uint"},15739:{name:"ChannelPositions",type:"Binary"},8804:{name:"BitDepth",type:"Uint"},98:{name:"TrackOperation",type:"Container"},99:{name:"TrackCombinePlanes",type:"Container"},100:{name:"TrackPlane",type:"Container"},101:{name:"TrackPlaneUID",type:"Uint"},102:{name:"TrackPlaneType",type:"Uint"},105:{name:"TrackJoinBlocks",type:"Container"},109:{name:"TrackJoinUID",type:"Uint"},64:{name:"TrickTrackUID",type:"Uint"},65:{name:"TrickTrackSegmentUID",type:"Binary"},70:{name:"TrickTrackFlag",type:"Uint"},71:{name:"TrickMasterTrackUID",type:"Uint"},68:{name:"TrickMasterTrackSegmentUID",type:"Binary"},11648:{name:"ContentEncodings",type:"Container"},8768:{name:"ContentEncoding",type:"Container"},4145:{name:"ContentEncodingOrder",type:"Uint"},4146:{name:"ContentEncodingScope",type:"Uint"},4147:{name:"ContentEncodingType",type:"Uint"},4148:{name:"ContentCompression",type:"Container"},596:{name:"ContentCompAlgo",type:"Uint"},597:{name:"ContentCompSettings",type:"Binary"},4149:{name:"ContentEncryption",type:"Container"},2017:{name:"ContentEncAlgo",type:"Uint"},2018:{name:"ContentEncKeyID",type:"Binary"},2019:{name:"ContentSignature",type:"Binary"},2020:{name:"ContentSigKeyID",type:"Binary"},2021:{name:"ContentSigAlgo",type:"Uint"},2022:{name:"ContentSigHashAlgo",type:"Uint"},206814059:{name:"Cues",type:"Container"},59:{name:"CuePoint",type:"Container"},51:{name:"CueTime",type:"Uint"},55:{name:"CueTrackPositions",type:"Container"},119:{name:"CueTrack",type:"Uint"},113:{name:"CueClusterPosition",type:"Uint"},112:{name:"CueRelativePosition",type:"Uint"},50:{name:"CueDuration",type:"Uint"},4984:{name:"CueBlockNumber",type:"Uint"},106:{name:"CueCodecState",type:"Uint"},91:{name:"CueReference",type:"Container"},22:{name:"CueRefTime",type:"Uint"},23:{name:"CueRefCluster",type:"Uint"},4959:{name:"CueRefNumber",type:"Uint"},107:{name:"CueRefCodecState",type:"Uint"},155296873:{name:"Attachments",type:"Container"},8615:{name:"AttachedFile",type:"Container"},1662:{name:"FileDescription",type:"String"},1646:{name:"FileName",type:"String"},1632:{name:"FileMimeType",type:"String"},1628:{name:"FileData",type:"Binary"},1710:{name:"FileUID",type:"Uint"},1653:{name:"FileReferral",type:"Binary"},1633:{name:"FileUsedStartTime",type:"Uint"},1634:{name:"FileUsedEndTime",type:"Uint"},4433776:{name:"Chapters",type:"Container"},1465:{name:"EditionEntry",type:"Container"},1468:{name:"EditionUID",type:"Uint"},1469:{name:"EditionFlagHidden",type:"Uint"},1499:{name:"EditionFlagDefault",type:"Uint"},1501:{name:"EditionFlagOrdered",type:"Uint"},54:{name:"ChapterAtom",type:"Container"},13252:{name:"ChapterUID",type:"Uint"},5716:{name:"ChapterStringUID",type:"String"},17:{name:"ChapterTimeStart",type:"Uint"},18:{name:"ChapterTimeEnd",type:"Uint"},24:{name:"ChapterFlagHidden",type:"Uint"},1432:{name:"ChapterFlagEnabled",type:"Uint"},11879:{name:"ChapterSegmentUID",type:"Binary"},11964:{name:"ChapterSegmentEditionUID",type:"Uint"},9155:{name:"ChapterPhysicalEquiv",type:"Uint"},15:{name:"ChapterTrack",type:"Container"},9:{name:"ChapterTrackNumber",type:"Uint"},0:{name:"ChapterDisplay",type:"Container"},5:{name:"ChapString",type:"String"},892:{name:"ChapLanguage",type:"String"},894:{name:"ChapCountry",type:"String"},10564:{name:"ChapProcess",type:"Container"},10581:{name:"ChapProcessCodecID",type:"Uint"},1293:{name:"ChapProcessPrivate",type:"Binary"},10513:{name:"ChapProcessCommand",type:"Container"},10530:{name:"ChapProcessTime",type:"Uint"},10547:{name:"ChapProcessData",type:"Binary"},39109479:{name:"Tags",type:"Container"},13171:{name:"Tag",type:"Container"},9152:{name:"Targets",type:"Container"},10442:{name:"TargetTypeValue",type:"Uint"},9162:{name:"TargetType",type:"String"},9157:{name:"TagTrackUID",type:"Uint"},9161:{name:"TagEditionUID",type:"Uint"},9156:{name:"TagChapterUID",type:"Uint"},9158:{name:"TagAttachmentUID",type:"Uint"},10184:{name:"SimpleTag",type:"Container"},1443:{name:"TagName",type:"String"},1146:{name:"TagLanguage",type:"String"},1156:{name:"TagDefault",type:"Uint"},1159:{name:"TagString",type:"String"},1157:{name:"TagBinary",type:"Binary"}};function e(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t}function n(t,e){this.name=t||"Unknown",this.type=e||"Unknown"}function r(t,e){n.call(this,t,e||"Uint")}function i(t){return t.length%2==1?"0"+t:t}function o(t,e){n.call(this,t,e||"Float")}function u(t,e){n.call(this,t,e||"Container")}function a(t){u.call(this,"File","File"),this.setSource(t)}function s(t,e,n,r){if("object"==typeof n&&(r=n,n=void 0),!n)return new Promise((function(n){s(t,e,n,r)}));try{var i=new FileReader;i.onloadend=function(){try{var o=new a(new Uint8Array(i.result));o.fixDuration(e,r)&&(t=o.toBlob(t.type))}catch(t){}n(t)},i.readAsArrayBuffer(t)}catch(e){n(t)}}return n.prototype.updateBySource=function(){},n.prototype.setSource=function(t){this.source=t,this.updateBySource()},n.prototype.updateByData=function(){},n.prototype.setData=function(t){this.data=t,this.updateByData()},e(r,n),r.prototype.updateBySource=function(){this.data="";for(var t=0;t<this.source.length;t++){var e=this.source[t].toString(16);this.data+=i(e)}},r.prototype.updateByData=function(){var t=this.data.length/2;this.source=new Uint8Array(t);for(var e=0;e<t;e++){var n=this.data.substr(2*e,2);this.source[e]=parseInt(n,16)}},r.prototype.getValue=function(){return parseInt(this.data,16)},r.prototype.setValue=function(t){this.setData(i(t.toString(16)))},e(o,n),o.prototype.getFloatArrayType=function(){return this.source&&4===this.source.length?Float32Array:Float64Array},o.prototype.updateBySource=function(){var t=this.source.reverse(),e=new(this.getFloatArrayType())(t.buffer);this.data=e[0]},o.prototype.updateByData=function(){var t=new(this.getFloatArrayType())([this.data]),e=new Uint8Array(t.buffer);this.source=e.reverse()},o.prototype.getValue=function(){return this.data},o.prototype.setValue=function(t){this.setData(t)},e(u,n),u.prototype.readByte=function(){return this.source[this.offset++]},u.prototype.readUint=function(){for(var t=this.readByte(),e=8-t.toString(2).length,n=t-(1<<7-e),r=0;r<e;r++)n*=256,n+=this.readByte();return n},u.prototype.updateBySource=function(){for(this.data=[],this.offset=0;this.offset<this.source.length;this.offset=a){var e=this.readUint(),i=this.readUint(),a=Math.min(this.offset+i,this.source.length),s=this.source.slice(this.offset,a),c=t[e]||{name:"Unknown",type:"Unknown"},l=n;switch(c.type){case"Container":l=u;break;case"Uint":l=r;break;case"Float":l=o}var h=new l(c.name,c.type);h.setSource(s),this.data.push({id:e,idHex:e.toString(16),data:h})}},u.prototype.writeUint=function(t,e){for(var n=1,r=128;t>=r&&n<8;n++,r*=128);if(!e)for(var i=r+t,o=n-1;o>=0;o--){var u=i%256;this.source[this.offset+o]=u,i=(i-u)/256}this.offset+=n},u.prototype.writeSections=function(t){this.offset=0;for(var e=0;e<this.data.length;e++){var n=this.data[e],r=n.data.source,i=r.length;this.writeUint(n.id,t),this.writeUint(i,t),t||this.source.set(r,this.offset),this.offset+=i}return this.offset},u.prototype.updateByData=function(){var t=this.writeSections("draft");this.source=new Uint8Array(t),this.writeSections()},u.prototype.getSectionById=function(t){for(var e=0;e<this.data.length;e++){var n=this.data[e];if(n.id===t)return n.data}return null},e(a,u),a.prototype.fixDuration=function(t,e){var n=e&&e.logger;void 0===n?n=function(t){console.log(t)}:n||(n=function(){});var r=this.getSectionById(139690087);if(!r)return n("[fix-webm-duration] Segment section is missing"),!1;var i=r.getSectionById(88713574);if(!i)return n("[fix-webm-duration] Info section is missing"),!1;var u=i.getSectionById(710577);if(!u)return n("[fix-webm-duration] TimecodeScale section is missing"),!1;var a=i.getSectionById(1161);if(a){if(!(a.getValue()<=0))return n(`[fix-webm-duration] Duration section is present, and the value is ${a.getValue()}`),!1;n(`[fix-webm-duration] Duration section is present, but the value is ${a.getValue()}`),a.setValue(t)}else n("[fix-webm-duration] Duration section is missing"),(a=new o("Duration","Float")).setValue(t),i.data.push({id:1161,data:a});return u.setValue(1e6),i.updateByData(),r.updateByData(),this.updateByData(),!0},a.prototype.toBlob=function(t){return new Blob([this.source.buffer],{type:t||"video/webm"})},s.default=s,s})?r.call(e,n,e,t):r)||(t.exports=i)},717:function(t,e,n){var r;!function(t,i){function o(t){var e=this,n="";e.next=function(){var t=e.b,n=e.c,r=e.d,i=e.a;return t=t<<25^t>>>7^n,n=n-r|0,r=r<<24^r>>>8^i,i=i-t|0,e.b=t=t<<20^t>>>12^n,e.c=n=n-r|0,e.d=r<<16^n>>>16^i,e.a=i-t|0},e.a=0,e.b=0,e.c=-1640531527,e.d=1367130551,t===Math.floor(t)?(e.a=t/4294967296|0,e.b=0|t):n+=t;for(var r=0;r<n.length+20;r++)e.b^=0|n.charCodeAt(r),e.next()}function u(t,e){return e.a=t.a,e.b=t.b,e.c=t.c,e.d=t.d,e}function a(t,e){var n=new o(t),r=e&&e.state,i=function(){return(n.next()>>>0)/4294967296};return i.double=function(){do{var t=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===t);return t},i.int32=n.next,i.quick=i,r&&("object"==typeof r&&u(r,n),i.state=function(){return u(n,{})}),i}i&&i.exports?i.exports=a:n.amdD&&n.amdO?void 0===(r=function(){return a}.call(e,n,e,i))||(i.exports=r):this.tychei=a}(0,t=n.nmd(t),n.amdD)},801:function(t,e,n){var r;!function(i,o,u){var a,s=256,c=u.pow(s,6),l=u.pow(2,52),h=2*l,f=255;function p(t,e,n){var r=[],f=g(D((e=1==e?{entropy:!0}:e||{}).entropy?[t,y(o)]:null==t?function(){try{var t;return a&&(t=a.randomBytes)?t=t(s):(t=new Uint8Array(s),(i.crypto||i.msCrypto).getRandomValues(t)),y(t)}catch(t){var e=i.navigator,n=e&&e.plugins;return[+new Date,i,n,i.screen,y(o)]}}():t,3),r),p=new d(r),v=function(){for(var t=p.g(6),e=c,n=0;t<l;)t=(t+n)*s,e*=s,n=p.g(1);for(;t>=h;)t/=2,e/=2,n>>>=1;return(t+n)/e};return v.int32=function(){return 0|p.g(4)},v.quick=function(){return p.g(4)/4294967296},v.double=v,g(y(p.S),o),(e.pass||n||function(t,e,n,r){return r&&(r.S&&m(r,p),t.state=function(){return m(p,{})}),n?(u.random=t,e):t})(v,f,"global"in e?e.global:this==u,e.state)}function d(t){var e,n=t.length,r=this,i=0,o=r.i=r.j=0,u=r.S=[];for(n||(t=[n++]);i<s;)u[i]=i++;for(i=0;i<s;i++)u[i]=u[o=f&o+t[i%n]+(e=u[i])],u[o]=e;(r.g=function(t){for(var e,n=0,i=r.i,o=r.j,u=r.S;t--;)e=u[i=f&i+1],n=n*s+u[f&(u[i]=u[o=f&o+e])+(u[o]=e)];return r.i=i,r.j=o,n})(s)}function m(t,e){return e.i=t.i,e.j=t.j,e.S=t.S.slice(),e}function D(t,e){var n,r=[],i=typeof t;if(e&&"object"==i)for(n in t)try{r.push(D(t[n],e-1))}catch(t){}return r.length?r:"string"==i?t:t+"\0"}function g(t,e){for(var n,r=t+"",i=0;i<r.length;)e[f&i]=f&(n^=19*e[f&i])+r.charCodeAt(i++);return y(e)}function y(t){return String.fromCharCode.apply(0,t)}if(g(u.random(),o),t.exports){t.exports=p;try{a=n(234)}catch(t){}}else void 0===(r=function(){return p}.call(e,n,e,t))||(t.exports=r)}("undefined"!=typeof self?self:this,[],Math)},833:function(t,e,n){var r;!function(t,i){function o(t){var e=this;e.next=function(){var t,n,r=e.w,i=e.X,o=e.i;return e.w=r=r+1640531527|0,n=i[o+34&127],t=i[o=o+1&127],n^=n<<13,t^=t<<17,n^=n>>>15,t^=t>>>12,n=i[o]=n^t,e.i=o,n+(r^r>>>16)|0},function(t,e){var n,r,i,o,u,a=[],s=128;for(e===(0|e)?(r=e,e=null):(e+="\0",r=0,s=Math.max(s,e.length)),i=0,o=-32;o<s;++o)e&&(r^=e.charCodeAt((o+32)%e.length)),0===o&&(u=r),r^=r<<10,r^=r>>>15,r^=r<<4,r^=r>>>13,o>=0&&(u=u+1640531527|0,i=0==(n=a[127&o]^=r+u)?i+1:0);for(i>=128&&(a[127&(e&&e.length||0)]=-1),i=127,o=512;o>0;--o)r=a[i+34&127],n=a[i=i+1&127],r^=r<<13,n^=n<<17,r^=r>>>15,n^=n>>>12,a[i]=r^n;t.w=u,t.X=a,t.i=i}(e,t)}function u(t,e){return e.i=t.i,e.w=t.w,e.X=t.X.slice(),e}function a(t,e){null==t&&(t=+new Date);var n=new o(t),r=e&&e.state,i=function(){return(n.next()>>>0)/4294967296};return i.double=function(){do{var t=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===t);return t},i.int32=n.next,i.quick=i,r&&(r.X&&u(r,n),i.state=function(){return u(n,{})}),i}i&&i.exports?i.exports=a:n.amdD&&n.amdO?void 0===(r=function(){return a}.call(e,n,e,i))||(i.exports=r):this.xor4096=a}(0,t=n.nmd(t),n.amdD)},880:t=>{t.exports=function t(e,n){"use strict";var r,i,o=/(^([+\-]?(?:0|[1-9]\d*)(?:\.\d*)?(?:[eE][+\-]?\d+)?)?$|^0x[0-9a-f]+$|\d+)/gi,u=/(^[ ]*|[ ]*$)/g,a=/(^([\w ]+,?[\w ]+)?[\w ]+,?[\w ]+\d+:\d+(:\d+)?[\w ]?|^\d{1,4}[\/\-]\d{1,4}[\/\-]\d{1,4}|^\w+, \w+ \d+, \d{4})/,s=/^0x[0-9a-f]+$/i,c=/^0/,l=function(e){return t.insensitive&&(""+e).toLowerCase()||""+e},h=l(e).replace(u,"")||"",f=l(n).replace(u,"")||"",p=h.replace(o,"\0$1\0").replace(/\0$/,"").replace(/^\0/,"").split("\0"),d=f.replace(o,"\0$1\0").replace(/\0$/,"").replace(/^\0/,"").split("\0"),m=parseInt(h.match(s),16)||1!==p.length&&h.match(a)&&Date.parse(h),D=parseInt(f.match(s),16)||m&&f.match(a)&&Date.parse(f)||null;if(D){if(m<D)return-1;if(m>D)return 1}for(var g=0,y=Math.max(p.length,d.length);g<y;g++){if(r=!(p[g]||"").match(c)&&parseFloat(p[g])||p[g]||0,i=!(d[g]||"").match(c)&&parseFloat(d[g])||d[g]||0,isNaN(r)!==isNaN(i))return isNaN(r)?1:-1;if(typeof r!=typeof i&&(r+="",i+=""),r<i)return-1;if(r>i)return 1}return 0}}},e={};function n(r){var i=e[r];if(void 0!==i)return i.exports;var o=e[r]={id:r,loaded:!1,exports:{}};return t[r].call(o.exports,o,o.exports,n),o.loaded=!0,o.exports}n.amdD=function(){throw new Error("define cannot be used indirect")},n.amdO={},n.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return n.d(e,{a:e}),e},n.d=(t,e)=>{for(var r in e)n.o(e,r)&&!n.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),n.nmd=t=>(t.paths=[],t.children||(t.children=[]),t),(()=>{"use strict";const t=86400,e=6957e7,r=1989e30,i=1.8981245973360504e30,o=149597871e5;function u(){return u=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},u.apply(null,arguments)}var a={relTol:1e-12,absTol:1e-15,matrix:"Matrix",number:"number",numberFallback:"number",precision:64,predictable:!1,randomSeed:null},s=function(t){if(t)throw new Error("The global config is readonly. \nPlease create a mathjs instance if you want to change the default configuration. \nExample:\n\n  import { create, all } from 'mathjs';\n  const mathjs = create(all);\n  mathjs.config({ number: 'BigNumber' });\n");return Object.freeze(a)};u(s,a,{MATRIX_OPTIONS:["Matrix","Array"],NUMBER_OPTIONS:["number","BigNumber","Fraction"]});var c,l,h=9e15,f=1e9,p="0123456789abcdef",d="2.3025850929940456840179914546843642076011014886287729760333279009675726096773524802359972050895982983419677840422862486334095254650828067566662873690987816894829072083255546808437998948262331985283935053089653777326288461633662222876982198867465436674744042432743651550489343149393914796194044002221051017141748003688084012647080685567743216228355220114804663715659121373450747856947683463616792101806445070648000277502684916746550586856935673420670581136429224554405758925724208241314695689016758940256776311356919292033376587141660230105703089634572075440370847469940168269282808481184289314848524948644871927809676271275775397027668605952496716674183485704422507197965004714951050492214776567636938662976979522110718264549734772662425709429322582798502585509785265383207606726317164309505995087807523710333101197857547331541421808427543863591778117054309827482385045648019095610299291824318237525357709750539565187697510374970888692180205189339507238539205144634197265287286965110862571492198849978748873771345686209167058",m="3.1415926535897932384626433832795028841971693993751058209749445923078164062862089986280348253421170679821480865132823066470938446095505822317253594081284811174502841027019385211055596446229489549303819644288109756659334461284756482337867831652712019091456485669234603486104543266482133936072602491412737245870066063155881748815209209628292540917153643678925903600113305305488204665213841469519415116094330572703657595919530921861173819326117931051185480744623799627495673518857527248912279381830119491298336733624406566430860213949463952247371907021798609437027705392171762931767523846748184676694051320005681271452635608277857713427577896091736371787214684409012249534301465495853710507922796892589235420199561121290219608640344181598136297747713099605187072113499999983729780499510597317328160963185950244594553469083026425223082533446850352619311881710100031378387528865875332083814206171776691473035982534904287554687311595628638823537875937519577818577805321712268066130019278766111959092164201989380952572010654858632789",D={precision:20,rounding:4,modulo:1,toExpNeg:-7,toExpPos:21,minE:-h,maxE:h,crypto:!1},g=!0,y="[DecimalError] ",v=y+"Invalid argument: ",w=y+"Precision limit exceeded",E=y+"crypto unavailable",F="[object Decimal]",A=Math.floor,C=Math.pow,x=/^0b([01]+(\.[01]*)?|\.[01]+)(p[+-]?\d+)?$/i,_=/^0x([0-9a-f]+(\.[0-9a-f]*)?|\.[0-9a-f]+)(p[+-]?\d+)?$/i,b=/^0o([0-7]+(\.[0-7]*)?|\.[0-7]+)(p[+-]?\d+)?$/i,B=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,M=1e7,N=d.length-1,S=m.length-1,I={toStringTag:F};function T(t){var e,n,r,i=t.length-1,o="",u=t[0];if(i>0){for(o+=u,e=1;e<i;e++)(n=7-(r=t[e]+"").length)&&(o+=V(n)),o+=r;(n=7-(r=(u=t[e])+"").length)&&(o+=V(n))}else if(0===u)return"0";for(;u%10==0;)u/=10;return o+u}function k(t,e,n){if(t!==~~t||t<e||t>n)throw Error(v+t)}function P(t,e,n,r){var i,o,u,a;for(o=t[0];o>=10;o/=10)--e;return--e<0?(e+=7,i=0):(i=Math.ceil((e+1)/7),e%=7),o=C(10,7-e),a=t[i]%o|0,null==r?e<3?(0==e?a=a/100|0:1==e&&(a=a/10|0),u=n<4&&99999==a||n>3&&49999==a||5e4==a||0==a):u=(n<4&&a+1==o||n>3&&a+1==o/2)&&(t[i+1]/o/100|0)==C(10,e-2)-1||(a==o/2||0==a)&&!(t[i+1]/o/100|0):e<4?(0==e?a=a/1e3|0:1==e?a=a/100|0:2==e&&(a=a/10|0),u=(r||n<4)&&9999==a||!r&&n>3&&4999==a):u=((r||n<4)&&a+1==o||!r&&n>3&&a+1==o/2)&&(t[i+1]/o/1e3|0)==C(10,e-3)-1,u}function R(t,e,n){for(var r,i,o=[0],u=0,a=t.length;u<a;){for(i=o.length;i--;)o[i]*=e;for(o[0]+=p.indexOf(t.charAt(u++)),r=0;r<o.length;r++)o[r]>n-1&&(void 0===o[r+1]&&(o[r+1]=0),o[r+1]+=o[r]/n|0,o[r]%=n)}return o.reverse()}I.absoluteValue=I.abs=function(){var t=new this.constructor(this);return t.s<0&&(t.s=1),O(t)},I.ceil=function(){return O(new this.constructor(this),this.e+1,2)},I.clampedTo=I.clamp=function(t,e){var n=this,r=n.constructor;if(t=new r(t),e=new r(e),!t.s||!e.s)return new r(NaN);if(t.gt(e))throw Error(v+e);return n.cmp(t)<0?t:n.cmp(e)>0?e:new r(n)},I.comparedTo=I.cmp=function(t){var e,n,r,i,o=this,u=o.d,a=(t=new o.constructor(t)).d,s=o.s,c=t.s;if(!u||!a)return s&&c?s!==c?s:u===a?0:!u^s<0?1:-1:NaN;if(!u[0]||!a[0])return u[0]?s:a[0]?-c:0;if(s!==c)return s;if(o.e!==t.e)return o.e>t.e^s<0?1:-1;for(e=0,n=(r=u.length)<(i=a.length)?r:i;e<n;++e)if(u[e]!==a[e])return u[e]>a[e]^s<0?1:-1;return r===i?0:r>i^s<0?1:-1},I.cosine=I.cos=function(){var t,e,n=this,r=n.constructor;return n.d?n.d[0]?(t=r.precision,e=r.rounding,r.precision=t+Math.max(n.e,n.sd())+7,r.rounding=1,n=function(t,e){var n,r,i;if(e.isZero())return e;(r=e.d.length)<32?i=(1/tt(4,n=Math.ceil(r/3))).toString():(n=16,i="2.3283064365386962890625e-10"),t.precision+=n,e=Q(t,1,e.times(i),new t(1));for(var o=n;o--;){var u=e.times(e);e=u.times(u).minus(u).times(8).plus(1)}return t.precision-=n,e}(r,et(r,n)),r.precision=t,r.rounding=e,O(2==l||3==l?n.neg():n,t,e,!0)):new r(1):new r(NaN)},I.cubeRoot=I.cbrt=function(){var t,e,n,r,i,o,u,a,s,c,l=this,h=l.constructor;if(!l.isFinite()||l.isZero())return new h(l);for(g=!1,(o=l.s*C(l.s*l,1/3))&&Math.abs(o)!=1/0?r=new h(o.toString()):(n=T(l.d),(o=((t=l.e)-n.length+1)%3)&&(n+=1==o||-2==o?"0":"00"),o=C(n,1/3),t=A((t+1)/3)-(t%3==(t<0?-1:2)),(r=new h(n=o==1/0?"5e"+t:(n=o.toExponential()).slice(0,n.indexOf("e")+1)+t)).s=l.s),u=(t=h.precision)+3;;)if(c=(s=(a=r).times(a).times(a)).plus(l),r=z(c.plus(l).times(a),c.plus(s),u+2,1),T(a.d).slice(0,u)===(n=T(r.d)).slice(0,u)){if("9999"!=(n=n.slice(u-3,u+1))&&(i||"4999"!=n)){+n&&(+n.slice(1)||"5"!=n.charAt(0))||(O(r,t+1,1),e=!r.times(r).times(r).eq(l));break}if(!i&&(O(a,t+1,0),a.times(a).times(a).eq(l))){r=a;break}u+=4,i=1}return g=!0,O(r,t,h.rounding,e)},I.decimalPlaces=I.dp=function(){var t,e=this.d,n=NaN;if(e){if(n=7*((t=e.length-1)-A(this.e/7)),t=e[t])for(;t%10==0;t/=10)n--;n<0&&(n=0)}return n},I.dividedBy=I.div=function(t){return z(this,new this.constructor(t))},I.dividedToIntegerBy=I.divToInt=function(t){var e=this.constructor;return O(z(this,new e(t),0,1,1),e.precision,e.rounding)},I.equals=I.eq=function(t){return 0===this.cmp(t)},I.floor=function(){return O(new this.constructor(this),this.e+1,3)},I.greaterThan=I.gt=function(t){return this.cmp(t)>0},I.greaterThanOrEqualTo=I.gte=function(t){var e=this.cmp(t);return 1==e||0===e},I.hyperbolicCosine=I.cosh=function(){var t,e,n,r,i,o=this,u=o.constructor,a=new u(1);if(!o.isFinite())return new u(o.s?1/0:NaN);if(o.isZero())return a;n=u.precision,r=u.rounding,u.precision=n+Math.max(o.e,o.sd())+4,u.rounding=1,(i=o.d.length)<32?e=(1/tt(4,t=Math.ceil(i/3))).toString():(t=16,e="2.3283064365386962890625e-10"),o=Q(u,1,o.times(e),new u(1),!0);for(var s,c=t,l=new u(8);c--;)s=o.times(o),o=a.minus(s.times(l.minus(s.times(l))));return O(o,u.precision=n,u.rounding=r,!0)},I.hyperbolicSine=I.sinh=function(){var t,e,n,r,i=this,o=i.constructor;if(!i.isFinite()||i.isZero())return new o(i);if(e=o.precision,n=o.rounding,o.precision=e+Math.max(i.e,i.sd())+4,o.rounding=1,(r=i.d.length)<3)i=Q(o,2,i,i,!0);else{t=(t=1.4*Math.sqrt(r))>16?16:0|t,i=Q(o,2,i=i.times(1/tt(5,t)),i,!0);for(var u,a=new o(5),s=new o(16),c=new o(20);t--;)u=i.times(i),i=i.times(a.plus(u.times(s.times(u).plus(c))))}return o.precision=e,o.rounding=n,O(i,e,n,!0)},I.hyperbolicTangent=I.tanh=function(){var t,e,n=this,r=n.constructor;return n.isFinite()?n.isZero()?new r(n):(t=r.precision,e=r.rounding,r.precision=t+7,r.rounding=1,z(n.sinh(),n.cosh(),r.precision=t,r.rounding=e)):new r(n.s)},I.inverseCosine=I.acos=function(){var t=this,e=t.constructor,n=t.abs().cmp(1),r=e.precision,i=e.rounding;return-1!==n?0===n?t.isNeg()?j(e,r,i):new e(0):new e(NaN):t.isZero()?j(e,r+4,i).times(.5):(e.precision=r+6,e.rounding=1,t=new e(1).minus(t).div(t.plus(1)).sqrt().atan(),e.precision=r,e.rounding=i,t.times(2))},I.inverseHyperbolicCosine=I.acosh=function(){var t,e,n=this,r=n.constructor;return n.lte(1)?new r(n.eq(1)?0:NaN):n.isFinite()?(t=r.precision,e=r.rounding,r.precision=t+Math.max(Math.abs(n.e),n.sd())+4,r.rounding=1,g=!1,n=n.times(n).minus(1).sqrt().plus(n),g=!0,r.precision=t,r.rounding=e,n.ln()):new r(n)},I.inverseHyperbolicSine=I.asinh=function(){var t,e,n=this,r=n.constructor;return!n.isFinite()||n.isZero()?new r(n):(t=r.precision,e=r.rounding,r.precision=t+2*Math.max(Math.abs(n.e),n.sd())+6,r.rounding=1,g=!1,n=n.times(n).plus(1).sqrt().plus(n),g=!0,r.precision=t,r.rounding=e,n.ln())},I.inverseHyperbolicTangent=I.atanh=function(){var t,e,n,r,i=this,o=i.constructor;return i.isFinite()?i.e>=0?new o(i.abs().eq(1)?i.s/0:i.isZero()?i:NaN):(t=o.precision,e=o.rounding,r=i.sd(),Math.max(r,t)<2*-i.e-1?O(new o(i),t,e,!0):(o.precision=n=r-i.e,i=z(i.plus(1),new o(1).minus(i),n+t,1),o.precision=t+4,o.rounding=1,i=i.ln(),o.precision=t,o.rounding=e,i.times(.5))):new o(NaN)},I.inverseSine=I.asin=function(){var t,e,n,r,i=this,o=i.constructor;return i.isZero()?new o(i):(e=i.abs().cmp(1),n=o.precision,r=o.rounding,-1!==e?0===e?((t=j(o,n+4,r).times(.5)).s=i.s,t):new o(NaN):(o.precision=n+6,o.rounding=1,i=i.div(new o(1).minus(i.times(i)).sqrt().plus(1)).atan(),o.precision=n,o.rounding=r,i.times(2)))},I.inverseTangent=I.atan=function(){var t,e,n,r,i,o,u,a,s,c=this,l=c.constructor,h=l.precision,f=l.rounding;if(c.isFinite()){if(c.isZero())return new l(c);if(c.abs().eq(1)&&h+4<=S)return(u=j(l,h+4,f).times(.25)).s=c.s,u}else{if(!c.s)return new l(NaN);if(h+4<=S)return(u=j(l,h+4,f).times(.5)).s=c.s,u}for(l.precision=a=h+10,l.rounding=1,t=n=Math.min(28,a/7+2|0);t;--t)c=c.div(c.times(c).plus(1).sqrt().plus(1));for(g=!1,e=Math.ceil(a/7),r=1,s=c.times(c),u=new l(c),i=c;-1!==t;)if(i=i.times(s),o=u.minus(i.div(r+=2)),i=i.times(s),void 0!==(u=o.plus(i.div(r+=2))).d[e])for(t=e;u.d[t]===o.d[t]&&t--;);return n&&(u=u.times(2<<n-1)),g=!0,O(u,l.precision=h,l.rounding=f,!0)},I.isFinite=function(){return!!this.d},I.isInteger=I.isInt=function(){return!!this.d&&A(this.e/7)>this.d.length-2},I.isNaN=function(){return!this.s},I.isNegative=I.isNeg=function(){return this.s<0},I.isPositive=I.isPos=function(){return this.s>0},I.isZero=function(){return!!this.d&&0===this.d[0]},I.lessThan=I.lt=function(t){return this.cmp(t)<0},I.lessThanOrEqualTo=I.lte=function(t){return this.cmp(t)<1},I.logarithm=I.log=function(t){var e,n,r,i,o,u,a,s,c=this,l=c.constructor,h=l.precision,f=l.rounding;if(null==t)t=new l(10),e=!0;else{if(n=(t=new l(t)).d,t.s<0||!n||!n[0]||t.eq(1))return new l(NaN);e=t.eq(10)}if(n=c.d,c.s<0||!n||!n[0]||c.eq(1))return new l(n&&!n[0]?-1/0:1!=c.s?NaN:n?0:1/0);if(e)if(n.length>1)o=!0;else{for(i=n[0];i%10==0;)i/=10;o=1!==i}if(g=!1,u=W(c,a=h+5),r=e?$(l,a+10):W(t,a),P((s=z(u,r,a,1)).d,i=h,f))do{if(u=W(c,a+=10),r=e?$(l,a+10):W(t,a),s=z(u,r,a,1),!o){+T(s.d).slice(i+1,i+15)+1==1e14&&(s=O(s,h+1,0));break}}while(P(s.d,i+=10,f));return g=!0,O(s,h,f)},I.minus=I.sub=function(t){var e,n,r,i,o,u,a,s,c,l,h,f,p=this,d=p.constructor;if(t=new d(t),!p.d||!t.d)return p.s&&t.s?p.d?t.s=-t.s:t=new d(t.d||p.s!==t.s?p:NaN):t=new d(NaN),t;if(p.s!=t.s)return t.s=-t.s,p.plus(t);if(c=p.d,f=t.d,a=d.precision,s=d.rounding,!c[0]||!f[0]){if(f[0])t.s=-t.s;else{if(!c[0])return new d(3===s?-0:0);t=new d(p)}return g?O(t,a,s):t}if(n=A(t.e/7),l=A(p.e/7),c=c.slice(),o=l-n){for((h=o<0)?(e=c,o=-o,u=f.length):(e=f,n=l,u=c.length),o>(r=Math.max(Math.ceil(a/7),u)+2)&&(o=r,e.length=1),e.reverse(),r=o;r--;)e.push(0);e.reverse()}else{for((h=(r=c.length)<(u=f.length))&&(u=r),r=0;r<u;r++)if(c[r]!=f[r]){h=c[r]<f[r];break}o=0}for(h&&(e=c,c=f,f=e,t.s=-t.s),u=c.length,r=f.length-u;r>0;--r)c[u++]=0;for(r=f.length;r>o;){if(c[--r]<f[r]){for(i=r;i&&0===c[--i];)c[i]=M-1;--c[i],c[r]+=M}c[r]-=f[r]}for(;0===c[--u];)c.pop();for(;0===c[0];c.shift())--n;return c[0]?(t.d=c,t.e=L(c,n),g?O(t,a,s):t):new d(3===s?-0:0)},I.modulo=I.mod=function(t){var e,n=this,r=n.constructor;return t=new r(t),!n.d||!t.s||t.d&&!t.d[0]?new r(NaN):!t.d||n.d&&!n.d[0]?O(new r(n),r.precision,r.rounding):(g=!1,9==r.modulo?(e=z(n,t.abs(),0,3,1)).s*=t.s:e=z(n,t,0,r.modulo,1),e=e.times(t),g=!0,n.minus(e))},I.naturalExponential=I.exp=function(){return Y(this)},I.naturalLogarithm=I.ln=function(){return W(this)},I.negated=I.neg=function(){var t=new this.constructor(this);return t.s=-t.s,O(t)},I.plus=I.add=function(t){var e,n,r,i,o,u,a,s,c,l,h=this,f=h.constructor;if(t=new f(t),!h.d||!t.d)return h.s&&t.s?h.d||(t=new f(t.d||h.s===t.s?h:NaN)):t=new f(NaN),t;if(h.s!=t.s)return t.s=-t.s,h.minus(t);if(c=h.d,l=t.d,a=f.precision,s=f.rounding,!c[0]||!l[0])return l[0]||(t=new f(h)),g?O(t,a,s):t;if(o=A(h.e/7),r=A(t.e/7),c=c.slice(),i=o-r){for(i<0?(n=c,i=-i,u=l.length):(n=l,r=o,u=c.length),i>(u=(o=Math.ceil(a/7))>u?o+1:u+1)&&(i=u,n.length=1),n.reverse();i--;)n.push(0);n.reverse()}for((u=c.length)-(i=l.length)<0&&(i=u,n=l,l=c,c=n),e=0;i;)e=(c[--i]=c[i]+l[i]+e)/M|0,c[i]%=M;for(e&&(c.unshift(e),++r),u=c.length;0==c[--u];)c.pop();return t.d=c,t.e=L(c,r),g?O(t,a,s):t},I.precision=I.sd=function(t){var e,n=this;if(void 0!==t&&t!==!!t&&1!==t&&0!==t)throw Error(v+t);return n.d?(e=q(n.d),t&&n.e+1>e&&(e=n.e+1)):e=NaN,e},I.round=function(){var t=this,e=t.constructor;return O(new e(t),t.e+1,e.rounding)},I.sine=I.sin=function(){var t,e,n=this,r=n.constructor;return n.isFinite()?n.isZero()?new r(n):(t=r.precision,e=r.rounding,r.precision=t+Math.max(n.e,n.sd())+7,r.rounding=1,n=function(t,e){var n,r=e.d.length;if(r<3)return e.isZero()?e:Q(t,2,e,e);n=(n=1.4*Math.sqrt(r))>16?16:0|n,e=Q(t,2,e=e.times(1/tt(5,n)),e);for(var i,o=new t(5),u=new t(16),a=new t(20);n--;)i=e.times(e),e=e.times(o.plus(i.times(u.times(i).minus(a))));return e}(r,et(r,n)),r.precision=t,r.rounding=e,O(l>2?n.neg():n,t,e,!0)):new r(NaN)},I.squareRoot=I.sqrt=function(){var t,e,n,r,i,o,u=this,a=u.d,s=u.e,c=u.s,l=u.constructor;if(1!==c||!a||!a[0])return new l(!c||c<0&&(!a||a[0])?NaN:a?u:1/0);for(g=!1,0==(c=Math.sqrt(+u))||c==1/0?(((e=T(a)).length+s)%2==0&&(e+="0"),c=Math.sqrt(e),s=A((s+1)/2)-(s<0||s%2),r=new l(e=c==1/0?"5e"+s:(e=c.toExponential()).slice(0,e.indexOf("e")+1)+s)):r=new l(c.toString()),n=(s=l.precision)+3;;)if(r=(o=r).plus(z(u,o,n+2,1)).times(.5),T(o.d).slice(0,n)===(e=T(r.d)).slice(0,n)){if("9999"!=(e=e.slice(n-3,n+1))&&(i||"4999"!=e)){+e&&(+e.slice(1)||"5"!=e.charAt(0))||(O(r,s+1,1),t=!r.times(r).eq(u));break}if(!i&&(O(o,s+1,0),o.times(o).eq(u))){r=o;break}n+=4,i=1}return g=!0,O(r,s,l.rounding,t)},I.tangent=I.tan=function(){var t,e,n=this,r=n.constructor;return n.isFinite()?n.isZero()?new r(n):(t=r.precision,e=r.rounding,r.precision=t+10,r.rounding=1,(n=n.sin()).s=1,n=z(n,new r(1).minus(n.times(n)).sqrt(),t+10,0),r.precision=t,r.rounding=e,O(2==l||4==l?n.neg():n,t,e,!0)):new r(NaN)},I.times=I.mul=function(t){var e,n,r,i,o,u,a,s,c,l=this,h=l.constructor,f=l.d,p=(t=new h(t)).d;if(t.s*=l.s,!(f&&f[0]&&p&&p[0]))return new h(!t.s||f&&!f[0]&&!p||p&&!p[0]&&!f?NaN:f&&p?0*t.s:t.s/0);for(n=A(l.e/7)+A(t.e/7),(s=f.length)<(c=p.length)&&(o=f,f=p,p=o,u=s,s=c,c=u),o=[],r=u=s+c;r--;)o.push(0);for(r=c;--r>=0;){for(e=0,i=s+r;i>r;)a=o[i]+p[r]*f[i-r-1]+e,o[i--]=a%M|0,e=a/M|0;o[i]=(o[i]+e)%M|0}for(;!o[--u];)o.pop();return e?++n:o.shift(),t.d=o,t.e=L(o,n),g?O(t,h.precision,h.rounding):t},I.toBinary=function(t,e){return nt(this,2,t,e)},I.toDecimalPlaces=I.toDP=function(t,e){var n=this,r=n.constructor;return n=new r(n),void 0===t?n:(k(t,0,f),void 0===e?e=r.rounding:k(e,0,8),O(n,t+n.e+1,e))},I.toExponential=function(t,e){var n,r=this,i=r.constructor;return void 0===t?n=U(r,!0):(k(t,0,f),void 0===e?e=i.rounding:k(e,0,8),n=U(r=O(new i(r),t+1,e),!0,t+1)),r.isNeg()&&!r.isZero()?"-"+n:n},I.toFixed=function(t,e){var n,r,i=this,o=i.constructor;return void 0===t?n=U(i):(k(t,0,f),void 0===e?e=o.rounding:k(e,0,8),n=U(r=O(new o(i),t+i.e+1,e),!1,t+r.e+1)),i.isNeg()&&!i.isZero()?"-"+n:n},I.toFraction=function(t){var e,n,r,i,o,u,a,s,c,l,h,f,p=this,d=p.d,m=p.constructor;if(!d)return new m(p);if(c=n=new m(1),r=s=new m(0),u=(o=(e=new m(r)).e=q(d)-p.e-1)%7,e.d[0]=C(10,u<0?7+u:u),null==t)t=o>0?e:c;else{if(!(a=new m(t)).isInt()||a.lt(c))throw Error(v+a);t=a.gt(e)?o>0?e:c:a}for(g=!1,a=new m(T(d)),l=m.precision,m.precision=o=7*d.length*2;h=z(a,e,0,1,1),1!=(i=n.plus(h.times(r))).cmp(t);)n=r,r=i,i=c,c=s.plus(h.times(i)),s=i,i=e,e=a.minus(h.times(i)),a=i;return i=z(t.minus(n),r,0,1,1),s=s.plus(i.times(c)),n=n.plus(i.times(r)),s.s=c.s=p.s,f=z(c,r,o,1).minus(p).abs().cmp(z(s,n,o,1).minus(p).abs())<1?[c,r]:[s,n],m.precision=l,g=!0,f},I.toHexadecimal=I.toHex=function(t,e){return nt(this,16,t,e)},I.toNearest=function(t,e){var n=this,r=n.constructor;if(n=new r(n),null==t){if(!n.d)return n;t=new r(1),e=r.rounding}else{if(t=new r(t),void 0===e?e=r.rounding:k(e,0,8),!n.d)return t.s?n:t;if(!t.d)return t.s&&(t.s=n.s),t}return t.d[0]?(g=!1,n=z(n,t,0,e,1).times(t),g=!0,O(n)):(t.s=n.s,n=t),n},I.toNumber=function(){return+this},I.toOctal=function(t,e){return nt(this,8,t,e)},I.toPower=I.pow=function(t){var e,n,r,i,o,u,a=this,s=a.constructor,c=+(t=new s(t));if(!(a.d&&t.d&&a.d[0]&&t.d[0]))return new s(C(+a,c));if((a=new s(a)).eq(1))return a;if(r=s.precision,o=s.rounding,t.eq(1))return O(a,r,o);if((e=A(t.e/7))>=t.d.length-1&&(n=c<0?-c:c)<=9007199254740991)return i=H(s,a,n,r),t.s<0?new s(1).div(i):O(i,r,o);if((u=a.s)<0){if(e<t.d.length-1)return new s(NaN);if(1&t.d[e]||(u=1),0==a.e&&1==a.d[0]&&1==a.d.length)return a.s=u,a}return(e=0!=(n=C(+a,c))&&isFinite(n)?new s(n+"").e:A(c*(Math.log("0."+T(a.d))/Math.LN10+a.e+1)))>s.maxE+1||e<s.minE-1?new s(e>0?u/0:0):(g=!1,s.rounding=a.s=1,n=Math.min(12,(e+"").length),(i=Y(t.times(W(a,r+n)),r)).d&&P((i=O(i,r+5,1)).d,r,o)&&(e=r+10,+T((i=O(Y(t.times(W(a,e+n)),e),e+5,1)).d).slice(r+1,r+15)+1==1e14&&(i=O(i,r+1,0))),i.s=u,g=!0,s.rounding=o,O(i,r,o))},I.toPrecision=function(t,e){var n,r=this,i=r.constructor;return void 0===t?n=U(r,r.e<=i.toExpNeg||r.e>=i.toExpPos):(k(t,1,f),void 0===e?e=i.rounding:k(e,0,8),n=U(r=O(new i(r),t,e),t<=r.e||r.e<=i.toExpNeg,t)),r.isNeg()&&!r.isZero()?"-"+n:n},I.toSignificantDigits=I.toSD=function(t,e){var n=this.constructor;return void 0===t?(t=n.precision,e=n.rounding):(k(t,1,f),void 0===e?e=n.rounding:k(e,0,8)),O(new n(this),t,e)},I.toString=function(){var t=this,e=t.constructor,n=U(t,t.e<=e.toExpNeg||t.e>=e.toExpPos);return t.isNeg()&&!t.isZero()?"-"+n:n},I.truncated=I.trunc=function(){return O(new this.constructor(this),this.e+1,1)},I.valueOf=I.toJSON=function(){var t=this,e=t.constructor,n=U(t,t.e<=e.toExpNeg||t.e>=e.toExpPos);return t.isNeg()?"-"+n:n};var z=function(){function t(t,e,n){var r,i=0,o=t.length;for(t=t.slice();o--;)r=t[o]*e+i,t[o]=r%n|0,i=r/n|0;return i&&t.unshift(i),t}function e(t,e,n,r){var i,o;if(n!=r)o=n>r?1:-1;else for(i=o=0;i<n;i++)if(t[i]!=e[i]){o=t[i]>e[i]?1:-1;break}return o}function n(t,e,n,r){for(var i=0;n--;)t[n]-=i,i=t[n]<e[n]?1:0,t[n]=i*r+t[n]-e[n];for(;!t[0]&&t.length>1;)t.shift()}return function(r,i,o,u,a,s){var l,h,f,p,d,m,D,g,y,v,w,E,F,C,x,_,b,B,N,S,I=r.constructor,T=r.s==i.s?1:-1,k=r.d,P=i.d;if(!(k&&k[0]&&P&&P[0]))return new I(r.s&&i.s&&(k?!P||k[0]!=P[0]:P)?k&&0==k[0]||!P?0*T:T/0:NaN);for(s?(d=1,h=r.e-i.e):(s=M,d=7,h=A(r.e/d)-A(i.e/d)),N=P.length,b=k.length,v=(y=new I(T)).d=[],f=0;P[f]==(k[f]||0);f++);if(P[f]>(k[f]||0)&&h--,null==o?(C=o=I.precision,u=I.rounding):C=a?o+(r.e-i.e)+1:o,C<0)v.push(1),m=!0;else{if(C=C/d+2|0,f=0,1==N){for(p=0,P=P[0],C++;(f<b||p)&&C--;f++)x=p*s+(k[f]||0),v[f]=x/P|0,p=x%P|0;m=p||f<b}else{for((p=s/(P[0]+1)|0)>1&&(P=t(P,p,s),k=t(k,p,s),N=P.length,b=k.length),_=N,E=(w=k.slice(0,N)).length;E<N;)w[E++]=0;(S=P.slice()).unshift(0),B=P[0],P[1]>=s/2&&++B;do{p=0,(l=e(P,w,N,E))<0?(F=w[0],N!=E&&(F=F*s+(w[1]||0)),(p=F/B|0)>1?(p>=s&&(p=s-1),1==(l=e(D=t(P,p,s),w,g=D.length,E=w.length))&&(p--,n(D,N<g?S:P,g,s))):(0==p&&(l=p=1),D=P.slice()),(g=D.length)<E&&D.unshift(0),n(w,D,E,s),-1==l&&(l=e(P,w,N,E=w.length))<1&&(p++,n(w,N<E?S:P,E,s)),E=w.length):0===l&&(p++,w=[0]),v[f++]=p,l&&w[0]?w[E++]=k[_]||0:(w=[k[_]],E=1)}while((_++<b||void 0!==w[0])&&C--);m=void 0!==w[0]}v[0]||v.shift()}if(1==d)y.e=h,c=m;else{for(f=1,p=v[0];p>=10;p/=10)f++;y.e=f+h*d-1,O(y,a?o+y.e+1:o,u,m)}return y}}();function O(t,e,n,r){var i,o,u,a,s,c,l,h,f,p=t.constructor;t:if(null!=e){if(!(h=t.d))return t;for(i=1,a=h[0];a>=10;a/=10)i++;if((o=e-i)<0)o+=7,u=e,s=(l=h[f=0])/C(10,i-u-1)%10|0;else if((f=Math.ceil((o+1)/7))>=(a=h.length)){if(!r)break t;for(;a++<=f;)h.push(0);l=s=0,i=1,u=(o%=7)-7+1}else{for(l=a=h[f],i=1;a>=10;a/=10)i++;s=(u=(o%=7)-7+i)<0?0:l/C(10,i-u-1)%10|0}if(r=r||e<0||void 0!==h[f+1]||(u<0?l:l%C(10,i-u-1)),c=n<4?(s||r)&&(0==n||n==(t.s<0?3:2)):s>5||5==s&&(4==n||r||6==n&&(o>0?u>0?l/C(10,i-u):0:h[f-1])%10&1||n==(t.s<0?8:7)),e<1||!h[0])return h.length=0,c?(e-=t.e+1,h[0]=C(10,(7-e%7)%7),t.e=-e||0):h[0]=t.e=0,t;if(0==o?(h.length=f,a=1,f--):(h.length=f+1,a=C(10,7-o),h[f]=u>0?(l/C(10,i-u)%C(10,u)|0)*a:0),c)for(;;){if(0==f){for(o=1,u=h[0];u>=10;u/=10)o++;for(u=h[0]+=a,a=1;u>=10;u/=10)a++;o!=a&&(t.e++,h[0]==M&&(h[0]=1));break}if(h[f]+=a,h[f]!=M)break;h[f--]=0,a=1}for(o=h.length;0===h[--o];)h.pop()}return g&&(t.e>p.maxE?(t.d=null,t.e=NaN):t.e<p.minE&&(t.e=0,t.d=[0])),t}function U(t,e,n){if(!t.isFinite())return J(t);var r,i=t.e,o=T(t.d),u=o.length;return e?(n&&(r=n-u)>0?o=o.charAt(0)+"."+o.slice(1)+V(r):u>1&&(o=o.charAt(0)+"."+o.slice(1)),o=o+(t.e<0?"e":"e+")+t.e):i<0?(o="0."+V(-i-1)+o,n&&(r=n-u)>0&&(o+=V(r))):i>=u?(o+=V(i+1-u),n&&(r=n-i-1)>0&&(o=o+"."+V(r))):((r=i+1)<u&&(o=o.slice(0,r)+"."+o.slice(r)),n&&(r=n-u)>0&&(i+1===u&&(o+="."),o+=V(r))),o}function L(t,e){var n=t[0];for(e*=7;n>=10;n/=10)e++;return e}function $(t,e,n){if(e>N)throw g=!0,n&&(t.precision=n),Error(w);return O(new t(d),e,1,!0)}function j(t,e,n){if(e>S)throw Error(w);return O(new t(m),e,n,!0)}function q(t){var e=t.length-1,n=7*e+1;if(e=t[e]){for(;e%10==0;e/=10)n--;for(e=t[0];e>=10;e/=10)n++}return n}function V(t){for(var e="";t--;)e+="0";return e}function H(t,e,n,r){var i,o=new t(1),u=Math.ceil(r/7+4);for(g=!1;;){if(n%2&&rt((o=o.times(e)).d,u)&&(i=!0),0===(n=A(n/2))){n=o.d.length-1,i&&0===o.d[n]&&++o.d[n];break}rt((e=e.times(e)).d,u)}return g=!0,o}function Z(t){return 1&t.d[t.d.length-1]}function X(t,e,n){for(var r,i,o=new t(e[0]),u=0;++u<e.length;){if(!(i=new t(e[u])).s){o=i;break}((r=o.cmp(i))===n||0===r&&o.s===n)&&(o=i)}return o}function Y(t,e){var n,r,i,o,u,a,s,c=0,l=0,h=0,f=t.constructor,p=f.rounding,d=f.precision;if(!t.d||!t.d[0]||t.e>17)return new f(t.d?t.d[0]?t.s<0?0:1/0:1:t.s?t.s<0?0:t:NaN);for(null==e?(g=!1,s=d):s=e,a=new f(.03125);t.e>-2;)t=t.times(a),h+=5;for(s+=r=Math.log(C(2,h))/Math.LN10*2+5|0,n=o=u=new f(1),f.precision=s;;){if(o=O(o.times(t),s,1),n=n.times(++l),T((a=u.plus(z(o,n,s,1))).d).slice(0,s)===T(u.d).slice(0,s)){for(i=h;i--;)u=O(u.times(u),s,1);if(null!=e)return f.precision=d,u;if(!(c<3&&P(u.d,s-r,p,c)))return O(u,f.precision=d,p,g=!0);f.precision=s+=10,n=o=a=new f(1),l=0,c++}u=a}}function W(t,e){var n,r,i,o,u,a,s,c,l,h,f,p=1,d=t,m=d.d,D=d.constructor,y=D.rounding,v=D.precision;if(d.s<0||!m||!m[0]||!d.e&&1==m[0]&&1==m.length)return new D(m&&!m[0]?-1/0:1!=d.s?NaN:m?0:d);if(null==e?(g=!1,l=v):l=e,D.precision=l+=10,r=(n=T(m)).charAt(0),!(Math.abs(o=d.e)<15e14))return c=$(D,l+2,v).times(o+""),d=W(new D(r+"."+n.slice(1)),l-10).plus(c),D.precision=v,null==e?O(d,v,y,g=!0):d;for(;r<7&&1!=r||1==r&&n.charAt(1)>3;)r=(n=T((d=d.times(t)).d)).charAt(0),p++;for(o=d.e,r>1?(d=new D("0."+n),o++):d=new D(r+"."+n.slice(1)),h=d,s=u=d=z(d.minus(1),d.plus(1),l,1),f=O(d.times(d),l,1),i=3;;){if(u=O(u.times(f),l,1),T((c=s.plus(z(u,new D(i),l,1))).d).slice(0,l)===T(s.d).slice(0,l)){if(s=s.times(2),0!==o&&(s=s.plus($(D,l+2,v).times(o+""))),s=z(s,new D(p),l,1),null!=e)return D.precision=v,s;if(!P(s.d,l-10,y,a))return O(s,D.precision=v,y,g=!0);D.precision=l+=10,c=u=d=z(h.minus(1),h.plus(1),l,1),f=O(d.times(d),l,1),i=a=1}s=c,i+=2}}function J(t){return String(t.s*t.s/0)}function G(t,e){var n,r,i;for((n=e.indexOf("."))>-1&&(e=e.replace(".","")),(r=e.search(/e/i))>0?(n<0&&(n=r),n+=+e.slice(r+1),e=e.substring(0,r)):n<0&&(n=e.length),r=0;48===e.charCodeAt(r);r++);for(i=e.length;48===e.charCodeAt(i-1);--i);if(e=e.slice(r,i)){if(i-=r,t.e=n=n-r-1,t.d=[],r=(n+1)%7,n<0&&(r+=7),r<i){for(r&&t.d.push(+e.slice(0,r)),i-=7;r<i;)t.d.push(+e.slice(r,r+=7));r=7-(e=e.slice(r)).length}else r-=i;for(;r--;)e+="0";t.d.push(+e),g&&(t.e>t.constructor.maxE?(t.d=null,t.e=NaN):t.e<t.constructor.minE&&(t.e=0,t.d=[0]))}else t.e=0,t.d=[0];return t}function K(t,e){var n,r,i,o,u,a,s,c,l;if(e.indexOf("_")>-1){if(e=e.replace(/(\d)_(?=\d)/g,"$1"),B.test(e))return G(t,e)}else if("Infinity"===e||"NaN"===e)return+e||(t.s=NaN),t.e=NaN,t.d=null,t;if(_.test(e))n=16,e=e.toLowerCase();else if(x.test(e))n=2;else{if(!b.test(e))throw Error(v+e);n=8}for((o=e.search(/p/i))>0?(s=+e.slice(o+1),e=e.substring(2,o)):e=e.slice(2),u=(o=e.indexOf("."))>=0,r=t.constructor,u&&(o=(a=(e=e.replace(".","")).length)-o,i=H(r,new r(n),o,2*o)),o=l=(c=R(e,n,M)).length-1;0===c[o];--o)c.pop();return o<0?new r(0*t.s):(t.e=L(c,l),t.d=c,g=!1,u&&(t=z(t,i,4*a)),s&&(t=t.times(Math.abs(s)<54?C(2,s):Vt.pow(2,s))),g=!0,t)}function Q(t,e,n,r,i){var o,u,a,s,c=t.precision,l=Math.ceil(c/7);for(g=!1,s=n.times(n),a=new t(r);;){if(u=z(a.times(s),new t(e++*e++),c,1),a=i?r.plus(u):r.minus(u),r=z(u.times(s),new t(e++*e++),c,1),void 0!==(u=a.plus(r)).d[l]){for(o=l;u.d[o]===a.d[o]&&o--;);if(-1==o)break}o=a,a=r,r=u,u=o}return g=!0,u.d.length=l+1,u}function tt(t,e){for(var n=t;--e;)n*=t;return n}function et(t,e){var n,r=e.s<0,i=j(t,t.precision,1),o=i.times(.5);if((e=e.abs()).lte(o))return l=r?4:1,e;if((n=e.divToInt(i)).isZero())l=r?3:2;else{if((e=e.minus(n.times(i))).lte(o))return l=Z(n)?r?2:3:r?4:1,e;l=Z(n)?r?1:4:r?3:2}return e.minus(i).abs()}function nt(t,e,n,r){var i,o,u,a,s,l,h,d,m,D=t.constructor,g=void 0!==n;if(g?(k(n,1,f),void 0===r?r=D.rounding:k(r,0,8)):(n=D.precision,r=D.rounding),t.isFinite()){for(g?(i=2,16==e?n=4*n-3:8==e&&(n=3*n-2)):i=e,(u=(h=U(t)).indexOf("."))>=0&&(h=h.replace(".",""),(m=new D(1)).e=h.length-u,m.d=R(U(m),10,i),m.e=m.d.length),o=s=(d=R(h,10,i)).length;0==d[--s];)d.pop();if(d[0]){if(u<0?o--:((t=new D(t)).d=d,t.e=o,d=(t=z(t,m,n,r,0,i)).d,o=t.e,l=c),u=d[n],a=i/2,l=l||void 0!==d[n+1],l=r<4?(void 0!==u||l)&&(0===r||r===(t.s<0?3:2)):u>a||u===a&&(4===r||l||6===r&&1&d[n-1]||r===(t.s<0?8:7)),d.length=n,l)for(;++d[--n]>i-1;)d[n]=0,n||(++o,d.unshift(1));for(s=d.length;!d[s-1];--s);for(u=0,h="";u<s;u++)h+=p.charAt(d[u]);if(g){if(s>1)if(16==e||8==e){for(u=16==e?4:3,--s;s%u;s++)h+="0";for(s=(d=R(h,i,e)).length;!d[s-1];--s);for(u=1,h="1.";u<s;u++)h+=p.charAt(d[u])}else h=h.charAt(0)+"."+h.slice(1);h=h+(o<0?"p":"p+")+o}else if(o<0){for(;++o;)h="0"+h;h="0."+h}else if(++o>s)for(o-=s;o--;)h+="0";else o<s&&(h=h.slice(0,o)+"."+h.slice(o))}else h=g?"0p+0":"0";h=(16==e?"0x":2==e?"0b":8==e?"0o":"")+h}else h=J(t);return t.s<0?"-"+h:h}function rt(t,e){if(t.length>e)return t.length=e,!0}function it(t){return new this(t).abs()}function ot(t){return new this(t).acos()}function ut(t){return new this(t).acosh()}function at(t,e){return new this(t).plus(e)}function st(t){return new this(t).asin()}function ct(t){return new this(t).asinh()}function lt(t){return new this(t).atan()}function ht(t){return new this(t).atanh()}function ft(t,e){t=new this(t),e=new this(e);var n,r=this.precision,i=this.rounding,o=r+4;return t.s&&e.s?t.d||e.d?!e.d||t.isZero()?(n=e.s<0?j(this,r,i):new this(0)).s=t.s:!t.d||e.isZero()?(n=j(this,o,1).times(.5)).s=t.s:e.s<0?(this.precision=o,this.rounding=1,n=this.atan(z(t,e,o,1)),e=j(this,o,1),this.precision=r,this.rounding=i,n=t.s<0?n.minus(e):n.plus(e)):n=this.atan(z(t,e,o,1)):(n=j(this,o,1).times(e.s>0?.25:.75)).s=t.s:n=new this(NaN),n}function pt(t){return new this(t).cbrt()}function dt(t){return O(t=new this(t),t.e+1,2)}function mt(t,e,n){return new this(t).clamp(e,n)}function Dt(t){if(!t||"object"!=typeof t)throw Error(y+"Object expected");var e,n,r,i=!0===t.defaults,o=["precision",1,f,"rounding",0,8,"toExpNeg",-h,0,"toExpPos",0,h,"maxE",0,h,"minE",-h,0,"modulo",0,9];for(e=0;e<o.length;e+=3)if(n=o[e],i&&(this[n]=D[n]),void 0!==(r=t[n])){if(!(A(r)===r&&r>=o[e+1]&&r<=o[e+2]))throw Error(v+n+": "+r);this[n]=r}if(n="crypto",i&&(this[n]=D[n]),void 0!==(r=t[n])){if(!0!==r&&!1!==r&&0!==r&&1!==r)throw Error(v+n+": "+r);if(r){if("undefined"==typeof crypto||!crypto||!crypto.getRandomValues&&!crypto.randomBytes)throw Error(E);this[n]=!0}else this[n]=!1}return this}function gt(t){return new this(t).cos()}function yt(t){return new this(t).cosh()}function vt(t,e){return new this(t).div(e)}function wt(t){return new this(t).exp()}function Et(t){return O(t=new this(t),t.e+1,3)}function Ft(){var t,e,n=new this(0);for(g=!1,t=0;t<arguments.length;)if((e=new this(arguments[t++])).d)n.d&&(n=n.plus(e.times(e)));else{if(e.s)return g=!0,new this(1/0);n=e}return g=!0,n.sqrt()}function At(t){return t instanceof Vt||t&&t.toStringTag===F||!1}function Ct(t){return new this(t).ln()}function xt(t,e){return new this(t).log(e)}function _t(t){return new this(t).log(2)}function bt(t){return new this(t).log(10)}function Bt(){return X(this,arguments,-1)}function Mt(){return X(this,arguments,1)}function Nt(t,e){return new this(t).mod(e)}function St(t,e){return new this(t).mul(e)}function It(t,e){return new this(t).pow(e)}function Tt(t){var e,n,r,i,o=0,u=new this(1),a=[];if(void 0===t?t=this.precision:k(t,1,f),r=Math.ceil(t/7),this.crypto)if(crypto.getRandomValues)for(e=crypto.getRandomValues(new Uint32Array(r));o<r;)(i=e[o])>=429e7?e[o]=crypto.getRandomValues(new Uint32Array(1))[0]:a[o++]=i%1e7;else{if(!crypto.randomBytes)throw Error(E);for(e=crypto.randomBytes(r*=4);o<r;)(i=e[o]+(e[o+1]<<8)+(e[o+2]<<16)+((127&e[o+3])<<24))>=214e7?crypto.randomBytes(4).copy(e,o):(a.push(i%1e7),o+=4);o=r/4}else for(;o<r;)a[o++]=1e7*Math.random()|0;for(t%=7,(r=a[--o])&&t&&(i=C(10,7-t),a[o]=(r/i|0)*i);0===a[o];o--)a.pop();if(o<0)n=0,a=[0];else{for(n=-1;0===a[0];n-=7)a.shift();for(r=1,i=a[0];i>=10;i/=10)r++;r<7&&(n-=7-r)}return u.e=n,u.d=a,u}function kt(t){return O(t=new this(t),t.e+1,this.rounding)}function Pt(t){return(t=new this(t)).d?t.d[0]?t.s:0*t.s:t.s||NaN}function Rt(t){return new this(t).sin()}function zt(t){return new this(t).sinh()}function Ot(t){return new this(t).sqrt()}function Ut(t,e){return new this(t).sub(e)}function Lt(){var t=0,e=arguments,n=new this(e[t]);for(g=!1;n.s&&++t<e.length;)n=n.plus(e[t]);return g=!0,O(n,this.precision,this.rounding)}function $t(t){return new this(t).tan()}function jt(t){return new this(t).tanh()}function qt(t){return O(t=new this(t),t.e+1,1)}I[Symbol.for("nodejs.util.inspect.custom")]=I.toString,I[Symbol.toStringTag]="Decimal";var Vt=I.constructor=function t(e){var n,r,i;function o(t){var e,n,r,i=this;if(!(i instanceof o))return new o(t);if(i.constructor=o,At(t))return i.s=t.s,void(g?!t.d||t.e>o.maxE?(i.e=NaN,i.d=null):t.e<o.minE?(i.e=0,i.d=[0]):(i.e=t.e,i.d=t.d.slice()):(i.e=t.e,i.d=t.d?t.d.slice():t.d));if("number"==(r=typeof t)){if(0===t)return i.s=1/t<0?-1:1,i.e=0,void(i.d=[0]);if(t<0?(t=-t,i.s=-1):i.s=1,t===~~t&&t<1e7){for(e=0,n=t;n>=10;n/=10)e++;return void(g?e>o.maxE?(i.e=NaN,i.d=null):e<o.minE?(i.e=0,i.d=[0]):(i.e=e,i.d=[t]):(i.e=e,i.d=[t]))}return 0*t!=0?(t||(i.s=NaN),i.e=NaN,void(i.d=null)):G(i,t.toString())}if("string"===r)return 45===(n=t.charCodeAt(0))?(t=t.slice(1),i.s=-1):(43===n&&(t=t.slice(1)),i.s=1),B.test(t)?G(i,t):K(i,t);if("bigint"===r)return t<0?(t=-t,i.s=-1):i.s=1,G(i,t.toString());throw Error(v+t)}if(o.prototype=I,o.ROUND_UP=0,o.ROUND_DOWN=1,o.ROUND_CEIL=2,o.ROUND_FLOOR=3,o.ROUND_HALF_UP=4,o.ROUND_HALF_DOWN=5,o.ROUND_HALF_EVEN=6,o.ROUND_HALF_CEIL=7,o.ROUND_HALF_FLOOR=8,o.EUCLID=9,o.config=o.set=Dt,o.clone=t,o.isDecimal=At,o.abs=it,o.acos=ot,o.acosh=ut,o.add=at,o.asin=st,o.asinh=ct,o.atan=lt,o.atanh=ht,o.atan2=ft,o.cbrt=pt,o.ceil=dt,o.clamp=mt,o.cos=gt,o.cosh=yt,o.div=vt,o.exp=wt,o.floor=Et,o.hypot=Ft,o.ln=Ct,o.log=xt,o.log10=bt,o.log2=_t,o.max=Bt,o.min=Mt,o.mod=Nt,o.mul=St,o.pow=It,o.random=Tt,o.round=kt,o.sign=Pt,o.sin=Rt,o.sinh=zt,o.sqrt=Ot,o.sub=Ut,o.sum=Lt,o.tan=$t,o.tanh=jt,o.trunc=qt,void 0===e&&(e={}),e&&!0!==e.defaults)for(i=["precision","rounding","toExpNeg","toExpPos","maxE","minE","modulo","crypto"],n=0;n<i.length;)e.hasOwnProperty(r=i[n++])||(e[r]=this[r]);return o.config(e),o}(D);d=new Vt(d),m=new Vt(m);const Ht=Vt;function Zt(t,e){if(Xt(t,e))return t[e];if("function"==typeof t[e]&&function(t,e){return!(null==t||"function"!=typeof t[e]||$e(t,e)&&Object.getPrototypeOf&&e in Object.getPrototypeOf(t)||!$e(Wt,e)&&(e in Object.prototype||e in Function.prototype))}(t,e))throw new Error('Cannot access method "'+e+'" as a property');throw new Error('No access to property "'+e+'"')}function Xt(t,e){return!(!function(t){return"object"==typeof t&&t&&t.constructor===Object}(t)&&!Array.isArray(t)||!$e(Yt,e)&&(e in Object.prototype||e in Function.prototype))}var Yt={length:!0,name:!0},Wt={toString:!0,valueOf:!0,toLocaleString:!0};class Jt{constructor(t){this.wrappedObject=t,this[Symbol.iterator]=this.entries}keys(){return Object.keys(this.wrappedObject).filter((t=>this.has(t))).values()}get(t){return Zt(this.wrappedObject,t)}set(t,e){return function(t,e,n){if(Xt(t,e))return t[e]=n,n;throw new Error('No access to property "'+e+'"')}(this.wrappedObject,t,e),this}has(t){return Xt(this.wrappedObject,t)&&t in this.wrappedObject}entries(){return t=this.keys(),e=t=>[t,this.get(t)],{next:()=>{var n=t.next();return n.done?n:{value:e(n.value),done:!1}}};var t,e}forEach(t){for(var e of this.keys())t(this.get(e),e,this)}delete(t){Xt(this.wrappedObject,t)&&delete this.wrappedObject[t]}clear(){for(var t of this.keys())this.delete(t)}get size(){return Object.keys(this.wrappedObject).length}}function Gt(t){return"number"==typeof t}function Kt(t){return!(!t||"object"!=typeof t||"function"!=typeof t.constructor)&&(!0===t.isBigNumber&&"object"==typeof t.constructor.prototype&&!0===t.constructor.prototype.isBigNumber||"function"==typeof t.constructor.isDecimal&&!0===t.constructor.isDecimal(t))}function Qt(t){return"bigint"==typeof t}function te(t){return t&&"object"==typeof t&&!0===Object.getPrototypeOf(t).isComplex||!1}function ee(t){return t&&"object"==typeof t&&!0===Object.getPrototypeOf(t).isFraction||!1}function ne(t){return t&&!0===t.constructor.prototype.isUnit||!1}function re(t){return"string"==typeof t}var ie=Array.isArray;function oe(t){return t&&!0===t.constructor.prototype.isMatrix||!1}function ue(t){return Array.isArray(t)||oe(t)}function ae(t){return t&&t.isDenseMatrix&&!0===t.constructor.prototype.isMatrix||!1}function se(t){return t&&t.isSparseMatrix&&!0===t.constructor.prototype.isMatrix||!1}function ce(t){return t&&!0===t.constructor.prototype.isRange||!1}function le(t){return t&&!0===t.constructor.prototype.isIndex||!1}function he(t){return"boolean"==typeof t}function fe(t){return t&&!0===t.constructor.prototype.isResultSet||!1}function pe(t){return t&&!0===t.constructor.prototype.isHelp||!1}function de(t){return"function"==typeof t}function me(t){return t instanceof Date}function De(t){return t instanceof RegExp}function ge(t){return!(!t||"object"!=typeof t||t.constructor!==Object||te(t)||ee(t))}function ye(t){return!!t&&(t instanceof Map||t instanceof Jt||"function"==typeof t.set&&"function"==typeof t.get&&"function"==typeof t.keys&&"function"==typeof t.has)}function ve(t){return null===t}function we(t){return void 0===t}function Ee(t){return t&&!0===t.isAccessorNode&&!0===t.constructor.prototype.isNode||!1}function Fe(t){return t&&!0===t.isArrayNode&&!0===t.constructor.prototype.isNode||!1}function Ae(t){return t&&!0===t.isAssignmentNode&&!0===t.constructor.prototype.isNode||!1}function Ce(t){return t&&!0===t.isBlockNode&&!0===t.constructor.prototype.isNode||!1}function xe(t){return t&&!0===t.isConditionalNode&&!0===t.constructor.prototype.isNode||!1}function _e(t){return t&&!0===t.isConstantNode&&!0===t.constructor.prototype.isNode||!1}function be(t){return t&&!0===t.isFunctionAssignmentNode&&!0===t.constructor.prototype.isNode||!1}function Be(t){return t&&!0===t.isFunctionNode&&!0===t.constructor.prototype.isNode||!1}function Me(t){return t&&!0===t.isIndexNode&&!0===t.constructor.prototype.isNode||!1}function Ne(t){return t&&!0===t.isNode&&!0===t.constructor.prototype.isNode||!1}function Se(t){return t&&!0===t.isObjectNode&&!0===t.constructor.prototype.isNode||!1}function Ie(t){return t&&!0===t.isOperatorNode&&!0===t.constructor.prototype.isNode||!1}function Te(t){return t&&!0===t.isParenthesisNode&&!0===t.constructor.prototype.isNode||!1}function ke(t){return t&&!0===t.isRangeNode&&!0===t.constructor.prototype.isNode||!1}function Pe(t){return t&&!0===t.isRelationalNode&&!0===t.constructor.prototype.isNode||!1}function Re(t){return t&&!0===t.isSymbolNode&&!0===t.constructor.prototype.isNode||!1}function ze(t){return t&&!0===t.constructor.prototype.isChain||!1}function Oe(t){var e=typeof t;return"object"===e?null===t?"null":Kt(t)?"BigNumber":t.constructor&&t.constructor.name?t.constructor.name:"Object":e}function Ue(t){var e=typeof t;if("number"===e||"bigint"===e||"string"===e||"boolean"===e||null==t)return t;if("function"==typeof t.clone)return t.clone();if(Array.isArray(t))return t.map((function(t){return Ue(t)}));if(t instanceof Date)return new Date(t.valueOf());if(Kt(t))return t;if(ge(t))return function(t,e){var n={};for(var r in t)$e(t,r)&&(n[r]=e(t[r]));return n}(t,Ue);if("function"===e)return t;throw new TypeError("Cannot clone: unknown type of value (value: ".concat(t,")"))}function Le(t,e){var n,r,i;if(Array.isArray(t)){if(!Array.isArray(e))return!1;if(t.length!==e.length)return!1;for(r=0,i=t.length;r<i;r++)if(!Le(t[r],e[r]))return!1;return!0}if("function"==typeof t)return t===e;if(t instanceof Object){if(Array.isArray(e)||!(e instanceof Object))return!1;for(n in t)if(!(n in e)||!Le(t[n],e[n]))return!1;for(n in e)if(!(n in t))return!1;return!0}return t===e}function $e(t,e){return t&&Object.hasOwnProperty.call(t,e)}function je(t,e,n,r){function i(r){var i=function(t,e){for(var n={},r=0;r<e.length;r++){var i=e[r],o=t[i];void 0!==o&&(n[i]=o)}return n}(r,e.map(qe));return function(t,e,n){if(!e.filter((t=>!function(t){return t&&"?"===t[0]}(t))).every((t=>void 0!==n[t]))){var r=e.filter((t=>void 0===n[t]));throw new Error('Cannot create function "'.concat(t,'", ')+"some dependencies are missing: ".concat(r.map((t=>'"'.concat(t,'"'))).join(", "),"."))}}(t,e,r),n(i)}return i.isFactory=!0,i.fn=t,i.dependencies=e.slice().sort(),r&&(i.meta=r),i}function qe(t){return t&&"?"===t[0]?t.slice(1):t}var Ve=je("BigNumber",["?on","config"],(t=>{var{on:e,config:n}=t,r=Ht.clone({precision:n.precision,modulo:Ht.EUCLID});return r.prototype=Object.create(r.prototype),r.prototype.type="BigNumber",r.prototype.isBigNumber=!0,r.prototype.toJSON=function(){return{mathjs:"BigNumber",value:this.toString()}},r.fromJSON=function(t){return new r(t.value)},e&&e("config",(function(t,e){t.precision!==e.precision&&r.config({precision:t.precision})})),r}),{isClass:!0});const He=Math.cosh||function(t){return Math.abs(t)<1e-9?1-t:.5*(Math.exp(t)+Math.exp(-t))},Ze=Math.sinh||function(t){return Math.abs(t)<1e-9?t:.5*(Math.exp(t)-Math.exp(-t))},Xe=function(t,e){return(t=Math.abs(t))<(e=Math.abs(e))&&([t,e]=[e,t]),t<1e8?Math.sqrt(t*t+e*e):(e/=t,t*Math.sqrt(1+e*e))},Ye=function(){throw SyntaxError("Invalid Param")};function We(t,e){const n=Math.abs(t),r=Math.abs(e);return 0===t?Math.log(r):0===e?Math.log(n):n<3e3&&r<3e3?.5*Math.log(t*t+e*e):(t*=.5,e*=.5,.5*Math.log(t*t+e*e)+Math.LN2)}const Je={re:0,im:0},Ge=function(t,e){const n=Je;if(null==t)n.re=n.im=0;else if(void 0!==e)n.re=t,n.im=e;else switch(typeof t){case"object":if("im"in t&&"re"in t)n.re=t.re,n.im=t.im;else if("abs"in t&&"arg"in t){if(!isFinite(t.abs)&&isFinite(t.arg))return Ke.INFINITY;n.re=t.abs*Math.cos(t.arg),n.im=t.abs*Math.sin(t.arg)}else if("r"in t&&"phi"in t){if(!isFinite(t.r)&&isFinite(t.phi))return Ke.INFINITY;n.re=t.r*Math.cos(t.phi),n.im=t.r*Math.sin(t.phi)}else 2===t.length?(n.re=t[0],n.im=t[1]):Ye();break;case"string":n.im=n.re=0;const e=t.replace(/_/g,"").match(/\d+\.?\d*e[+-]?\d+|\d+\.?\d*|\.\d+|./g);let r=1,i=0;null===e&&Ye();for(let t=0;t<e.length;t++){const o=e[t];" "===o||"\t"===o||"\n"===o||("+"===o?r++:"-"===o?i++:"i"===o||"I"===o?(r+i===0&&Ye()," "===e[t+1]||isNaN(e[t+1])?n.im+=parseFloat((i%2?"-":"")+"1"):(n.im+=parseFloat((i%2?"-":"")+e[t+1]),t++),r=i=0):((r+i===0||isNaN(o))&&Ye(),"i"===e[t+1]||"I"===e[t+1]?(n.im+=parseFloat((i%2?"-":"")+o),t++):n.re+=parseFloat((i%2?"-":"")+o),r=i=0))}r+i>0&&Ye();break;case"number":n.im=0,n.re=t;break;default:Ye()}return isNaN(n.re)||isNaN(n.im),n};function Ke(t,e){if(!(this instanceof Ke))return new Ke(t,e);const n=Ge(t,e);this.re=n.re,this.im=n.im}function Qe(t){return"boolean"==typeof t||!!isFinite(t)&&t===Math.round(t)}Ke.prototype={re:0,im:0,sign:function(){const t=Xe(this.re,this.im);return new Ke(this.re/t,this.im/t)},add:function(t,e){const n=Ge(t,e),r=this.isInfinite(),i=!(isFinite(n.re)&&isFinite(n.im));return r||i?r&&i?Ke.NAN:Ke.INFINITY:new Ke(this.re+n.re,this.im+n.im)},sub:function(t,e){const n=Ge(t,e),r=this.isInfinite(),i=!(isFinite(n.re)&&isFinite(n.im));return r||i?r&&i?Ke.NAN:Ke.INFINITY:new Ke(this.re-n.re,this.im-n.im)},mul:function(t,e){const n=Ge(t,e),r=this.isInfinite(),i=!(isFinite(n.re)&&isFinite(n.im)),o=0===this.re&&0===this.im,u=0===n.re&&0===n.im;return r&&u||i&&o?Ke.NAN:r||i?Ke.INFINITY:0===n.im&&0===this.im?new Ke(this.re*n.re,0):new Ke(this.re*n.re-this.im*n.im,this.re*n.im+this.im*n.re)},div:function(t,e){const n=Ge(t,e),r=this.isInfinite(),i=!(isFinite(n.re)&&isFinite(n.im)),o=0===this.re&&0===this.im,u=0===n.re&&0===n.im;if(o&&u||r&&i)return Ke.NAN;if(u||r)return Ke.INFINITY;if(o||i)return Ke.ZERO;if(0===n.im)return new Ke(this.re/n.re,this.im/n.re);if(Math.abs(n.re)<Math.abs(n.im)){const t=n.re/n.im,e=n.re*t+n.im;return new Ke((this.re*t+this.im)/e,(this.im*t-this.re)/e)}{const t=n.im/n.re,e=n.im*t+n.re;return new Ke((this.re+this.im*t)/e,(this.im-this.re*t)/e)}},pow:function(t,e){const n=Ge(t,e),r=0===this.re&&0===this.im;if(0===n.re&&0===n.im)return Ke.ONE;if(0===n.im){if(0===this.im&&this.re>0)return new Ke(Math.pow(this.re,n.re),0);if(0===this.re)switch((n.re%4+4)%4){case 0:return new Ke(Math.pow(this.im,n.re),0);case 1:return new Ke(0,Math.pow(this.im,n.re));case 2:return new Ke(-Math.pow(this.im,n.re),0);case 3:return new Ke(0,-Math.pow(this.im,n.re))}}if(r&&n.re>0)return Ke.ZERO;const i=Math.atan2(this.im,this.re),o=We(this.re,this.im);let u=Math.exp(n.re*o-n.im*i),a=n.im*o+n.re*i;return new Ke(u*Math.cos(a),u*Math.sin(a))},sqrt:function(){const t=this.re,e=this.im;if(0===e)return t>=0?new Ke(Math.sqrt(t),0):new Ke(0,Math.sqrt(-t));const n=Xe(t,e);let r=Math.sqrt(.5*(n+Math.abs(t))),i=Math.abs(e)/(2*r);return t>=0?new Ke(r,e<0?-i:i):new Ke(i,e<0?-r:r)},exp:function(){const t=Math.exp(this.re);return 0===this.im?new Ke(t,0):new Ke(t*Math.cos(this.im),t*Math.sin(this.im))},expm1:function(){const t=this.re,e=this.im;return new Ke(Math.expm1(t)*Math.cos(e)+function(t){const e=Math.PI/4;if(-e>t||t>e)return Math.cos(t)-1;const n=t*t;return n*(n*(n*(n*(n*(n*(n*(n/20922789888e3-1/87178291200)+1/479001600)-1/3628800)+1/40320)-1/720)+1/24)-.5)}(e),Math.exp(t)*Math.sin(e))},log:function(){const t=this.re,e=this.im;return 0===e&&t>0?new Ke(Math.log(t),0):new Ke(We(t,e),Math.atan2(e,t))},abs:function(){return Xe(this.re,this.im)},arg:function(){return Math.atan2(this.im,this.re)},sin:function(){const t=this.re,e=this.im;return new Ke(Math.sin(t)*He(e),Math.cos(t)*Ze(e))},cos:function(){const t=this.re,e=this.im;return new Ke(Math.cos(t)*He(e),-Math.sin(t)*Ze(e))},tan:function(){const t=2*this.re,e=2*this.im,n=Math.cos(t)+He(e);return new Ke(Math.sin(t)/n,Ze(e)/n)},cot:function(){const t=2*this.re,e=2*this.im,n=Math.cos(t)-He(e);return new Ke(-Math.sin(t)/n,Ze(e)/n)},sec:function(){const t=this.re,e=this.im,n=.5*He(2*e)+.5*Math.cos(2*t);return new Ke(Math.cos(t)*He(e)/n,Math.sin(t)*Ze(e)/n)},csc:function(){const t=this.re,e=this.im,n=.5*He(2*e)-.5*Math.cos(2*t);return new Ke(Math.sin(t)*He(e)/n,-Math.cos(t)*Ze(e)/n)},asin:function(){const t=this.re,e=this.im,n=new Ke(e*e-t*t+1,-2*t*e).sqrt(),r=new Ke(n.re-e,n.im+t).log();return new Ke(r.im,-r.re)},acos:function(){const t=this.re,e=this.im,n=new Ke(e*e-t*t+1,-2*t*e).sqrt(),r=new Ke(n.re-e,n.im+t).log();return new Ke(Math.PI/2-r.im,r.re)},atan:function(){const t=this.re,e=this.im;if(0===t){if(1===e)return new Ke(0,1/0);if(-1===e)return new Ke(0,-1/0)}const n=t*t+(1-e)*(1-e),r=new Ke((1-e*e-t*t)/n,-2*t/n).log();return new Ke(-.5*r.im,.5*r.re)},acot:function(){const t=this.re,e=this.im;if(0===e)return new Ke(Math.atan2(1,t),0);const n=t*t+e*e;return 0!==n?new Ke(t/n,-e/n).atan():new Ke(0!==t?t/0:0,0!==e?-e/0:0).atan()},asec:function(){const t=this.re,e=this.im;if(0===t&&0===e)return new Ke(0,1/0);const n=t*t+e*e;return 0!==n?new Ke(t/n,-e/n).acos():new Ke(0!==t?t/0:0,0!==e?-e/0:0).acos()},acsc:function(){const t=this.re,e=this.im;if(0===t&&0===e)return new Ke(Math.PI/2,1/0);const n=t*t+e*e;return 0!==n?new Ke(t/n,-e/n).asin():new Ke(0!==t?t/0:0,0!==e?-e/0:0).asin()},sinh:function(){const t=this.re,e=this.im;return new Ke(Ze(t)*Math.cos(e),He(t)*Math.sin(e))},cosh:function(){const t=this.re,e=this.im;return new Ke(He(t)*Math.cos(e),Ze(t)*Math.sin(e))},tanh:function(){const t=2*this.re,e=2*this.im,n=He(t)+Math.cos(e);return new Ke(Ze(t)/n,Math.sin(e)/n)},coth:function(){const t=2*this.re,e=2*this.im,n=He(t)-Math.cos(e);return new Ke(Ze(t)/n,-Math.sin(e)/n)},csch:function(){const t=this.re,e=this.im,n=Math.cos(2*e)-He(2*t);return new Ke(-2*Ze(t)*Math.cos(e)/n,2*He(t)*Math.sin(e)/n)},sech:function(){const t=this.re,e=this.im,n=Math.cos(2*e)+He(2*t);return new Ke(2*He(t)*Math.cos(e)/n,-2*Ze(t)*Math.sin(e)/n)},asinh:function(){let t=this.im;this.im=-this.re,this.re=t;const e=this.asin();return this.re=-this.im,this.im=t,t=e.re,e.re=-e.im,e.im=t,e},acosh:function(){const t=this.acos();if(t.im<=0){const e=t.re;t.re=-t.im,t.im=e}else{const e=t.im;t.im=-t.re,t.re=e}return t},atanh:function(){const t=this.re,e=this.im,n=t>1&&0===e,r=1-t,i=1+t,o=r*r+e*e,u=0!==o?new Ke((i*r-e*e)/o,(e*r+i*e)/o):new Ke(-1!==t?t/0:0,0!==e?e/0:0),a=u.re;return u.re=We(u.re,u.im)/2,u.im=Math.atan2(u.im,a)/2,n&&(u.im=-u.im),u},acoth:function(){const t=this.re,e=this.im;if(0===t&&0===e)return new Ke(0,Math.PI/2);const n=t*t+e*e;return 0!==n?new Ke(t/n,-e/n).atanh():new Ke(0!==t?t/0:0,0!==e?-e/0:0).atanh()},acsch:function(){const t=this.re,e=this.im;if(0===e)return new Ke(0!==t?Math.log(t+Math.sqrt(t*t+1)):1/0,0);const n=t*t+e*e;return 0!==n?new Ke(t/n,-e/n).asinh():new Ke(0!==t?t/0:0,0!==e?-e/0:0).asinh()},asech:function(){const t=this.re,e=this.im;if(this.isZero())return Ke.INFINITY;const n=t*t+e*e;return 0!==n?new Ke(t/n,-e/n).acosh():new Ke(0!==t?t/0:0,0!==e?-e/0:0).acosh()},inverse:function(){if(this.isZero())return Ke.INFINITY;if(this.isInfinite())return Ke.ZERO;const t=this.re,e=this.im,n=t*t+e*e;return new Ke(t/n,-e/n)},conjugate:function(){return new Ke(this.re,-this.im)},neg:function(){return new Ke(-this.re,-this.im)},ceil:function(t){return t=Math.pow(10,t||0),new Ke(Math.ceil(this.re*t)/t,Math.ceil(this.im*t)/t)},floor:function(t){return t=Math.pow(10,t||0),new Ke(Math.floor(this.re*t)/t,Math.floor(this.im*t)/t)},round:function(t){return t=Math.pow(10,t||0),new Ke(Math.round(this.re*t)/t,Math.round(this.im*t)/t)},equals:function(t,e){const n=Ge(t,e);return Math.abs(n.re-this.re)<=Ke.EPSILON&&Math.abs(n.im-this.im)<=Ke.EPSILON},clone:function(){return new Ke(this.re,this.im)},toString:function(){let t=this.re,e=this.im,n="";return this.isNaN()?"NaN":this.isInfinite()?"Infinity":(Math.abs(t)<Ke.EPSILON&&(t=0),Math.abs(e)<Ke.EPSILON&&(e=0),0===e?n+t:(0!==t?(n+=t,n+=" ",e<0?(e=-e,n+="-"):n+="+",n+=" "):e<0&&(e=-e,n+="-"),1!==e&&(n+=e),n+"i"))},toVector:function(){return[this.re,this.im]},valueOf:function(){return 0===this.im?this.re:null},isNaN:function(){return isNaN(this.re)||isNaN(this.im)},isZero:function(){return 0===this.im&&0===this.re},isFinite:function(){return isFinite(this.re)&&isFinite(this.im)},isInfinite:function(){return!this.isFinite()}},Ke.ZERO=new Ke(0,0),Ke.ONE=new Ke(1,0),Ke.I=new Ke(0,1),Ke.PI=new Ke(Math.PI,0),Ke.E=new Ke(Math.E,0),Ke.INFINITY=new Ke(1/0,1/0),Ke.NAN=new Ke(NaN,NaN),Ke.EPSILON=1e-15;Math.sign,Math.log2;var tn=Math.log10||function(t){return Math.log(t)/Math.LN10};Math.log1p,Math.cbrt,Math.expm1;function en(t,e,n){var r={2:"0b",8:"0o",16:"0x"}[e],i="";if(n){if(n<1)throw new Error("size must be in greater than 0");if(!Qe(n))throw new Error("size must be an integer");if(t>2**(n-1)-1||t<-(2**(n-1)))throw new Error("Value must be in range [-2^".concat(n-1,", 2^").concat(n-1,"-1]"));if(!Qe(t))throw new Error("Value must be an integer");t<0&&(t+=2**n),i="i".concat(n)}var o="";return t<0&&(t=-t,o="-"),"".concat(o).concat(r).concat(t.toString(e)).concat(i)}function nn(t,e){if("function"==typeof e)return e(t);if(t===1/0)return"Infinity";if(t===-1/0)return"-Infinity";if(isNaN(t))return"NaN";var{notation:n,precision:r,wordSize:i}=rn(e);switch(n){case"fixed":return function(t,e){if(isNaN(t)||!isFinite(t))return String(t);var n=on(t),r="number"==typeof e?an(n,n.exponent+1+e):n,i=r.coefficients,o=r.exponent+1,u=o+(e||0);return i.length<u&&(i=i.concat(sn(u-i.length))),o<0&&(i=sn(1-o).concat(i),o=1),o<i.length&&i.splice(o,0,0===o?"0.":"."),r.sign+i.join("")}(t,r);case"exponential":return un(t,r);case"engineering":return function(t,e){if(isNaN(t)||!isFinite(t))return String(t);var n=an(on(t),e),r=n.exponent,i=n.coefficients,o=r%3==0?r:r<0?r-3-r%3:r-r%3;if(Gt(e))for(;e>i.length||r-o+1>i.length;)i.push(0);else for(var u=Math.abs(r-o)-(i.length-1),a=0;a<u;a++)i.push(0);for(var s=Math.abs(r-o),c=1;s>0;)c++,s--;var l=i.slice(c).join(""),h=Gt(e)&&l.length||l.match(/[1-9]/)?"."+l:"",f=i.slice(0,c).join("")+h+"e"+(r>=0?"+":"")+o.toString();return n.sign+f}(t,r);case"bin":return en(t,2,i);case"oct":return en(t,8,i);case"hex":return en(t,16,i);case"auto":return function(t,e,n){if(isNaN(t)||!isFinite(t))return String(t);var r=hn(null==n?void 0:n.lowerExp,-3),i=hn(null==n?void 0:n.upperExp,5),o=on(t),u=e?an(o,e):o;if(u.exponent<r||u.exponent>=i)return un(t,e);var a=u.coefficients,s=u.exponent;a.length<e&&(a=a.concat(sn(e-a.length))),a=a.concat(sn(s-a.length+1+(a.length<e?e-a.length:0)));var c=s>0?s:0;return c<(a=sn(-s).concat(a)).length-1&&a.splice(c+1,0,"."),u.sign+a.join("")}(t,r,e).replace(/((\.\d*?)(0+))($|e)/,(function(){var t=arguments[2],e=arguments[4];return"."!==t?t+e:e}));default:throw new Error('Unknown notation "'+n+'". Choose "auto", "exponential", "fixed", "bin", "oct", or "hex.')}}function rn(t){var e,n,r="auto";if(void 0!==t)if(Gt(t))e=t;else if(Kt(t))e=t.toNumber();else{if(!ge(t))throw new Error("Unsupported type of options, number, BigNumber, or object expected");void 0!==t.precision&&(e=ln(t.precision,(()=>{throw new Error('Option "precision" must be a number or BigNumber')}))),void 0!==t.wordSize&&(n=ln(t.wordSize,(()=>{throw new Error('Option "wordSize" must be a number or BigNumber')}))),t.notation&&(r=t.notation)}return{notation:r,precision:e,wordSize:n}}function on(t){var e=String(t).toLowerCase().match(/^(-?)(\d+\.?\d*)(e([+-]?\d+))?$/);if(!e)throw new SyntaxError("Invalid number "+t);var n=e[1],r=e[2],i=parseFloat(e[4]||"0"),o=r.indexOf(".");i+=-1!==o?o-1:r.length-1;var u=r.replace(".","").replace(/^0*/,(function(t){return i-=t.length,""})).replace(/0*$/,"").split("").map((function(t){return parseInt(t)}));return 0===u.length&&(u.push(0),i++),{sign:n,coefficients:u,exponent:i}}function un(t,e){if(isNaN(t)||!isFinite(t))return String(t);var n=on(t),r=e?an(n,e):n,i=r.coefficients,o=r.exponent;i.length<e&&(i=i.concat(sn(e-i.length)));var u=i.shift();return r.sign+u+(i.length>0?"."+i.join(""):"")+"e"+(o>=0?"+":"")+o}function an(t,e){for(var n={sign:t.sign,coefficients:t.coefficients,exponent:t.exponent},r=n.coefficients;e<=0;)r.unshift(0),n.exponent++,e++;if(r.length>e&&r.splice(e,r.length-e)[0]>=5){var i=e-1;for(r[i]++;10===r[i];)r.pop(),0===i&&(r.unshift(0),n.exponent++,i++),r[--i]++}return n}function sn(t){for(var e=[],n=0;n<t;n++)e.push(0);return e}function cn(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e-8,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;if(n<=0)throw new Error("Relative tolerance must be greater than 0");if(r<0)throw new Error("Absolute tolerance must be at least 0");return!isNaN(t)&&!isNaN(e)&&(isFinite(t)&&isFinite(e)?t===e||Math.abs(t-e)<=Math.max(n*Math.max(Math.abs(t),Math.abs(e)),r):t===e)}Math.acosh,Math.asinh,Math.atanh,Math.cosh,Math.sinh;function ln(t,e){return Gt(t)?t:Kt(t)?t.toNumber():void e()}function hn(t,e){return Gt(t)?t:Kt(t)?t.toNumber():e}Math.tanh;var fn=je("Complex",[],(()=>(Object.defineProperty(Ke,"name",{value:"Complex"}),Ke.prototype.constructor=Ke,Ke.prototype.type="Complex",Ke.prototype.isComplex=!0,Ke.prototype.toJSON=function(){return{mathjs:"Complex",re:this.re,im:this.im}},Ke.prototype.toPolar=function(){return{r:this.abs(),phi:this.arg()}},Ke.prototype.format=function(t){var e=this.im,n=this.re,r=nn(this.re,t),i=nn(this.im,t),o=Gt(t)?t:t?t.precision:null;if(null!==o){var u=Math.pow(10,-o);Math.abs(n/e)<u&&(n=0),Math.abs(e/n)<u&&(e=0)}return 0===e?r:0===n?1===e?"i":-1===e?"-i":i+"i":e<0?-1===e?r+" - i":r+" - "+i.substring(1)+"i":1===e?r+" + i":r+" + "+i+"i"},Ke.fromPolar=function(t){switch(arguments.length){case 1:var e=arguments[0];if("object"==typeof e)return Ke(e);throw new TypeError("Input has to be an object with r and phi keys.");case 2:var n=arguments[0],r=arguments[1];if(Gt(n)){if(ne(r)&&r.hasBase("ANGLE")&&(r=r.toNumber("rad")),Gt(r))return new Ke({r:n,phi:r});throw new TypeError("Phi is not a number nor an angle unit.")}throw new TypeError("Radius r is not a number.");default:throw new SyntaxError("Wrong number of arguments in function fromPolar")}},Ke.prototype.valueOf=Ke.prototype.toString,Ke.fromJSON=function(t){return new Ke(t)},Ke.compare=function(t,e){return t.re>e.re?1:t.re<e.re?-1:t.im>e.im?1:t.im<e.im?-1:0},Ke)),{isClass:!0});function pn(t){var e=0,n=1,r=Object.create(null),i=Object.create(null),o=0,u=function(t){var u=i[t];if(u&&(delete r[u],delete i[t],--e,n===u)){if(!e)return o=0,void(n=1);for(;!Object.prototype.hasOwnProperty.call(r,++n););}};return t=Math.abs(t),{hit:function(a){var s=i[a],c=++o;if(r[c]=a,i[a]=c,!s){if(++e<=t)return;return a=r[n],u(a),a}if(delete r[s],n===s)for(;!Object.prototype.hasOwnProperty.call(r,++n););},delete:u,clear:function(){e=o=0,n=1,r=Object.create(null),i=Object.create(null)}}}function dn(t){var{hasher:e,limit:n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return n=null==n?Number.POSITIVE_INFINITY:n,e=null==e?JSON.stringify:e,function r(){"object"!=typeof r.cache&&(r.cache={values:new Map,lru:pn(n||Number.POSITIVE_INFINITY)});for(var i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];var u=e(i);if(r.cache.values.has(u))return r.cache.lru.hit(u),r.cache.values.get(u);var a=t.apply(t,i);return r.cache.values.set(u,a),r.cache.values.delete(r.cache.lru.hit(u)),a}}dn((function(t){return new t(1).exp()}),{hasher:Dn}),dn((function(t){return new t(1).plus(new t(5).sqrt()).div(2)}),{hasher:Dn});var mn=dn((function(t){return t.acos(-1)}),{hasher:Dn});function Dn(t){return t[0].precision}dn((function(t){return mn(t).times(2)}),{hasher:Dn});var gn=Math.PI,yn=(Math.PI,Math.E,vn("pi",["config","?BigNumber"],(t=>{var{config:e,BigNumber:n}=t;return"BigNumber"===e.number?mn(n):gn})));function vn(t,e,n){return je(t,e,n,{recreateOnConfigChange:!0})}function wn(t,e){return je(t,["config","BigNumber"],(t=>{var{config:n,BigNumber:r}=t;return"BigNumber"===n.number?new r(e):e}))}wn("fineStructure",.0072973525693),wn("weakMixingAngle",.2229),wn("efimovFactor",22.7),wn("sackurTetrode",-1.16487052358),"undefined"==typeof BigInt&&(BigInt=function(t){if(isNaN(t))throw new Error("");return t});const En=BigInt(0),Fn=BigInt(1),An=BigInt(2),Cn=BigInt(5),xn=BigInt(10),_n={s:Fn,n:En,d:Fn};function bn(t,e){try{t=BigInt(t)}catch(t){throw Pn()}return t*e}function Bn(t){return"bigint"==typeof t?t:Math.floor(t)}function Mn(t,e){if(e===En)throw kn();const n=Object.create(Tn.prototype);n.s=t<En?-Fn:Fn;const r=In(t=t<En?-t:t,e);return n.n=t/r,n.d=e/r,n}function Nn(t){const e={};let n=t,r=An,i=Cn-Fn;for(;i<=n;){for(;n%r===En;)n/=r,e[r]=(e[r]||En)+Fn;i+=Fn+An*r++}return n!==t?n>1&&(e[n]=(e[n]||En)+Fn):e[t]=(e[t]||En)+Fn,e}const Sn=function(t,e){let n=En,r=Fn,i=Fn;if(null==t);else if(void 0!==e){if("bigint"==typeof t)n=t;else{if(isNaN(t))throw Pn();if(t%1!=0)throw Rn();n=BigInt(t)}if("bigint"==typeof e)r=e;else{if(isNaN(e))throw Pn();if(e%1!=0)throw Rn();r=BigInt(e)}i=n*r}else if("object"==typeof t){if("d"in t&&"n"in t)n=BigInt(t.n),r=BigInt(t.d),"s"in t&&(n*=BigInt(t.s));else if(0 in t)n=BigInt(t[0]),1 in t&&(r=BigInt(t[1]));else{if("bigint"!=typeof t)throw Pn();n=t}i=n*r}else if("number"==typeof t){if(isNaN(t))throw Pn();if(t<0&&(i=-Fn,t=-t),t%1==0)n=BigInt(t);else{let e=1,i=0,o=1,u=1,a=1,s=1e7;for(t>=1&&(e=10**Math.floor(1+Math.log10(t)),t/=e);o<=s&&a<=s;){let e=(i+u)/(o+a);if(t===e){o+a<=s?(n=i+u,r=o+a):a>o?(n=u,r=a):(n=i,r=o);break}t>e?(i+=u,o+=a):(u+=i,a+=o),o>s?(n=u,r=a):(n=i,r=o)}n=BigInt(n)*BigInt(e),r=BigInt(r)}}else if("string"==typeof t){let e=0,o=En,u=En,a=En,s=Fn,c=Fn,l=t.replace(/_/g,"").match(/\d+|./g);if(null===l)throw Pn();if("-"===l[e]?(i=-Fn,e++):"+"===l[e]&&e++,l.length===e+1?u=bn(l[e++],i):"."===l[e+1]||"."===l[e]?("."!==l[e]&&(o=bn(l[e++],i)),e++,(e+1===l.length||"("===l[e+1]&&")"===l[e+3]||"'"===l[e+1]&&"'"===l[e+3])&&(u=bn(l[e],i),s=xn**BigInt(l[e].length),e++),("("===l[e]&&")"===l[e+2]||"'"===l[e]&&"'"===l[e+2])&&(a=bn(l[e+1],i),c=xn**BigInt(l[e+1].length)-Fn,e+=3)):"/"===l[e+1]||":"===l[e+1]?(u=bn(l[e],i),s=bn(l[e+2],Fn),e+=3):"/"===l[e+3]&&" "===l[e+1]&&(o=bn(l[e],i),u=bn(l[e+2],i),s=bn(l[e+4],Fn),e+=5),!(l.length<=e))throw Pn();r=s*c,i=n=a+r*o+c*u}else{if("bigint"!=typeof t)throw Pn();n=t,i=t,r=Fn}if(r===En)throw kn();_n.s=i<En?-Fn:Fn,_n.n=n<En?-n:n,_n.d=r<En?-r:r};function In(t,e){if(!t)return e;if(!e)return t;for(;;){if(!(t%=e))return e;if(!(e%=t))return t}}function Tn(t,e){if(Sn(t,e),!(this instanceof Tn))return Mn(_n.s*_n.n,_n.d);t=In(_n.d,_n.n),this.s=_n.s,this.n=_n.n/t,this.d=_n.d/t}var kn=function(){return new Error("Division by Zero")},Pn=function(){return new Error("Invalid argument")},Rn=function(){return new Error("Parameters must be integer")};Tn.prototype={s:Fn,n:En,d:Fn,abs:function(){return Mn(this.n,this.d)},neg:function(){return Mn(-this.s*this.n,this.d)},add:function(t,e){return Sn(t,e),Mn(this.s*this.n*_n.d+_n.s*this.d*_n.n,this.d*_n.d)},sub:function(t,e){return Sn(t,e),Mn(this.s*this.n*_n.d-_n.s*this.d*_n.n,this.d*_n.d)},mul:function(t,e){return Sn(t,e),Mn(this.s*_n.s*this.n*_n.n,this.d*_n.d)},div:function(t,e){return Sn(t,e),Mn(this.s*_n.s*this.n*_n.d,this.d*_n.n)},clone:function(){return Mn(this.s*this.n,this.d)},mod:function(t,e){if(void 0===t)return Mn(this.s*this.n%this.d,Fn);if(Sn(t,e),En===_n.n*this.d)throw kn();return Mn(this.s*(_n.d*this.n)%(_n.n*this.d),_n.d*this.d)},gcd:function(t,e){return Sn(t,e),Mn(In(_n.n,this.n)*In(_n.d,this.d),_n.d*this.d)},lcm:function(t,e){return Sn(t,e),_n.n===En&&this.n===En?Mn(En,Fn):Mn(_n.n*this.n,In(_n.n,this.n)*In(_n.d,this.d))},inverse:function(){return Mn(this.s*this.d,this.n)},pow:function(t,e){if(Sn(t,e),_n.d===Fn)return _n.s<En?Mn((this.s*this.d)**_n.n,this.n**_n.n):Mn((this.s*this.n)**_n.n,this.d**_n.n);if(this.s<En)return null;let n=Nn(this.n),r=Nn(this.d),i=Fn,o=Fn;for(let t in n)if("1"!==t){if("0"===t){i=En;break}if(n[t]*=_n.n,n[t]%_n.d!==En)return null;n[t]/=_n.d,i*=BigInt(t)**n[t]}for(let t in r)if("1"!==t){if(r[t]*=_n.n,r[t]%_n.d!==En)return null;r[t]/=_n.d,o*=BigInt(t)**r[t]}return _n.s<En?Mn(o,i):Mn(i,o)},log:function(t,e){if(Sn(t,e),this.s<=En||_n.s<=En)return null;const n={},r=Nn(_n.n),i=Nn(_n.d),o=Nn(this.n),u=Nn(this.d);for(const t in i)r[t]=(r[t]||En)-i[t];for(const t in u)o[t]=(o[t]||En)-u[t];for(const t in r)"1"!==t&&(n[t]=!0);for(const t in o)"1"!==t&&(n[t]=!0);let a=null,s=null;for(const t in n){const e=r[t]||En,n=o[t]||En;if(e===En){if(n!==En)return null;continue}let i=n,u=e;const c=In(i,u);if(i/=c,u/=c,null===a&&null===s)a=i,s=u;else if(i*s!==a*u)return null}return null!==a&&null!==s?Mn(a,s):null},equals:function(t,e){return Sn(t,e),this.s*this.n*_n.d===_n.s*_n.n*this.d},lt:function(t,e){return Sn(t,e),this.s*this.n*_n.d<_n.s*_n.n*this.d},lte:function(t,e){return Sn(t,e),this.s*this.n*_n.d<=_n.s*_n.n*this.d},gt:function(t,e){return Sn(t,e),this.s*this.n*_n.d>_n.s*_n.n*this.d},gte:function(t,e){return Sn(t,e),this.s*this.n*_n.d>=_n.s*_n.n*this.d},compare:function(t,e){Sn(t,e);let n=this.s*this.n*_n.d-_n.s*_n.n*this.d;return(En<n)-(n<En)},ceil:function(t){return t=xn**BigInt(t||0),Mn(Bn(this.s*t*this.n/this.d)+(t*this.n%this.d>En&&this.s>=En?Fn:En),t)},floor:function(t){return t=xn**BigInt(t||0),Mn(Bn(this.s*t*this.n/this.d)-(t*this.n%this.d>En&&this.s<En?Fn:En),t)},round:function(t){return t=xn**BigInt(t||0),Mn(Bn(this.s*t*this.n/this.d)+this.s*((this.s>=En?Fn:En)+An*(t*this.n%this.d)>this.d?Fn:En),t)},roundTo:function(t,e){Sn(t,e);const n=this.n*_n.d,r=this.d*_n.n,i=n%r;let o=Bn(n/r);return i+i>=r&&o++,Mn(this.s*o*_n.n,_n.d)},divisible:function(t,e){return Sn(t,e),!(!(_n.n*this.d)||this.n*_n.d%(_n.n*this.d))},valueOf:function(){return Number(this.s*this.n)/Number(this.d)},toString:function(t){let e=this.n,n=this.d;t=t||15;let r=function(t,e){for(;e%An===En;e/=An);for(;e%Cn===En;e/=Cn);if(e===Fn)return En;let n=xn%e,r=1;for(;n!==Fn;r++)if(n=n*xn%e,r>2e3)return En;return BigInt(r)}(0,n),i=function(t,e,n){let r=Fn,i=function(t,e,n){let r=Fn;for(;e>En;t=t*t%n,e>>=Fn)e&Fn&&(r=r*t%n);return r}(xn,n,e);for(let t=0;t<300;t++){if(r===i)return BigInt(t);r=r*xn%e,i=i*xn%e}return 0}(0,n,r),o=this.s<En?"-":"";if(o+=Bn(e/n),e%=n,e*=xn,e&&(o+="."),r){for(let t=i;t--;)o+=Bn(e/n),e%=n,e*=xn;o+="(";for(let t=r;t--;)o+=Bn(e/n),e%=n,e*=xn;o+=")"}else for(let r=t;e&&r--;)o+=Bn(e/n),e%=n,e*=xn;return o},toFraction:function(t){let e=this.n,n=this.d,r=this.s<En?"-":"";if(n===Fn)r+=e;else{let i=Bn(e/n);t&&i>En&&(r+=i,r+=" ",e%=n),r+=e,r+="/",r+=n}return r},toLatex:function(t){let e=this.n,n=this.d,r=this.s<En?"-":"";if(n===Fn)r+=e;else{let i=Bn(e/n);t&&i>En&&(r+=i,e%=n),r+="\\frac{",r+=e,r+="}{",r+=n,r+="}"}return r},toContinued:function(){let t=this.n,e=this.d,n=[];do{n.push(Bn(t/e));let r=t%e;t=e,e=r}while(t!==Fn);return n},simplify:function(t){const e=BigInt(1/(t||.001)|0),n=this.abs(),r=n.toContinued();for(let t=1;t<r.length;t++){let i=Mn(r[t-1],Fn);for(let e=t-2;e>=0;e--)i=i.inverse().add(r[e]);let o=i.sub(n);if(o.n*e<o.d)return i.mul(this.s)}return this}};var zn=je("Fraction",[],(()=>(Object.defineProperty(Tn,"name",{value:"Fraction"}),Tn.prototype.constructor=Tn,Tn.prototype.type="Fraction",Tn.prototype.isFraction=!0,Tn.prototype.toJSON=function(){return{mathjs:"Fraction",n:String(this.s*this.n),d:String(this.d)}},Tn.fromJSON=function(t){return new Tn(t)},Tn)),{isClass:!0}),On=je("Matrix",[],(()=>{function t(){if(!(this instanceof t))throw new SyntaxError("Constructor must be called with the new operator")}return t.prototype.type="Matrix",t.prototype.isMatrix=!0,t.prototype.storage=function(){throw new Error("Cannot invoke storage on a Matrix interface")},t.prototype.datatype=function(){throw new Error("Cannot invoke datatype on a Matrix interface")},t.prototype.create=function(t,e){throw new Error("Cannot invoke create on a Matrix interface")},t.prototype.subset=function(t,e,n){throw new Error("Cannot invoke subset on a Matrix interface")},t.prototype.get=function(t){throw new Error("Cannot invoke get on a Matrix interface")},t.prototype.set=function(t,e,n){throw new Error("Cannot invoke set on a Matrix interface")},t.prototype.resize=function(t,e){throw new Error("Cannot invoke resize on a Matrix interface")},t.prototype.reshape=function(t,e){throw new Error("Cannot invoke reshape on a Matrix interface")},t.prototype.clone=function(){throw new Error("Cannot invoke clone on a Matrix interface")},t.prototype.size=function(){throw new Error("Cannot invoke size on a Matrix interface")},t.prototype.map=function(t,e){throw new Error("Cannot invoke map on a Matrix interface")},t.prototype.forEach=function(t){throw new Error("Cannot invoke forEach on a Matrix interface")},t.prototype[Symbol.iterator]=function(){throw new Error("Cannot iterate a Matrix interface")},t.prototype.toArray=function(){throw new Error("Cannot invoke toArray on a Matrix interface")},t.prototype.valueOf=function(){throw new Error("Cannot invoke valueOf on a Matrix interface")},t.prototype.format=function(t){throw new Error("Cannot invoke format on a Matrix interface")},t.prototype.toString=function(){throw new Error("Cannot invoke toString on a Matrix interface")},t}),{isClass:!0});function Un(t,e,n){var r=new(0,t.constructor)(2),i="";if(n){if(n<1)throw new Error("size must be in greater than 0");if(!Qe(n))throw new Error("size must be an integer");if(t.greaterThan(r.pow(n-1).sub(1))||t.lessThan(r.pow(n-1).mul(-1)))throw new Error("Value must be in range [-2^".concat(n-1,", 2^").concat(n-1,"-1]"));if(!t.isInteger())throw new Error("Value must be an integer");t.lessThan(0)&&(t=t.add(r.pow(n))),i="i".concat(n)}switch(e){case 2:return"".concat(t.toBinary()).concat(i);case 8:return"".concat(t.toOctal()).concat(i);case 16:return"".concat(t.toHexadecimal()).concat(i);default:throw new Error("Base ".concat(e," not supported "))}}function Ln(t,e){return void 0!==e?t.toExponential(e-1):t.toExponential()}function $n(t,e){return Gt(t)?t:Kt(t)?t.toNumber():e}function jn(t,e){var n=function(t,e){return"number"==typeof t?nn(t,e):Kt(t)?function(t,e){if("function"==typeof e)return e(t);if(!t.isFinite())return t.isNaN()?"NaN":t.gt(0)?"Infinity":"-Infinity";var{notation:n,precision:r,wordSize:i}=rn(e);switch(n){case"fixed":return function(t,e){return t.toFixed(e)}(t,r);case"exponential":return Ln(t,r);case"engineering":return function(t,e){var n=t.e,r=n%3==0?n:n<0?n-3-n%3:n-n%3,i=t.mul(Math.pow(10,-r)).toPrecision(e);return i.includes("e")&&(i=new(0,t.constructor)(i).toFixed()),i+"e"+(n>=0?"+":"")+r.toString()}(t,r);case"bin":return Un(t,2,i);case"oct":return Un(t,8,i);case"hex":return Un(t,16,i);case"auto":var o=$n(null==e?void 0:e.lowerExp,-3),u=$n(null==e?void 0:e.upperExp,5);if(t.isZero())return"0";var a=t.toSignificantDigits(r),s=a.e;return(s>=o&&s<u?a.toFixed():Ln(t,r)).replace(/((\.\d*?)(0+))($|e)/,(function(){var t=arguments[2],e=arguments[4];return"."!==t?t+e:e}));default:throw new Error('Unknown notation "'+n+'". Choose "auto", "exponential", "fixed", "bin", "oct", or "hex.')}}(t,e):function(t){return t&&"object"==typeof t&&"bigint"==typeof t.s&&"bigint"==typeof t.n&&"bigint"==typeof t.d||!1}(t)?e&&"decimal"===e.fraction?t.toString():"".concat(t.s*t.n,"/").concat(t.d):Array.isArray(t)?Hn(t,e):re(t)?qn(t):"function"==typeof t?t.syntax?String(t.syntax):"function":t&&"object"==typeof t?"function"==typeof t.format?t.format(e):t&&t.toString(e)!=={}.toString()?t.toString(e):"{"+Object.keys(t).map((n=>qn(n)+": "+jn(t[n],e))).join(", ")+"}":String(t)}(t,e);return e&&"object"==typeof e&&"truncate"in e&&n.length>e.truncate?n.substring(0,e.truncate-3)+"...":n}function qn(t){for(var e=String(t),n="",r=0;r<e.length;){var i=e.charAt(r);n+=i in Vn?Vn[i]:i,r++}return'"'+n+'"'}var Vn={'"':'\\"',"\\":"\\\\","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t"};function Hn(t,e){if(Array.isArray(t)){for(var n="[",r=t.length,i=0;i<r;i++)0!==i&&(n+=", "),n+=Hn(t[i],e);return n+"]"}return jn(t,e)}function Zn(t,e,n){if(!(this instanceof Zn))throw new SyntaxError("Constructor must be called with the new operator");this.actual=t,this.expected=e,this.relation=n,this.message="Dimension mismatch ("+(Array.isArray(t)?"["+t.join(", ")+"]":t)+" "+(this.relation||"!=")+" "+(Array.isArray(e)?"["+e.join(", ")+"]":e)+")",this.stack=(new Error).stack}function Xn(t,e,n){if(!(this instanceof Xn))throw new SyntaxError("Constructor must be called with the new operator");this.index=t,arguments.length<3?(this.min=0,this.max=e):(this.min=e,this.max=n),void 0!==this.min&&this.index<this.min?this.message="Index out of range ("+this.index+" < "+this.min+")":void 0!==this.max&&this.index>=this.max?this.message="Index out of range ("+this.index+" > "+(this.max-1)+")":this.message="Index out of range ("+this.index+")",this.stack=(new Error).stack}function Yn(t){for(var e=[];Array.isArray(t);)e.push(t.length),t=t[0];return e}function Wn(t,e,n){var r,i=t.length;if(i!==e[n])throw new Zn(i,e[n]);if(n<e.length-1){var o=n+1;for(r=0;r<i;r++){var u=t[r];if(!Array.isArray(u))throw new Zn(e.length-1,e.length,"<");Wn(t[r],e,o)}}else for(r=0;r<i;r++)if(Array.isArray(t[r]))throw new Zn(e.length+1,e.length,">")}function Jn(t,e){if(0===e.length){if(Array.isArray(t))throw new Zn(t.length,0)}else Wn(t,e,0)}function Gn(t,e){if(void 0!==t){if(!Gt(t)||!Qe(t))throw new TypeError("Index must be an integer (value: "+t+")");if(t<0||"number"==typeof e&&t>=e)throw new Xn(t,e)}}function Kn(t,e,n){if(!Array.isArray(e))throw new TypeError("Array expected");if(0===e.length)throw new Error("Resizing to scalar is not supported");return e.forEach((function(t){if(!Gt(t)||!Qe(t)||t<0)throw new TypeError("Invalid size, must contain positive integers (size: "+jn(e)+")")})),(Gt(t)||Kt(t))&&(t=[t]),Qn(t,e,0,void 0!==n?n:0),t}function Qn(t,e,n,r){var i,o,u=t.length,a=e[n],s=Math.min(u,a);if(t.length=a,n<e.length-1){var c=n+1;for(i=0;i<s;i++)o=t[i],Array.isArray(o)||(o=[o],t[i]=o),Qn(o,e,c,r);for(i=s;i<a;i++)o=[],t[i]=o,Qn(o,e,c,r)}else{for(i=0;i<s;i++)for(;Array.isArray(t[i]);)t[i]=t[i][0];for(i=s;i<a;i++)t[i]=r}}function tr(t,e){var n=function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!Array.isArray(t))return t;if("boolean"!=typeof e)throw new TypeError("Boolean expected for second argument of flatten");var n=[];return e?function t(e){if(Array.isArray(e[0]))for(var r=0;r<e.length;r++)t(e[r]);else for(var i=0;i<e.length;i++)n.push(e[i])}(t):function t(e){for(var r=0;r<e.length;r++){var i=e[r];Array.isArray(i)?t(i):n.push(i)}}(t),n}(t,!0),r=n.length;if(!Array.isArray(t)||!Array.isArray(e))throw new TypeError("Array expected");if(0===e.length)throw new Zn(0,r,"!=");var i=nr(e=er(e,r));if(r!==i)throw new Zn(i,r,"!=");try{return function(t,e){for(var n,r=t,i=e.length-1;i>0;i--){var o=e[i];n=[];for(var u=r.length/o,a=0;a<u;a++)n.push(r.slice(a*o,(a+1)*o));r=n}return r}(n,e)}catch(t){if(t instanceof Zn)throw new Zn(i,r,"!=");throw t}}function er(t,e){var n=nr(t),r=t.slice(),i=t.indexOf(-1);if(t.indexOf(-1,i+1)>=0)throw new Error("More than one wildcard in sizes");if(i>=0){if(e%n!==0)throw new Error("Could not replace wildcard, since "+e+" is no multiple of "+-n);r[i]=-e/n}return r}function nr(t){return t.reduce(((t,e)=>t*e),1)}function rr(t,e,n,r){var i=r||Yn(t);if(n)for(var o=0;o<n;o++)t=[t],i.unshift(1);for(t=ir(t,e,0);i.length<e;)i.push(1);return t}function ir(t,e,n){var r,i;if(Array.isArray(t)){var o=n+1;for(r=0,i=t.length;r<i;r++)t[r]=ir(t[r],e,o)}else for(var u=n;u<e;u++)t=[t];return t}function or(t,e){for(var n,r=0,i=0;i<t.length;i++){var o=t[i],u=Array.isArray(o);if(0===i&&u&&(r=o.length),u&&o.length!==r)return;var a=u?or(o,e):e(o);if(void 0===n)n=a;else if(n!==a)return"mixed"}return n}function ur(t,e,n,r){if(r<n){if(t.length!==e.length)throw new Zn(t.length,e.length);for(var i=[],o=0;o<t.length;o++)i[o]=ur(t[o],e[o],n,r+1);return i}return t.concat(e)}function ar(){var t=Array.prototype.slice.call(arguments,0,-1),e=Array.prototype.slice.call(arguments,-1);if(1===t.length)return t[0];if(t.length>1)return t.slice(1).reduce((function(t,n){return ur(t,n,e,0)}),t[0]);throw new Error("Wrong number of arguments in function concat")}function sr(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];for(var r=e.map((t=>t.length)),i=Math.max(...r),o=new Array(i).fill(null),u=0;u<e.length;u++)for(var a=e[u],s=r[u],c=0;c<s;c++){var l=i-s+c;a[c]>o[l]&&(o[l]=a[c])}for(var h=0;h<e.length;h++)cr(e[h],o);return o}function cr(t,e){for(var n=e.length,r=t.length,i=0;i<r;i++){var o=n-r+i;if(t[i]<e[o]&&t[i]>1||t[i]>e[o])throw new Error("shape mismatch: mismatch is found in arg with shape (".concat(t,") not possible to broadcast dimension ").concat(r," with size ").concat(t[i]," to size ").concat(e[o]))}}function lr(t,e){var n=Yn(t);if(Le(n,e))return t;cr(n,e);var r,i,o,a=sr(n,e),s=a.length,c=[...Array(s-n.length).fill(1),...n],l=function(t){return u([],t)}(t);n.length<s&&(n=Yn(l=tr(l,c)));for(var h=0;h<s;h++)n[h]<a[h]&&(r=l,i=a[h],o=h,n=Yn(l=ar(...Array(i).fill(r),o)));return l}function hr(t,e){if(!Array.isArray(t))throw new Error("Array expected");var n=Yn(t);if(e.length!==n.length)throw new Zn(e.length,n.length);for(var r=0;r<e.length;r++)Gn(e[r],n[r]);return e.reduce(((t,e)=>t[e]),t)}function fr(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(0===t.length)return[];if(n)return function t(n){if(Array.isArray(n)){for(var r=n.length,i=Array(r),o=0;o<r;o++)i[o]=t(n[o]);return i}return e(n)}(t);var r=[];return function n(i,o){if(Array.isArray(i)){for(var u=i.length,a=Array(u),s=0;s<u;s++)r[o]=s,a[s]=n(i[s],o+1);return a}return e(i,r.slice(0,o),t)}(t,0)}Zn.prototype=new RangeError,Zn.prototype.constructor=RangeError,Zn.prototype.name="DimensionError",Zn.prototype.isDimensionError=!0,Xn.prototype=new RangeError,Xn.prototype.constructor=RangeError,Xn.prototype.name="IndexError",Xn.prototype.isIndexError=!0;var pr=n(369);function dr(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(pr.isTypedFunction(t)){var i,o;if(r)i=1;else{var u=(e.isMatrix?e.size():Yn(e)).map((()=>0)),a=e.isMatrix?e.get(u):hr(e,u);i=function(t,e,n,r){for(var i=[e,n,r],o=3;o>0;o--){var u=i.slice(0,o);if(null!==pr.resolve(t,u))return o}}(t,a,u,e)}if(e.isMatrix&&"mixed"!==e.dataType&&void 0!==e.dataType){var s=function(t,e){var n=[];if(Object.entries(t.signatures).forEach((t=>{var[r,i]=t;r.split(",").length===e&&n.push(i)})),1===n.length)return n[0]}(t,i);o=void 0!==s?s:t}else o=t;return i>=1&&i<=3?{isUnary:1===i,fn:function(){for(var e=arguments.length,r=new Array(e),u=0;u<e;u++)r[u]=arguments[u];return Dr(o,r.slice(0,i),n,t.name)}}:{isUnary:!1,fn:function(){for(var e=arguments.length,r=new Array(e),i=0;i<e;i++)r[i]=arguments[i];return Dr(o,r,n,t.name)}}}return void 0===r?{isUnary:mr(t),fn:t}:{isUnary:r,fn:t}}function mr(t){if(1!==t.length)return!1;var e=t.toString();if(/arguments/.test(e))return!1;var n=e.match(/\(.*?\)/);return!/\.\.\./.test(n)}function Dr(t,e,n,r){try{return t(...e)}catch(t){!function(t,e,n,r){var i;if(t instanceof TypeError&&"wrongType"===(null===(i=t.data)||void 0===i?void 0:i.category)){var o=[];throw o.push("value: ".concat(Oe(e[0]))),e.length>=2&&o.push("index: ".concat(Oe(e[1]))),e.length>=3&&o.push("array: ".concat(Oe(e[2]))),new TypeError("Function ".concat(n," cannot apply callback arguments ")+"".concat(r,"(").concat(o.join(", "),") at index ").concat(JSON.stringify(e[1])))}throw new TypeError("Function ".concat(n," cannot apply callback arguments ")+"to function ".concat(r,": ").concat(t.message))}(t,e,n,r)}}var gr=je("DenseMatrix",["Matrix"],(t=>{var{Matrix:e}=t;function n(t,e){if(!(this instanceof n))throw new SyntaxError("Constructor must be called with the new operator");if(e&&!re(e))throw new Error("Invalid datatype: "+e);if(oe(t))"DenseMatrix"===t.type?(this._data=Ue(t._data),this._size=Ue(t._size),this._datatype=e||t._datatype):(this._data=t.toArray(),this._size=t.size(),this._datatype=e||t._datatype);else if(t&&ie(t.data)&&ie(t.size))this._data=t.data,this._size=t.size,Jn(this._data,this._size),this._datatype=e||t.datatype;else if(ie(t))this._data=a(t),this._size=Yn(this._data),Jn(this._data,this._size),this._datatype=e;else{if(t)throw new TypeError("Unsupported type of data ("+Oe(t)+")");this._data=[],this._size=[0],this._datatype=e}}function r(t,e,n,i){var o=i===n-1,u=e.dimension(i);return o?u.map((function(e){return Gn(e,t.length),t[e]})).valueOf():u.map((function(o){return Gn(o,t.length),r(t[o],e,n,i+1)})).valueOf()}function i(t,e,n,r,o){var u=o===r-1,a=e.dimension(o);u?a.forEach((function(e,r){Gn(e),t[e]=n[r[0]]})):a.forEach((function(u,a){Gn(u),i(t[u],e,n[a[0]],r,o+1)}))}function o(t,e,n){if(0===e.length){for(var r=t._data;ie(r);)r=r[0];return r}return t._size=e.slice(0),t._data=Kn(t._data,t._size,n),t}function u(t,e,n){for(var r=t._size.slice(0),i=!1;r.length<e.length;)r.push(0),i=!0;for(var u=0,a=e.length;u<a;u++)e[u]>r[u]&&(r[u]=e[u],i=!0);i&&o(t,r,n)}function a(t){return oe(t)?a(t.valueOf()):ie(t)?t.map(a):t}return n.prototype=new e,n.prototype.createDenseMatrix=function(t,e){return new n(t,e)},Object.defineProperty(n,"name",{value:"DenseMatrix"}),n.prototype.constructor=n,n.prototype.type="DenseMatrix",n.prototype.isDenseMatrix=!0,n.prototype.getDataType=function(){return or(this._data,Oe)},n.prototype.storage=function(){return"dense"},n.prototype.datatype=function(){return this._datatype},n.prototype.create=function(t,e){return new n(t,e)},n.prototype.subset=function(t,e,o){switch(arguments.length){case 1:return function(t,e){if(!le(e))throw new TypeError("Invalid index");if(e.isScalar())return t.get(e.min());var i=e.size();if(i.length!==t._size.length)throw new Zn(i.length,t._size.length);for(var o=e.min(),u=e.max(),a=0,s=t._size.length;a<s;a++)Gn(o[a],t._size[a]),Gn(u[a],t._size[a]);return new n(r(t._data,e,i.length,0),t._datatype)}(this,t);case 2:case 3:return function(t,e,n,r){if(!e||!0!==e.isIndex)throw new TypeError("Invalid index");var o,a=e.size(),s=e.isScalar();if(oe(n)?(o=n.size(),n=n.valueOf()):o=Yn(n),s){if(0!==o.length)throw new TypeError("Scalar expected");t.set(e.min(),n,r)}else{if(!Le(o,a))try{o=Yn(n=0===o.length?lr([n],a):lr(n,a))}catch(t){}if(a.length<t._size.length)throw new Zn(a.length,t._size.length,"<");if(o.length<a.length){for(var c=0,l=0;1===a[c]&&1===o[c];)c++;for(;1===a[c];)l++,c++;n=rr(n,a.length,l,o)}if(!Le(a,o))throw new Zn(a,o,">");var h=e.max().map((function(t){return t+1}));u(t,h,r);var f=a.length;i(t._data,e,n,f,0)}return t}(this,t,e,o);default:throw new SyntaxError("Wrong number of arguments")}},n.prototype.get=function(t){return hr(this._data,t)},n.prototype.set=function(t,e,n){if(!ie(t))throw new TypeError("Array expected");if(t.length<this._size.length)throw new Zn(t.length,this._size.length,"<");var r,i,o,a=t.map((function(t){return t+1}));u(this,a,n);var s=this._data;for(r=0,i=t.length-1;r<i;r++)Gn(o=t[r],s.length),s=s[o];return Gn(o=t[t.length-1],s.length),s[o]=e,this},n.prototype.resize=function(t,e,n){if(!ue(t))throw new TypeError("Array or Matrix expected");var r=t.valueOf().map((t=>Array.isArray(t)&&1===t.length?t[0]:t));return o(n?this.clone():this,r,e)},n.prototype.reshape=function(t,e){var n=e?this.clone():this;n._data=tr(n._data,t);var r=n._size.reduce(((t,e)=>t*e));return n._size=er(t,r),n},n.prototype.clone=function(){return new n({data:Ue(this._data),size:Ue(this._size),datatype:this._datatype})},n.prototype.size=function(){return this._size.slice(0)},n.prototype._forEach=function(t){var e=2===t.length,n=this._size.length-1;if(!(n<0))if(e)!function e(r){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(i<n)for(var o=0;o<r.length;o++)e(r[o],i+1);else for(var u=0;u<r.length;u++)t(r,u)}(this._data);else if(0!==n){var r=new Array(n+1);!function e(i){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(o<n)for(var u=0;u<i.length;u++)r[o]=u,e(i[u],o+1);else for(var a=0;a<i.length;a++)r[o]=a,t(i,a,r.slice())}(this._data)}else for(var i=0;i<this._data.length;i++)t(this._data,i,[i])},n.prototype.map=function(t){var e=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=this,i=new n(r),o=dr(t,r._data,"map",e),u=e||o.isUnary?(t,e)=>{t[e]=o.fn(t[e])}:(t,e,n)=>{t[e]=o.fn(t[e],n,r)};return i._forEach(u),i},n.prototype.forEach=function(t){var e=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=this,r=dr(t,n._data,"map",e),i=e||r.isUnary?(t,e)=>{r.fn(t[e])}:(t,e,i)=>{r.fn(t[e],i,n)};n._forEach(i)},n.prototype[Symbol.iterator]=function*(){var t=this._size.length-1;if(!(t<0))if(0!==t){var e=[],n=function*(r,i){if(i<t)for(var o=0;o<r.length;o++)e[i]=o,yield*n(r[o],i+1);else for(var u=0;u<r.length;u++)e[i]=u,yield{value:r[u],index:e.slice()}};yield*n(this._data,0)}else for(var r=0;r<this._data.length;r++)yield{value:this._data[r],index:[r]}},n.prototype.rows=function(){var t=[];if(2!==this.size().length)throw new TypeError("Rows can only be returned for a 2D matrix.");var e=this._data;for(var r of e)t.push(new n([r],this._datatype));return t},n.prototype.columns=function(){var t=this,e=[],r=this.size();if(2!==r.length)throw new TypeError("Rows can only be returned for a 2D matrix.");for(var i=this._data,o=function(r){var o=i.map((t=>[t[r]]));e.push(new n(o,t._datatype))},u=0;u<r[1];u++)o(u);return e},n.prototype.toArray=function(){return Ue(this._data)},n.prototype.valueOf=function(){return this._data},n.prototype.format=function(t){return jn(this._data,t)},n.prototype.toString=function(){return jn(this._data)},n.prototype.toJSON=function(){return{mathjs:"DenseMatrix",data:this._data,size:this._size,datatype:this._datatype}},n.prototype.diagonal=function(t){if(t){if(Kt(t)&&(t=t.toNumber()),!Gt(t)||!Qe(t))throw new TypeError("The parameter k must be an integer number")}else t=0;for(var e=t>0?t:0,r=t<0?-t:0,i=this._size[0],o=this._size[1],u=Math.min(i-r,o-e),a=[],s=0;s<u;s++)a[s]=this._data[s+r][s+e];return new n({data:a,size:[u],datatype:this._datatype})},n.diagonal=function(t,e,r,i){if(!ie(t))throw new TypeError("Array expected, size parameter");if(2!==t.length)throw new Error("Only two dimensions matrix are supported");if(t=t.map((function(t){if(Kt(t)&&(t=t.toNumber()),!Gt(t)||!Qe(t)||t<1)throw new Error("Size values must be positive integers");return t})),r){if(Kt(r)&&(r=r.toNumber()),!Gt(r)||!Qe(r))throw new TypeError("The parameter k must be an integer number")}else r=0;var o,u=r>0?r:0,a=r<0?-r:0,s=t[0],c=t[1],l=Math.min(s-a,c-u);if(ie(e)){if(e.length!==l)throw new Error("Invalid value array length");o=function(t){return e[t]}}else if(oe(e)){var h=e.size();if(1!==h.length||h[0]!==l)throw new Error("Invalid matrix length");o=function(t){return e.get([t])}}else o=function(){return e};i||(i=Kt(o(0))?o(0).mul(0):0);var f=[];if(t.length>0){f=Kn(f,t,i);for(var p=0;p<l;p++)f[p+a][p+u]=o(p)}return new n({data:f,size:[s,c]})},n.fromJSON=function(t){return new n(t)},n.prototype.swapRows=function(t,e){if(!(Gt(t)&&Qe(t)&&Gt(e)&&Qe(e)))throw new Error("Row index must be positive integers");if(2!==this._size.length)throw new Error("Only two dimensional matrix is supported");return Gn(t,this._size[0]),Gn(e,this._size[0]),n._swapRows(t,e,this._data),this},n._swapRows=function(t,e,n){var r=n[t];n[t]=n[e],n[e]=r},n}),{isClass:!0}),yr=function(){return yr=pr.create,pr},vr=je("typed",["?BigNumber","?Complex","?DenseMatrix","?Fraction"],(function(t){var{BigNumber:e,Complex:n,DenseMatrix:r,Fraction:i}=t,o=yr();return o.clear(),o.addTypes([{name:"number",test:Gt},{name:"Complex",test:te},{name:"BigNumber",test:Kt},{name:"bigint",test:Qt},{name:"Fraction",test:ee},{name:"Unit",test:ne},{name:"identifier",test:t=>re&&/^(?:[A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C8A\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CD\uA7D0\uA7D1\uA7D3\uA7D5-\uA7DC\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF40\uDF42-\uDF49\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDDC0-\uDDF3\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDD4A-\uDD65\uDD6F-\uDD85\uDE80-\uDEA9\uDEB0\uDEB1\uDEC2-\uDEC4\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDF70-\uDF81\uDFB0-\uDFC4\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE3F\uDE40\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61\uDF80-\uDF89\uDF8B\uDF8E\uDF90-\uDFB5\uDFB7\uDFD1\uDFD3]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8\uDFC0-\uDFE0]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDEE0-\uDEF2\uDF02\uDF04-\uDF10\uDF12-\uDF33\uDFB0]|\uD808[\uDC00-\uDF99]|\uD809[\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD80E\uD80F\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883\uD885-\uD887][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2F\uDC41-\uDC46\uDC60-\uDFFF]|\uD810[\uDC00-\uDFFA]|\uD811[\uDC00-\uDE46]|\uD818[\uDD00-\uDD1D]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE70-\uDEBE\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDD40-\uDD6C\uDE40-\uDE7F\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDCFF-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD32\uDD50-\uDD52\uDD55\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD837[\uDF00-\uDF1E\uDF25-\uDF2A]|\uD838[\uDC30-\uDC6D\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB]|\uD839[\uDCD0-\uDCEB\uDDD0-\uDDED\uDDF0\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF39\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0\uDFF0-\uDFFF]|\uD87B[\uDC00-\uDE5D]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A\uDF50-\uDFFF]|\uD888[\uDC00-\uDFAF])(?:[0-9A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C8A\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CD\uA7D0\uA7D1\uA7D3\uA7D5-\uA7DC\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF40\uDF42-\uDF49\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDDC0-\uDDF3\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDD4A-\uDD65\uDD6F-\uDD85\uDE80-\uDEA9\uDEB0\uDEB1\uDEC2-\uDEC4\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDF70-\uDF81\uDFB0-\uDFC4\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE3F\uDE40\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61\uDF80-\uDF89\uDF8B\uDF8E\uDF90-\uDFB5\uDFB7\uDFD1\uDFD3]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8\uDFC0-\uDFE0]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDEE0-\uDEF2\uDF02\uDF04-\uDF10\uDF12-\uDF33\uDFB0]|\uD808[\uDC00-\uDF99]|\uD809[\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD80E\uD80F\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883\uD885-\uD887][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2F\uDC41-\uDC46\uDC60-\uDFFF]|\uD810[\uDC00-\uDFFA]|\uD811[\uDC00-\uDE46]|\uD818[\uDD00-\uDD1D]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE70-\uDEBE\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDD40-\uDD6C\uDE40-\uDE7F\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDCFF-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD32\uDD50-\uDD52\uDD55\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD837[\uDF00-\uDF1E\uDF25-\uDF2A]|\uD838[\uDC30-\uDC6D\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB]|\uD839[\uDCD0-\uDCEB\uDDD0-\uDDED\uDDF0\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF39\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0\uDFF0-\uDFFF]|\uD87B[\uDC00-\uDE5D]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A\uDF50-\uDFFF]|\uD888[\uDC00-\uDFAF])*$/.test(t)},{name:"string",test:re},{name:"Chain",test:ze},{name:"Array",test:ie},{name:"Matrix",test:oe},{name:"DenseMatrix",test:ae},{name:"SparseMatrix",test:se},{name:"Range",test:ce},{name:"Index",test:le},{name:"boolean",test:he},{name:"ResultSet",test:fe},{name:"Help",test:pe},{name:"function",test:de},{name:"Date",test:me},{name:"RegExp",test:De},{name:"null",test:ve},{name:"undefined",test:we},{name:"AccessorNode",test:Ee},{name:"ArrayNode",test:Fe},{name:"AssignmentNode",test:Ae},{name:"BlockNode",test:Ce},{name:"ConditionalNode",test:xe},{name:"ConstantNode",test:_e},{name:"FunctionNode",test:Be},{name:"FunctionAssignmentNode",test:be},{name:"IndexNode",test:Me},{name:"Node",test:Ne},{name:"ObjectNode",test:Se},{name:"OperatorNode",test:Ie},{name:"ParenthesisNode",test:Te},{name:"RangeNode",test:ke},{name:"RelationalNode",test:Pe},{name:"SymbolNode",test:Re},{name:"Map",test:ye},{name:"Object",test:ge}]),o.addConversions([{from:"number",to:"BigNumber",convert:function(t){if(e||wr(t),function(t){return t.toExponential().replace(/e.*$/,"").replace(/^0\.?0*|\./,"").length}(t)>15)throw new TypeError("Cannot implicitly convert a number with >15 significant digits to BigNumber (value: "+t+"). Use function bignumber(x) to convert to BigNumber.");return new e(t)}},{from:"number",to:"Complex",convert:function(t){return n||Er(t),new n(t,0)}},{from:"BigNumber",to:"Complex",convert:function(t){return n||Er(t),new n(t.toNumber(),0)}},{from:"bigint",to:"number",convert:function(t){if(t>Number.MAX_SAFE_INTEGER)throw new TypeError("Cannot implicitly convert bigint to number: value exceeds the max safe integer value (value: "+t+")");return Number(t)}},{from:"bigint",to:"BigNumber",convert:function(t){return e||wr(t),new e(t.toString())}},{from:"bigint",to:"Fraction",convert:function(t){return i||Fr(t),new i(t)}},{from:"Fraction",to:"BigNumber",convert:function(t){throw new TypeError("Cannot implicitly convert a Fraction to BigNumber or vice versa. Use function bignumber(x) to convert to BigNumber or fraction(x) to convert to Fraction.")}},{from:"Fraction",to:"Complex",convert:function(t){return n||Er(t),new n(t.valueOf(),0)}},{from:"number",to:"Fraction",convert:function(t){i||Fr(t);var e=new i(t);if(e.valueOf()!==t)throw new TypeError("Cannot implicitly convert a number to a Fraction when there will be a loss of precision (value: "+t+"). Use function fraction(x) to convert to Fraction.");return e}},{from:"string",to:"number",convert:function(t){var e=Number(t);if(isNaN(e))throw new Error('Cannot convert "'+t+'" to a number');return e}},{from:"string",to:"BigNumber",convert:function(t){e||wr(t);try{return new e(t)}catch(e){throw new Error('Cannot convert "'+t+'" to BigNumber')}}},{from:"string",to:"bigint",convert:function(t){try{return BigInt(t)}catch(e){throw new Error('Cannot convert "'+t+'" to BigInt')}}},{from:"string",to:"Fraction",convert:function(t){i||Fr(t);try{return new i(t)}catch(e){throw new Error('Cannot convert "'+t+'" to Fraction')}}},{from:"string",to:"Complex",convert:function(t){n||Er(t);try{return new n(t)}catch(e){throw new Error('Cannot convert "'+t+'" to Complex')}}},{from:"boolean",to:"number",convert:function(t){return+t}},{from:"boolean",to:"BigNumber",convert:function(t){return e||wr(t),new e(+t)}},{from:"boolean",to:"bigint",convert:function(t){return BigInt(+t)}},{from:"boolean",to:"Fraction",convert:function(t){return i||Fr(t),new i(+t)}},{from:"boolean",to:"string",convert:function(t){return String(t)}},{from:"Array",to:"Matrix",convert:function(t){return r||function(){throw new Error("Cannot convert array into a Matrix: no class 'DenseMatrix' provided")}(),new r(t)}},{from:"Matrix",to:"Array",convert:function(t){return t.valueOf()}}]),o.onMismatch=(t,e,n)=>{var r=o.createError(t,e,n);if(["wrongType","mismatch"].includes(r.data.category)&&1===e.length&&ue(e[0])&&n.some((t=>!t.params.includes(",")))){var i=new TypeError("Function '".concat(t,"' doesn't apply to matrices. To call it ")+"elementwise on a matrix 'M', try 'map(M, ".concat(t,")'."));throw i.data=r.data,i}throw r},o.onMismatch=(t,e,n)=>{var r=o.createError(t,e,n);if(["wrongType","mismatch"].includes(r.data.category)&&1===e.length&&ue(e[0])&&n.some((t=>!t.params.includes(",")))){var i=new TypeError("Function '".concat(t,"' doesn't apply to matrices. To call it ")+"elementwise on a matrix 'M', try 'map(M, ".concat(t,")'."));throw i.data=r.data,i}throw r},o}));function wr(t){throw new Error("Cannot convert value ".concat(t," into a BigNumber: no class 'BigNumber' provided"))}function Er(t){throw new Error("Cannot convert value ".concat(t," into a Complex number: no class 'Complex' provided"))}function Fr(t){throw new Error("Cannot convert value ".concat(t," into a Fraction, no class 'Fraction' provided."))}var Ar="number";function Cr(t){return tn(t)}Cr.signature=Ar;var xr="acos",_r=je(xr,["typed","config","Complex"],(t=>{var{typed:e,config:n,Complex:r}=t;return e(xr,{number:function(t){return t>=-1&&t<=1||n.predictable?Math.acos(t):new r(t,0).acos()},Complex:function(t){return t.acos()},BigNumber:function(t){return t.acos()}})}));var br=je("atan",["typed"],(t=>{var{typed:e}=t;return e("atan",{number:function(t){return Math.atan(t)},Complex:function(t){return t.atan()},BigNumber:function(t){return t.atan()}})}));var Br=je("trigUnit",["typed"],(t=>{var{typed:e}=t;return{Unit:e.referToSelf((t=>n=>{if(!n.hasBase(n.constructor.BASE_UNITS.ANGLE))throw new TypeError("Unit in function cot is no angle");return e.find(t,n.valueType())(n.value)}))}})),Mr=je("cos",["typed"],(t=>{var{typed:e}=t,n=Br({typed:e});return e("cos",{number:Math.cos,"Complex | BigNumber":t=>t.cos()},n)}));var Nr=je("compareUnits",["typed"],(t=>{var{typed:e}=t;return{"Unit, Unit":e.referToSelf((t=>(n,r)=>{if(!n.equalBase(r))throw new Error("Cannot compare units with different base");return e.find(t,[n.valueType(),r.valueType()])(n.value,r.value)}))}})),Sr="equalScalar",Ir=je(Sr,["typed","config"],(t=>{var{typed:e,config:n}=t,r=Nr({typed:e});return e(Sr,{"boolean, boolean":function(t,e){return t===e},"number, number":function(t,e){return cn(t,e,n.relTol,n.absTol)},"BigNumber, BigNumber":function(t,e){return t.eq(e)||function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e-9,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;if(n<=0)throw new Error("Relative tolerance must be greater than 0");if(r<0)throw new Error("Absolute tolerance must be at least 0");return!t.isNaN()&&!e.isNaN()&&(t.isFinite()&&e.isFinite()?!!t.eq(e)||t.minus(e).abs().lte(t.constructor.max(t.constructor.max(t.abs(),e.abs()).mul(n),r)):t.eq(e))}(t,e,n.relTol,n.absTol)},"bigint, bigint":function(t,e){return t===e},"Fraction, Fraction":function(t,e){return t.equals(e)},"Complex, Complex":function(t,e){return function(t,e,n,r){return cn(t.re,e.re,n,r)&&cn(t.im,e.im,n,r)}(t,e,n.relTol,n.absTol)}},r)}));je(Sr,["typed","config"],(t=>{var{typed:e,config:n}=t;return e(Sr,{"number, number":function(t,e){return cn(t,e,n.relTol,n.absTol)}})})),Math.pow(2,53),je("hex",["typed","format"],(t=>{var{typed:e,format:n}=t;return e("hex",{"number | BigNumber":function(t){return n(t,{notation:"hex"})},"number | BigNumber, number | BigNumber":function(t,e){return n(t,{notation:"hex",wordSize:e})}})}));var Tr="isInteger",kr=je(Tr,["typed"],(t=>{var{typed:e}=t;return e(Tr,{number:Qe,BigNumber:function(t){return t.isInt()},bigint:function(t){return!0},Fraction:function(t){return 1n===t.d},"Array | Matrix":e.referToSelf((t=>e=>function(t,e,n){if(!n)return oe(t)?t.map((t=>e(t)),!1,!0):fr(t,e,!0);var r=t=>0===t?t:e(t);return oe(t)?t.map((t=>r(t)),!1,!0):fr(t,r,!0)}(e,t)))})}));Cr(16);je("oct",["typed","format"],(t=>{var{typed:e,format:n}=t;return e("oct",{"number | BigNumber":function(t){return n(t,{notation:"oct"})},"number | BigNumber, number | BigNumber":function(t,e){return n(t,{notation:"oct",wordSize:e})}})}));n(391);Date.now();var Pr=je("sin",["typed"],(t=>{var{typed:e}=t,n=Br({typed:e});return e("sin",{number:Math.sin,"Complex | BigNumber":t=>t.sin()},n)})),Rr=je("SparseMatrix",["typed","equalScalar","Matrix"],(t=>{var{typed:e,equalScalar:n,Matrix:r}=t;function i(t,e){if(!(this instanceof i))throw new SyntaxError("Constructor must be called with the new operator");if(e&&!re(e))throw new Error("Invalid datatype: "+e);if(oe(t))!function(t,e,n){"SparseMatrix"===e.type?(t._values=e._values?Ue(e._values):void 0,t._index=Ue(e._index),t._ptr=Ue(e._ptr),t._size=Ue(e._size),t._datatype=n||e._datatype):o(t,e.valueOf(),n||e._datatype)}(this,t,e);else if(t&&ie(t.index)&&ie(t.ptr)&&ie(t.size))this._values=t.values,this._index=t.index,this._ptr=t.ptr,this._size=t.size,this._datatype=e||t.datatype;else if(ie(t))o(this,t,e);else{if(t)throw new TypeError("Unsupported type of data ("+Oe(t)+")");this._values=[],this._index=[],this._ptr=[0],this._size=[0,0],this._datatype=e}}function o(t,r,i){t._values=[],t._index=[],t._ptr=[],t._datatype=i;var o=r.length,u=0,a=n,s=0;if(re(i)&&(a=e.find(n,[i,i])||n,s=e.convert(0,i)),o>0){var c=0;do{t._ptr.push(t._index.length);for(var l=0;l<o;l++){var h=r[l];if(ie(h)){if(0===c&&u<h.length&&(u=h.length),c<h.length){var f=h[c];a(f,s)||(t._values.push(f),t._index.push(l))}}else 0===c&&u<1&&(u=1),a(h,s)||(t._values.push(h),t._index.push(l))}c++}while(c<u)}t._ptr.push(t._index.length),t._size=[o,u]}function u(t,e,n,r){if(n-e===0)return n;for(var i=e;i<n;i++)if(r[i]===t)return i;return e}function a(t,e,n,r,i,o,u){i.splice(t,0,r),o.splice(t,0,e);for(var a=n+1;a<u.length;a++)u[a]++}function s(t,r,i,o){var u=o||0,a=n,s=0;re(t._datatype)&&(a=e.find(n,[t._datatype,t._datatype])||n,s=e.convert(0,t._datatype),u=e.convert(u,t._datatype));var c,l,h,f=!a(u,s),p=t._size[0],d=t._size[1];if(i>d){for(l=d;l<i;l++)if(t._ptr[l]=t._values.length,f)for(c=0;c<p;c++)t._values.push(u),t._index.push(c);t._ptr[i]=t._values.length}else i<d&&(t._ptr.splice(i+1,d-i),t._values.splice(t._ptr[i],t._values.length),t._index.splice(t._ptr[i],t._index.length));if(d=i,r>p){if(f){var m=0;for(l=0;l<d;l++){t._ptr[l]=t._ptr[l]+m,h=t._ptr[l+1]+m;var D=0;for(c=p;c<r;c++,D++)t._values.splice(h+D,0,u),t._index.splice(h+D,0,c),m++}t._ptr[d]=t._values.length}}else if(r<p){var g=0;for(l=0;l<d;l++){t._ptr[l]=t._ptr[l]-g;var y=t._ptr[l],v=t._ptr[l+1]-g;for(h=y;h<v;h++)(c=t._index[h])>r-1&&(t._values.splice(h,1),t._index.splice(h,1),g++)}t._ptr[l]=t._values.length}return t._size[0]=r,t._size[1]=i,t}function c(t,e,n,r,i){var o,u,a=r[0],s=r[1],c=[];for(o=0;o<a;o++)for(c[o]=[],u=0;u<s;u++)c[o][u]=0;for(u=0;u<s;u++)for(var l=n[u],h=n[u+1],f=l;f<h;f++)c[o=e[f]][u]=t?i?Ue(t[f]):t[f]:1;return c}return i.prototype=new r,i.prototype.createSparseMatrix=function(t,e){return new i(t,e)},Object.defineProperty(i,"name",{value:"SparseMatrix"}),i.prototype.constructor=i,i.prototype.type="SparseMatrix",i.prototype.isSparseMatrix=!0,i.prototype.getDataType=function(){return or(this._values,Oe)},i.prototype.storage=function(){return"sparse"},i.prototype.datatype=function(){return this._datatype},i.prototype.create=function(t,e){return new i(t,e)},i.prototype.density=function(){var t=this._size[0],e=this._size[1];return 0!==t&&0!==e?this._index.length/(t*e):0},i.prototype.subset=function(t,e,n){if(!this._values)throw new Error("Cannot invoke subset on a Pattern only matrix");switch(arguments.length){case 1:return function(t,e){if(!le(e))throw new TypeError("Invalid index");if(e.isScalar())return t.get(e.min());var n,r,o,u,a=e.size();if(a.length!==t._size.length)throw new Zn(a.length,t._size.length);var s=e.min(),c=e.max();for(n=0,r=t._size.length;n<r;n++)Gn(s[n],t._size[n]),Gn(c[n],t._size[n]);var l=t._values,h=t._index,f=t._ptr,p=e.dimension(0),d=e.dimension(1),m=[],D=[];p.forEach((function(t,e){D[t]=e[0],m[t]=!0}));var g=l?[]:void 0,y=[],v=[];return d.forEach((function(t){for(v.push(y.length),o=f[t],u=f[t+1];o<u;o++)n=h[o],!0===m[n]&&(y.push(D[n]),g&&g.push(l[o]))})),v.push(y.length),new i({values:g,index:y,ptr:v,size:a,datatype:t._datatype})}(this,t);case 2:case 3:return function(t,e,n,r){if(!e||!0!==e.isIndex)throw new TypeError("Invalid index");var i,o=e.size(),u=e.isScalar();if(oe(n)?(i=n.size(),n=n.toArray()):i=Yn(n),u){if(0!==i.length)throw new TypeError("Scalar expected");t.set(e.min(),n,r)}else{if(1!==o.length&&2!==o.length)throw new Zn(o.length,t._size.length,"<");if(i.length<o.length){for(var a=0,s=0;1===o[a]&&1===i[a];)a++;for(;1===o[a];)s++,a++;n=rr(n,o.length,s,i)}if(!Le(o,i))throw new Zn(o,i,">");if(1===o.length)e.dimension(0).forEach((function(e,i){Gn(e),t.set([e,0],n[i[0]],r)}));else{var c=e.dimension(0),l=e.dimension(1);c.forEach((function(e,i){Gn(e),l.forEach((function(o,u){Gn(o),t.set([e,o],n[i[0]][u[0]],r)}))}))}}return t}(this,t,e,n);default:throw new SyntaxError("Wrong number of arguments")}},i.prototype.get=function(t){if(!ie(t))throw new TypeError("Array expected");if(t.length!==this._size.length)throw new Zn(t.length,this._size.length);if(!this._values)throw new Error("Cannot invoke get on a Pattern only matrix");var e=t[0],n=t[1];Gn(e,this._size[0]),Gn(n,this._size[1]);var r=u(e,this._ptr[n],this._ptr[n+1],this._index);return r<this._ptr[n+1]&&this._index[r]===e?this._values[r]:0},i.prototype.set=function(t,r,i){if(!ie(t))throw new TypeError("Array expected");if(t.length!==this._size.length)throw new Zn(t.length,this._size.length);if(!this._values)throw new Error("Cannot invoke set on a Pattern only matrix");var o=t[0],c=t[1],l=this._size[0],h=this._size[1],f=n,p=0;re(this._datatype)&&(f=e.find(n,[this._datatype,this._datatype])||n,p=e.convert(0,this._datatype)),(o>l-1||c>h-1)&&(s(this,Math.max(o+1,l),Math.max(c+1,h),i),l=this._size[0],h=this._size[1]),Gn(o,l),Gn(c,h);var d=u(o,this._ptr[c],this._ptr[c+1],this._index);return d<this._ptr[c+1]&&this._index[d]===o?f(r,p)?function(t,e,n,r,i){n.splice(t,1),r.splice(t,1);for(var o=e+1;o<i.length;o++)i[o]--}(d,c,this._values,this._index,this._ptr):this._values[d]=r:f(r,p)||a(d,o,c,r,this._values,this._index,this._ptr),this},i.prototype.resize=function(t,e,n){if(!ue(t))throw new TypeError("Array or Matrix expected");var r=t.valueOf().map((t=>Array.isArray(t)&&1===t.length?t[0]:t));if(2!==r.length)throw new Error("Only two dimensions matrix are supported");return r.forEach((function(t){if(!Gt(t)||!Qe(t)||t<0)throw new TypeError("Invalid size, must contain positive integers (size: "+jn(r)+")")})),s(n?this.clone():this,r[0],r[1],e)},i.prototype.reshape=function(t,e){if(!ie(t))throw new TypeError("Array expected");if(2!==t.length)throw new Error("Sparse matrices can only be reshaped in two dimensions");t.forEach((function(e){if(!Gt(e)||!Qe(e)||e<=-2||0===e)throw new TypeError("Invalid size, must contain positive integers or -1 (size: "+jn(t)+")")}));var n=this._size[0]*this._size[1];if(n!==(t=er(t,n))[0]*t[1])throw new Error("Reshaping sparse matrix will result in the wrong number of elements");var r=e?this.clone():this;if(this._size[0]===t[0]&&this._size[1]===t[1])return r;for(var i=[],o=0;o<r._ptr.length;o++)for(var s=0;s<r._ptr[o+1]-r._ptr[o];s++)i.push(o);for(var c=r._values.slice(),l=r._index.slice(),h=0;h<r._index.length;h++){var f=l[h],p=i[h],d=f*r._size[1]+p;i[h]=d%t[1],l[h]=Math.floor(d/t[1])}r._values.length=0,r._index.length=0,r._ptr.length=t[1]+1,r._size=t.slice();for(var m=0;m<r._ptr.length;m++)r._ptr[m]=0;for(var D=0;D<c.length;D++){var g=l[D],y=i[D],v=c[D];a(u(g,r._ptr[y],r._ptr[y+1],r._index),g,y,v,r._values,r._index,r._ptr)}return r},i.prototype.clone=function(){return new i({values:this._values?Ue(this._values):void 0,index:Ue(this._index),ptr:Ue(this._ptr),size:Ue(this._size),datatype:this._datatype})},i.prototype.size=function(){return this._size.slice(0)},i.prototype.map=function(t,r){if(!this._values)throw new Error("Cannot invoke map on a Pattern only matrix");var o=this,u=this._size[0],a=this._size[1],s=dr(t,o,"map");return function(t,r,u,a,c,l,h){var f=[],p=[],d=[],m=n,D=0;re(t._datatype)&&(m=e.find(n,[t._datatype,t._datatype])||n,D=e.convert(0,t._datatype));for(var g=function(t,e,n){var r=function(t,e,n){return s.fn(t,[e,n],o)}(t,e,n);m(r,D)||(f.push(r),p.push(e))},y=0;y<=c;y++){d.push(f.length);var v=t._ptr[y],w=t._ptr[y+1];if(h)for(var E=v;E<w;E++){var F=t._index[E];F>=0&&F<=u&&g(t._values[E],F-0,y-0)}else{for(var A={},C=v;C<w;C++)A[t._index[C]]=t._values[C];for(var x=0;x<=u;x++)g(x in A?A[x]:0,x-0,y-0)}}return d.push(f.length),new i({values:f,index:p,ptr:d,size:[u-0+1,c-0+1]})}(this,0,u-1,0,a-1,0,r)},i.prototype.forEach=function(t,e){if(!this._values)throw new Error("Cannot invoke forEach on a Pattern only matrix");for(var n=this,r=this._size[0],i=this._size[1],o=dr(t,n,"forEach"),u=0;u<i;u++){var a=this._ptr[u],s=this._ptr[u+1];if(e)for(var c=a;c<s;c++){var l=this._index[c];o.fn(this._values[c],[l,u],n)}else{for(var h={},f=a;f<s;f++)h[this._index[f]]=this._values[f];for(var p=0;p<r;p++){var d=p in h?h[p]:0;o.fn(d,[p,u],n)}}}},i.prototype[Symbol.iterator]=function*(){if(!this._values)throw new Error("Cannot iterate a Pattern only matrix");for(var t=this._size[1],e=0;e<t;e++)for(var n=this._ptr[e],r=this._ptr[e+1],i=n;i<r;i++){var o=this._index[i];yield{value:this._values[i],index:[o,e]}}},i.prototype.toArray=function(){return c(this._values,this._index,this._ptr,this._size,!0)},i.prototype.valueOf=function(){return c(this._values,this._index,this._ptr,this._size,!1)},i.prototype.format=function(t){for(var e=this._size[0],n=this._size[1],r=this.density(),i="Sparse Matrix ["+jn(e,t)+" x "+jn(n,t)+"] density: "+jn(r,t)+"\n",o=0;o<n;o++)for(var u=this._ptr[o],a=this._ptr[o+1],s=u;s<a;s++)i+="\n    ("+jn(this._index[s],t)+", "+jn(o,t)+") ==> "+(this._values?jn(this._values[s],t):"X");return i},i.prototype.toString=function(){return jn(this.toArray())},i.prototype.toJSON=function(){return{mathjs:"SparseMatrix",values:this._values,index:this._index,ptr:this._ptr,size:this._size,datatype:this._datatype}},i.prototype.diagonal=function(t){if(t){if(Kt(t)&&(t=t.toNumber()),!Gt(t)||!Qe(t))throw new TypeError("The parameter k must be an integer number")}else t=0;var e=t>0?t:0,n=t<0?-t:0,r=this._size[0],o=this._size[1],u=Math.min(r-n,o-e),a=[],s=[],c=[];c[0]=0;for(var l=e;l<o&&a.length<u;l++)for(var h=this._ptr[l],f=this._ptr[l+1],p=h;p<f;p++){var d=this._index[p];if(d===l-e+n){a.push(this._values[p]),s[a.length-1]=d-n;break}}return c.push(a.length),new i({values:a,index:s,ptr:c,size:[u,1]})},i.fromJSON=function(t){return new i(t)},i.diagonal=function(t,r,o,u,a){if(!ie(t))throw new TypeError("Array expected, size parameter");if(2!==t.length)throw new Error("Only two dimensions matrix are supported");if(t=t.map((function(t){if(Kt(t)&&(t=t.toNumber()),!Gt(t)||!Qe(t)||t<1)throw new Error("Size values must be positive integers");return t})),o){if(Kt(o)&&(o=o.toNumber()),!Gt(o)||!Qe(o))throw new TypeError("The parameter k must be an integer number")}else o=0;var s=n,c=0;re(a)&&(s=e.find(n,[a,a])||n,c=e.convert(0,a));var l,h=o>0?o:0,f=o<0?-o:0,p=t[0],d=t[1],m=Math.min(p-f,d-h);if(ie(r)){if(r.length!==m)throw new Error("Invalid value array length");l=function(t){return r[t]}}else if(oe(r)){var D=r.size();if(1!==D.length||D[0]!==m)throw new Error("Invalid matrix length");l=function(t){return r.get([t])}}else l=function(){return r};for(var g=[],y=[],v=[],w=0;w<d;w++){v.push(g.length);var E=w-h;if(E>=0&&E<m){var F=l(E);s(F,c)||(y.push(E+f),g.push(F))}}return v.push(g.length),new i({values:g,index:y,ptr:v,size:[p,d]})},i.prototype.swapRows=function(t,e){if(!(Gt(t)&&Qe(t)&&Gt(e)&&Qe(e)))throw new Error("Row index must be positive integers");if(2!==this._size.length)throw new Error("Only two dimensional matrix is supported");return Gn(t,this._size[0]),Gn(e,this._size[0]),i._swapRows(t,e,this._size[1],this._values,this._index,this._ptr),this},i._forEachRow=function(t,e,n,r,i){for(var o=r[t],u=r[t+1],a=o;a<u;a++)i(n[a],e[a])},i._swapRows=function(t,e,n,r,i,o){for(var a=0;a<n;a++){var s=o[a],c=o[a+1],l=u(t,s,c,i),h=u(e,s,c,i);if(l<c&&h<c&&i[l]===t&&i[h]===e){if(r){var f=r[l];r[l]=r[h],r[h]=f}}else if(l<c&&i[l]===t&&(h>=c||i[h]!==e)){var p=r?r[l]:void 0;i.splice(h,0,e),r&&r.splice(h,0,p),i.splice(h<=l?l+1:l,1),r&&r.splice(h<=l?l+1:l,1)}else if(h<c&&i[h]===e&&(l>=c||i[l]!==t)){var d=r?r[h]:void 0;i.splice(l,0,t),r&&r.splice(l,0,d),i.splice(l<=h?h+1:h,1),r&&r.splice(l<=h?h+1:h,1)}}},i}),{isClass:!0}),zr=je("tan",["typed"],(t=>{var{typed:e}=t,n=Br({typed:e});return e("tan",{number:Math.tan,"Complex | BigNumber":t=>t.tan()},n)})),Or="matrix",Ur=je(Or,["typed","Matrix","DenseMatrix","SparseMatrix"],(t=>{var{typed:e,Matrix:n,DenseMatrix:r,SparseMatrix:i}=t;return e(Or,{"":function(){return o([])},string:function(t){return o([],t)},"string, string":function(t,e){return o([],t,e)},Array:function(t){return o(t)},Matrix:function(t){return o(t,t.storage())},"Array | Matrix, string":o,"Array | Matrix, string, string":o});function o(t,e,n){if("dense"===e||"default"===e||void 0===e)return new r(t,n);if("sparse"===e)return new i(t,n);throw new TypeError("Unknown matrix type "+JSON.stringify(e)+".")}})),Lr=je("sqrt",["config","typed","Complex"],(t=>{var{config:e,typed:n,Complex:r}=t;return n("sqrt",{number:i,Complex:function(t){return t.sqrt()},BigNumber:function(t){return!t.isNegative()||e.predictable?t.sqrt():i(t.toNumber())},Unit:function(t){return t.pow(.5)}});function i(t){return isNaN(t)?NaN:t>=0||e.predictable?Math.sqrt(t):new r(t,0).sqrt()}})),$r="asin",jr=je($r,["typed","config","Complex"],(t=>{var{typed:e,config:n,Complex:r}=t;return e($r,{number:function(t){return t>=-1&&t<=1||n.predictable?Math.asin(t):new r(t,0).asin()},Complex:function(t){return t.asin()},BigNumber:function(t){return t.asin()}})})),qr=(je("bin",["typed","format"],(t=>{var{typed:e,format:n}=t;return e("bin",{"number | BigNumber":function(t){return n(t,{notation:"bin"})},"number | BigNumber, number | BigNumber":function(t,e){return n(t,{notation:"bin",wordSize:e})}})})),"concat"),Vr=je(qr,["typed","matrix","isInteger"],(t=>{var{typed:e,matrix:n,isInteger:r}=t;return e(qr,{"...Array | Matrix | number | BigNumber":function(t){var e,i,o=t.length,u=-1,a=!1,s=[];for(e=0;e<o;e++){var c=t[e];if(oe(c)&&(a=!0),Gt(c)||Kt(c)){if(e!==o-1)throw new Error("Dimension must be specified as last argument");if(i=u,u=c.valueOf(),!r(u))throw new TypeError("Integer number expected for dimension");if(u<0||e>0&&u>i)throw new Xn(u,i+1)}else{var l=Ue(c).valueOf(),h=Yn(l);if(s[e]=l,i=u,u=h.length-1,e>0&&u!==i)throw new Zn(i+1,u+1)}}if(0===s.length)throw new SyntaxError("At least one matrix expected");for(var f=s.shift();s.length;)f=ar(f,s.shift(),u);return a?n(f):f},"...string":function(t){return t.join("")}})})),Hr=je("matAlgo02xDS0",["typed","equalScalar"],(t=>{var{typed:e,equalScalar:n}=t;return function(t,r,i,o){var u=t._data,a=t._size,s=t._datatype||t.getDataType(),c=r._values,l=r._index,h=r._ptr,f=r._size,p=r._datatype||void 0===r._data?r._datatype:r.getDataType();if(a.length!==f.length)throw new Zn(a.length,f.length);if(a[0]!==f[0]||a[1]!==f[1])throw new RangeError("Dimension mismatch. Matrix A ("+a+") must match Matrix B ("+f+")");if(!c)throw new Error("Cannot perform operation on Dense Matrix and Pattern Sparse Matrix");var d,m=a[0],D=a[1],g=n,y=0,v=i;"string"==typeof s&&s===p&&"mixed"!==s&&(d=s,g=e.find(n,[d,d]),y=e.convert(0,d),v=e.find(i,[d,d]));for(var w=[],E=[],F=[],A=0;A<D;A++){F[A]=E.length;for(var C=h[A],x=h[A+1],_=C;_<x;_++){var b=l[_],B=o?v(c[_],u[b][A]):v(u[b][A],c[_]);g(B,y)||(E.push(b),w.push(B))}}return F[D]=E.length,r.createSparseMatrix({values:w,index:E,ptr:F,size:[m,D],datatype:s===t._datatype&&p===r._datatype?d:void 0})}})),Zr=je("matAlgo09xS0Sf",["typed","equalScalar"],(t=>{var{typed:e,equalScalar:n}=t;return function(t,r,i){var o=t._values,u=t._index,a=t._ptr,s=t._size,c=t._datatype||void 0===t._data?t._datatype:t.getDataType(),l=r._values,h=r._index,f=r._ptr,p=r._size,d=r._datatype||void 0===r._data?r._datatype:r.getDataType();if(s.length!==p.length)throw new Zn(s.length,p.length);if(s[0]!==p[0]||s[1]!==p[1])throw new RangeError("Dimension mismatch. Matrix A ("+s+") must match Matrix B ("+p+")");var m,D=s[0],g=s[1],y=n,v=0,w=i;"string"==typeof c&&c===d&&"mixed"!==c&&(m=c,y=e.find(n,[m,m]),v=e.convert(0,m),w=e.find(i,[m,m]));var E,F,A,C,x,_=o&&l?[]:void 0,b=[],B=[],M=_?[]:void 0,N=[];for(F=0;F<g;F++){B[F]=b.length;var S=F+1;if(M)for(C=f[F],x=f[F+1],A=C;A<x;A++)N[E=h[A]]=S,M[E]=l[A];for(C=a[F],x=a[F+1],A=C;A<x;A++)if(E=u[A],M){var I=N[E]===S?M[E]:v,T=w(o[A],I);y(T,v)||(b.push(E),_.push(T))}else b.push(E)}return B[g]=b.length,t.createSparseMatrix({values:_,index:b,ptr:B,size:[D,g],datatype:c===t._datatype&&d===r._datatype?m:void 0})}})),Xr=je("matAlgo11xS0s",["typed","equalScalar"],(t=>{var{typed:e,equalScalar:n}=t;return function(t,r,i,o){var u=t._values,a=t._index,s=t._ptr,c=t._size,l=t._datatype;if(!u)throw new Error("Cannot perform operation on Pattern Sparse Matrix and Scalar value");var h,f=c[0],p=c[1],d=n,m=0,D=i;"string"==typeof l&&(h=l,d=e.find(n,[h,h]),m=e.convert(0,h),r=e.convert(r,h),D=e.find(i,[h,h]));for(var g=[],y=[],v=[],w=0;w<p;w++){v[w]=y.length;for(var E=s[w],F=s[w+1],A=E;A<F;A++){var C=a[A],x=o?D(r,u[A]):D(u[A],r);d(x,m)||(y.push(C),g.push(x))}}return v[p]=y.length,t.createSparseMatrix({values:g,index:y,ptr:v,size:[f,p],datatype:h})}})),Yr=je("matAlgo13xDD",["typed"],(t=>{var{typed:e}=t;return function(t,r,i){var o,u=t._data,a=t._size,s=t._datatype,c=r._data,l=r._size,h=r._datatype,f=[];if(a.length!==l.length)throw new Zn(a.length,l.length);for(var p=0;p<a.length;p++){if(a[p]!==l[p])throw new RangeError("Dimension mismatch. Matrix A ("+a+") must match Matrix B ("+l+")");f[p]=a[p]}var d=i;"string"==typeof s&&s===h&&(o=s,d=e.find(i,[o,o]));var m=f.length>0?n(d,0,f,f[0],u,c):[];return t.createDenseMatrix({data:m,size:f,datatype:o})};function n(t,e,r,i,o,u){var a=[];if(e===r.length-1)for(var s=0;s<i;s++)a[s]=t(o[s],u[s]);else for(var c=0;c<i;c++)a[c]=n(t,e+1,r,r[e+1],o[c],u[c]);return a}})),Wr=je("matAlgo14xDs",["typed"],(t=>{var{typed:e}=t;return function(t,r,i,o){var u,a=t._data,s=t._size,c=t._datatype,l=i;"string"==typeof c&&(u=c,r=e.convert(r,u),l=e.find(i,[u,u]));var h=s.length>0?n(l,0,s,s[0],a,r,o):[];return t.createDenseMatrix({data:h,size:Ue(s),datatype:u})};function n(t,e,r,i,o,u,a){var s=[];if(e===r.length-1)for(var c=0;c<i;c++)s[c]=a?t(u,o[c]):t(o[c],u);else for(var l=0;l<i;l++)s[l]=n(t,e+1,r,r[e+1],o[l],u,a);return s}}));function Jr(t,e){if(Le(t.size(),e.size()))return[t,e];var n=sr(t.size(),e.size());return[t,e].map((t=>function(t,e){return Le(t.size(),e)?t:t.create(lr(t.valueOf(),e),t.datatype())}(t,n)))}var Gr=je("matrixAlgorithmSuite",["typed","matrix"],(t=>{var{typed:e,matrix:n}=t,r=Yr({typed:e}),i=Wr({typed:e});return function(t){var o,u=t.elop,a=t.SD||t.DS;u?(o={"DenseMatrix, DenseMatrix":(t,e)=>r(...Jr(t,e),u),"Array, Array":(t,e)=>r(...Jr(n(t),n(e)),u).valueOf(),"Array, DenseMatrix":(t,e)=>r(...Jr(n(t),e),u),"DenseMatrix, Array":(t,e)=>r(...Jr(t,n(e)),u)},t.SS&&(o["SparseMatrix, SparseMatrix"]=(e,n)=>t.SS(...Jr(e,n),u,!1)),t.DS&&(o["DenseMatrix, SparseMatrix"]=(e,n)=>t.DS(...Jr(e,n),u,!1),o["Array, SparseMatrix"]=(e,r)=>t.DS(...Jr(n(e),r),u,!1)),a&&(o["SparseMatrix, DenseMatrix"]=(t,e)=>a(...Jr(e,t),u,!0),o["SparseMatrix, Array"]=(t,e)=>a(...Jr(n(e),t),u,!0))):(o={"DenseMatrix, DenseMatrix":e.referToSelf((t=>(e,n)=>r(...Jr(e,n),t))),"Array, Array":e.referToSelf((t=>(e,i)=>r(...Jr(n(e),n(i)),t).valueOf())),"Array, DenseMatrix":e.referToSelf((t=>(e,i)=>r(...Jr(n(e),i),t))),"DenseMatrix, Array":e.referToSelf((t=>(e,i)=>r(...Jr(e,n(i)),t)))},t.SS&&(o["SparseMatrix, SparseMatrix"]=e.referToSelf((e=>(n,r)=>t.SS(...Jr(n,r),e,!1)))),t.DS&&(o["DenseMatrix, SparseMatrix"]=e.referToSelf((e=>(n,r)=>t.DS(...Jr(n,r),e,!1))),o["Array, SparseMatrix"]=e.referToSelf((e=>(r,i)=>t.DS(...Jr(n(r),i),e,!1)))),a&&(o["SparseMatrix, DenseMatrix"]=e.referToSelf((t=>(e,n)=>a(...Jr(n,e),t,!0))),o["SparseMatrix, Array"]=e.referToSelf((t=>(e,r)=>a(...Jr(n(r),e),t,!0)))));var s=t.scalar||"any";(t.Ds||t.Ss)&&(u?(o["DenseMatrix,"+s]=(t,e)=>i(t,e,u,!1),o[s+", DenseMatrix"]=(t,e)=>i(e,t,u,!0),o["Array,"+s]=(t,e)=>i(n(t),e,u,!1).valueOf(),o[s+", Array"]=(t,e)=>i(n(e),t,u,!0).valueOf()):(o["DenseMatrix,"+s]=e.referToSelf((t=>(e,n)=>i(e,n,t,!1))),o[s+", DenseMatrix"]=e.referToSelf((t=>(e,n)=>i(n,e,t,!0))),o["Array,"+s]=e.referToSelf((t=>(e,r)=>i(n(e),r,t,!1).valueOf())),o[s+", Array"]=e.referToSelf((t=>(e,r)=>i(n(r),e,t,!0).valueOf()))));var c=void 0!==t.sS?t.sS:t.Ss;return u?(t.Ss&&(o["SparseMatrix,"+s]=(e,n)=>t.Ss(e,n,u,!1)),c&&(o[s+", SparseMatrix"]=(t,e)=>c(e,t,u,!0))):(t.Ss&&(o["SparseMatrix,"+s]=e.referToSelf((e=>(n,r)=>t.Ss(n,r,e,!1)))),c&&(o[s+", SparseMatrix"]=e.referToSelf((t=>(e,n)=>c(n,e,t,!0))))),u&&u.signatures&&function(t,e){for(var n in e)$e(e,n)&&(t[n]=e[n])}(o,u.signatures),o}})),Kr=je("matAlgo03xDSf",["typed"],(t=>{var{typed:e}=t;return function(t,n,r,i){var o=t._data,u=t._size,a=t._datatype||t.getDataType(),s=n._values,c=n._index,l=n._ptr,h=n._size,f=n._datatype||void 0===n._data?n._datatype:n.getDataType();if(u.length!==h.length)throw new Zn(u.length,h.length);if(u[0]!==h[0]||u[1]!==h[1])throw new RangeError("Dimension mismatch. Matrix A ("+u+") must match Matrix B ("+h+")");if(!s)throw new Error("Cannot perform operation on Dense Matrix and Pattern Sparse Matrix");var p,d=u[0],m=u[1],D=0,g=r;"string"==typeof a&&a===f&&"mixed"!==a&&(p=a,D=e.convert(0,p),g=e.find(r,[p,p]));for(var y=[],v=0;v<d;v++)y[v]=[];for(var w=[],E=[],F=0;F<m;F++){for(var A=F+1,C=l[F],x=l[F+1],_=C;_<x;_++){var b=c[_];w[b]=i?g(s[_],o[b][F]):g(o[b][F],s[_]),E[b]=A}for(var B=0;B<d;B++)E[B]===A?y[B][F]=w[B]:y[B][F]=i?g(D,o[B][F]):g(o[B][F],D)}return t.createDenseMatrix({data:y,size:[d,m],datatype:a===t._datatype&&f===n._datatype?p:void 0})}})),Qr=je("matAlgo12xSfs",["typed","DenseMatrix"],(t=>{var{typed:e,DenseMatrix:n}=t;return function(t,r,i,o){var u=t._values,a=t._index,s=t._ptr,c=t._size,l=t._datatype;if(!u)throw new Error("Cannot perform operation on Pattern Sparse Matrix and Scalar value");var h,f=c[0],p=c[1],d=i;"string"==typeof l&&(h=l,r=e.convert(r,h),d=e.find(i,[h,h]));for(var m=[],D=[],g=[],y=0;y<p;y++){for(var v=y+1,w=s[y],E=s[y+1],F=w;F<E;F++){var A=a[F];D[A]=u[F],g[A]=v}for(var C=0;C<f;C++)0===y&&(m[C]=[]),g[C]===v?m[C][y]=o?d(r,D[C]):d(D[C],r):m[C][y]=o?d(r,0):d(0,r)}return new n({data:m,size:[f,p],datatype:h})}})),ti="equal";function ei(t,e,n,r){if(!(this instanceof ei))throw new SyntaxError("Constructor must be called with the new operator");this.fn=t,this.count=e,this.min=n,this.max=r,this.message="Wrong number of arguments in function "+t+" ("+e+" provided, "+n+(null!=r?"-"+r:"")+" expected)",this.stack=(new Error).stack}je(ti,["typed","equalScalar"],(t=>{var{typed:e,equalScalar:n}=t;return e(ti,{"any, any":function(t,e){return null===t?null===e:null===e?null===t:void 0===t?void 0===e:void 0===e?void 0===t:n(t,e)}})})),ei.prototype=new Error,ei.prototype.constructor=Error,ei.prototype.name="ArgumentsError",ei.prototype.isArgumentsError=!0;var ni="unequal",ri=(je(ni,["typed","equalScalar"],(t=>{var{typed:e,equalScalar:n}=t;return e(ni,{"any, any":function(t,e){return null===t?null!==e:null===e?null!==t:void 0===t?void 0!==e:void 0===e?void 0!==t:!n(t,e)}})})),"atan2"),ii=je(ri,["typed","matrix","equalScalar","BigNumber","DenseMatrix","concat"],(t=>{var{typed:e,matrix:n,equalScalar:r,BigNumber:i,DenseMatrix:o,concat:u}=t,a=Hr({typed:e,equalScalar:r}),s=Kr({typed:e}),c=Zr({typed:e,equalScalar:r}),l=Xr({typed:e,equalScalar:r}),h=Qr({typed:e,DenseMatrix:o}),f=Gr({typed:e,matrix:n,concat:u});return e(ri,{"number, number":Math.atan2,"BigNumber, BigNumber":(t,e)=>i.atan2(t,e)},f({scalar:"number | BigNumber",SS:c,DS:s,SD:a,Ss:l,sS:h}))}));new Ht(10);var oi="number | BigNumber | Fraction | Matrix | Array";"".concat(oi,", ").concat(oi,", ...").concat(oi),Math.log(16),n(880),new Ht(10);var ui=Ve({config:s}),ai=fn({}),si=zn({}),ci=On({}),li=gr({Matrix:ci}),hi=yn({BigNumber:ui,config:s}),fi=vr({BigNumber:ui,Complex:ai,DenseMatrix:li,Fraction:si}),pi=_r({Complex:ai,config:s,typed:fi}),di=br({typed:fi}),mi=Mr({typed:fi}),Di=Ir({config:s,typed:fi}),gi=kr({typed:fi}),yi=Pr({typed:fi}),vi=Rr({Matrix:ci,equalScalar:Di,typed:fi}),wi=zr({typed:fi}),Ei=Ur({DenseMatrix:li,Matrix:ci,SparseMatrix:vi,typed:fi}),Fi=Lr({Complex:ai,config:s,typed:fi}),Ai=jr({Complex:ai,config:s,typed:fi}),Ci=ii({BigNumber:ui,DenseMatrix:li,concat:Vr({isInteger:gi,matrix:Ei,typed:fi}),equalScalar:Di,matrix:Ei,typed:fi});function xi(t,e,n){return Ai(e*yi(Math.PI-n)/t)}function _i(t,e,n,r,i=0,o=0){const u=Math.abs(n-i),a=r-o;return Math.PI-function(t,e,n,r,i=.001){let o=0,u=Math.PI;const a=di(e/t),s=t>.001?t/mi(a):e/yi(a);let c=(o+u)/2,l=bi(c,s,n,r);isNaN(l)&&(o=function(t,e,n,r){let i=t,o=bi(i,e,n,r);for(;isNaN(o);)i+=.01,o=bi(i,e,n,r);return i}(c,s,n,r));let h=(u-o)/2,f=bi(o,s,n,r);for(;h>i&&0!==l;)c=(o+u)/2,l=bi(c,s,n,r),l*f<0?u=c:(o=c,f=l),h=(u-o)/2;return(o+u)/2}(u,a,t,e)}function bi(t,e,n,r){const i=xi(n,r,t),o=n*mi(i);return t-pi((o-e)/r)}function Bi(t,e,n){const r=_i(t._R,e._R,e.ry[n],e.rz[n],t.ry[n],t.rz[n]),i=xi(t._R,e._R,r),o=function(t,e,n,r){return Mi(e,n)+Mi(t,r)}(t._R,e._R,r,i);return o}function Mi(t,e){return t**2*(e-mi(e)*yi(e))}const Ni=(t,e,n)=>{const r=(e-t)/(n-1);return Array.from({length:n},((e,n)=>t+n*r))};function Si(t,e){t=t.replace(/^#/,"");let n=parseInt(t.substring(0,2),16),r=parseInt(t.substring(2,4),16),i=parseInt(t.substring(4,6),16);return n=Math.max(0,Math.min(255,Math.floor(n*(1-e/100)))),r=Math.max(0,Math.min(255,Math.floor(r*(1-e/100)))),i=Math.max(0,Math.min(255,Math.floor(i*(1-e/100)))),`#${n.toString(16).padStart(2,"0")}${r.toString(16).padStart(2,"0")}${i.toString(16).padStart(2,"0")}`}function Ii(t,e,n){const r=URL.createObjectURL(t),i=document.createElement("a");document.body.appendChild(i),i.style="display: none",i.href=r,i.download=e+"."+n,i.click(),setTimeout((()=>{URL.revokeObjectURL(r),document.body.removeChild(i)}),100)}class Ti{constructor(t,e,n="yellow"){this._M=t,this._R=e,this.rx=[],this.ry=[],this.rz=[],this.color=n}get Area(){return Math.PI*this._R**2}get M(){return this._M}get R(){return this._R}setOrbitingTimes(t){this.rx=new Array(t.length).fill(0),this.ry=new Array(t.length).fill(0),this.rz=new Array(t.length).fill(0)}getFullTransits(t){const e=this.rx.length;var n=new Array(e).fill(!1);for(let r=0;r<e;r++)return this.rx[r]>t.rx[r]&&this.getProjectedDistance(t,r)+this._R<=t._R&&(n[r]=!0),n}getPartialTransits(t){const e=this.rx.length;var n=new Array(e).fill(!1);for(let r=0;r<e;r++)if(this.rx[r]>t.rx[r]){const e=this.getProjectedDistance(t,r);n[r]=e-this._R<t._R&&e+this._R>t._R}return n}getProjectedDistance(t,e){return function(t,e=[0,0]){return Fi((t[0]-e[0])**2+(t[1]-e[1])**2)}([t.ry[e],t.rz[e]],[this.ry[e],this.rz[e]])}copy(){const t=new Ti;return Object.assign(t,this),t}draw(t,e,n,r,i=!0){t.save(),t.fillStyle=this.color,t.beginPath();const o=this.ry[r]*n;var u=n;u*=i?this.rx[r]:this.rz[r];const a=e[0]+o,s=e[1]+u;t.arc(a,s,this._R*n,0,2*Math.PI),t.fill(),t.closePath();const c=t.createRadialGradient(a,s,0,a,s,this._R*n);c.addColorStop(0,"rgba(0, 0, 0, 0.01)"),c.addColorStop(1,"rgba(0, 0, 0, 0.5)"),t.fillStyle=c,t.globalCompositeOperation="multiply",t.beginPath(),t.arc(a,s,this._R*n,0,2*Math.PI),t.fill(),t.closePath(),t.restore()}getEclipsingAreas(t){const e=this.rx.length;var n=new Array(t.length),r=new Array(e).fill(0);t.slice().sort(((t,e)=>e.R-t.R)).forEach(((t,e)=>{const[i,o]=t.getTransits(this);o.forEach(((e,n)=>{e?r[n]+=Bi(this,t,n):i[n]&&(r[n]+=t.Area)})),n.forEach((e=>{console.log("Iterating previous planets",e.planetName);const[n,u]=t.getTransits(e,!1),[a,s]=e.getTransits(this);a.forEach(((a,c)=>{if(a){if(i[c])n[c]?(console.log(c,"Full - Full - Full"),r[c]-=t.Area):u[c]&&(console.log(c,"Full - Full - Partial"),r[c]-=Bi(e,t,c));else if(o[c]){if(n[c])throw new Error("Full - Partial - Full cannot exist as the previous planet is always larger");u[c]&&(console.log(c,"Full - Partial - Partial"),r[c]-=Bi(e,t,c))}}else s[c]&&(i[c]?n[c]?(console.log(c,"Partial - Full - Full"),r[c]-=t.Area):u[c]&&(console.log(c,"Partial - Full - Partial"),r[c]-=Bi(e,t,c)):o[c]&&(n[c]?(console.log(c,"Partial - Partial - Full"),r[c]-=Bi(star,t,c)):u[c]&&(console.log(c,"Partial - Partial - Partial"),planet_planet_contact_points=e.getContactPoints(t,c),console.log("Partial - Partial - Partial not implemented yet!"))))}))})),n[e]=t}));const i=r.map((t=>1-t/this.Area));return console.log("fraction",i),i}maxCoordinate(){const t=Math.max(...this.rx.map(Math.abs)),e=Math.max(...this.ry.map(Math.abs)),n=Math.max(...this.rz.map(Math.abs));return Math.max(t,e,n)}getEclipsingAreasNumerical(t,e=500,n=250){const r=Ni(0,this._R,e),i=Ni(0,2*Math.PI,n),o=this.rx.length;let u=new Array(o).fill(0);const a=r[1]-r[0],s=i[1]-i[0];for(let e=0;e<o;e++){let n=r.slice(),o=i.slice();t.forEach((t=>{if(console.log("Iterating planets",t.planetName),t.rx[e]>this.rx[e]&&Fi((this.ry[e]-t.ry[e])**2+(this.rz[e]-t.rz[e]**2))-t._R<this._R){console.log("Planet covers the star at time",e);let r=[],i=[];n.forEach((n=>{const c=a*s*n;let l=!1;o.forEach((r=>{const o=n*Math.cos(r),a=n*Math.sin(r);Fi((o-t.ry[e])**2+(a-t.rz[e])**2)<t._R?u[e]+=c:(l=!0,i.push(r))})),l&&r.push(n)})),n=r,o=i}})),u[e]=1-u[e]/this.Area}return console.log("fraction",u),u}getContactPoints(t,e){const n=_i(this._R,t._R,t.ry[e],t.rz[e],this.ry[e],this.rz[e]),r=t.ry[e],i=t.rz[e],o=Ci(i,r),u=i;return pointy(u[0],1,t._R,n,o),pointz(u[1],1,t._R,n,o),pointy(u[0],-1,t._R,n,o),pointz(u[1],-1,t._R,n,o)}pointy(t,e,n,r,i){return t-e*mi(r+n*i)}pointz(t,e,n,r,i){return t-n*e*yi(r+n*i)}}class ki extends Ti{constructor(t,n,i="yellow"){super(t*r,n*e,i)}set M(t){this._M=t*r}set R(t){this._R=t*e}get R(){return super.R}get M(){return super.M}toString(){return`Star: ${(this.R/e).toFixed(1)} $R_odot$ \n ${(this.M/r).toFixed(1)} g`}equals(t){return this.R===t.R&&this.M===t.M}}class Pi{constructor(t,e){this.onStarUpdate=t,this.onColorChange=e,this.initStar()}initStar(){const t=document.getElementById("star-mass"),e=document.getElementById("star-radius"),n=document.getElementById("star-color"),r=document.getElementById("star-icon");r.addEventListener("click",(()=>{n.click()})),t.addEventListener("input",(t=>{const e=parseFloat(t.target.value);this.star.M=e,this.onStarUpdate()})),e.addEventListener("input",(t=>{const e=parseFloat(t.target.value);this.star.R=e,this.onStarUpdate()})),n.addEventListener("change",(t=>{this.star.color=t.target.value,r.style.backgroundColor=t.target.value,this.onColorChange()})),this.star=new ki(t.value,e.value,n.value),r.style.backgroundColor=this.star.color}setTimes(t){this.star.setOrbitingTimes(t)}}function Ri(t,e,n){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)throw new Error("E and M arrays must have the same length");return t.map(((t,r)=>t-(e[r]+n*yi(t))))}if(Array.isArray(t)||Array.isArray(e))throw new Error("E and M must be both arrays or both single values");return t-(e+n*yi(t))}function zi(t,e,n){return(n**2*6.67e-8*(t+e)/(4*hi**2))**(1/3)}class Oi{constructor(t="jupyter"){if(-1===t.indexOf(t))throw new Error(`Invalid units: ${t}. Valid units are: ${t.join(", ")}`);"solar"===t?(this.R=e,this.M=r,this.symbol="<sub>☉</sub>"):"earth"===t?(this.R=63781e4,this.M=597216787e19,this.symbol="<sub>⊕</sub>"):"jupyter"===t&&(this.R=71492e5,this.M=i,this.symbol="<sub>J</sub>")}}class Ui extends Ti{constructor(e,n,r,i,u=0,a=0,s=0,c=0,l=0,h="blue",f="Planet 1",p=new Oi("jupyter")){super(e*p.M,n*p.R,h),this.units=p,this.Runits=this.units.R,this.Munits=this.units.M,this.checkInputParams(e,n,r,u,a,s,c,i),this._e=a,this._Ms=i.M,this._Rs=i.R,this.i=u,this._P=r*t,this.omega0=s,this.Omega0=c,this.phase0=l,this.color=h,this.planetName=f,this._a=zi(i.M,this._M,this._P),this._b=this._a*Fi(1-this._e**2),this._rmax=this.a*(1+this.e),this.rmin=this.a*(1-this._e),console.log(`Planet max distance: ${(this.rmax/o).toFixed(3)} AU`)}get rmax(){return this._rmax}set planetName(t){this._planetName=t}get planetName(){return this._planetName}set R(t){const e=t*this.Runits;if(this.rmin-e<this._Rs)throw new Li(this.rmin,this._Rs);this._R=e}set phase0(t){return this._phase0=t}get phase0(){return this._phase0}get omega0(){return this._omega0}set omega0(t){this._omega0=t}get Omega0(){return this._Omega0/(2*Math.PI)}set Omega0(t){this._Omega0=2*t*Math.PI}set Ms(t){const e=zi(t,this._M,this._P),n=e*(1-this._e);if(n-this._R<this._Rs)throw new Li(n,this._Rs);this._Ms=t,this._a=e,this._b=this._a*Fi(1-this._e**2),this._rmin=n,this._rmax=this._a*(1+this._e)}set Rs(t){if(this.rmin-this._R<t)throw new Li(this.rmin,t);this._Rs=t}set e(t){const e=this._a*(1-t);if(e-this._R<this._Rs)throw new Li(e,this._Rs);this._e=t,this.rmin=e,this._rmax=this._a*(1+this._e),this._b=this._a*Fi(1-this._e**2)}set M(t){const e=t*this.Munits,n=zi(this._Ms,e,this._P),r=n*(1-this._e);if(r-this._R<this._Rs)throw new Li(r,this._Rs);this._M=e,this._a=n,this._b=this._a*Fi(1-this._e**2),this.rmin=r,this._rmax=n*(1+this._e)}set P(e){const n=e*t,r=zi(this._Ms,this._M,n),i=r*(1-this._e);if(i-this._R<this._Rs)throw new Li(i,this._Rs);this._P=n,this._a=r,this._b=this._a*Fi(1-this._e**2),this.rmin=i,this._rmax=r*(1+this._e)}get R(){return super.R/this.Runits}get M(){return super.M/this.Munits}get e(){return this._e}get a(){return this._a}get b(){return this._b}set i(t){this._i=t/180*Math.PI}get i(){return this._i/Math.PI*180}get P(){return this._P/t}toString(){return`Planet: ${this.R.toFixed(1)} $R_Earth$ \n ${this.M.toFixed(1)} g \n i: ${this.i.toFixed(0)} deg`}equals(t){return this.R===t.R&&this.M===t.M&&this.i===t.i&&this.e===t.e&&this.P===t.P}checkInputParams(e,n,r,i,o,u,a,s){if(e*this.Munits>s.M)throw new $i("Planet cannot be heavier than host star!");if(n*this.Runits>s.R)throw new $i("Planet cannot be larger than host star!");if(!(-90<=i&&i<=90))throw new Error(`Inclination ${i.toFixed(1)} must be between -90 and 90!`);if(!(0<=u&&u<=hi))throw new Error(`Argument of periastron ${u.toFixed(1)} must be between 0 and pi!`);if(!(0<=a&&a<=1))throw new Error(`Longitude of the ascending ${a} has to be between 0 and 1!`);if(!(0<=o&&o<=1))throw new Error(`Eccentricity ${o} needs to be between 0 and 1!`);const c=zi(s.M,e*this.Munits,r*t)*(1-o);if(c-n*this.Runits<s.R)throw new Li(c,s.R)}setStar(t){this.Ms=t.M,this.Rs=t.R}setOrbitingTimes(t){const e=function(t,e){return t.map((t=>e*(t-0)%(2*hi)))}(t,2*hi/this._P),n=e.map((t=>function(t,e,n=.001,r=100){let i=0,o=2*hi,u=(o-i)/2,a=Ri(i,t,e);for(let s=0;s<r;s++){const r=(i+o)/2,s=Ri(r,t,e);if(s*a<0?o=r:(i=r,a=s),u=(o-i)/2,u<n||0===s)return r}return null}(t,this._e))),r=function(t,e,n=0){return e.map((e=>2*di(Fi((1+t)/(1-t))*wi(e/2))%(2*hi)+2*hi*n))}(this._e,n,this.phase0),i=function(t,e,n){return n.map((n=>t*(1-e**2)/(1+e*mi(n))))}(this._a,this._e,r),o=r.map((t=>yi(t+this.omega0))),u=r.map((t=>mi(t+this.omega0))),a=mi(this._Omega0),s=yi(this._Omega0),c=mi(this._i),l=yi(this._i);this.rx=i.map(((t,e)=>t*(a*u[e]*c-s*o[e]))),this.ry=i.map(((t,e)=>t*(s*u[e]*c+a*o[e]))),this.rz=i.map(((t,e)=>-t*u[e]*l))}draw(t,e,n,r,i=!0){t.save(),t.globalAlpha=1;const o=this.ry[r]*n;var u=n,a=n;i?(u*=this.rx[r],a*=this.rz[r]):(u*=this.rz[r],a*=-this.rx[r]);const s=e[0]+o,c=e[1]+u,l=Math.atan2(u,o),h=Math.sqrt(o**2+u**2+a**2),f=Math.acos(Math.sqrt(o**2+u**2)/h),p=l+3*Math.PI/2+Math.sign(a)*f,d=l+Math.PI/2-Math.sign(a)*f;t.fillStyle=Si(this.color,50),t.beginPath(),t.arc(s,c,this._R*n,d,p,!0),t.fill(),t.closePath(),t.restore(),t.fillStyle=this.color,t.beginPath(),t.arc(s,c,this._R*n,d,p,!1),t.fill(),t.closePath(),t.restore()}}class Li extends Error{constructor(t,e){super(`Star-planet distance ${(t/o).toFixed(3)} AU is below stellar radius ${(e/o).toFixed(2)} AU!`),this.name="StarPlanetDistanceError",this.rmin=t,this._Rs=e}}class $i extends Error{constructor(t){super(t)}}class ji{constructor(t){this.name=t,this.toolTipElement=document.getElementById("tooltip-"+t),null==this.toolTipElement&&console.warn("ToolTip tooltip-"+t+" not found")}setLanguage(t){const e=t[this.name+"_tooltip"].replace("{index}","{0}");this.toolTipElement.innerHTML=e}}class qi{constructor(t,e,n=!0){this.eclipsedBody=t,this.eclipsingBody=e,this.checkFront=n,this.datapoints=e.rx.length,this.workoutTransits()}workoutTransits(){const[t,e]=this.getTransits(this.eclipsingBody,this.eclipsedBody,this.checkFront);console.log("Number of full transits: ",t.length),console.log("Number of partial transits: ",e.length),this.eclipsedArea=this.getEclipsedArea(t,e),this.visibleFraction=this.eclipsedArea.map((t=>1-t/this.eclipsedBody.Area)),this.transitDuration=e.length+t.length,this.transitDepth=Math.max(...this.eclipsedArea)/this.eclipsedBody.Area}getEclipsedArea(t,e){var n=new Array(this.datapoints).fill(1);return e.forEach((t=>{n[t]=Bi(this.eclipsedBody,this.eclipsingBody,t)})),t.forEach((t=>{n[t]=this.eclipsingBody.Area})),n}getTransits(t,e,n=!0){const r=Array.from({length:this.datapoints},((t,e)=>e)).filter((r=>t.rx[r]>e.rx[r]||!n));return[r.filter((n=>e.getProjectedDistance(t,n)+t._R<=e._R)),r.filter((n=>e.getProjectedDistance(t,n)-t._R<e._R&&e.getProjectedDistance(t,n)+t._R>=e._R))]}}class Vi{constructor(t,e,n,r){this.onUpdate=t,this.onMenuOpened=e,this.onMenuClosed=n,this.planets=[],this.star=r.copy(),this.units=new Oi("jupyter"),this.setLabelUnits(),this.planetNameCounter=0,this.defaultColor=document.getElementById("planet-period").style.color,this.supressedListener=!1,this.initPlanetMenu()}setLanguage(t){this.labels.forEach((e=>{e.setLanguage(t)}))}initCanvas(){const t=document.getElementById("planet-canvas");this.translatePos={x:t.width/2,y:t.height/2},this.scale=1,this.scaleMultiplier=.8,this.startDragOffset={},document.getElementById("plus").addEventListener("click",(()=>{this.scale/=this.scaleMultiplier,this.updateCanvas()}),!1),document.getElementById("minus").addEventListener("click",(()=>{this.scale*=this.scaleMultiplier,this.updateCanvas()}),!1)}setLabelUnits(){const t=document.getElementById("planet-radius-label");console.log("Setting units: "+this.units.symbol),t.innerHTML=`Radius (R${this.units.symbol})`,document.getElementById("planet-mass-label").innerHTML=`Mass (M${this.units.symbol})`}initPlanetMenu(){this.addPlanetBtn=document.getElementById("add-planet-btn"),this.addPlanetBtn.addEventListener("click",(()=>this.showPlanetForm())),this.planetForm=document.getElementById("planet-form"),this.cancelPlanetBtn=document.getElementById("cancel-planet-btn"),this.cancelPlanetBtn.addEventListener("click",(()=>{this.closePlanetForm(),this.onMenuClosed()})),this.closePlanetBtn=document.getElementById("close-planet-btn"),this.closePlanetBtn.addEventListener("click",(()=>this.cancelPlanetBtn.click())),this.planetList=document.getElementById("planet-list"),this.errorLabel=document.getElementById("planet-error"),this.transitWarningLabel=document.getElementById("transit-error"),this.planetNameInput=document.getElementById("planet-name"),this.periodInput=document.getElementById("planet-period"),this.iInput=document.getElementById("inclination-input"),this.phaseInput=document.getElementById("phase-input"),this.Omega0Input=document.getElementById("longitude-ascending-node-input"),this.eInput=document.getElementById("eccentricity-input"),this.massInput=document.getElementById("planet-mass-input"),this.radiusInput=document.getElementById("planet-radius-input"),this.colorInput=document.getElementById("planet-color");const t=[this.periodInput,this.iInput,this.eInput,this.massInput,this.radiusInput,this.phaseInput,this.Omega0Input];t.forEach((e=>{e.addEventListener("input",(e=>{const n=parseFloat(e.target.min),r=parseFloat(e.target.max);var i=parseFloat(e.target.value);i<n?(i=n,e.target.value=i):i>r&&(i=r,e.target.value=i),t.forEach((t=>{t.style.color=this.defaultColor})),this.errorLabel.classList.add("hidden"),this.supressedListener||(this.createPlanet(),this.updateCanvas())}))})),this.colorInput.addEventListener("input",(t=>{this.supressedListener||(console.log("Input Triggered"),this.createPlanet(),this.updateCanvas())})),this.planetNameInput.addEventListener("input",(t=>{t.target.style.color=this.defaultColor,this.errorLabel.classList.add("hidden")})),this.randomizeBtn=document.getElementById("randomize-planet-btn"),this.randomizeBtn.addEventListener("click",(()=>{this.supressedListener=!0,this.randomizeInputs(),this.errorLabel.classList.remove("hidden"),this.createPlanet(),this.updateCanvas(),this.supressedListener=!1}));const e=new ji("longitude-ascending-node"),n=new ji("phase"),r=new ji("eccentricity"),i=new ji("inclination"),o=new ji("planet-mass"),u=new ji("planet-radius");this.labels=[e,n,r,i,o,u],this.planetCounter=document.getElementById("planet-title-number")}createPlanet(){const t=parseFloat(this.massInput.value),e=parseFloat(this.radiusInput.value),n=parseFloat(this.periodInput.value),r=parseFloat(this.iInput.value),i=parseFloat(this.eInput.value),o=parseFloat(this.phaseInput.value),u=parseFloat(this.Omega0Input.value),a=this.colorInput.value,s=this.planetNameInput.value;try{return this.planet=new Ui(t,e,n,this.star,r,i,0,u,o,a,s,this.units),this.errorLabel.classList.add("hidden"),!0}catch(t){return t instanceof Li?(console.error(`Star-Planet Distance Error: ${t.message}`),this.errorLabel.classList.remove("hidden"),this.errorLabel.textContent="Orbit is whithin the star radius!",this.planet=null,!1):t instanceof $i?(this.errorLabel.classList.remove("hidden"),this.errorLabel.textContent=t.message,this.planet=null,!1):(console.error(`Unknown error: ${t.message}`),this.planet=null,!1)}}updateCanvas(e=1e4){if(null!=this.planet){const n=Math.floor(this.planet.e+this.planet.P*e*.01);console.log("Updating canvas for "+this.planet.planetName+"with "+n+" datapoints");const r=Ni(0,this.planet._P,n);this.planet.setOrbitingTimes(r),this.star.setOrbitingTimes(r),this.drawOrbit();const i=new qi(this.star,this.planet),u=r.map((e=>e/t)),a=i.visibleFraction;this.drawLightcurve(a,u),document.getElementById("perihelion").innerText=(this.planet.rmin/o).toFixed(3)+" AU",document.getElementById("aphelion").innerText=(this.planet.rmax/o).toFixed(3)+" AU",document.getElementById("transit-depth").innerText=i.transitDepth.toFixed(3),console.log("Transit duration",i.transitDuration);const s=u[1]-u[0];console.log("dt",s),0==i.transitDuration?this.transitWarningLabel.classList.remove("hidden"):this.transitWarningLabel.classList.add("hidden"),document.getElementById("transit-duration").innerText=(i.transitDuration*s).toFixed(3)+" days"}}drawLightcurve(t,e){const n=document.getElementById("lightcurve-canvas-planet-form"),r=n.getContext("2d"),i=Math.min(...e),o=Math.max(...e),u=.95*Math.min(...t),a=1.05*Math.max(...t),s=t=>(t-i)/(o-i)*n.width,c=t=>n.height-(t-u)/(a-u)*n.height;r.clearRect(0,0,n.width,n.height),r.save(),r.beginPath(),r.lineWidth=1.5,r.strokeStyle=this.star.color;const l=s(e[0]),h=c(t[0]);r.moveTo(l,h);for(let n=1;n<e.length;n++){const i=s(e[n]),o=c(t[n]);r.lineTo(i,o)}r.stroke(),r.restore()}drawOrbit(){const t=document.getElementById("planet-canvas"),e=t.getContext("2d"),n=t.width/2/(1.1*this.planet.maxCoordinate());e.clearRect(0,0,t.width,t.height),e.save(),this.star.rx[0]<this.planet.rx[0]?(this.star.draw(e,[t.width/2,t.height/2],n,0,!0),this.planet.draw(e,[t.width/2,t.height/2],n,0,!0)):(this.planet.draw(e,[t.width/2,t.height/2],n,0,!0),this.star.draw(e,[t.width/2,t.height/2],n,0,!0)),e.beginPath(),e.lineWidth=1.5,e.setLineDash([5,10]),e.moveTo(this.planet.ry[0]*n+t.width/2,this.planet.rx[0]*n+t.height/2);for(let r=0;r<this.planet.rx.length;r++)e.lineTo(this.planet.ry[r]*n+t.width/2,this.planet.rx[r]*n+t.height/2);e.closePath(),e.strokeStyle=this.planet.color,e.stroke(),e.restore()}showPlanetForm(t=null){this.onMenuOpened(),this.savePlanetBtn=document.getElementById("save-planet-btn"),this.savePlanetListener=()=>this.addPlanet(t),this.savePlanetBtn.addEventListener("click",this.savePlanetListener),this.planetForm.classList.remove("hidden"),this.planetForm.focus(),null!=t?(console.log("Editing planet "+t),this.savePlanetBtn.textContent="Accept",this.supressedListener=!0,this.planetNameInput.value=this.planets[t].planetName,this.periodInput.value=this.planets[t].P,this.eInput.value=this.planets[t].e,this.iInput.value=parseFloat(this.planets[t].i).toFixed(2),this.Omega0Input.value=parseFloat(this.planets[t].Omega0).toFixed(2),this.massInput.value=this.planets[t].M,this.phaseInput.value=this.planets[t].phase0,this.radiusInput.value=this.planets[t].R,this.colorInput.value=this.planets[t].color):(this.colorInput.value=`#${Math.floor(16777215*Math.random()).toString(16).padStart(6,"0")}`,this.savePlanetBtn.textContent="Add",this.planetNameInput.value="Planet "+(this.planetNameCounter+1)),this.createPlanet(),this.updateCanvas(),this.supressedListener=!1,this.keydownListener=t=>{if("Escape"===t.key)this.closePlanetBtn.click();else if("Enter"==t.key){const e=document.activeElement;!e||"INPUT"!==e.tagName&&"TEXTAREA"!==e.tagName||"color"===e.type&&(t.preventDefault(),t.stopPropagation()),this.savePlanetBtn.click()}else"R"==t.key||"r"==t.key?document.activeElement!=this.planetNameInput&&this.randomizeBtn.click():"c"!=t.key&&"C"!=t.key||document.activeElement!=this.planetNameInput&&this.cancelPlanetBtn.click()},document.addEventListener("keydown",this.keydownListener)}randomizeInputs(){const t=Math.random();this.massInput.value=parseFloat(20*(t+1)*i/this.units.M).toFixed(2),this.radiusInput.value=parseFloat(t*this.star._R/this.units.R/5+e/this.units.R).toFixed(2),this.periodInput.value=Math.floor(500*t)+.01,this.iInput.value=parseFloat(89.9*(2*t-1)).toFixed(2);const n=Math.random();this.eInput.value=parseFloat(n.toFixed(2));const r=Math.random();this.phaseInput.value=r.toFixed(2);const o=Math.random();this.Omega0Input.value=o.toFixed(2)}closePlanetForm(){console.log("Closing Menu"),document.activeElement&&document.activeElement.blur(),this.planetForm.classList.add("hidden"),this.keydownListener&&(document.removeEventListener("keydown",this.keydownListener),this.keydownListener=null),this.savePlanetBtn.removeEventListener("click",this.savePlanetListener),this.savePlanetListener&&(this.savePlanetListener=null)}addPlanet(t=null){const e=this.planetNameInput.value,n=this.planets.map((t=>t.planetName)).indexOf(e);if(-1!=n&&n!=t)return this.errorLabel.classList.remove("hidden"),this.errorLabel.textContent="Planet name already exists!",this.planetNameInput.style.color="red",this.planetNameInput.focus(),void(this.planet=null);null!=this.planet&&(null==t?(this.planets.push(this.planet),this.planetNameCounter++):this.planets[t]=this.planet,this.closePlanetForm(),this.updateParameters())}createPlanetButton(t,e,n){const r=document.createElement("button");r.className="planet-btns";const i=document.createElement("img");return i.setAttribute("src",t),i.setAttribute("alt",n),i.setAttribute("title",n),r.addEventListener("click",e),r.appendChild(i),r}onRemoveListener(t){console.log("Removing planet"+t),this.planets.splice(t,1),this.updateParameters()}onEditListener(t){console.log("Editing planet "+t),this.showPlanetForm(t)}updateParameters(){this.maxRadius=Math.max(...this.planets.map((t=>t.R))),this.maxP=Math.max(...this.planets.map((t=>t._P))),this.updatePlanetList()}updatePlanetList(){this.planetList.innerHTML="",this.planets.forEach(((t,e)=>{const n=this.createPlanetItem(t,e);this.planetList.appendChild(n)})),this.planetCounter.textContent="Planets ("+this.planets.length+")",this.onUpdate()}createPlanetItem(t,e){const n=document.createElement("div");n.className="planet-item",n.dataset.name=t.planetName;const r=document.createElement("div");r.className="dot-planet-container";const i=document.createElement("span");i.className="dot-planet",i.style.backgroundColor=t.color;const o=document.createElement("input");o.type="color",o.value=t.color,o.style.display="none",i.addEventListener("click",(()=>{o.click()})),o.addEventListener("input",(t=>{this.planets[e].color=t.target.value,i.style.backgroundColor=t.target.value}));const u=15*t.R/this.maxRadius;i.style.width=u.toString()+"px",i.style.height=u.toString()+"px",r.appendChild(i),i.appendChild(o);const a=document.createElement("span");a.className="planet-name-label",a.title=t.planetName,a.textContent=t.planetName;const s=this.createPlanetButton("../icons/edit.png",(()=>this.onEditListener(e)),"Edit"),c=this.createPlanetButton("../icons/delete-button.svg",(()=>this.onRemoveListener(e)),"Delete");return n.appendChild(r),n.appendChild(a),n.appendChild(s),n.appendChild(c),n}setTimes(t){this.planets.forEach((e=>{e.setOrbitingTimes(t)})),this.maxDistance=Math.max(...this.planets.map((t=>t.maxCoordinate()+t._R)))}setStar(t){this.star=t.copy(),this.planets.forEach((e=>{e.setStar(t)}))}}class Hi{constructor(t,e,n,r){this.onDatapointsUpdate=e,this.onOrbitsUpdate=n,this.onMcPointsUpdate=r,this.initLightcurveMenu(),this.calculateTimes(t)}setLanguage(t){this.datapointsLabel.setLanguage(t),this.orbitsLabel.setLanguage(t),this.mcPointsLabel.setLanguage(t)}initLightcurveMenu(){const t=document.getElementById("input-datapoints");this.datapoints=parseInt(t.value),this.datapointsLabel=new ji("datapoints");const e=document.getElementById("orbits");this.orbits=parseInt(e.value),this.orbitsLabel=new ji("orbits"),this.mcPointsInput=document.getElementById("input-mc-points"),this.mcPoints=parseInt(1e3*this.mcPointsInput.value),this.mcPointsLabel=new ji("mc-points"),this.mcPointsInput.addEventListener("input",(t=>{const e=parseFloat(t.target.min);t.target.value<e&&(t.target.value=e),this.mcPoints=parseInt(1e3*t.target.value),this.onMcPointsUpdate()})),t.addEventListener("input",(t=>{const e=parseFloat(t.target.min);t.target.value<e&&(t.target.value=e),this.datapoints=parseInt(t.target.value),this.onDatapointsUpdate()})),e.addEventListener("input",(t=>{const e=parseFloat(t.target.min);t.target.value<e&&(t.target.value=e),this.orbits=parseInt(t.target.value),this.onOrbitsUpdate()}))}calculateTimes(e){this.times=Ni(0,this.orbits*e,this.datapoints),this.timesDays=this.times.map((e=>e/t))}exportLightcurve(t,e){const n=t.map(((t,n)=>`${t.toFixed(4)},${e[n].toFixed(5)}`)).join("\n");Ii(new Blob([`Time (days),RelativeFlux\n${n}`],{type:"text/csv"}),"lightcurve","csv")}}class Zi{constructor(t){this.onUpdate=t,this.initFrame()}initFrame(){this.msInput=document.getElementById("ms"),this.msLabel=new ji("frame-rate"),this.ms=parseFloat(this.msInput.value),this.msInput.addEventListener("input",(t=>{this.ms=parseFloat(t.target.value),this.onUpdate(this.ms)})),this.saveAnimationButton=document.getElementById("save-animation-btn"),this.saveAnimationButton.disabled=!0,this.durationLabel=document.getElementById("animation-duration-label")}setDuration(t){this.durationLabel.innerHTML=(t/1e3).toFixed(3),this.animationDurationms=t}setLanguage(t){this.msLabel.setLanguage(t)}disable(t){this.msInput.disabled=t,this.saveAnimationButton.disabled=t}}class Xi{constructor(t){this.activateButton=document.getElementById(t+"-button");const e=document.getElementById(t+"-content");this.activateButton.addEventListener("click",(()=>{this.showContent(e,t)})),this.closeButton=document.getElementById("close-"+t+"-btn"),this.closeWindowListener=()=>{this.closeWindow(e)},this.closeButton.addEventListener("click",this.closeWindowListener),this.contentName=t}setLanguage(t){const e=document.getElementById(this.contentName+"-text");console.log("Setting language for "+this.contentName),e.innerHTML=t[this.contentName+"-text"]}async showContent(t,e){console.log("Showing "+e),t.classList.remove("hidden"),t.focus(),this.keydownListener=e=>{"Escape"===e.key&&this.closeWindow(t)},document.addEventListener("keydown",this.keydownListener)}closeWindow(t){t.classList.add("hidden"),t.blur(),this.keydownListener&&(document.removeEventListener("keydown",this.keydownListener),this.keydownListener=null)}}function Yi(t,e){let n;if(void 0===e)for(const e of t)null!=e&&(n<e||void 0===n&&e>=e)&&(n=e);else{let r=-1;for(let i of t)null!=(i=e(i,++r,t))&&(n<i||void 0===n&&i>=i)&&(n=i)}return n}function Wi(t,e){let n;if(void 0===e)for(const e of t)null!=e&&(n>e||void 0===n&&e>=e)&&(n=e);else{let r=-1;for(let i of t)null!=(i=e(i,++r,t))&&(n>i||void 0===n&&i>=i)&&(n=i)}return n}function Ji(t){return t}var Gi=1e-6;function Ki(t){return"translate("+t+",0)"}function Qi(t){return"translate(0,"+t+")"}function to(t){return e=>+t(e)}function eo(t,e){return e=Math.max(0,t.bandwidth()-2*e)/2,t.round()&&(e=Math.round(e)),n=>+t(n)+e}function no(){return!this.__axis}function ro(t,e){var n=[],r=null,i=null,o=6,u=6,a=3,s="undefined"!=typeof window&&window.devicePixelRatio>1?0:.5,c=1===t||4===t?-1:1,l=4===t||2===t?"x":"y",h=1===t||3===t?Ki:Qi;function f(f){var p=null==r?e.ticks?e.ticks.apply(e,n):e.domain():r,d=null==i?e.tickFormat?e.tickFormat.apply(e,n):Ji:i,m=Math.max(o,0)+a,D=e.range(),g=+D[0]+s,y=+D[D.length-1]+s,v=(e.bandwidth?eo:to)(e.copy(),s),w=f.selection?f.selection():f,E=w.selectAll(".domain").data([null]),F=w.selectAll(".tick").data(p,e).order(),A=F.exit(),C=F.enter().append("g").attr("class","tick"),x=F.select("line"),_=F.select("text");E=E.merge(E.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),F=F.merge(C),x=x.merge(C.append("line").attr("stroke","currentColor").attr(l+"2",c*o)),_=_.merge(C.append("text").attr("fill","currentColor").attr(l,c*m).attr("dy",1===t?"0em":3===t?"0.71em":"0.32em")),f!==w&&(E=E.transition(f),F=F.transition(f),x=x.transition(f),_=_.transition(f),A=A.transition(f).attr("opacity",Gi).attr("transform",(function(t){return isFinite(t=v(t))?h(t+s):this.getAttribute("transform")})),C.attr("opacity",Gi).attr("transform",(function(t){var e=this.parentNode.__axis;return h((e&&isFinite(e=e(t))?e:v(t))+s)}))),A.remove(),E.attr("d",4===t||2===t?u?"M"+c*u+","+g+"H"+s+"V"+y+"H"+c*u:"M"+s+","+g+"V"+y:u?"M"+g+","+c*u+"V"+s+"H"+y+"V"+c*u:"M"+g+","+s+"H"+y),F.attr("opacity",1).attr("transform",(function(t){return h(v(t)+s)})),x.attr(l+"2",c*o),_.attr(l,c*m).text(d),w.filter(no).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",2===t?"start":4===t?"end":"middle"),w.each((function(){this.__axis=v}))}return f.scale=function(t){return arguments.length?(e=t,f):e},f.ticks=function(){return n=Array.from(arguments),f},f.tickArguments=function(t){return arguments.length?(n=null==t?[]:Array.from(t),f):n.slice()},f.tickValues=function(t){return arguments.length?(r=null==t?null:Array.from(t),f):r&&r.slice()},f.tickFormat=function(t){return arguments.length?(i=t,f):i},f.tickSize=function(t){return arguments.length?(o=u=+t,f):o},f.tickSizeInner=function(t){return arguments.length?(o=+t,f):o},f.tickSizeOuter=function(t){return arguments.length?(u=+t,f):u},f.tickPadding=function(t){return arguments.length?(a=+t,f):a},f.offset=function(t){return arguments.length?(s=+t,f):s},f}function io(){}function oo(t){return null==t?io:function(){return this.querySelector(t)}}function uo(){return[]}function ao(t){return null==t?uo:function(){return this.querySelectorAll(t)}}function so(t){return function(){return this.matches(t)}}function co(t){return function(e){return e.matches(t)}}var lo=Array.prototype.find;function ho(){return this.firstElementChild}var fo=Array.prototype.filter;function po(){return Array.from(this.children)}function mo(t){return new Array(t.length)}function Do(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}function go(t,e,n,r,i,o){for(var u,a=0,s=e.length,c=o.length;a<c;++a)(u=e[a])?(u.__data__=o[a],r[a]=u):n[a]=new Do(t,o[a]);for(;a<s;++a)(u=e[a])&&(i[a]=u)}function yo(t,e,n,r,i,o,u){var a,s,c,l=new Map,h=e.length,f=o.length,p=new Array(h);for(a=0;a<h;++a)(s=e[a])&&(p[a]=c=u.call(s,s.__data__,a,e)+"",l.has(c)?i[a]=s:l.set(c,s));for(a=0;a<f;++a)c=u.call(t,o[a],a,o)+"",(s=l.get(c))?(r[a]=s,s.__data__=o[a],l.delete(c)):n[a]=new Do(t,o[a]);for(a=0;a<h;++a)(s=e[a])&&l.get(p[a])===s&&(i[a]=s)}function vo(t){return t.__data__}function wo(t){return"object"==typeof t&&"length"in t?t:Array.from(t)}function Eo(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}Do.prototype={constructor:Do,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};var Fo="http://www.w3.org/1999/xhtml";const Ao={svg:"http://www.w3.org/2000/svg",xhtml:Fo,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Co(t){var e=t+="",n=e.indexOf(":");return n>=0&&"xmlns"!==(e=t.slice(0,n))&&(t=t.slice(n+1)),Ao.hasOwnProperty(e)?{space:Ao[e],local:t}:t}function xo(t){return function(){this.removeAttribute(t)}}function _o(t){return function(){this.removeAttributeNS(t.space,t.local)}}function bo(t,e){return function(){this.setAttribute(t,e)}}function Bo(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function Mo(t,e){return function(){var n=e.apply(this,arguments);null==n?this.removeAttribute(t):this.setAttribute(t,n)}}function No(t,e){return function(){var n=e.apply(this,arguments);null==n?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function So(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function Io(t){return function(){this.style.removeProperty(t)}}function To(t,e,n){return function(){this.style.setProperty(t,e,n)}}function ko(t,e,n){return function(){var r=e.apply(this,arguments);null==r?this.style.removeProperty(t):this.style.setProperty(t,r,n)}}function Po(t,e){return t.style.getPropertyValue(e)||So(t).getComputedStyle(t,null).getPropertyValue(e)}function Ro(t){return function(){delete this[t]}}function zo(t,e){return function(){this[t]=e}}function Oo(t,e){return function(){var n=e.apply(this,arguments);null==n?delete this[t]:this[t]=n}}function Uo(t){return t.trim().split(/^|\s+/)}function Lo(t){return t.classList||new $o(t)}function $o(t){this._node=t,this._names=Uo(t.getAttribute("class")||"")}function jo(t,e){for(var n=Lo(t),r=-1,i=e.length;++r<i;)n.add(e[r])}function qo(t,e){for(var n=Lo(t),r=-1,i=e.length;++r<i;)n.remove(e[r])}function Vo(t){return function(){jo(this,t)}}function Ho(t){return function(){qo(this,t)}}function Zo(t,e){return function(){(e.apply(this,arguments)?jo:qo)(this,t)}}function Xo(){this.textContent=""}function Yo(t){return function(){this.textContent=t}}function Wo(t){return function(){var e=t.apply(this,arguments);this.textContent=null==e?"":e}}function Jo(){this.innerHTML=""}function Go(t){return function(){this.innerHTML=t}}function Ko(t){return function(){var e=t.apply(this,arguments);this.innerHTML=null==e?"":e}}function Qo(){this.nextSibling&&this.parentNode.appendChild(this)}function tu(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function eu(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===Fo&&e.documentElement.namespaceURI===Fo?e.createElement(t):e.createElementNS(n,t)}}function nu(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function ru(t){var e=Co(t);return(e.local?nu:eu)(e)}function iu(){return null}function ou(){var t=this.parentNode;t&&t.removeChild(this)}function uu(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function au(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function su(t){return function(){var e=this.__on;if(e){for(var n,r=0,i=-1,o=e.length;r<o;++r)n=e[r],t.type&&n.type!==t.type||n.name!==t.name?e[++i]=n:this.removeEventListener(n.type,n.listener,n.options);++i?e.length=i:delete this.__on}}}function cu(t,e,n){return function(){var r,i=this.__on,o=function(t){return function(e){t.call(this,e,this.__data__)}}(e);if(i)for(var u=0,a=i.length;u<a;++u)if((r=i[u]).type===t.type&&r.name===t.name)return this.removeEventListener(r.type,r.listener,r.options),this.addEventListener(r.type,r.listener=o,r.options=n),void(r.value=e);this.addEventListener(t.type,o,n),r={type:t.type,name:t.name,value:e,listener:o,options:n},i?i.push(r):this.__on=[r]}}function lu(t,e,n){var r=So(t),i=r.CustomEvent;"function"==typeof i?i=new i(e,n):(i=r.document.createEvent("Event"),n?(i.initEvent(e,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(e,!1,!1)),t.dispatchEvent(i)}function hu(t,e){return function(){return lu(this,t,e)}}function fu(t,e){return function(){return lu(this,t,e.apply(this,arguments))}}$o.prototype={add:function(t){this._names.indexOf(t)<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};var pu=[null];function du(t,e){this._groups=t,this._parents=e}function mu(){return new du([[document.documentElement]],pu)}du.prototype=mu.prototype={constructor:du,select:function(t){"function"!=typeof t&&(t=oo(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var o,u,a=e[i],s=a.length,c=r[i]=new Array(s),l=0;l<s;++l)(o=a[l])&&(u=t.call(o,o.__data__,l,a))&&("__data__"in o&&(u.__data__=o.__data__),c[l]=u);return new du(r,this._parents)},selectAll:function(t){t="function"==typeof t?function(t){return function(){return null==(e=t.apply(this,arguments))?[]:Array.isArray(e)?e:Array.from(e);var e}}(t):ao(t);for(var e=this._groups,n=e.length,r=[],i=[],o=0;o<n;++o)for(var u,a=e[o],s=a.length,c=0;c<s;++c)(u=a[c])&&(r.push(t.call(u,u.__data__,c,a)),i.push(u));return new du(r,i)},selectChild:function(t){return this.select(null==t?ho:function(t){return function(){return lo.call(this.children,t)}}("function"==typeof t?t:co(t)))},selectChildren:function(t){return this.selectAll(null==t?po:function(t){return function(){return fo.call(this.children,t)}}("function"==typeof t?t:co(t)))},filter:function(t){"function"!=typeof t&&(t=so(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var o,u=e[i],a=u.length,s=r[i]=[],c=0;c<a;++c)(o=u[c])&&t.call(o,o.__data__,c,u)&&s.push(o);return new du(r,this._parents)},data:function(t,e){if(!arguments.length)return Array.from(this,vo);var n,r=e?yo:go,i=this._parents,o=this._groups;"function"!=typeof t&&(n=t,t=function(){return n});for(var u=o.length,a=new Array(u),s=new Array(u),c=new Array(u),l=0;l<u;++l){var h=i[l],f=o[l],p=f.length,d=wo(t.call(h,h&&h.__data__,l,i)),m=d.length,D=s[l]=new Array(m),g=a[l]=new Array(m);r(h,f,D,g,c[l]=new Array(p),d,e);for(var y,v,w=0,E=0;w<m;++w)if(y=D[w]){for(w>=E&&(E=w+1);!(v=g[E])&&++E<m;);y._next=v||null}}return(a=new du(a,i))._enter=s,a._exit=c,a},enter:function(){return new du(this._enter||this._groups.map(mo),this._parents)},exit:function(){return new du(this._exit||this._groups.map(mo),this._parents)},join:function(t,e,n){var r=this.enter(),i=this,o=this.exit();return"function"==typeof t?(r=t(r))&&(r=r.selection()):r=r.append(t+""),null!=e&&(i=e(i))&&(i=i.selection()),null==n?o.remove():n(o),r&&i?r.merge(i).order():i},merge:function(t){for(var e=t.selection?t.selection():t,n=this._groups,r=e._groups,i=n.length,o=r.length,u=Math.min(i,o),a=new Array(i),s=0;s<u;++s)for(var c,l=n[s],h=r[s],f=l.length,p=a[s]=new Array(f),d=0;d<f;++d)(c=l[d]||h[d])&&(p[d]=c);for(;s<i;++s)a[s]=n[s];return new du(a,this._parents)},selection:function(){return this},order:function(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var r,i=t[e],o=i.length-1,u=i[o];--o>=0;)(r=i[o])&&(u&&4^r.compareDocumentPosition(u)&&u.parentNode.insertBefore(r,u),u=r);return this},sort:function(t){function e(e,n){return e&&n?t(e.__data__,n.__data__):!e-!n}t||(t=Eo);for(var n=this._groups,r=n.length,i=new Array(r),o=0;o<r;++o){for(var u,a=n[o],s=a.length,c=i[o]=new Array(s),l=0;l<s;++l)(u=a[l])&&(c[l]=u);c.sort(e)}return new du(i,this._parents).order()},call:function(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this},nodes:function(){return Array.from(this)},node:function(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,o=r.length;i<o;++i){var u=r[i];if(u)return u}return null},size:function(){let t=0;for(const e of this)++t;return t},empty:function(){return!this.node()},each:function(t){for(var e=this._groups,n=0,r=e.length;n<r;++n)for(var i,o=e[n],u=0,a=o.length;u<a;++u)(i=o[u])&&t.call(i,i.__data__,u,o);return this},attr:function(t,e){var n=Co(t);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((null==e?n.local?_o:xo:"function"==typeof e?n.local?No:Mo:n.local?Bo:bo)(n,e))},style:function(t,e,n){return arguments.length>1?this.each((null==e?Io:"function"==typeof e?ko:To)(t,e,null==n?"":n)):Po(this.node(),t)},property:function(t,e){return arguments.length>1?this.each((null==e?Ro:"function"==typeof e?Oo:zo)(t,e)):this.node()[t]},classed:function(t,e){var n=Uo(t+"");if(arguments.length<2){for(var r=Lo(this.node()),i=-1,o=n.length;++i<o;)if(!r.contains(n[i]))return!1;return!0}return this.each(("function"==typeof e?Zo:e?Vo:Ho)(n,e))},text:function(t){return arguments.length?this.each(null==t?Xo:("function"==typeof t?Wo:Yo)(t)):this.node().textContent},html:function(t){return arguments.length?this.each(null==t?Jo:("function"==typeof t?Ko:Go)(t)):this.node().innerHTML},raise:function(){return this.each(Qo)},lower:function(){return this.each(tu)},append:function(t){var e="function"==typeof t?t:ru(t);return this.select((function(){return this.appendChild(e.apply(this,arguments))}))},insert:function(t,e){var n="function"==typeof t?t:ru(t),r=null==e?iu:"function"==typeof e?e:oo(e);return this.select((function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)}))},remove:function(){return this.each(ou)},clone:function(t){return this.select(t?au:uu)},datum:function(t){return arguments.length?this.property("__data__",t):this.node().__data__},on:function(t,e,n){var r,i,o=function(t){return t.trim().split(/^|\s+/).map((function(t){var e="",n=t.indexOf(".");return n>=0&&(e=t.slice(n+1),t=t.slice(0,n)),{type:t,name:e}}))}(t+""),u=o.length;if(!(arguments.length<2)){for(a=e?cu:su,r=0;r<u;++r)this.each(a(o[r],e,n));return this}var a=this.node().__on;if(a)for(var s,c=0,l=a.length;c<l;++c)for(r=0,s=a[c];r<u;++r)if((i=o[r]).type===s.type&&i.name===s.name)return s.value},dispatch:function(t,e){return this.each(("function"==typeof e?fu:hu)(t,e))},[Symbol.iterator]:function*(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r,i=t[e],o=0,u=i.length;o<u;++o)(r=i[o])&&(yield r)}};const Du=mu;var gu={value:()=>{}};function yu(){for(var t,e=0,n=arguments.length,r={};e<n;++e){if(!(t=arguments[e]+"")||t in r||/[\s.]/.test(t))throw new Error("illegal type: "+t);r[t]=[]}return new vu(r)}function vu(t){this._=t}function wu(t,e){for(var n,r=0,i=t.length;r<i;++r)if((n=t[r]).name===e)return n.value}function Eu(t,e,n){for(var r=0,i=t.length;r<i;++r)if(t[r].name===e){t[r]=gu,t=t.slice(0,r).concat(t.slice(r+1));break}return null!=n&&t.push({name:e,value:n}),t}vu.prototype=yu.prototype={constructor:vu,on:function(t,e){var n,r,i=this._,o=(r=i,(t+"").trim().split(/^|\s+/).map((function(t){var e="",n=t.indexOf(".");if(n>=0&&(e=t.slice(n+1),t=t.slice(0,n)),t&&!r.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:e}}))),u=-1,a=o.length;if(!(arguments.length<2)){if(null!=e&&"function"!=typeof e)throw new Error("invalid callback: "+e);for(;++u<a;)if(n=(t=o[u]).type)i[n]=Eu(i[n],t.name,e);else if(null==e)for(n in i)i[n]=Eu(i[n],t.name,null);return this}for(;++u<a;)if((n=(t=o[u]).type)&&(n=wu(i[n],t.name)))return n},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new vu(t)},call:function(t,e){if((n=arguments.length-2)>0)for(var n,r,i=new Array(n),o=0;o<n;++o)i[o]=arguments[o+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(o=0,n=(r=this._[t]).length;o<n;++o)r[o].value.apply(e,i)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],i=0,o=r.length;i<o;++i)r[i].value.apply(e,n)}};const Fu=yu;var Au,Cu,xu=0,_u=0,bu=0,Bu=0,Mu=0,Nu=0,Su="object"==typeof performance&&performance.now?performance:Date,Iu="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function Tu(){return Mu||(Iu(ku),Mu=Su.now()+Nu)}function ku(){Mu=0}function Pu(){this._call=this._time=this._next=null}function Ru(t,e,n){var r=new Pu;return r.restart(t,e,n),r}function zu(){Mu=(Bu=Su.now())+Nu,xu=_u=0;try{!function(){Tu(),++xu;for(var t,e=Au;e;)(t=Mu-e._time)>=0&&e._call.call(void 0,t),e=e._next;--xu}()}finally{xu=0,function(){for(var t,e,n=Au,r=1/0;n;)n._call?(r>n._time&&(r=n._time),t=n,n=n._next):(e=n._next,n._next=null,n=t?t._next=e:Au=e);Cu=t,Uu(r)}(),Mu=0}}function Ou(){var t=Su.now(),e=t-Bu;e>1e3&&(Nu-=e,Bu=t)}function Uu(t){xu||(_u&&(_u=clearTimeout(_u)),t-Mu>24?(t<1/0&&(_u=setTimeout(zu,t-Su.now()-Nu)),bu&&(bu=clearInterval(bu))):(bu||(Bu=Su.now(),bu=setInterval(Ou,1e3)),xu=1,Iu(zu)))}function Lu(t,e,n){var r=new Pu;return e=null==e?0:+e,r.restart((n=>{r.stop(),t(n+e)}),e,n),r}Pu.prototype=Ru.prototype={constructor:Pu,restart:function(t,e,n){if("function"!=typeof t)throw new TypeError("callback is not a function");n=(null==n?Tu():+n)+(null==e?0:+e),this._next||Cu===this||(Cu?Cu._next=this:Au=this,Cu=this),this._call=t,this._time=n,Uu()},stop:function(){this._call&&(this._call=null,this._time=1/0,Uu())}};var $u=Fu("start","end","cancel","interrupt"),ju=[];function qu(t,e,n,r,i,o){var u=t.__transition;if(u){if(n in u)return}else t.__transition={};!function(t,e,n){var r,i=t.__transition;function o(s){var c,l,h,f;if(1!==n.state)return a();for(c in i)if((f=i[c]).name===n.name){if(3===f.state)return Lu(o);4===f.state?(f.state=6,f.timer.stop(),f.on.call("interrupt",t,t.__data__,f.index,f.group),delete i[c]):+c<e&&(f.state=6,f.timer.stop(),f.on.call("cancel",t,t.__data__,f.index,f.group),delete i[c])}if(Lu((function(){3===n.state&&(n.state=4,n.timer.restart(u,n.delay,n.time),u(s))})),n.state=2,n.on.call("start",t,t.__data__,n.index,n.group),2===n.state){for(n.state=3,r=new Array(h=n.tween.length),c=0,l=-1;c<h;++c)(f=n.tween[c].value.call(t,t.__data__,n.index,n.group))&&(r[++l]=f);r.length=l+1}}function u(e){for(var i=e<n.duration?n.ease.call(null,e/n.duration):(n.timer.restart(a),n.state=5,1),o=-1,u=r.length;++o<u;)r[o].call(t,i);5===n.state&&(n.on.call("end",t,t.__data__,n.index,n.group),a())}function a(){for(var r in n.state=6,n.timer.stop(),delete i[e],i)return;delete t.__transition}i[e]=n,n.timer=Ru((function(t){n.state=1,n.timer.restart(o,n.delay,n.time),n.delay<=t&&o(t-n.delay)}),0,n.time)}(t,n,{name:e,index:r,group:i,on:$u,tween:ju,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:0})}function Vu(t,e){var n=Zu(t,e);if(n.state>0)throw new Error("too late; already scheduled");return n}function Hu(t,e){var n=Zu(t,e);if(n.state>3)throw new Error("too late; already running");return n}function Zu(t,e){var n=t.__transition;if(!n||!(n=n[e]))throw new Error("transition not found");return n}function Xu(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}var Yu,Wu=180/Math.PI,Ju={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Gu(t,e,n,r,i,o){var u,a,s;return(u=Math.sqrt(t*t+e*e))&&(t/=u,e/=u),(s=t*n+e*r)&&(n-=t*s,r-=e*s),(a=Math.sqrt(n*n+r*r))&&(n/=a,r/=a,s/=a),t*r<e*n&&(t=-t,e=-e,s=-s,u=-u),{translateX:i,translateY:o,rotate:Math.atan2(e,t)*Wu,skewX:Math.atan(s)*Wu,scaleX:u,scaleY:a}}function Ku(t,e,n,r){function i(t){return t.length?t.pop()+" ":""}return function(o,u){var a=[],s=[];return o=t(o),u=t(u),function(t,r,i,o,u,a){if(t!==i||r!==o){var s=u.push("translate(",null,e,null,n);a.push({i:s-4,x:Xu(t,i)},{i:s-2,x:Xu(r,o)})}else(i||o)&&u.push("translate("+i+e+o+n)}(o.translateX,o.translateY,u.translateX,u.translateY,a,s),function(t,e,n,o){t!==e?(t-e>180?e+=360:e-t>180&&(t+=360),o.push({i:n.push(i(n)+"rotate(",null,r)-2,x:Xu(t,e)})):e&&n.push(i(n)+"rotate("+e+r)}(o.rotate,u.rotate,a,s),function(t,e,n,o){t!==e?o.push({i:n.push(i(n)+"skewX(",null,r)-2,x:Xu(t,e)}):e&&n.push(i(n)+"skewX("+e+r)}(o.skewX,u.skewX,a,s),function(t,e,n,r,o,u){if(t!==n||e!==r){var a=o.push(i(o)+"scale(",null,",",null,")");u.push({i:a-4,x:Xu(t,n)},{i:a-2,x:Xu(e,r)})}else 1===n&&1===r||o.push(i(o)+"scale("+n+","+r+")")}(o.scaleX,o.scaleY,u.scaleX,u.scaleY,a,s),o=u=null,function(t){for(var e,n=-1,r=s.length;++n<r;)a[(e=s[n]).i]=e.x(t);return a.join("")}}}var Qu=Ku((function(t){const e=new("function"==typeof DOMMatrix?DOMMatrix:WebKitCSSMatrix)(t+"");return e.isIdentity?Ju:Gu(e.a,e.b,e.c,e.d,e.e,e.f)}),"px, ","px)","deg)"),ta=Ku((function(t){return null==t?Ju:(Yu||(Yu=document.createElementNS("http://www.w3.org/2000/svg","g")),Yu.setAttribute("transform",t),(t=Yu.transform.baseVal.consolidate())?Gu((t=t.matrix).a,t.b,t.c,t.d,t.e,t.f):Ju)}),", ",")",")");function ea(t,e){var n,r;return function(){var i=Hu(this,t),o=i.tween;if(o!==n)for(var u=0,a=(r=n=o).length;u<a;++u)if(r[u].name===e){(r=r.slice()).splice(u,1);break}i.tween=r}}function na(t,e,n){var r,i;if("function"!=typeof n)throw new Error;return function(){var o=Hu(this,t),u=o.tween;if(u!==r){i=(r=u).slice();for(var a={name:e,value:n},s=0,c=i.length;s<c;++s)if(i[s].name===e){i[s]=a;break}s===c&&i.push(a)}o.tween=i}}function ra(t,e,n){var r=t._id;return t.each((function(){var t=Hu(this,r);(t.value||(t.value={}))[e]=n.apply(this,arguments)})),function(t){return Zu(t,r).value[e]}}function ia(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function oa(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function ua(){}var aa=.7,sa=1/aa,ca="\\s*([+-]?\\d+)\\s*",la="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",ha="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",fa=/^#([0-9a-f]{3,8})$/,pa=new RegExp(`^rgb\\(${ca},${ca},${ca}\\)$`),da=new RegExp(`^rgb\\(${ha},${ha},${ha}\\)$`),ma=new RegExp(`^rgba\\(${ca},${ca},${ca},${la}\\)$`),Da=new RegExp(`^rgba\\(${ha},${ha},${ha},${la}\\)$`),ga=new RegExp(`^hsl\\(${la},${ha},${ha}\\)$`),ya=new RegExp(`^hsla\\(${la},${ha},${ha},${la}\\)$`),va={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function wa(){return this.rgb().formatHex()}function Ea(){return this.rgb().formatRgb()}function Fa(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=fa.exec(t))?(n=e[1].length,e=parseInt(e[1],16),6===n?Aa(e):3===n?new _a(e>>8&15|e>>4&240,e>>4&15|240&e,(15&e)<<4|15&e,1):8===n?Ca(e>>24&255,e>>16&255,e>>8&255,(255&e)/255):4===n?Ca(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|240&e,((15&e)<<4|15&e)/255):null):(e=pa.exec(t))?new _a(e[1],e[2],e[3],1):(e=da.exec(t))?new _a(255*e[1]/100,255*e[2]/100,255*e[3]/100,1):(e=ma.exec(t))?Ca(e[1],e[2],e[3],e[4]):(e=Da.exec(t))?Ca(255*e[1]/100,255*e[2]/100,255*e[3]/100,e[4]):(e=ga.exec(t))?Ia(e[1],e[2]/100,e[3]/100,1):(e=ya.exec(t))?Ia(e[1],e[2]/100,e[3]/100,e[4]):va.hasOwnProperty(t)?Aa(va[t]):"transparent"===t?new _a(NaN,NaN,NaN,0):null}function Aa(t){return new _a(t>>16&255,t>>8&255,255&t,1)}function Ca(t,e,n,r){return r<=0&&(t=e=n=NaN),new _a(t,e,n,r)}function xa(t,e,n,r){return 1===arguments.length?((i=t)instanceof ua||(i=Fa(i)),i?new _a((i=i.rgb()).r,i.g,i.b,i.opacity):new _a):new _a(t,e,n,null==r?1:r);var i}function _a(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}function ba(){return`#${Sa(this.r)}${Sa(this.g)}${Sa(this.b)}`}function Ba(){const t=Ma(this.opacity);return`${1===t?"rgb(":"rgba("}${Na(this.r)}, ${Na(this.g)}, ${Na(this.b)}${1===t?")":`, ${t})`}`}function Ma(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function Na(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function Sa(t){return((t=Na(t))<16?"0":"")+t.toString(16)}function Ia(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new ka(t,e,n,r)}function Ta(t){if(t instanceof ka)return new ka(t.h,t.s,t.l,t.opacity);if(t instanceof ua||(t=Fa(t)),!t)return new ka;if(t instanceof ka)return t;var e=(t=t.rgb()).r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),o=Math.max(e,n,r),u=NaN,a=o-i,s=(o+i)/2;return a?(u=e===o?(n-r)/a+6*(n<r):n===o?(r-e)/a+2:(e-n)/a+4,a/=s<.5?o+i:2-o-i,u*=60):a=s>0&&s<1?0:u,new ka(u,a,s,t.opacity)}function ka(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}function Pa(t){return(t=(t||0)%360)<0?t+360:t}function Ra(t){return Math.max(0,Math.min(1,t||0))}function za(t,e,n){return 255*(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)}function Oa(t,e,n,r,i){var o=t*t,u=o*t;return((1-3*t+3*o-u)*e+(4-6*o+3*u)*n+(1+3*t+3*o-3*u)*r+u*i)/6}ia(ua,Fa,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:wa,formatHex:wa,formatHex8:function(){return this.rgb().formatHex8()},formatHsl:function(){return Ta(this).formatHsl()},formatRgb:Ea,toString:Ea}),ia(_a,xa,oa(ua,{brighter(t){return t=null==t?sa:Math.pow(sa,t),new _a(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=null==t?aa:Math.pow(aa,t),new _a(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new _a(Na(this.r),Na(this.g),Na(this.b),Ma(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:ba,formatHex:ba,formatHex8:function(){return`#${Sa(this.r)}${Sa(this.g)}${Sa(this.b)}${Sa(255*(isNaN(this.opacity)?1:this.opacity))}`},formatRgb:Ba,toString:Ba})),ia(ka,(function(t,e,n,r){return 1===arguments.length?Ta(t):new ka(t,e,n,null==r?1:r)}),oa(ua,{brighter(t){return t=null==t?sa:Math.pow(sa,t),new ka(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=null==t?aa:Math.pow(aa,t),new ka(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+360*(this.h<0),e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new _a(za(t>=240?t-240:t+120,i,r),za(t,i,r),za(t<120?t+240:t-120,i,r),this.opacity)},clamp(){return new ka(Pa(this.h),Ra(this.s),Ra(this.l),Ma(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=Ma(this.opacity);return`${1===t?"hsl(":"hsla("}${Pa(this.h)}, ${100*Ra(this.s)}%, ${100*Ra(this.l)}%${1===t?")":`, ${t})`}`}}));const Ua=t=>()=>t;function La(t,e){var n=e-t;return n?function(t,e){return function(n){return t+n*e}}(t,n):Ua(isNaN(t)?e:t)}const $a=function t(e){var n=function(t){return 1===(t=+t)?La:function(e,n){return n-e?function(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}(e,n,t):Ua(isNaN(e)?n:e)}}(e);function r(t,e){var r=n((t=xa(t)).r,(e=xa(e)).r),i=n(t.g,e.g),o=n(t.b,e.b),u=La(t.opacity,e.opacity);return function(e){return t.r=r(e),t.g=i(e),t.b=o(e),t.opacity=u(e),t+""}}return r.gamma=t,r}(1);function ja(t){return function(e){var n,r,i=e.length,o=new Array(i),u=new Array(i),a=new Array(i);for(n=0;n<i;++n)r=xa(e[n]),o[n]=r.r||0,u[n]=r.g||0,a[n]=r.b||0;return o=t(o),u=t(u),a=t(a),r.opacity=1,function(t){return r.r=o(t),r.g=u(t),r.b=a(t),r+""}}}ja((function(t){var e=t.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,e-1):Math.floor(n*e),i=t[r],o=t[r+1],u=r>0?t[r-1]:2*i-o,a=r<e-1?t[r+2]:2*o-i;return Oa((n-r/e)*e,u,i,o,a)}})),ja((function(t){var e=t.length;return function(n){var r=Math.floor(((n%=1)<0?++n:n)*e),i=t[(r+e-1)%e],o=t[r%e],u=t[(r+1)%e],a=t[(r+2)%e];return Oa((n-r/e)*e,i,o,u,a)}}));var qa=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Va=new RegExp(qa.source,"g");function Ha(t,e){var n,r,i,o=qa.lastIndex=Va.lastIndex=0,u=-1,a=[],s=[];for(t+="",e+="";(n=qa.exec(t))&&(r=Va.exec(e));)(i=r.index)>o&&(i=e.slice(o,i),a[u]?a[u]+=i:a[++u]=i),(n=n[0])===(r=r[0])?a[u]?a[u]+=r:a[++u]=r:(a[++u]=null,s.push({i:u,x:Xu(n,r)})),o=Va.lastIndex;return o<e.length&&(i=e.slice(o),a[u]?a[u]+=i:a[++u]=i),a.length<2?s[0]?function(t){return function(e){return t(e)+""}}(s[0].x):function(t){return function(){return t}}(e):(e=s.length,function(t){for(var n,r=0;r<e;++r)a[(n=s[r]).i]=n.x(t);return a.join("")})}function Za(t,e){var n;return("number"==typeof e?Xu:e instanceof Fa?$a:(n=Fa(e))?(e=n,$a):Ha)(t,e)}function Xa(t){return function(){this.removeAttribute(t)}}function Ya(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Wa(t,e,n){var r,i,o=n+"";return function(){var u=this.getAttribute(t);return u===o?null:u===r?i:i=e(r=u,n)}}function Ja(t,e,n){var r,i,o=n+"";return function(){var u=this.getAttributeNS(t.space,t.local);return u===o?null:u===r?i:i=e(r=u,n)}}function Ga(t,e,n){var r,i,o;return function(){var u,a,s=n(this);if(null!=s)return(u=this.getAttribute(t))===(a=s+"")?null:u===r&&a===i?o:(i=a,o=e(r=u,s));this.removeAttribute(t)}}function Ka(t,e,n){var r,i,o;return function(){var u,a,s=n(this);if(null!=s)return(u=this.getAttributeNS(t.space,t.local))===(a=s+"")?null:u===r&&a===i?o:(i=a,o=e(r=u,s));this.removeAttributeNS(t.space,t.local)}}function Qa(t,e){var n,r;function i(){var i=e.apply(this,arguments);return i!==r&&(n=(r=i)&&function(t,e){return function(n){this.setAttributeNS(t.space,t.local,e.call(this,n))}}(t,i)),n}return i._value=e,i}function ts(t,e){var n,r;function i(){var i=e.apply(this,arguments);return i!==r&&(n=(r=i)&&function(t,e){return function(n){this.setAttribute(t,e.call(this,n))}}(t,i)),n}return i._value=e,i}function es(t,e){return function(){Vu(this,t).delay=+e.apply(this,arguments)}}function ns(t,e){return e=+e,function(){Vu(this,t).delay=e}}function rs(t,e){return function(){Hu(this,t).duration=+e.apply(this,arguments)}}function is(t,e){return e=+e,function(){Hu(this,t).duration=e}}var os=Du.prototype.constructor;function us(t){return function(){this.style.removeProperty(t)}}var as=0;function ss(t,e,n,r){this._groups=t,this._parents=e,this._name=n,this._id=r}function cs(){return++as}var ls=Du.prototype;ss.prototype=function(t){return Du().transition(t)}.prototype={constructor:ss,select:function(t){var e=this._name,n=this._id;"function"!=typeof t&&(t=oo(t));for(var r=this._groups,i=r.length,o=new Array(i),u=0;u<i;++u)for(var a,s,c=r[u],l=c.length,h=o[u]=new Array(l),f=0;f<l;++f)(a=c[f])&&(s=t.call(a,a.__data__,f,c))&&("__data__"in a&&(s.__data__=a.__data__),h[f]=s,qu(h[f],e,n,f,h,Zu(a,n)));return new ss(o,this._parents,e,n)},selectAll:function(t){var e=this._name,n=this._id;"function"!=typeof t&&(t=ao(t));for(var r=this._groups,i=r.length,o=[],u=[],a=0;a<i;++a)for(var s,c=r[a],l=c.length,h=0;h<l;++h)if(s=c[h]){for(var f,p=t.call(s,s.__data__,h,c),d=Zu(s,n),m=0,D=p.length;m<D;++m)(f=p[m])&&qu(f,e,n,m,p,d);o.push(p),u.push(s)}return new ss(o,u,e,n)},selectChild:ls.selectChild,selectChildren:ls.selectChildren,filter:function(t){"function"!=typeof t&&(t=so(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var o,u=e[i],a=u.length,s=r[i]=[],c=0;c<a;++c)(o=u[c])&&t.call(o,o.__data__,c,u)&&s.push(o);return new ss(r,this._parents,this._name,this._id)},merge:function(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,r=e.length,i=n.length,o=Math.min(r,i),u=new Array(r),a=0;a<o;++a)for(var s,c=e[a],l=n[a],h=c.length,f=u[a]=new Array(h),p=0;p<h;++p)(s=c[p]||l[p])&&(f[p]=s);for(;a<r;++a)u[a]=e[a];return new ss(u,this._parents,this._name,this._id)},selection:function(){return new os(this._groups,this._parents)},transition:function(){for(var t=this._name,e=this._id,n=cs(),r=this._groups,i=r.length,o=0;o<i;++o)for(var u,a=r[o],s=a.length,c=0;c<s;++c)if(u=a[c]){var l=Zu(u,e);qu(u,t,n,c,a,{time:l.time+l.delay+l.duration,delay:0,duration:l.duration,ease:l.ease})}return new ss(r,this._parents,t,n)},call:ls.call,nodes:ls.nodes,node:ls.node,size:ls.size,empty:ls.empty,each:ls.each,on:function(t,e){var n=this._id;return arguments.length<2?Zu(this.node(),n).on.on(t):this.each(function(t,e,n){var r,i,o=function(t){return(t+"").trim().split(/^|\s+/).every((function(t){var e=t.indexOf(".");return e>=0&&(t=t.slice(0,e)),!t||"start"===t}))}(e)?Vu:Hu;return function(){var u=o(this,t),a=u.on;a!==r&&(i=(r=a).copy()).on(e,n),u.on=i}}(n,t,e))},attr:function(t,e){var n=Co(t),r="transform"===n?ta:Za;return this.attrTween(t,"function"==typeof e?(n.local?Ka:Ga)(n,r,ra(this,"attr."+t,e)):null==e?(n.local?Ya:Xa)(n):(n.local?Ja:Wa)(n,r,e))},attrTween:function(t,e){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(null==e)return this.tween(n,null);if("function"!=typeof e)throw new Error;var r=Co(t);return this.tween(n,(r.local?Qa:ts)(r,e))},style:function(t,e,n){var r="transform"==(t+="")?Qu:Za;return null==e?this.styleTween(t,function(t,e){var n,r,i;return function(){var o=Po(this,t),u=(this.style.removeProperty(t),Po(this,t));return o===u?null:o===n&&u===r?i:i=e(n=o,r=u)}}(t,r)).on("end.style."+t,us(t)):"function"==typeof e?this.styleTween(t,function(t,e,n){var r,i,o;return function(){var u=Po(this,t),a=n(this),s=a+"";return null==a&&(this.style.removeProperty(t),s=a=Po(this,t)),u===s?null:u===r&&s===i?o:(i=s,o=e(r=u,a))}}(t,r,ra(this,"style."+t,e))).each(function(t,e){var n,r,i,o,u="style."+e,a="end."+u;return function(){var s=Hu(this,t),c=s.on,l=null==s.value[u]?o||(o=us(e)):void 0;c===n&&i===l||(r=(n=c).copy()).on(a,i=l),s.on=r}}(this._id,t)):this.styleTween(t,function(t,e,n){var r,i,o=n+"";return function(){var u=Po(this,t);return u===o?null:u===r?i:i=e(r=u,n)}}(t,r,e),n).on("end.style."+t,null)},styleTween:function(t,e,n){var r="style."+(t+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(null==e)return this.tween(r,null);if("function"!=typeof e)throw new Error;return this.tween(r,function(t,e,n){var r,i;function o(){var o=e.apply(this,arguments);return o!==i&&(r=(i=o)&&function(t,e,n){return function(r){this.style.setProperty(t,e.call(this,r),n)}}(t,o,n)),r}return o._value=e,o}(t,e,null==n?"":n))},text:function(t){return this.tween("text","function"==typeof t?function(t){return function(){var e=t(this);this.textContent=null==e?"":e}}(ra(this,"text",t)):function(t){return function(){this.textContent=t}}(null==t?"":t+""))},textTween:function(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(null==t)return this.tween(e,null);if("function"!=typeof t)throw new Error;return this.tween(e,function(t){var e,n;function r(){var r=t.apply(this,arguments);return r!==n&&(e=(n=r)&&function(t){return function(e){this.textContent=t.call(this,e)}}(r)),e}return r._value=t,r}(t))},remove:function(){return this.on("end.remove",function(t){return function(){var e=this.parentNode;for(var n in this.__transition)if(+n!==t)return;e&&e.removeChild(this)}}(this._id))},tween:function(t,e){var n=this._id;if(t+="",arguments.length<2){for(var r,i=Zu(this.node(),n).tween,o=0,u=i.length;o<u;++o)if((r=i[o]).name===t)return r.value;return null}return this.each((null==e?ea:na)(n,t,e))},delay:function(t){var e=this._id;return arguments.length?this.each(("function"==typeof t?es:ns)(e,t)):Zu(this.node(),e).delay},duration:function(t){var e=this._id;return arguments.length?this.each(("function"==typeof t?rs:is)(e,t)):Zu(this.node(),e).duration},ease:function(t){var e=this._id;return arguments.length?this.each(function(t,e){if("function"!=typeof e)throw new Error;return function(){Hu(this,t).ease=e}}(e,t)):Zu(this.node(),e).ease},easeVarying:function(t){if("function"!=typeof t)throw new Error;return this.each(function(t,e){return function(){var n=e.apply(this,arguments);if("function"!=typeof n)throw new Error;Hu(this,t).ease=n}}(this._id,t))},end:function(){var t,e,n=this,r=n._id,i=n.size();return new Promise((function(o,u){var a={value:u},s={value:function(){0===--i&&o()}};n.each((function(){var n=Hu(this,r),i=n.on;i!==t&&((e=(t=i).copy())._.cancel.push(a),e._.interrupt.push(a),e._.end.push(s)),n.on=e})),0===i&&o()}))},[Symbol.iterator]:ls[Symbol.iterator]};var hs={time:null,delay:0,duration:250,ease:function(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}};function fs(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))throw new Error(`transition ${e} not found`);return n}Du.prototype.interrupt=function(t){return this.each((function(){!function(t,e){var n,r,i,o=t.__transition,u=!0;if(o){for(i in e=null==e?null:e+"",o)(n=o[i]).name===e?(r=n.state>2&&n.state<5,n.state=6,n.timer.stop(),n.on.call(r?"interrupt":"cancel",t,t.__data__,n.index,n.group),delete o[i]):u=!1;u&&delete t.__transition}}(this,t)}))},Du.prototype.transition=function(t){var e,n;t instanceof ss?(e=t._id,t=t._name):(e=cs(),(n=hs).time=Tu(),t=null==t?null:t+"");for(var r=this._groups,i=r.length,o=0;o<i;++o)for(var u,a=r[o],s=a.length,c=0;c<s;++c)(u=a[c])&&qu(u,t,e,c,a,n||fs(u,e));return new ss(r,this._parents,t,e)};const{abs:ps,max:ds,min:ms}=Math;function Ds(t){return{type:t}}["w","e"].map(Ds),["n","s"].map(Ds),["n","w","e","s","nw","ne","sw","se"].map(Ds);const gs=Math.sqrt(50),ys=Math.sqrt(10),vs=Math.sqrt(2);function ws(t,e,n){const r=(e-t)/Math.max(0,n),i=Math.floor(Math.log10(r)),o=r/Math.pow(10,i),u=o>=gs?10:o>=ys?5:o>=vs?2:1;let a,s,c;return i<0?(c=Math.pow(10,-i)/u,a=Math.round(t*c),s=Math.round(e*c),a/c<t&&++a,s/c>e&&--s,c=-c):(c=Math.pow(10,i)*u,a=Math.round(t/c),s=Math.round(e/c),a*c<t&&++a,s*c>e&&--s),s<a&&.5<=n&&n<2?ws(t,e,2*n):[a,s,c]}function Es(t,e,n){return ws(t=+t,e=+e,n=+n)[2]}function Fs(t,e){return null==t||null==e?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function As(t,e){return null==t||null==e?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function Cs(t){let e,n,r;function i(t,r,i=0,o=t.length){if(i<o){if(0!==e(r,r))return o;do{const e=i+o>>>1;n(t[e],r)<0?i=e+1:o=e}while(i<o)}return i}return 2!==t.length?(e=Fs,n=(e,n)=>Fs(t(e),n),r=(e,n)=>t(e)-n):(e=t===Fs||t===As?t:xs,n=t,r=t),{left:i,center:function(t,e,n=0,o=t.length){const u=i(t,e,n,o-1);return u>n&&r(t[u-1],e)>-r(t[u],e)?u-1:u},right:function(t,r,i=0,o=t.length){if(i<o){if(0!==e(r,r))return o;do{const e=i+o>>>1;n(t[e],r)<=0?i=e+1:o=e}while(i<o)}return i}}}function xs(){return 0}const _s=Cs(Fs),bs=_s.right,Bs=(_s.left,Cs((function(t){return null===t?NaN:+t})).center,bs);function Ms(t,e){var n,r=e?e.length:0,i=t?Math.min(r,t.length):0,o=new Array(i),u=new Array(r);for(n=0;n<i;++n)o[n]=Ts(t[n],e[n]);for(;n<r;++n)u[n]=e[n];return function(t){for(n=0;n<i;++n)u[n]=o[n](t);return u}}function Ns(t,e){var n=new Date;return t=+t,e=+e,function(r){return n.setTime(t*(1-r)+e*r),n}}function Ss(t,e){var n,r={},i={};for(n in null!==t&&"object"==typeof t||(t={}),null!==e&&"object"==typeof e||(e={}),e)n in t?r[n]=Ts(t[n],e[n]):i[n]=e[n];return function(t){for(n in r)i[n]=r[n](t);return i}}function Is(t,e){e||(e=[]);var n,r=t?Math.min(e.length,t.length):0,i=e.slice();return function(o){for(n=0;n<r;++n)i[n]=t[n]*(1-o)+e[n]*o;return i}}function Ts(t,e){var n,r,i=typeof e;return null==e||"boolean"===i?Ua(e):("number"===i?Xu:"string"===i?(n=Fa(e))?(e=n,$a):Ha:e instanceof Fa?$a:e instanceof Date?Ns:(r=e,!ArrayBuffer.isView(r)||r instanceof DataView?Array.isArray(e)?Ms:"function"!=typeof e.valueOf&&"function"!=typeof e.toString||isNaN(e)?Ss:Xu:Is))(t,e)}function ks(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}function Ps(t){return+t}var Rs=[0,1];function zs(t){return t}function Os(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:(n=isNaN(e)?NaN:.5,function(){return n});var n}function Us(t,e,n){var r=t[0],i=t[1],o=e[0],u=e[1];return i<r?(r=Os(i,r),o=n(u,o)):(r=Os(r,i),o=n(o,u)),function(t){return o(r(t))}}function Ls(t,e,n){var r=Math.min(t.length,e.length)-1,i=new Array(r),o=new Array(r),u=-1;for(t[r]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++u<r;)i[u]=Os(t[u],t[u+1]),o[u]=n(e[u],e[u+1]);return function(e){var n=Bs(t,e,1,r)-1;return o[n](i[n](e))}}function $s(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t)}return this}var js,qs=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Vs(t){if(!(e=qs.exec(t)))throw new Error("invalid format: "+t);var e;return new Hs({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}function Hs(t){this.fill=void 0===t.fill?" ":t.fill+"",this.align=void 0===t.align?">":t.align+"",this.sign=void 0===t.sign?"-":t.sign+"",this.symbol=void 0===t.symbol?"":t.symbol+"",this.zero=!!t.zero,this.width=void 0===t.width?void 0:+t.width,this.comma=!!t.comma,this.precision=void 0===t.precision?void 0:+t.precision,this.trim=!!t.trim,this.type=void 0===t.type?"":t.type+""}function Zs(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,r=t.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+t.slice(n+1)]}function Xs(t){return(t=Zs(Math.abs(t)))?t[1]:NaN}function Ys(t,e){var n=Zs(t,e);if(!n)return t+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}Vs.prototype=Hs.prototype,Hs.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};const Ws={"%":(t,e)=>(100*t).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:function(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)},e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>Ys(100*t,e),r:Ys,s:function(t,e){var n=Zs(t,e);if(!n)return t+"";var r=n[0],i=n[1],o=i-(js=3*Math.max(-8,Math.min(8,Math.floor(i/3))))+1,u=r.length;return o===u?r:o>u?r+new Array(o-u+1).join("0"):o>0?r.slice(0,o)+"."+r.slice(o):"0."+new Array(1-o).join("0")+Zs(t,Math.max(0,e+o-1))[0]},X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function Js(t){return t}var Gs,Ks,Qs,tc=Array.prototype.map,ec=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function nc(t){var e=t.domain;return t.ticks=function(t){var n=e();return function(t,e,n){if(!((n=+n)>0))return[];if((t=+t)===(e=+e))return[t];const r=e<t,[i,o,u]=r?ws(e,t,n):ws(t,e,n);if(!(o>=i))return[];const a=o-i+1,s=new Array(a);if(r)if(u<0)for(let t=0;t<a;++t)s[t]=(o-t)/-u;else for(let t=0;t<a;++t)s[t]=(o-t)*u;else if(u<0)for(let t=0;t<a;++t)s[t]=(i+t)/-u;else for(let t=0;t<a;++t)s[t]=(i+t)*u;return s}(n[0],n[n.length-1],null==t?10:t)},t.tickFormat=function(t,n){var r=e();return function(t,e,n,r){var i,o=function(t,e,n){n=+n;const r=(e=+e)<(t=+t),i=r?Es(e,t,n):Es(t,e,n);return(r?-1:1)*(i<0?1/-i:i)}(t,e,n);switch((r=Vs(null==r?",f":r)).type){case"s":var u=Math.max(Math.abs(t),Math.abs(e));return null!=r.precision||isNaN(i=function(t,e){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(Xs(e)/3)))-Xs(Math.abs(t)))}(o,u))||(r.precision=i),Qs(r,u);case"":case"e":case"g":case"p":case"r":null!=r.precision||isNaN(i=function(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,Xs(e)-Xs(t))+1}(o,Math.max(Math.abs(t),Math.abs(e))))||(r.precision=i-("e"===r.type));break;case"f":case"%":null!=r.precision||isNaN(i=function(t){return Math.max(0,-Xs(Math.abs(t)))}(o))||(r.precision=i-2*("%"===r.type))}return Ks(r)}(r[0],r[r.length-1],null==t?10:t,n)},t.nice=function(n){null==n&&(n=10);var r,i,o=e(),u=0,a=o.length-1,s=o[u],c=o[a],l=10;for(c<s&&(i=s,s=c,c=i,i=u,u=a,a=i);l-- >0;){if((i=Es(s,c,n))===r)return o[u]=s,o[a]=c,e(o);if(i>0)s=Math.floor(s/i)*i,c=Math.ceil(c/i)*i;else{if(!(i<0))break;s=Math.ceil(s*i)/i,c=Math.floor(c*i)/i}r=i}return t},t}function rc(){var t=function(){var t,e,n,r,i,o,u=Rs,a=Rs,s=Ts,c=zs;function l(){var t,e,n,s=Math.min(u.length,a.length);return c!==zs&&(t=u[0],e=u[s-1],t>e&&(n=t,t=e,e=n),c=function(n){return Math.max(t,Math.min(e,n))}),r=s>2?Ls:Us,i=o=null,h}function h(e){return null==e||isNaN(e=+e)?n:(i||(i=r(u.map(t),a,s)))(t(c(e)))}return h.invert=function(n){return c(e((o||(o=r(a,u.map(t),Xu)))(n)))},h.domain=function(t){return arguments.length?(u=Array.from(t,Ps),l()):u.slice()},h.range=function(t){return arguments.length?(a=Array.from(t),l()):a.slice()},h.rangeRound=function(t){return a=Array.from(t),s=ks,l()},h.clamp=function(t){return arguments.length?(c=!!t||zs,l()):c!==zs},h.interpolate=function(t){return arguments.length?(s=t,l()):s},h.unknown=function(t){return arguments.length?(n=t,h):n},function(n,r){return t=n,e=r,l()}}()(zs,zs);return t.copy=function(){return e=t,rc().domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown());var e},$s.apply(t,arguments),nc(t)}function ic(t){return function(){return t}}function oc(t){this._context=t}function uc(t){return new oc(t)}Gs=function(t){var e,n,r=void 0===t.grouping||void 0===t.thousands?Js:(e=tc.call(t.grouping,Number),n=t.thousands+"",function(t,r){for(var i=t.length,o=[],u=0,a=e[0],s=0;i>0&&a>0&&(s+a+1>r&&(a=Math.max(1,r-s)),o.push(t.substring(i-=a,i+a)),!((s+=a+1)>r));)a=e[u=(u+1)%e.length];return o.reverse().join(n)}),i=void 0===t.currency?"":t.currency[0]+"",o=void 0===t.currency?"":t.currency[1]+"",u=void 0===t.decimal?".":t.decimal+"",a=void 0===t.numerals?Js:function(t){return function(e){return e.replace(/[0-9]/g,(function(e){return t[+e]}))}}(tc.call(t.numerals,String)),s=void 0===t.percent?"%":t.percent+"",c=void 0===t.minus?"−":t.minus+"",l=void 0===t.nan?"NaN":t.nan+"";function h(t){var e=(t=Vs(t)).fill,n=t.align,h=t.sign,f=t.symbol,p=t.zero,d=t.width,m=t.comma,D=t.precision,g=t.trim,y=t.type;"n"===y?(m=!0,y="g"):Ws[y]||(void 0===D&&(D=12),g=!0,y="g"),(p||"0"===e&&"="===n)&&(p=!0,e="0",n="=");var v="$"===f?i:"#"===f&&/[boxX]/.test(y)?"0"+y.toLowerCase():"",w="$"===f?o:/[%p]/.test(y)?s:"",E=Ws[y],F=/[defgprs%]/.test(y);function A(t){var i,o,s,f=v,A=w;if("c"===y)A=E(t)+A,t="";else{var C=(t=+t)<0||1/t<0;if(t=isNaN(t)?l:E(Math.abs(t),D),g&&(t=function(t){t:for(var e,n=t.length,r=1,i=-1;r<n;++r)switch(t[r]){case".":i=e=r;break;case"0":0===i&&(i=r),e=r;break;default:if(!+t[r])break t;i>0&&(i=0)}return i>0?t.slice(0,i)+t.slice(e+1):t}(t)),C&&0===+t&&"+"!==h&&(C=!1),f=(C?"("===h?h:c:"-"===h||"("===h?"":h)+f,A=("s"===y?ec[8+js/3]:"")+A+(C&&"("===h?")":""),F)for(i=-1,o=t.length;++i<o;)if(48>(s=t.charCodeAt(i))||s>57){A=(46===s?u+t.slice(i+1):t.slice(i))+A,t=t.slice(0,i);break}}m&&!p&&(t=r(t,1/0));var x=f.length+t.length+A.length,_=x<d?new Array(d-x+1).join(e):"";switch(m&&p&&(t=r(_+t,_.length?d-A.length:1/0),_=""),n){case"<":t=f+t+A+_;break;case"=":t=f+_+t+A;break;case"^":t=_.slice(0,x=_.length>>1)+f+t+A+_.slice(x);break;default:t=_+f+t+A}return a(t)}return D=void 0===D?6:/[gprs]/.test(y)?Math.max(1,Math.min(21,D)):Math.max(0,Math.min(20,D)),A.toString=function(){return t+""},A}return{format:h,formatPrefix:function(t,e){var n=h(((t=Vs(t)).type="f",t)),r=3*Math.max(-8,Math.min(8,Math.floor(Xs(e)/3))),i=Math.pow(10,-r),o=ec[8+r/3];return function(t){return n(i*t)+o}}}}({thousands:",",grouping:[3],currency:["$",""]}),Ks=Gs.format,Qs=Gs.formatPrefix,Array.prototype.slice,oc.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e)}}};const ac=Math.PI,sc=2*ac,cc=1e-6,lc=sc-cc;function hc(t){this._+=t[0];for(let e=1,n=t.length;e<n;++e)this._+=arguments[e]+t[e]}class fc{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=null==t?hc:function(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return hc;const n=10**e;return function(t){this._+=t[0];for(let e=1,r=t.length;e<r;++e)this._+=Math.round(arguments[e]*n)/n+t[e]}}(t)}moveTo(t,e){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+e}`}closePath(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,e){this._append`L${this._x1=+t},${this._y1=+e}`}quadraticCurveTo(t,e,n,r){this._append`Q${+t},${+e},${this._x1=+n},${this._y1=+r}`}bezierCurveTo(t,e,n,r,i,o){this._append`C${+t},${+e},${+n},${+r},${this._x1=+i},${this._y1=+o}`}arcTo(t,e,n,r,i){if(t=+t,e=+e,n=+n,r=+r,(i=+i)<0)throw new Error(`negative radius: ${i}`);let o=this._x1,u=this._y1,a=n-t,s=r-e,c=o-t,l=u-e,h=c*c+l*l;if(null===this._x1)this._append`M${this._x1=t},${this._y1=e}`;else if(h>cc)if(Math.abs(l*a-s*c)>cc&&i){let f=n-o,p=r-u,d=a*a+s*s,m=f*f+p*p,D=Math.sqrt(d),g=Math.sqrt(h),y=i*Math.tan((ac-Math.acos((d+h-m)/(2*D*g)))/2),v=y/g,w=y/D;Math.abs(v-1)>cc&&this._append`L${t+v*c},${e+v*l}`,this._append`A${i},${i},0,0,${+(l*f>c*p)},${this._x1=t+w*a},${this._y1=e+w*s}`}else this._append`L${this._x1=t},${this._y1=e}`}arc(t,e,n,r,i,o){if(t=+t,e=+e,o=!!o,(n=+n)<0)throw new Error(`negative radius: ${n}`);let u=n*Math.cos(r),a=n*Math.sin(r),s=t+u,c=e+a,l=1^o,h=o?r-i:i-r;null===this._x1?this._append`M${s},${c}`:(Math.abs(this._x1-s)>cc||Math.abs(this._y1-c)>cc)&&this._append`L${s},${c}`,n&&(h<0&&(h=h%sc+sc),h>lc?this._append`A${n},${n},0,1,${l},${t-u},${e-a}A${n},${n},0,1,${l},${this._x1=s},${this._y1=c}`:h>cc&&this._append`A${n},${n},0,${+(h>=ac)},${l},${this._x1=t+n*Math.cos(i)},${this._y1=e+n*Math.sin(i)}`)}rect(t,e,n,r){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+e}h${n=+n}v${+r}h${-n}Z`}toString(){return this._}}function pc(t){return t[0]}function dc(t){return t[1]}function mc(t,e,n){this.k=t,this.x=e,this.y=n}mc.prototype={constructor:mc,scale:function(t){return 1===t?this:new mc(this.k*t,this.x,this.y)},translate:function(t,e){return 0===t&0===e?this:new mc(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}},new mc(1,0,0),mc.prototype;var Dc=n(707),gc=n.n(Dc);class yc{constructor(t,e,n,r,i){this.margin=r,this.width=e-this.margin.left-this.margin.right,this.height=n-this.margin.top-this.margin.bottom,this.units=1,this.fontsize=18,this.svgRoot=function(t){return"string"==typeof t?new du([[document.querySelector(t)]],[document.documentElement]):new du([[t]],pu)}("#"+t).append("svg").attr("style:cursor","pointer").attr("class","canvas").attr("width",this.width+this.margin.left+this.margin.right).attr("height",this.height+this.margin.top+this.margin.bottom),this.svg=this.svgRoot.append("g").attr("transform",`translate(${this.margin.left},${this.margin.top})`),this.outputname=i}setDomains(t,e,n,r,i=!1){this.svg.selectAll(".axis").remove();const o=[t/this.units,e/this.units],u=[n/this.units,r/this.units];this.xScale=rc().domain(o).range([0,this.width]);const a=i?[0,this.height]:[this.height,0];this.yScale=rc().domain(u).range(a);const s=t=>{t.selectAll("path, line").attr("stroke","white").attr("stroke-width",2).attr("shape-rendering","crispEdges"),t.selectAll("text").attr("fill","white").attr("font-size",`${this.fontsize}px`).attr("font-family","DejaVu Sans")};var c;s(this.svg.append("g").attr("transform",`translate(0,${this.height})`).call((c=this.xScale,ro(3,c)).tickSize(14).ticks(6)).attr("class","axis"));const l=this.svg.append("g").call(function(t){return ro(4,t)}(this.yScale).tickSize(14).ticks(6)).attr("class","axis");s(l);const h=this.svg.append("g").attr("transform","translate(0,0)").call(function(t){return ro(1,t)}(this.xScale).tickValues([])).attr("class","axis");s(h);const f=this.svg.append("g").attr("transform",`translate(${this.width},0)`).call(function(t){return ro(2,t)}(this.yScale).tickValues([])).attr("class","axis");s(f)}setScales(t,e){}clear(){this.xScale=null,this.yScale=null,this.svg.selectAll(".axis").remove()}startRecording(t,e,n){this.canvas=document.createElement("canvas"),this.canvas.width=2*this.width,this.canvas.height=2*this.height,this.ctx=this.canvas.getContext("2d"),this.ctx.font="italic 32px DejaVu Sans",this.ctx.strokeStyle="white",this.ctx.lineWidth=2;var r=[];const i=this.canvas.captureStream(t);this.mediaRecorder=new MediaRecorder(i,{mimeType:e}),this.mediaRecorder.onstart=()=>{console.log(`Recording for ${this.outputname} started and will stop after ${n/1e3} seconds.`)},this.mediaRecorder.ondataavailable=t=>{t.data.size>0&&r.push(t.data)},this.mediaRecorder.onstop=async()=>{const t=new Blob(r,{type:e});Ii(await gc()(t,n),this.outputname,"webm"),this.canvas=null,this.ctx=null},this.mediaRecorder.start()}updateRecording(){const t=(new XMLSerializer).serializeToString(this.svgRoot.node()),e=new Image,n=new Blob([t],{type:"image/svg+xml;charset=utf-8"}),r=URL.createObjectURL(n);e.onload=()=>{this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this.ctx.drawImage(e,0,0,this.canvas.width,this.canvas.height),this.ctx.strokeText("planetsinmotion.com",this.canvas.width-500,this.canvas.height-100),URL.revokeObjectURL(r)},e.src=r}stopRecording(){"recording"===this.mediaRecorder.state&&this.mediaRecorder.stop()}}class vc extends yc{constructor(t,e,n,r){super(t,e,n,r,"lightcurve"),this.xvalues=null,this.yvalues=null}drawLightcurved3(t,e){const n=this.xvalues.slice(0,e+1),r=this.yvalues.slice(0,e+1),i=n.map(((t,e)=>({x:t,y:r[e]}))),o=function(t,e){var n=ic(!0),r=null,i=uc,o=null,u=function(t){let e=3;return t.digits=function(n){if(!arguments.length)return e;if(null==n)e=null;else{const t=Math.floor(n);if(!(t>=0))throw new RangeError(`invalid digits: ${n}`);e=t}return t},()=>new fc(e)}(a);function a(a){var s,c,l,h=(a=function(t){return"object"==typeof t&&"length"in t?t:Array.from(t)}(a)).length,f=!1;for(null==r&&(o=i(l=u())),s=0;s<=h;++s)!(s<h&&n(c=a[s],s,a))===f&&((f=!f)?o.lineStart():o.lineEnd()),f&&o.point(+t(c,s,a),+e(c,s,a));if(l)return o=null,l+""||null}return t="function"==typeof t?t:void 0===t?pc:ic(t),e="function"==typeof e?e:void 0===e?dc:ic(e),a.x=function(e){return arguments.length?(t="function"==typeof e?e:ic(+e),a):t},a.y=function(t){return arguments.length?(e="function"==typeof t?t:ic(+t),a):e},a.defined=function(t){return arguments.length?(n="function"==typeof t?t:ic(!!t),a):n},a.curve=function(t){return arguments.length?(i=t,null!=r&&(o=i(r)),a):i},a.context=function(t){return arguments.length?(null==t?r=o=null:o=i(r=t),a):r},a}().x((t=>this.xScale(t.x))).y((t=>this.yScale(t.y))),u=this.svg.select(".line");u.empty()?this.svg.append("path").datum(i).attr("class","line").attr("d",o).attr("stroke",t).attr("stroke-width",2):u.datum(i).attr("d",o)}setScales(t,e){super.setDomains(Wi(t),Yi(t),.999*Wi(e),1.01*Yi(e)),this.xvalues=t,this.yvalues=e}clear(){super.clear(),this.svg.select(".line").remove(),this.xvalues=null,this.yvalues=null}}class wc extends Xi{constructor(t){super(t),this.donateBTCButton=new Ec("BTC","bc1q4xr9agec3ldug0xezqxy252y3kvqmcz62xr6pm"),this.donateETHButton=new Ec("ETH","0xaFE3DB130E71404Ed038397D25C26777d4EC8e4F")}}class Ec{constructor(t,e){this.walletAddress=e,this.copyButton=document.getElementById("copy"+t+"WalletAddressBtn").addEventListener("click",(()=>{navigator.clipboard.writeText(this.walletAddress);const t=document.getElementById("copy-feedback");t.classList.remove("hidden"),t.classList.add("visible"),setTimeout((()=>{t.classList.remove("visible"),t.classList.add("hidden")}),1e3)}))}}class Fc extends yc{constructor(t,e,n=600,r=600,i={top:20,bottom:40,left:60,right:40}){super(t,n,r,i,e),this.units=o}defineSunGradient(t){this.starColor=t,this.svg.selectAll(".star-gradient").remove(),this.svg.append("defs").attr("class","star-gradient").append("radialGradient").attr("id","sun-glow-gradient").attr("cx","50%").attr("cy","50%").attr("r","58%").selectAll("stop").data([{offset:"0%",color:t},{offset:"100%",color:"black"}]).enter().append("stop").attr("offset",(t=>t.offset)).attr("stop-color",(t=>t.color))}clear(){super.clear(),this.svg.selectAll("circle").remove(),this.svg.selectAll(".planet-defs").remove(),this.svg.selectAll("path").remove()}drawBodies(t,e,n=!1){this.svg.selectAll("circle").remove(),this.svg.selectAll(".planet-defs").remove(),t.forEach((t=>{const r=Math.abs(this.xScale(t._R)-this.xScale(0))/this.units;let i;const o=t.ry[e]/this.units;var u=1/this.units,a=1/this.units;if(n?(u*=-t.rx[e],a*=t.rz[e]):(u*=t.rz[e],a*=t.rx[e]),t instanceof ki)i="url(#sun-glow-gradient)";else{const e=Math.atan2(n?-u:u,o),r=Math.cos(e),s=Math.sin(e),c=a/Math.sqrt(o**2+u**2+a**2),l=50*(1-r),h=50*(1+s),f=50*(1+r),p=50*(1-s),d=`planet-gradient-${t.planetName.replace(/\s+/g,"")}-${n?"faceon":"edegeon"}`,m=this.svg.append("defs").attr("class","planet-defs").append("linearGradient").attr("id",d).attr("x1",`${l}%`).attr("y1",`${h}%`).attr("x2",`${f}%`).attr("y2",`${p}%`);m.append("stop").attr("offset","0%").attr("stop-color",t.color),m.append("stop").attr("offset",(1-c)/2*100+"%").attr("stop-color",Si(t.color,85)),i=`url(#${d})`}const s=this.xScale(o),c=this.yScale(u);this.svg.append("circle").attr("pointer-events","none").attr("cx",s).attr("cy",c).attr("r",r).style("fill",i)}))}}class Ac{constructor(t,e){this._star=t,this.numSamples=e}set star(t){this._star=t,this.drawPoints(this.numSamples)}set numSamples(t){self.theta=Array.from({length:t},(()=>2*Math.random()*Math.PI)),this._numSamples=t,this.drawPoints(t)}get star(){return this._star}get numSamples(){return this._numSamples}drawPoints(t){console.log("Drawing points for Monte Carlo simulation with numSamples:",t);const e=Array.from({length:t},(()=>Math.sqrt(Math.random())*this.star._R));this.ypoints=e.map(((t,e)=>t*Math.cos(self.theta[e]))),this.zpoints=e.map(((t,e)=>t*Math.sin(self.theta[e])))}filterByEclipses(t){const e=new Set,n=new Set;for(let r=0;r<t[0].rx.length;r++)t.forEach((t=>{this.star.getProjectedDistance(t,r)-t._R<=this.star._R&&t.rx[r]>this.star.rx[r]&&(n.add(r),e.add(t))}));return[e,n]}getEclipsedFraction(t){const[e,n]=this.filterByEclipses(t);let r=new Float64Array(this.star.rz.length).fill(1);return n.forEach((n=>{let i=0;for(let r=0;r<this.numSamples;r++)for(let o=0;o<e.size;o++){const e=t[o];if(e.rx[n]>this.star.rx[n]&&(this.ypoints[r]-e.ry[n])**2+(this.zpoints[r]-e.rz[n])**2<e._R**2){i+=1;break}}r[n]=1-i/this.numSamples})),r}getEclipsingAreasMonteCarloFast_unused(t,e=1e4){const n=this.rx.length;let r=new Float64Array(n).fill(1);const[i,o]=this.filterByEclipsesSet(t),u=Array.from({length:e},(()=>Math.sqrt(Math.random())*this._R)),a=Array.from({length:e},(()=>2*Math.random()*Math.PI)),s=u.map(((t,e)=>t*Math.cos(a[e]))),c=u.map(((t,e)=>t*Math.sin(a[e])));return o.forEach((t=>{let n=Array.from({length:e},((t,e)=>e));i.forEach((e=>{n=n.filter((n=>(s[n]-e.ry[t])**2+(c[n]-e.rz[t])**2>=e._R**2))}));const o=e-n.length;r[t]=1-o/e})),r}}let Cc,xc,_c,bc,Bc,Mc,Nc,Sc,Ic,Tc,kc,Pc,Rc,zc,Oc,Uc,Lc={},$c=0,jc=!1;const qc=()=>{const t=xc.star,e=Cc.planets,n=_c.datapoints,r=[t,...e],i=r.slice().sort(((t,e)=>t.rz[$c]-e.rz[$c]));kc.drawBodies(i,$c,!0);const o=r.slice().sort(((t,e)=>t.rx[$c]-e.rx[$c]));Pc.drawBodies(o,$c),Tc.drawLightcurved3(t.color,$c),jc&&([Pc,kc,Tc].forEach((t=>{t.updateRecording()})),zc==n+1&&(console.log("Finishing recording"),jc=!1,setTimeout((()=>{[Pc,kc,Tc].forEach((t=>{console.log("Stopping recording"),t.stopRecording()})),document.getElementById("recording-dialog").close(),document.body.style.cursor="default"}),50),console.log("Recording complete."),console.log("All simulations saved.")),zc++),$c=($c+1)%n};function Vc(){Cc.setStar(xc.star),Uc.star=xc.star,Jc()}function Hc(){Pc.defineSunGradient(xc.star.color),kc.defineSunGradient(xc.star.color),el(0)}function Zc(){0!=Cc.planets.length&&(Xc(),bc.setDuration(_c.datapoints*bc.ms))}function Xc(){0!=Cc.planets.length&&(console.log("Updating times"),_c.calculateTimes(Cc.maxP),Jc())}function Yc(){if(1==Cc.planets.length){const t=new qi(xc.star,Cc.planets[0]);Ic=t.visibleFraction,_c.mcPointsInput.disabled=!0}else{console.log("Showing modal");const t=document.getElementById("recording-dialog");t.showModal(),Ic=Uc.getEclipsedFraction(Cc.planets),_c.mcPointsInput.disabled=!1,t.close()}console.log("Transit depth: ",Math.min(...Ic).toFixed(3))}function Wc(){Uc.numSamples=_c.mcPoints,Yc(),el(0)}function Jc(){console.log("Updating simulation"),xc.setTimes(_c.times),Cc.setTimes(_c.times),Yc();const t=Math.abs(1.02*Cc.maxDistance);kc.setDomains(-t,t,-t,t,!0),Pc.setDomains(-t,t,-t,t,!1),el(0)}function Gc(){Cc.planets.length>0?(Rc.disabled=!1,Rc.style.cursor="pointer",bc.saveAnimationButton.disabled=!1,bc.saveAnimationButton.style.cursor="pointer",Xc()):0==Cc.planets.length&&(Rc.disabled=!0,Rc.style.cursor="auto",bc.saveAnimationButton.disabled=!0,bc.saveAnimationButton.style.cursor="auto",clearInterval(Sc),Sc=null,console.log("No planets to animate, clearing canvas"),Tc.clear(),kc.clear(),Pc.clear())}function Kc(){Sc?tl():Qc()}function Qc(){console.log("Restarting animation"),Sc||el($c)}function tl(){console.log("Pausing animation"),Sc&&(clearInterval(Sc),Sc=null)}function el(t=0){$c=t,console.log("Restarting simu"),Sc&&(clearInterval(Sc),Sc=null),0==$c&&Tc.clear(),Cc.planets.length>0&&(Tc.setScales(_c.timesDays,Ic),Sc=window.setInterval(qc,bc.ms))}Tc||(Tc=new vc("d3-lightcurve-container",1320,500,{top:10,bottom:40,left:80,right:80})),kc||(kc=new Fc("faceoncanvas","faceon")),Pc||(Pc=new Fc("edgeoncanvas","edgeon")),xc||(xc=new Pi(Vc,Hc)),Pc.defineSunGradient(xc.star.color),kc.defineSunGradient(xc.star.color),Cc||(Cc=new Vi(Gc,tl,Qc,xc.star)),_c||(_c=new Hi(Cc.maxP,Zc,Xc,Wc),_c.mcPointsInput.disabled=!0),Rc=document.getElementById("export-lightcurve"),bc||(bc=new Zi((t=>{bc.setDuration(_c.datapoints*t),el($c)}))),Mc||(Mc=new Xi("about")),Bc||(Bc=new Xi("manual")),Nc||(Nc=new wc("donate")),xc.setTimes(_c.times),Cc.setTimes(_c.times),bc.setDuration(_c.datapoints*bc.ms),Oc=document.getElementById("main-canvas-container"),Oc.addEventListener("click",Kc),document.addEventListener("keydown",(t=>{"Space"===t.code?(t.preventDefault(),Kc()):"NumpadAdd"!=t.code||t.ctrlKey||(console.log("Show planet form"),Cc.showPlanetForm())})),Rc.addEventListener("click",(()=>{_c.exportLightcurve(_c.timesDays,Ic)})),Rc.disabled=!0,bc.saveAnimationButton.addEventListener("click",(()=>{!function(t="video/webm"){document.body.style.cursor="wait",document.getElementById("recording-dialog").showModal();const e=bc.animationDurationms;[Pc,kc,Tc].forEach((n=>{n.startRecording(bc.ms,t,e)})),jc=!0,zc=0,el(0)}()})),async function(t="en"){const e=await fetch(`./locales/${t}.json`);Lc=await e.json(),_c.setLanguage(Lc),bc.setLanguage(Lc),Cc.setLanguage(Lc),Mc.setLanguage(Lc),Bc.setLanguage(Lc),Nc.setLanguage(Lc)}(),Uc=new Ac(xc.star,_c.mcPoints)})()})();